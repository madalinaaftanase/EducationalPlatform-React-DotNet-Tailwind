/*! For license information please see main.618597db.js.LICENSE.txt */
!function(){var t={4569:function(t,e,n){t.exports=n(8036)},3381:function(t,e,n){"use strict";var o=n(3589),i=n(7297),r=n(9301),s=n(9774),a=n(1804),l=n(9145),c=n(5411),u=n(6789),p=n(4531),h=n(6569),d=n(6261);t.exports=function(t){return new Promise((function(e,n){var g,_=t.data,f=t.headers,v=t.responseType;function m(){t.cancelToken&&t.cancelToken.unsubscribe(g),t.signal&&t.signal.removeEventListener("abort",g)}o.isFormData(_)&&o.isStandardBrowserEnv()&&delete f["Content-Type"];var T=new XMLHttpRequest;if(t.auth){var b=t.auth.username||"",E=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";f.Authorization="Basic "+btoa(b+":"+E)}var y=a(t.baseURL,t.url);function S(){if(T){var o="getAllResponseHeaders"in T?l(T.getAllResponseHeaders()):null,r={data:v&&"text"!==v&&"json"!==v?T.response:T.responseText,status:T.status,statusText:T.statusText,headers:o,config:t,request:T};i((function(t){e(t),m()}),(function(t){n(t),m()}),r),T=null}}if(T.open(t.method.toUpperCase(),s(y,t.params,t.paramsSerializer),!0),T.timeout=t.timeout,"onloadend"in T?T.onloadend=S:T.onreadystatechange=function(){T&&4===T.readyState&&(0!==T.status||T.responseURL&&0===T.responseURL.indexOf("file:"))&&setTimeout(S)},T.onabort=function(){T&&(n(new p("Request aborted",p.ECONNABORTED,t,T)),T=null)},T.onerror=function(){n(new p("Network Error",p.ERR_NETWORK,t,T,T)),T=null},T.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",o=t.transitional||u;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new p(e,o.clarifyTimeoutError?p.ETIMEDOUT:p.ECONNABORTED,t,T)),T=null},o.isStandardBrowserEnv()){var C=(t.withCredentials||c(y))&&t.xsrfCookieName?r.read(t.xsrfCookieName):void 0;C&&(f[t.xsrfHeaderName]=C)}"setRequestHeader"in T&&o.forEach(f,(function(t,e){"undefined"===typeof _&&"content-type"===e.toLowerCase()?delete f[e]:T.setRequestHeader(e,t)})),o.isUndefined(t.withCredentials)||(T.withCredentials=!!t.withCredentials),v&&"json"!==v&&(T.responseType=t.responseType),"function"===typeof t.onDownloadProgress&&T.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&T.upload&&T.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(g=function(t){T&&(n(!t||t&&t.type?new h:t),T.abort(),T=null)},t.cancelToken&&t.cancelToken.subscribe(g),t.signal&&(t.signal.aborted?g():t.signal.addEventListener("abort",g))),_||(_=null);var k=d(y);k&&-1===["http","https","file"].indexOf(k)?n(new p("Unsupported protocol "+k+":",p.ERR_BAD_REQUEST,t)):T.send(_)}))}},8036:function(t,e,n){"use strict";var o=n(3589),i=n(4049),r=n(3773),s=n(777);var a=function t(e){var n=new r(e),a=i(r.prototype.request,n);return o.extend(a,r.prototype,n),o.extend(a,n),a.create=function(n){return t(s(e,n))},a}(n(1709));a.Axios=r,a.CanceledError=n(6569),a.CancelToken=n(6857),a.isCancel=n(5517),a.VERSION=n(7600).version,a.toFormData=n(1397),a.AxiosError=n(4531),a.Cancel=a.CanceledError,a.all=function(t){return Promise.all(t)},a.spread=n(8089),a.isAxiosError=n(9580),t.exports=a,t.exports.default=a},6857:function(t,e,n){"use strict";var o=n(6569);function i(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;this.promise.then((function(t){if(n._listeners){var e,o=n._listeners.length;for(e=0;e<o;e++)n._listeners[e](t);n._listeners=null}})),this.promise.then=function(t){var e,o=new Promise((function(t){n.subscribe(t),e=t})).then(t);return o.cancel=function(){n.unsubscribe(e)},o},t((function(t){n.reason||(n.reason=new o(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},i.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},6569:function(t,e,n){"use strict";var o=n(4531);function i(t){o.call(this,null==t?"canceled":t,o.ERR_CANCELED),this.name="CanceledError"}n(3589).inherits(i,o,{__CANCEL__:!0}),t.exports=i},5517:function(t){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},3773:function(t,e,n){"use strict";var o=n(3589),i=n(9774),r=n(7470),s=n(2733),a=n(777),l=n(1804),c=n(7835),u=c.validators;function p(t){this.defaults=t,this.interceptors={request:new r,response:new r}}p.prototype.request=function(t,e){"string"===typeof t?(e=e||{}).url=t:e=t||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=e.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var o=[],i=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(i=i&&t.synchronous,o.unshift(t.fulfilled,t.rejected))}));var r,l=[];if(this.interceptors.response.forEach((function(t){l.push(t.fulfilled,t.rejected)})),!i){var p=[s,void 0];for(Array.prototype.unshift.apply(p,o),p=p.concat(l),r=Promise.resolve(e);p.length;)r=r.then(p.shift(),p.shift());return r}for(var h=e;o.length;){var d=o.shift(),g=o.shift();try{h=d(h)}catch(_){g(_);break}}try{r=s(h)}catch(_){return Promise.reject(_)}for(;l.length;)r=r.then(l.shift(),l.shift());return r},p.prototype.getUri=function(t){t=a(this.defaults,t);var e=l(t.baseURL,t.url);return i(e,t.params,t.paramsSerializer)},o.forEach(["delete","get","head","options"],(function(t){p.prototype[t]=function(e,n){return this.request(a(n||{},{method:t,url:e,data:(n||{}).data}))}})),o.forEach(["post","put","patch"],(function(t){function e(e){return function(n,o,i){return this.request(a(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}p.prototype[t]=e(),p.prototype[t+"Form"]=e(!0)})),t.exports=p},4531:function(t,e,n){"use strict";var o=n(3589);function i(t,e,n,o,i){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),o&&(this.request=o),i&&(this.response=i)}o.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var r=i.prototype,s={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(t){s[t]={value:t}})),Object.defineProperties(i,s),Object.defineProperty(r,"isAxiosError",{value:!0}),i.from=function(t,e,n,s,a,l){var c=Object.create(r);return o.toFlatObject(t,c,(function(t){return t!==Error.prototype})),i.call(c,t.message,e,n,s,a),c.name=t.name,l&&Object.assign(c,l),c},t.exports=i},7470:function(t,e,n){"use strict";var o=n(3589);function i(){this.handlers=[]}i.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){o.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},1804:function(t,e,n){"use strict";var o=n(4044),i=n(9549);t.exports=function(t,e){return t&&!o(e)?i(t,e):e}},2733:function(t,e,n){"use strict";var o=n(3589),i=n(2693),r=n(5517),s=n(1709),a=n(6569);function l(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new a}t.exports=function(t){return l(t),t.headers=t.headers||{},t.data=i.call(t,t.data,t.headers,t.transformRequest),t.headers=o.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),o.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return l(t),e.data=i.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return r(e)||(l(t),e&&e.response&&(e.response.data=i.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},777:function(t,e,n){"use strict";var o=n(3589);t.exports=function(t,e){e=e||{};var n={};function i(t,e){return o.isPlainObject(t)&&o.isPlainObject(e)?o.merge(t,e):o.isPlainObject(e)?o.merge({},e):o.isArray(e)?e.slice():e}function r(n){return o.isUndefined(e[n])?o.isUndefined(t[n])?void 0:i(void 0,t[n]):i(t[n],e[n])}function s(t){if(!o.isUndefined(e[t]))return i(void 0,e[t])}function a(n){return o.isUndefined(e[n])?o.isUndefined(t[n])?void 0:i(void 0,t[n]):i(void 0,e[n])}function l(n){return n in e?i(t[n],e[n]):n in t?i(void 0,t[n]):void 0}var c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return o.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=c[t]||r,i=e(t);o.isUndefined(i)&&e!==l||(n[t]=i)})),n}},7297:function(t,e,n){"use strict";var o=n(4531);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(new o("Request failed with status code "+n.status,[o.ERR_BAD_REQUEST,o.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}},2693:function(t,e,n){"use strict";var o=n(3589),i=n(1709);t.exports=function(t,e,n){var r=this||i;return o.forEach(n,(function(n){t=n.call(r,t,e)})),t}},1709:function(t,e,n){"use strict";var o=n(3589),i=n(4341),r=n(4531),s=n(6789),a=n(1397),l={"Content-Type":"application/x-www-form-urlencoded"};function c(t,e){!o.isUndefined(t)&&o.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var u={transitional:s,adapter:function(){var t;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(t=n(3381)),t}(),transformRequest:[function(t,e){if(i(e,"Accept"),i(e,"Content-Type"),o.isFormData(t)||o.isArrayBuffer(t)||o.isBuffer(t)||o.isStream(t)||o.isFile(t)||o.isBlob(t))return t;if(o.isArrayBufferView(t))return t.buffer;if(o.isURLSearchParams(t))return c(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var n,r=o.isObject(t),s=e&&e["Content-Type"];if((n=o.isFileList(t))||r&&"multipart/form-data"===s){var l=this.env&&this.env.FormData;return a(n?{"files[]":t}:t,l&&new l)}return r||"application/json"===s?(c(e,"application/json"),function(t,e,n){if(o.isString(t))try{return(e||JSON.parse)(t),o.trim(t)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||u.transitional,n=e&&e.silentJSONParsing,i=e&&e.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||i&&o.isString(t)&&t.length)try{return JSON.parse(t)}catch(a){if(s){if("SyntaxError"===a.name)throw r.from(a,r.ERR_BAD_RESPONSE,this,null,this.response);throw a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(3035)},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),o.forEach(["post","put","patch"],(function(t){u.headers[t]=o.merge(l)})),t.exports=u},6789:function(t){"use strict";t.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7600:function(t){t.exports={version:"0.27.2"}},4049:function(t){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return t.apply(e,n)}}},9774:function(t,e,n){"use strict";var o=n(3589);function i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(o.isURLSearchParams(e))r=e.toString();else{var s=[];o.forEach(e,(function(t,e){null!==t&&"undefined"!==typeof t&&(o.isArray(t)?e+="[]":t=[t],o.forEach(t,(function(t){o.isDate(t)?t=t.toISOString():o.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))})))})),r=s.join("&")}if(r){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t}},9549:function(t){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},9301:function(t,e,n){"use strict";var o=n(3589);t.exports=o.isStandardBrowserEnv()?{write:function(t,e,n,i,r,s){var a=[];a.push(t+"="+encodeURIComponent(e)),o.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),o.isString(i)&&a.push("path="+i),o.isString(r)&&a.push("domain="+r),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:function(t){"use strict";t.exports=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}},9580:function(t,e,n){"use strict";var o=n(3589);t.exports=function(t){return o.isObject(t)&&!0===t.isAxiosError}},5411:function(t,e,n){"use strict";var o=n(3589);t.exports=o.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var o=t;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=o.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},4341:function(t,e,n){"use strict";var o=n(3589);t.exports=function(t,e){o.forEach(t,(function(n,o){o!==e&&o.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[o])}))}},3035:function(t){t.exports=null},9145:function(t,e,n){"use strict";var o=n(3589),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,r,s={};return t?(o.forEach(t.split("\n"),(function(t){if(r=t.indexOf(":"),e=o.trim(t.substr(0,r)).toLowerCase(),n=o.trim(t.substr(r+1)),e){if(s[e]&&i.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+", "+n:n}})),s):s}},6261:function(t){"use strict";t.exports=function(t){var e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}},8089:function(t){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},1397:function(t,e,n){"use strict";var o=n(3589);t.exports=function(t,e){e=e||new FormData;var n=[];function i(t){return null===t?"":o.isDate(t)?t.toISOString():o.isArrayBuffer(t)||o.isTypedArray(t)?"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}return function t(r,s){if(o.isPlainObject(r)||o.isArray(r)){if(-1!==n.indexOf(r))throw Error("Circular reference detected in "+s);n.push(r),o.forEach(r,(function(n,r){if(!o.isUndefined(n)){var a,l=s?s+"."+r:r;if(n&&!s&&"object"===typeof n)if(o.endsWith(r,"{}"))n=JSON.stringify(n);else if(o.endsWith(r,"[]")&&(a=o.toArray(n)))return void a.forEach((function(t){!o.isUndefined(t)&&e.append(l,i(t))}));t(n,l)}})),n.pop()}else e.append(s,i(r))}(t),e}},7835:function(t,e,n){"use strict";var o=n(7600).version,i=n(4531),r={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){r[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));var s={};r.transitional=function(t,e,n){function r(t,e){return"[Axios v"+o+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,o,a){if(!1===t)throw new i(r(o," has been removed"+(e?" in "+e:"")),i.ERR_DEPRECATED);return e&&!s[o]&&(s[o]=!0,console.warn(r(o," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,o,a)}},t.exports={assertOptions:function(t,e,n){if("object"!==typeof t)throw new i("options must be an object",i.ERR_BAD_OPTION_VALUE);for(var o=Object.keys(t),r=o.length;r-- >0;){var s=o[r],a=e[s];if(a){var l=t[s],c=void 0===l||a(l,s,t);if(!0!==c)throw new i("option "+s+" must be "+c,i.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new i("Unknown option "+s,i.ERR_BAD_OPTION)}},validators:r}},3589:function(t,e,n){"use strict";var o,i=n(4049),r=Object.prototype.toString,s=(o=Object.create(null),function(t){var e=r.call(t);return o[e]||(o[e]=e.slice(8,-1).toLowerCase())});function a(t){return t=t.toLowerCase(),function(e){return s(e)===t}}function l(t){return Array.isArray(t)}function c(t){return"undefined"===typeof t}var u=a("ArrayBuffer");function p(t){return null!==t&&"object"===typeof t}function h(t){if("object"!==s(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}var d=a("Date"),g=a("File"),_=a("Blob"),f=a("FileList");function v(t){return"[object Function]"===r.call(t)}var m=a("URLSearchParams");function T(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),l(t))for(var n=0,o=t.length;n<o;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}var b,E=(b="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(t){return b&&t instanceof b});t.exports={isArray:l,isArrayBuffer:u,isBuffer:function(t){return null!==t&&!c(t)&&null!==t.constructor&&!c(t.constructor)&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){var e="[object FormData]";return t&&("function"===typeof FormData&&t instanceof FormData||r.call(t)===e||v(t.toString)&&t.toString()===e)},isArrayBufferView:function(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&u(t.buffer)},isString:function(t){return"string"===typeof t},isNumber:function(t){return"number"===typeof t},isObject:p,isPlainObject:h,isUndefined:c,isDate:d,isFile:g,isBlob:_,isFunction:v,isStream:function(t){return p(t)&&v(t.pipe)},isURLSearchParams:m,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:T,merge:function t(){var e={};function n(n,o){h(e[o])&&h(n)?e[o]=t(e[o],n):h(n)?e[o]=t({},n):l(n)?e[o]=n.slice():e[o]=n}for(var o=0,i=arguments.length;o<i;o++)T(arguments[o],n);return e},extend:function(t,e,n){return T(e,(function(e,o){t[o]=n&&"function"===typeof e?i(e,n):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t},inherits:function(t,e,n,o){t.prototype=Object.create(e.prototype,o),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)},toFlatObject:function(t,e,n){var o,i,r,s={};e=e||{};do{for(i=(o=Object.getOwnPropertyNames(t)).length;i-- >0;)s[r=o[i]]||(e[r]=t[r],s[r]=!0);t=Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:s,kindOfTest:a,endsWith:function(t,e,n){t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;var o=t.indexOf(e,n);return-1!==o&&o===n},toArray:function(t){if(!t)return null;var e=t.length;if(c(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n},isTypedArray:E,isFileList:f}},478:function(t,e,n){var o,i,r;i=[n(2363)],void 0===(r="function"===typeof(o=function(t){"use strict";return t})?o.apply(e,i):o)||(t.exports=r)},2363:function(t,e,n){var o,i,r;i=[],void 0===(r="function"===typeof(o=function(){"use strict";var t={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return t.CONNECTING_SNAP_RADIUS=t.SNAP_RADIUS,t.CURRENT_CONNECTION_PREFERENCE=8,t.BUMP_DELAY=250,t.BUMP_RANDOMNESS=10,t.COLLAPSE_CHARS=30,t.LONGPRESS=750,t.SOUND_LIMIT=100,t.DRAG_STACK=!0,t.HSV_SATURATION=.45,t.HSV_VALUE=.65,t.SPRITE={width:96,height:124,url:"sprites.png"},t.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},t.DRAG_NONE=0,t.DRAG_STICKY=1,t.DRAG_BEGIN=1,t.DRAG_FREE=2,t.OPPOSITE_TYPE=[],t.OPPOSITE_TYPE[t.connectionTypes.INPUT_VALUE]=t.connectionTypes.OUTPUT_VALUE,t.OPPOSITE_TYPE[t.connectionTypes.OUTPUT_VALUE]=t.connectionTypes.INPUT_VALUE,t.OPPOSITE_TYPE[t.connectionTypes.NEXT_STATEMENT]=t.connectionTypes.PREVIOUS_STATEMENT,t.OPPOSITE_TYPE[t.connectionTypes.PREVIOUS_STATEMENT]=t.connectionTypes.NEXT_STATEMENT,t.DELETE_AREA_NONE=null,t.DELETE_AREA_TRASH=1,t.DELETE_AREA_TOOLBOX=2,t.VARIABLE_CATEGORY_NAME="VARIABLE",t.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",t.PROCEDURE_CATEGORY_NAME="PROCEDURE",t.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",t.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",t.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",t.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",t.utils={},t.utils.global=function(){return"object"===typeof self?self:"object"===typeof window?window:"object"===typeof n.g?n.g:this}(),t.Msg={},t.utils.global.Blockly||(t.utils.global.Blockly={}),t.utils.global.Blockly.Msg||(t.utils.global.Blockly.Msg=t.Msg),t.utils.colour={},t.utils.colour.parse=function(e){e=String(e).toLowerCase().trim();var n=t.utils.colour.names[e];if(n)return n;if(n="#"==(n="0x"==e.substring(0,2)?"#"+e.substring(2):e)[0]?n:"#"+n,/^#[0-9a-f]{6}$/.test(n))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var o=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return o&&(e=Number(o[1]),n=Number(o[2]),o=Number(o[3]),0<=e&&256>e&&0<=n&&256>n&&0<=o&&256>o)?t.utils.colour.rgbToHex(e,n,o):null},t.utils.colour.rgbToHex=function(t,e,n){return e=t<<16|e<<8|n,16>t?"#"+(16777216|e).toString(16).substr(1):"#"+e.toString(16)},t.utils.colour.hexToRgb=function(e){return(e=t.utils.colour.parse(e))?[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]:[0,0,0]},t.utils.colour.hsvToHex=function(e,n,o){var i=0,r=0,s=0;if(0==n)s=r=i=o;else{var a=Math.floor(e/60),l=e/60-a;e=o*(1-n);var c=o*(1-n*l);switch(n=o*(1-n*(1-l)),a){case 1:i=c,r=o,s=e;break;case 2:i=e,r=o,s=n;break;case 3:i=e,r=c,s=o;break;case 4:i=n,r=e,s=o;break;case 5:i=o,r=e,s=c;break;case 6:case 0:i=o,r=n,s=e}}return t.utils.colour.rgbToHex(Math.floor(i),Math.floor(r),Math.floor(s))},t.utils.colour.blend=function(e,n,o){return(e=t.utils.colour.parse(e))&&(n=t.utils.colour.parse(n))?(e=t.utils.colour.hexToRgb(e),n=t.utils.colour.hexToRgb(n),t.utils.colour.rgbToHex(Math.round(n[0]+o*(e[0]-n[0])),Math.round(n[1]+o*(e[1]-n[1])),Math.round(n[2]+o*(e[2]-n[2])))):null},t.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},t.utils.Coordinate=function(t,e){this.x=t,this.y=e},t.utils.Coordinate.equals=function(t,e){return t==e||!(!t||!e)&&t.x==e.x&&t.y==e.y},t.utils.Coordinate.distance=function(t,e){var n=t.x-e.x;return t=t.y-e.y,Math.sqrt(n*n+t*t)},t.utils.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.utils.Coordinate.difference=function(e,n){return new t.utils.Coordinate(e.x-n.x,e.y-n.y)},t.utils.Coordinate.sum=function(e,n){return new t.utils.Coordinate(e.x+n.x,e.y+n.y)},t.utils.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},t.utils.Coordinate.prototype.translate=function(t,e){return this.x+=t,this.y+=e,this},t.utils.Rect=function(t,e,n,o){this.top=t,this.bottom=e,this.left=n,this.right=o},t.utils.Rect.prototype.contains=function(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},t.utils.Rect.prototype.intersects=function(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)},t.utils.string={},t.utils.string.startsWith=function(t,e){return 0==t.lastIndexOf(e,0)},t.utils.string.shortestStringLength=function(t){return t.length?t.reduce((function(t,e){return t.length<e.length?t:e})).length:0},t.utils.string.commonWordPrefix=function(e,n){if(!e.length)return 0;if(1==e.length)return e[0].length;var o=0;n=n||t.utils.string.shortestStringLength(e);for(var i=0;i<n;i++){for(var r=e[0][i],s=1;s<e.length;s++)if(r!=e[s][i])return o;" "==r&&(o=i+1)}for(s=1;s<e.length;s++)if((r=e[s][i])&&" "!=r)return o;return n},t.utils.string.commonWordSuffix=function(e,n){if(!e.length)return 0;if(1==e.length)return e[0].length;var o=0;n=n||t.utils.string.shortestStringLength(e);for(var i=0;i<n;i++){for(var r=e[0].substr(-i-1,1),s=1;s<e.length;s++)if(r!=e[s].substr(-i-1,1))return o;" "==r&&(o=i+1)}for(s=1;s<e.length;s++)if((r=e[s].charAt(e[s].length-i-1))&&" "!=r)return o;return n},t.utils.string.wrap=function(e,n){e=e.split("\n");for(var o=0;o<e.length;o++)e[o]=t.utils.string.wrapLine_(e[o],n);return e.join("\n")},t.utils.string.wrapLine_=function(e,n){if(e.length<=n)return e;for(var o=e.trim().split(/\s+/),i=0;i<o.length;i++)o[i].length>n&&(n=o[i].length);i=-1/0;var r=1;do{var s=i,a=e;e=[];var l=o.length/r,c=1;for(i=0;i<o.length-1;i++)c<(i+1.5)/l?(c++,e[i]=!0):e[i]=!1;e=t.utils.string.wrapMutate_(o,e,n),i=t.utils.string.wrapScore_(o,e,n),e=t.utils.string.wrapToText_(o,e),r++}while(i>s);return a},t.utils.string.wrapScore_=function(t,e,n){for(var o=[0],i=[],r=0;r<t.length;r++)o[o.length-1]+=t[r].length,!0===e[r]?(o.push(0),i.push(t[r].charAt(t[r].length-1))):!1===e[r]&&o[o.length-1]++;for(t=Math.max.apply(Math,o),r=e=0;r<o.length;r++)e-=2*Math.pow(Math.abs(n-o[r]),1.5),e-=Math.pow(t-o[r],1.5),-1!=".?!".indexOf(i[r])?e+=n/3:-1!=",;)]}".indexOf(i[r])&&(e+=n/4);return 1<o.length&&o[o.length-1]<=o[o.length-2]&&(e+=.5),e},t.utils.string.wrapMutate_=function(e,n,o){for(var i,r=t.utils.string.wrapScore_(e,n,o),s=0;s<n.length-1;s++)if(n[s]!=n[s+1]){var a=[].concat(n);a[s]=!a[s],a[s+1]=!a[s+1];var l=t.utils.string.wrapScore_(e,a,o);l>r&&(r=l,i=a)}return i?t.utils.string.wrapMutate_(e,i,o):n},t.utils.string.wrapToText_=function(t,e){for(var n=[],o=0;o<t.length;o++)n.push(t[o]),void 0!==e[o]&&n.push(e[o]?"\n":" ");return n.join("")},t.utils.Size=function(t,e){this.width=t,this.height=e},t.utils.Size.equals=function(t,e){return t==e||!(!t||!e)&&t.width==e.width&&t.height==e.height},t.utils.style={},t.utils.style.getSize=function(e){if("none"!=t.utils.style.getStyle_(e,"display"))return t.utils.style.getSizeWithDisplay_(e);var n=e.style,o=n.display,i=n.visibility,r=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var s=e.offsetWidth;return e=e.offsetHeight,n.display=o,n.position=r,n.visibility=i,new t.utils.Size(s,e)},t.utils.style.getSizeWithDisplay_=function(e){return new t.utils.Size(e.offsetWidth,e.offsetHeight)},t.utils.style.getStyle_=function(e,n){return t.utils.style.getComputedStyle(e,n)||t.utils.style.getCascadedStyle(e,n)||e.style&&e.style[n]},t.utils.style.getComputedStyle=function(t,e){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[e]||t.getPropertyValue(e))||""},t.utils.style.getCascadedStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:null},t.utils.style.getPageOffset=function(e){var n=new t.utils.Coordinate(0,0);e=e.getBoundingClientRect();var o=document.documentElement;return o=new t.utils.Coordinate(window.pageXOffset||o.scrollLeft,window.pageYOffset||o.scrollTop),n.x=e.left+o.x,n.y=e.top+o.y,n},t.utils.style.getViewportPageOffset=function(){var e=document.body,n=document.documentElement;return new t.utils.Coordinate(e.scrollLeft||n.scrollLeft,e.scrollTop||n.scrollTop)},t.utils.style.setElementShown=function(t,e){t.style.display=e?"":"none"},t.utils.style.isRightToLeft=function(e){return"rtl"==t.utils.style.getStyle_(e,"direction")},t.utils.style.getBorderBox=function(e){var n=t.utils.style.getComputedStyle(e,"borderLeftWidth"),o=t.utils.style.getComputedStyle(e,"borderRightWidth"),i=t.utils.style.getComputedStyle(e,"borderTopWidth");return e=t.utils.style.getComputedStyle(e,"borderBottomWidth"),{top:parseFloat(i),right:parseFloat(o),bottom:parseFloat(e),left:parseFloat(n)}},t.utils.style.scrollIntoContainerView=function(e,n,o){e=t.utils.style.getContainerOffsetToScrollInto(e,n,o),n.scrollLeft=e.x,n.scrollTop=e.y},t.utils.style.getContainerOffsetToScrollInto=function(e,n,o){var i=t.utils.style.getPageOffset(e),r=t.utils.style.getPageOffset(n),s=t.utils.style.getBorderBox(n),a=i.x-r.x-s.left;return i=i.y-r.y-s.top,r=t.utils.style.getSizeWithDisplay_(e),e=n.clientWidth-r.width,r=n.clientHeight-r.height,s=n.scrollLeft,n=n.scrollTop,o?(s+=a-e/2,n+=i-r/2):(s+=Math.min(a,Math.max(a-e,0)),n+=Math.min(i,Math.max(i-r,0))),new t.utils.Coordinate(s,n)},t.utils.userAgent={},function(e){function n(t){return-1!=o.indexOf(t.toUpperCase())}t.utils.userAgent.raw=e;var o=t.utils.userAgent.raw.toUpperCase();t.utils.userAgent.IE=n("Trident")||n("MSIE"),t.utils.userAgent.EDGE=n("Edge"),t.utils.userAgent.JAVA_FX=n("JavaFX"),t.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!t.utils.userAgent.EDGE,t.utils.userAgent.WEBKIT=n("WebKit")&&!t.utils.userAgent.EDGE,t.utils.userAgent.GECKO=n("Gecko")&&!t.utils.userAgent.WEBKIT&&!t.utils.userAgent.IE&&!t.utils.userAgent.EDGE,t.utils.userAgent.ANDROID=n("Android"),t.utils.userAgent.IPAD=n("iPad"),t.utils.userAgent.IPOD=n("iPod"),t.utils.userAgent.IPHONE=n("iPhone")&&!t.utils.userAgent.IPAD&&!t.utils.userAgent.IPOD,t.utils.userAgent.MAC=n("Macintosh"),t.utils.userAgent.TABLET=t.utils.userAgent.IPAD||t.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),t.utils.userAgent.MOBILE=!t.utils.userAgent.TABLET&&(t.utils.userAgent.IPOD||t.utils.userAgent.IPHONE||t.utils.userAgent.ANDROID||n("IEMobile"))}(t.utils.global.navigator&&t.utils.global.navigator.userAgent||""),t.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},t.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable||t.target.dataset&&"true"==t.target.dataset.isTextInput},t.utils.getRelativeXY=function(e){var n=new t.utils.Coordinate(0,0),o=e.getAttribute("x");return o&&(n.x=parseInt(o,10)),(o=e.getAttribute("y"))&&(n.y=parseInt(o,10)),(o=(o=e.getAttribute("transform"))&&o.match(t.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(o[1]),o[3]&&(n.y+=Number(o[3]))),(e=e.getAttribute("style"))&&-1<e.indexOf("translate")&&(e=e.match(t.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(e[1]),e[3]&&(n.y+=Number(e[3]))),n},t.utils.getInjectionDivXY_=function(e){for(var n=0,o=0;e;){var i=t.utils.getRelativeXY(e);if(n+=i.x,o+=i.y,-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;e=e.parentNode}return new t.utils.Coordinate(n,o)},t.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,t.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,t.utils.isRightButton=function(e){return!(!e.ctrlKey||!t.utils.userAgent.MAC)||2==e.button},t.utils.mouseToSvg=function(t,e,n){var o=e.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,n||(n=e.getScreenCTM().inverse()),o.matrixTransform(n)},t.utils.getScrollDeltaPixels=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*t.LINE_MODE_MULTIPLIER,y:e.deltaY*t.LINE_MODE_MULTIPLIER};case 2:return{x:e.deltaX*t.PAGE_MODE_MULTIPLIER,y:e.deltaY*t.PAGE_MODE_MULTIPLIER}}},t.utils.tokenizeInterpolation=function(e){return t.utils.tokenizeInterpolation_(e,!0)},t.utils.replaceMessageReferences=function(e){return"string"!=typeof e?e:(e=t.utils.tokenizeInterpolation_(e,!1)).length?String(e[0]):""},t.utils.checkMessageReferences=function(e){for(var n=!0,o=t.Msg,i=e.match(/%{BKY_[A-Z]\w*}/gi),r=0;r<i.length;r++)void 0==o[i[r].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+i[r]+" in "+e),n=!1);return n},t.utils.tokenizeInterpolation_=function(e,n){var o=[],i=e.split("");i.push("");var r=0;e=[];for(var s=null,a=0;a<i.length;a++){var l=i[a];0==r?"%"==l?((l=e.join(""))&&o.push(l),e.length=0,r=1):e.push(l):1==r?"%"==l?(e.push(l),r=0):n&&"0"<=l&&"9">=l?(r=2,s=l,(l=e.join(""))&&o.push(l),e.length=0):"{"==l?r=3:(e.push("%",l),r=0):2==r?"0"<=l&&"9">=l?s+=l:(o.push(parseInt(s,10)),a--,r=0):3==r&&(""==l?(e.splice(0,0,"%{"),a--,r=0):"}"!=l?e.push(l):(r=e.join(""),/[A-Z]\w*/i.test(r)?(l=r.toUpperCase(),(l=t.utils.string.startsWith(l,"BKY_")?l.substring(4):null)&&l in t.Msg?"string"==typeof(r=t.Msg[l])?Array.prototype.push.apply(o,t.utils.tokenizeInterpolation_(r,n)):n?o.push(String(r)):o.push(r):o.push("%{"+r+"}")):o.push("%{"+r+"}"),r=e.length=0))}for((l=e.join(""))&&o.push(l),n=[],a=e.length=0;a<o.length;++a)"string"==typeof o[a]?e.push(o[a]):((l=e.join(""))&&n.push(l),e.length=0,n.push(o[a]));return(l=e.join(""))&&n.push(l),e.length=0,n},t.utils.genUid=function(){for(var e=t.utils.genUid.soup_.length,n=[],o=0;20>o;o++)n[o]=t.utils.genUid.soup_.charAt(Math.random()*e);return n.join("")},t.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t.utils.is3dSupported=function(){if(void 0!==t.utils.is3dSupported.cached_)return t.utils.is3dSupported.cached_;if(!t.utils.global.getComputedStyle)return!1;var e=document.createElement("p"),n="none",o={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var i in document.body.insertBefore(e,null),o)if(void 0!==e.style[i]){if(e.style[i]="translate3d(1px,1px,1px)",!(n=t.utils.global.getComputedStyle(e)))return document.body.removeChild(e),!1;n=n.getPropertyValue(o[i])}return document.body.removeChild(e),t.utils.is3dSupported.cached_="none"!==n,t.utils.is3dSupported.cached_},t.utils.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)t();else var e=setInterval((function(){"complete"==document.readyState&&(clearInterval(e),t())}),10)},t.utils.getViewportBBox=function(){var e=t.utils.style.getViewportPageOffset();return new t.utils.Rect(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},t.utils.arrayRemove=function(t,e){return-1!=(e=t.indexOf(e))&&(t.splice(e,1),!0)},t.utils.getDocumentScroll=function(){var e=document.documentElement,n=window;return t.utils.userAgent.IE&&n.pageYOffset!=e.scrollTop?new t.utils.Coordinate(e.scrollLeft,e.scrollTop):new t.utils.Coordinate(n.pageXOffset||e.scrollLeft,n.pageYOffset||e.scrollTop)},t.utils.getBlockTypeCounts=function(t,e){var n=Object.create(null),o=t.getDescendants(!0);for(e&&(t=t.getNextBlock())&&(t=o.indexOf(t),o.splice(t,o.length-t)),t=0;e=o[t];t++)n[e.type]?n[e.type]++:n[e.type]=1;return n},t.utils.screenToWsCoordinates=function(e,n){var o=n.x;n=n.y;var i=e.getInjectionDiv().getBoundingClientRect();return o=new t.utils.Coordinate(o-i.left,n-i.top),n=e.getOriginOffsetInPixels(),t.utils.Coordinate.difference(o,n).scale(1/e.scale)},t.utils.parseBlockColour=function(e){var n="string"==typeof e?t.utils.replaceMessageReferences(e):e,o=Number(n);if(!isNaN(o)&&0<=o&&360>=o)return{hue:o,hex:t.utils.colour.hsvToHex(o,t.HSV_SATURATION,255*t.HSV_VALUE)};if(o=t.utils.colour.parse(n))return{hue:null,hex:o};throw o='Invalid colour: "'+n+'"',e!=n&&(o+=' (from "'+e+'")'),Error(o)},t.Touch={},t.Touch.TOUCH_ENABLED="ontouchstart"in t.utils.global||!!(t.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!t.utils.global.navigator||!t.utils.global.navigator.maxTouchPoints&&!t.utils.global.navigator.msMaxTouchPoints),t.Touch.touchIdentifier_=null,t.Touch.TOUCH_MAP={},t.utils.global.PointerEvent?t.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:t.Touch.TOUCH_ENABLED&&(t.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),t.longPid_=0,t.longStart=function(e,n){t.longStop_(),e.changedTouches&&1!=e.changedTouches.length||(t.longPid_=setTimeout((function(){e.changedTouches&&(e.button=2,e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),n&&n.handleRightClick(e)}),t.LONGPRESS))},t.longStop_=function(){t.longPid_&&(clearTimeout(t.longPid_),t.longPid_=0)},t.Touch.clearTouchIdentifier=function(){t.Touch.touchIdentifier_=null},t.Touch.shouldHandleEvent=function(e){return!t.Touch.isMouseOrTouchEvent(e)||t.Touch.checkTouchIdentifier(e)},t.Touch.getTouchIdentifierFromEvent=function(t){return void 0!=t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&void 0!==t.changedTouches[0].identifier&&null!==t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},t.Touch.checkTouchIdentifier=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);return void 0!==t.Touch.touchIdentifier_&&null!==t.Touch.touchIdentifier_?t.Touch.touchIdentifier_==n:("mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type)&&(t.Touch.touchIdentifier_=n,!0)},t.Touch.setClientFromTouch=function(e){if(t.utils.string.startsWith(e.type,"touch")){var n=e.changedTouches[0];e.clientX=n.clientX,e.clientY=n.clientY}},t.Touch.isMouseOrTouchEvent=function(e){return t.utils.string.startsWith(e.type,"touch")||t.utils.string.startsWith(e.type,"mouse")||t.utils.string.startsWith(e.type,"pointer")},t.Touch.isTouchEvent=function(e){return t.utils.string.startsWith(e.type,"touch")||t.utils.string.startsWith(e.type,"pointer")},t.Touch.splitEventByTouches=function(t){var e=[];if(t.changedTouches)for(var n=0;n<t.changedTouches.length;n++)e[n]={type:t.type,changedTouches:[t.changedTouches[n]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else e.push(t);return e},t.browserEvents={},t.browserEvents.conditionalBind=function(e,n,o,i,r,s){var a=!1,l=function(e){var n=!r;e=t.Touch.splitEventByTouches(e);for(var s,l=0;s=e[l];l++)n&&!t.Touch.shouldHandleEvent(s)||(t.Touch.setClientFromTouch(s),o?i.call(o,s):i(s),a=!0)},c=[];if(t.utils.global.PointerEvent&&n in t.Touch.TOUCH_MAP)for(var u,p=0;u=t.Touch.TOUCH_MAP[n][p];p++)e.addEventListener(u,l,!1),c.push([e,u,l]);else if(e.addEventListener(n,l,!1),c.push([e,n,l]),n in t.Touch.TOUCH_MAP){var h=function(t){l(t),a&&!s&&t.preventDefault()};for(p=0;u=t.Touch.TOUCH_MAP[n][p];p++)e.addEventListener(u,h,!1),c.push([e,u,h])}return c},t.browserEvents.bind=function(e,n,o,i){var r=function(t){o?i.call(o,t):i(t)},s=[];if(t.utils.global.PointerEvent&&n in t.Touch.TOUCH_MAP)for(var a,l=0;a=t.Touch.TOUCH_MAP[n][l];l++)e.addEventListener(a,r,!1),s.push([e,a,r]);else if(e.addEventListener(n,r,!1),s.push([e,n,r]),n in t.Touch.TOUCH_MAP){var c=function(t){if(t.changedTouches&&1==t.changedTouches.length){var e=t.changedTouches[0];t.clientX=e.clientX,t.clientY=e.clientY}r(t),t.preventDefault()};for(l=0;a=t.Touch.TOUCH_MAP[n][l];l++)e.addEventListener(a,c,!1),s.push([e,a,c])}return s},t.browserEvents.unbind=function(t){for(;t.length;){var e=t.pop(),n=e[2];e[0].removeEventListener(e[1],n,!1)}return n},t.registry={},t.registry.typeMap_={},t.registry.DEFAULT="default",t.registry.Type=function(t){this.name_=t},t.registry.Type.prototype.toString=function(){return this.name_},t.registry.Type.CONNECTION_CHECKER=new t.registry.Type("connectionChecker"),t.registry.Type.CURSOR=new t.registry.Type("cursor"),t.registry.Type.EVENT=new t.registry.Type("event"),t.registry.Type.FIELD=new t.registry.Type("field"),t.registry.Type.RENDERER=new t.registry.Type("renderer"),t.registry.Type.TOOLBOX=new t.registry.Type("toolbox"),t.registry.Type.THEME=new t.registry.Type("theme"),t.registry.Type.TOOLBOX_ITEM=new t.registry.Type("toolboxItem"),t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new t.registry.Type("flyoutsVerticalToolbox"),t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new t.registry.Type("flyoutsHorizontalToolbox"),t.registry.Type.METRICS_MANAGER=new t.registry.Type("metricsManager"),t.registry.register=function(e,n,o,i){if(!(e instanceof t.registry.Type)&&"string"!=typeof e||""==String(e).trim())throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=String(e).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!o)throw Error("Can not register a null value");var r=t.registry.typeMap_[e];if(r||(r=t.registry.typeMap_[e]={}),t.registry.validate_(e,o),!i&&r[n])throw Error('Name "'+n+'" with type "'+e+'" already registered.');r[n]=o},t.registry.validate_=function(e,n){if(e===String(t.registry.Type.FIELD)&&"function"!=typeof n.fromJson)throw Error('Type "'+e+'" must have a fromJson function')},t.registry.unregister=function(e,n){e=String(e).toLowerCase(),n=n.toLowerCase();var o=t.registry.typeMap_[e];o&&o[n]?delete t.registry.typeMap_[e][n]:console.warn("Unable to unregister ["+n+"]["+e+"] from the registry.")},t.registry.getItem_=function(e,n,o){e=String(e).toLowerCase(),n=n.toLowerCase();var i=t.registry.typeMap_[e];if(!i||!i[n]){if(n="Unable to find ["+n+"]["+e+"] in the registry.",o)throw Error(n+" You must require or register a "+e+" plugin.");return console.warn(n),null}return i[n]},t.registry.hasItem=function(e,n){return e=String(e).toLowerCase(),n=n.toLowerCase(),!!(e=t.registry.typeMap_[e])&&!!e[n]},t.registry.getClass=function(e,n,o){return t.registry.getItem_(e,n,o)},t.registry.getObject=function(e,n,o){return t.registry.getItem_(e,n,o)},t.registry.getClassFromOptions=function(e,n,o){return"function"==typeof(n=n.plugins[e.toString()]||t.registry.DEFAULT)?n:t.registry.getClass(e,n,o)},t.Events={},t.Events.group_="",t.Events.recordUndo=!0,t.Events.disabled_=0,t.Events.CREATE="create",t.Events.BLOCK_CREATE=t.Events.CREATE,t.Events.DELETE="delete",t.Events.BLOCK_DELETE=t.Events.DELETE,t.Events.CHANGE="change",t.Events.BLOCK_CHANGE=t.Events.CHANGE,t.Events.MOVE="move",t.Events.BLOCK_MOVE=t.Events.MOVE,t.Events.VAR_CREATE="var_create",t.Events.VAR_DELETE="var_delete",t.Events.VAR_RENAME="var_rename",t.Events.UI="ui",t.Events.BLOCK_DRAG="drag",t.Events.SELECTED="selected",t.Events.CLICK="click",t.Events.MARKER_MOVE="marker_move",t.Events.BUBBLE_OPEN="bubble_open",t.Events.TRASHCAN_OPEN="trashcan_open",t.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",t.Events.THEME_CHANGE="theme_change",t.Events.VIEWPORT_CHANGE="viewport_change",t.Events.COMMENT_CREATE="comment_create",t.Events.COMMENT_DELETE="comment_delete",t.Events.COMMENT_CHANGE="comment_change",t.Events.COMMENT_MOVE="comment_move",t.Events.FINISHED_LOADING="finished_loading",t.Events.BUMP_EVENTS=[t.Events.BLOCK_CREATE,t.Events.BLOCK_MOVE,t.Events.COMMENT_CREATE,t.Events.COMMENT_MOVE],t.Events.FIRE_QUEUE_=[],t.Events.fire=function(e){t.Events.isEnabled()&&(t.Events.FIRE_QUEUE_.length||setTimeout(t.Events.fireNow_,0),t.Events.FIRE_QUEUE_.push(e))},t.Events.fireNow_=function(){for(var e,n=t.Events.filter(t.Events.FIRE_QUEUE_,!0),o=t.Events.FIRE_QUEUE_.length=0;e=n[o];o++)if(e.workspaceId){var i=t.Workspace.getById(e.workspaceId);i&&i.fireChangeListener(e)}},t.Events.filter=function(e,n){e=e.slice(),n||e.reverse();for(var o,i=[],r=Object.create(null),s=0;o=e[s];s++)if(!o.isNull()){var a=[o.isUiEvent?t.Events.UI:o.type,o.blockId,o.workspaceId].join(" "),l=r[a],c=l?l.event:null;l?o.type==t.Events.MOVE&&l.index==s-1?(c.newParentId=o.newParentId,c.newInputName=o.newInputName,c.newCoordinate=o.newCoordinate,l.index=s):o.type==t.Events.CHANGE&&o.element==c.element&&o.name==c.name?c.newValue=o.newValue:o.type==t.Events.CLICK&&c.type==t.Events.BUBBLE_OPEN||(r[a]={event:o,index:s},i.push(o)):(r[a]={event:o,index:s},i.push(o))}for(e=i.filter((function(t){return!t.isNull()})),n||e.reverse(),s=1;o=e[s];s++)o.type==t.Events.CHANGE&&"mutation"==o.element&&e.unshift(e.splice(s,1)[0]);return e},t.Events.clearPendingUndo=function(){for(var e,n=0;e=t.Events.FIRE_QUEUE_[n];n++)e.recordUndo=!1},t.Events.disable=function(){t.Events.disabled_++},t.Events.enable=function(){t.Events.disabled_--},t.Events.isEnabled=function(){return 0==t.Events.disabled_},t.Events.getGroup=function(){return t.Events.group_},t.Events.setGroup=function(e){t.Events.group_="boolean"==typeof e?e?t.utils.genUid():"":e},t.Events.getDescendantIds=function(t){var e=[];t=t.getDescendants(!1);for(var n,o=0;n=t[o];o++)e[o]=n.id;return e},t.Events.fromJson=function(e,n){var o=t.Events.get(e.type);if(!o)throw Error("Unknown event type.");return(o=new o).fromJson(e),o.workspaceId=n.id,o},t.Events.get=function(e){return t.registry.getClass(t.registry.Type.EVENT,e)},t.Events.disableOrphans=function(e){if((e.type==t.Events.MOVE||e.type==t.Events.CREATE)&&e.workspaceId){var n=t.Workspace.getById(e.workspaceId),o=n.getBlockById(e.blockId);if(o){e=t.Events.recordUndo;try{t.Events.recordUndo=!1;var i=o.getParent();if(i&&i.isEnabled()){var r,s=o.getDescendants(!1);for(n=0;r=s[n];n++)r.setEnabled(!0)}else if((o.outputConnection||o.previousConnection)&&!n.isDragging())do{o.setEnabled(!1),o=o.getNextBlock()}while(o)}finally{t.Events.recordUndo=e}}}},t.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=t.Events.getGroup(),this.recordUndo=t.Events.recordUndo},t.Events.Abstract.prototype.isUiEvent=!1,t.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},t.Events.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},t.Events.Abstract.prototype.isNull=function(){return!1},t.Events.Abstract.prototype.run=function(t){},t.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var e=t.Workspace.getById(this.workspaceId);if(!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e},t.utils.object={},t.utils.object.inherits=function(t,e){t.superClass_=e.prototype,t.prototype=Object.create(e.prototype),t.prototype.constructor=t},t.utils.object.mixin=function(t,e){for(var n in e)t[n]=e[n]},t.utils.object.deepMerge=function(e,n){for(var o in n)e[o]=null!=n[o]&&"object"===typeof n[o]?t.utils.object.deepMerge(e[o]||Object.create(null),n[o]):n[o];return e},t.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map((function(e){return t[e]}))},t.utils.xml={},t.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",t.utils.xml.document=function(){return document},t.utils.xml.createElement=function(e){return t.utils.xml.document().createElementNS(t.utils.xml.NAME_SPACE,e)},t.utils.xml.createTextNode=function(e){return t.utils.xml.document().createTextNode(e)},t.utils.xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},t.utils.xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},t.inputTypes={VALUE:t.connectionTypes.INPUT_VALUE,STATEMENT:t.connectionTypes.NEXT_STATEMENT,DUMMY:5},t.utils.Svg=function(t){this.tagName_=t},t.utils.Svg.prototype.toString=function(){return this.tagName_},t.utils.Svg.ANIMATE=new t.utils.Svg("animate"),t.utils.Svg.CIRCLE=new t.utils.Svg("circle"),t.utils.Svg.CLIPPATH=new t.utils.Svg("clipPath"),t.utils.Svg.DEFS=new t.utils.Svg("defs"),t.utils.Svg.FECOMPOSITE=new t.utils.Svg("feComposite"),t.utils.Svg.FECOMPONENTTRANSFER=new t.utils.Svg("feComponentTransfer"),t.utils.Svg.FEFLOOD=new t.utils.Svg("feFlood"),t.utils.Svg.FEFUNCA=new t.utils.Svg("feFuncA"),t.utils.Svg.FEGAUSSIANBLUR=new t.utils.Svg("feGaussianBlur"),t.utils.Svg.FEPOINTLIGHT=new t.utils.Svg("fePointLight"),t.utils.Svg.FESPECULARLIGHTING=new t.utils.Svg("feSpecularLighting"),t.utils.Svg.FILTER=new t.utils.Svg("filter"),t.utils.Svg.FOREIGNOBJECT=new t.utils.Svg("foreignObject"),t.utils.Svg.G=new t.utils.Svg("g"),t.utils.Svg.IMAGE=new t.utils.Svg("image"),t.utils.Svg.LINE=new t.utils.Svg("line"),t.utils.Svg.PATH=new t.utils.Svg("path"),t.utils.Svg.PATTERN=new t.utils.Svg("pattern"),t.utils.Svg.POLYGON=new t.utils.Svg("polygon"),t.utils.Svg.RECT=new t.utils.Svg("rect"),t.utils.Svg.SVG=new t.utils.Svg("svg"),t.utils.Svg.TEXT=new t.utils.Svg("text"),t.utils.Svg.TSPAN=new t.utils.Svg("tspan"),t.utils.dom={},t.utils.dom.SVG_NS="http://www.w3.org/2000/svg",t.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",t.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",t.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},t.utils.dom.cacheWidths_=null,t.utils.dom.cacheReference_=0,t.utils.dom.canvasContext_=null,t.utils.dom.createSvgElement=function(e,n,o){for(var i in e=document.createElementNS(t.utils.dom.SVG_NS,String(e)),n)e.setAttribute(i,n[i]);return document.body.runtimeStyle&&(e.runtimeStyle=e.currentStyle=e.style),o&&o.appendChild(e),e},t.utils.dom.addClass=function(t,e){var n=t.getAttribute("class")||"";return-1==(" "+n+" ").indexOf(" "+e+" ")&&(n&&(n+=" "),t.setAttribute("class",n+e),!0)},t.utils.dom.removeClasses=function(e,n){n=n.split(" ");for(var o=0;o<n.length;o++)t.utils.dom.removeClass(e,n[o])},t.utils.dom.removeClass=function(t,e){var n=t.getAttribute("class");if(-1==(" "+n+" ").indexOf(" "+e+" "))return!1;n=n.split(/\s+/);for(var o=0;o<n.length;o++)n[o]&&n[o]!=e||(n.splice(o,1),o--);return n.length?t.setAttribute("class",n.join(" ")):t.removeAttribute("class"),!0},t.utils.dom.hasClass=function(t,e){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+e+" ")},t.utils.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},t.utils.dom.insertAfter=function(t,e){var n=e.nextSibling;if(!(e=e.parentNode))throw Error("Reference node has no parent.");n?e.insertBefore(t,n):e.appendChild(t)},t.utils.dom.containsNode=function(e,n){return!!(e.compareDocumentPosition(n)&t.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},t.utils.dom.setCssTransform=function(t,e){t.style.transform=e,t.style["-webkit-transform"]=e},t.utils.dom.startTextWidthCache=function(){t.utils.dom.cacheReference_++,t.utils.dom.cacheWidths_||(t.utils.dom.cacheWidths_={})},t.utils.dom.stopTextWidthCache=function(){t.utils.dom.cacheReference_--,t.utils.dom.cacheReference_||(t.utils.dom.cacheWidths_=null)},t.utils.dom.getTextWidth=function(e){var n,o=e.textContent+"\n"+e.className.baseVal;if(t.utils.dom.cacheWidths_&&(n=t.utils.dom.cacheWidths_[o]))return n;try{n=t.utils.userAgent.IE||t.utils.userAgent.EDGE?e.getBBox().width:e.getComputedTextLength()}catch(i){return 8*e.textContent.length}return t.utils.dom.cacheWidths_&&(t.utils.dom.cacheWidths_[o]=n),n},t.utils.dom.getFastTextWidth=function(e,n,o,i){return t.utils.dom.getFastTextWidthWithSizeString(e,n+"pt",o,i)},t.utils.dom.getFastTextWidthWithSizeString=function(e,n,o,i){var r,s=e.textContent;return e=s+"\n"+e.className.baseVal,t.utils.dom.cacheWidths_&&(r=t.utils.dom.cacheWidths_[e])||(t.utils.dom.canvasContext_||((r=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(r),t.utils.dom.canvasContext_=r.getContext("2d")),t.utils.dom.canvasContext_.font=o+" "+n+" "+i,r=t.utils.dom.canvasContext_.measureText(s).width,t.utils.dom.cacheWidths_&&(t.utils.dom.cacheWidths_[e]=r)),r},t.utils.dom.measureFontMetrics=function(t,e,n,o){var i=document.createElement("span");i.style.font=n+" "+e+" "+o,i.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0px",(e=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),e.appendChild(i),e.appendChild(t),document.body.appendChild(e);try{n={},e.style.alignItems="baseline",n.baseline=t.offsetTop-i.offsetTop,e.style.alignItems="flex-end",n.height=t.offsetTop-i.offsetTop}finally{document.body.removeChild(e)}return n},t.Xml={},t.Xml.workspaceToDom=function(e,n){var o=t.utils.xml.createElement("xml"),i=t.Xml.variablesToDom(t.Variables.allUsedVarModels(e));i.hasChildNodes()&&o.appendChild(i);var r,s=e.getTopComments(!0);for(i=0;r=s[i];i++)o.appendChild(r.toXmlWithXY(n));for(e=e.getTopBlocks(!0),i=0;s=e[i];i++)o.appendChild(t.Xml.blockToDomWithXY(s,n));return o},t.Xml.variablesToDom=function(e){for(var n,o=t.utils.xml.createElement("variables"),i=0;n=e[i];i++){var r=t.utils.xml.createElement("variable");r.appendChild(t.utils.xml.createTextNode(n.name)),n.type&&r.setAttribute("type",n.type),r.id=n.getId(),o.appendChild(r)}return o},t.Xml.blockToDomWithXY=function(e,n){if(e.isInsertionMarker()&&!(e=e.getChildren(!1)[0]))return new DocumentFragment;var o;e.workspace.RTL&&(o=e.workspace.getWidth()),n=t.Xml.blockToDom(e,n);var i=e.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(e.workspace.RTL?o-i.x:i.x)),n.setAttribute("y",Math.round(i.y)),n},t.Xml.fieldToDom_=function(e){if(e.isSerializable()){var n=t.utils.xml.createElement("field");return n.setAttribute("name",e.name||""),e.toXml(n)}return null},t.Xml.allFieldsToDom_=function(e,n){for(var o,i=0;o=e.inputList[i];i++)for(var r,s=0;r=o.fieldRow[s];s++)(r=t.Xml.fieldToDom_(r))&&n.appendChild(r)},t.Xml.blockToDom=function(e,n){if(e.isInsertionMarker())return(e=e.getChildren(!1)[0])?t.Xml.blockToDom(e):new DocumentFragment;var o=t.utils.xml.createElement(e.isShadow()?"shadow":"block");if(o.setAttribute("type",e.type),n||o.setAttribute("id",e.id),e.mutationToDom){var i=e.mutationToDom();i&&(i.hasChildNodes()||i.hasAttributes())&&o.appendChild(i)}if(t.Xml.allFieldsToDom_(e,o),i=e.getCommentText()){var r=e.commentModel.size,s=e.commentModel.pinned,a=t.utils.xml.createElement("comment");a.appendChild(t.utils.xml.createTextNode(i)),a.setAttribute("pinned",s),a.setAttribute("h",r.height),a.setAttribute("w",r.width),o.appendChild(a)}for(e.data&&((i=t.utils.xml.createElement("data")).appendChild(t.utils.xml.createTextNode(e.data)),o.appendChild(i)),i=0;r=e.inputList[i];i++){var l;if(s=!0,r.type!=t.inputTypes.DUMMY){var c=r.connection.targetBlock();r.type==t.inputTypes.VALUE?l=t.utils.xml.createElement("value"):r.type==t.inputTypes.STATEMENT&&(l=t.utils.xml.createElement("statement")),!(a=r.connection.getShadowDom())||c&&c.isShadow()||l.appendChild(t.Xml.cloneShadow_(a,n)),c&&(a=t.Xml.blockToDom(c,n)).nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&(l.appendChild(a),s=!1),l.setAttribute("name",r.name),s||o.appendChild(l)}}return void 0!=e.inputsInline&&e.inputsInline!=e.inputsInlineDefault&&o.setAttribute("inline",e.inputsInline),e.isCollapsed()&&o.setAttribute("collapsed",!0),e.isEnabled()||o.setAttribute("disabled",!0),e.isDeletable()||e.isShadow()||o.setAttribute("deletable",!1),e.isMovable()||e.isShadow()||o.setAttribute("movable",!1),e.isEditable()||o.setAttribute("editable",!1),(i=e.getNextBlock())&&(a=t.Xml.blockToDom(i,n)).nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&((l=t.utils.xml.createElement("next")).appendChild(a),o.appendChild(l)),!(a=e.nextConnection&&e.nextConnection.getShadowDom())||i&&i.isShadow()||l.appendChild(t.Xml.cloneShadow_(a,n)),o},t.Xml.cloneShadow_=function(e,n){for(var o,i=e=e.cloneNode(!0);i;)if(n&&"shadow"==i.nodeName&&i.removeAttribute("id"),i.firstChild)i=i.firstChild;else{for(;i&&!i.nextSibling;)o=i,i=i.parentNode,o.nodeType==t.utils.dom.NodeType.TEXT_NODE&&""==o.data.trim()&&i.firstChild!=o&&t.utils.dom.removeNode(o);i&&(o=i,i=i.nextSibling,o.nodeType==t.utils.dom.NodeType.TEXT_NODE&&""==o.data.trim()&&t.utils.dom.removeNode(o))}return e},t.Xml.domToText=function(e){return t.utils.xml.domToText(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},t.Xml.domToPrettyText=function(e){e=t.Xml.domToText(e).split("<");for(var n="",o=1;o<e.length;o++){var i=e[o];"/"==i[0]&&(n=n.substring(2)),e[o]=n+"<"+i,"/"!=i[0]&&"/>"!=i.slice(-2)&&(n+="  ")}return(e=(e=e.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},t.Xml.textToDom=function(e){var n=t.utils.xml.textToDomDocument(e);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+e);return n.documentElement},t.Xml.clearWorkspaceAndLoadFromXml=function(e,n){return n.setResizesEnabled(!1),n.clear(),e=t.Xml.domToWorkspace(e,n),n.setResizesEnabled(!0),e},t.Xml.domToWorkspace=function(e,n){if(e instanceof t.Workspace){var o=e;e=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var i;n.RTL&&(i=n.getWidth()),o=[],t.utils.dom.startTextWidthCache();var r=t.Events.getGroup();r||t.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var s=!0;try{for(var a,l=0;a=e.childNodes[l];l++){var c=a.nodeName.toLowerCase(),u=a;if("block"==c||"shadow"==c&&!t.Events.recordUndo){var p=t.Xml.domToBlock(u,n);o.push(p.id);var h=u.hasAttribute("x")?parseInt(u.getAttribute("x"),10):10,d=u.hasAttribute("y")?parseInt(u.getAttribute("y"),10):10;isNaN(h)||isNaN(d)||p.moveBy(n.RTL?i-h:h,d),s=!1}else{if("shadow"==c)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==c)n.rendered?t.WorkspaceCommentSvg?t.WorkspaceCommentSvg.fromXml(u,n,i):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):t.WorkspaceComment?t.WorkspaceComment.fromXml(u,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==c){if(!s)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");t.Xml.domToVariables(u,n),s=!1}}}}finally{r||t.Events.setGroup(!1),t.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),t.Events.fire(new(t.Events.get(t.Events.FINISHED_LOADING))(n)),o},t.Xml.appendDomToWorkspace=function(e,n){var o;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(o=n.getBlocksBoundingBox()),e=t.Xml.domToWorkspace(e,n),o&&o.top!=o.bottom){var i=o.bottom,r=n.RTL?o.right:o.left,s=1/0,a=-1/0,l=1/0;for(o=0;o<e.length;o++){var c=n.getBlockById(e[o]).getRelativeToSurfaceXY();c.y<l&&(l=c.y),c.x<s&&(s=c.x),c.x>a&&(a=c.x)}for(i=i-l+10,r=n.RTL?r-a:r-s,o=0;o<e.length;o++)n.getBlockById(e[o]).moveBy(r,i)}return e},t.Xml.domToBlock=function(e,n){if(e instanceof t.Workspace){var o=e;e=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}t.Events.disable(),o=n.getAllVariables();try{var i=t.Xml.domToBlockHeadless_(e,n),r=i.getDescendants(!1);if(n.rendered){i.setConnectionTracking(!1);for(var s=r.length-1;0<=s;s--)r[s].initSvg();for(s=r.length-1;0<=s;s--)r[s].render(!1);setTimeout((function(){i.disposed||i.setConnectionTracking(!0)}),1),i.updateDisabled(),n.resizeContents()}else for(s=r.length-1;0<=s;s--)r[s].initModel()}finally{t.Events.enable()}if(t.Events.isEnabled()){for(e=t.Variables.getAddedVariables(n,o),s=0;s<e.length;s++)n=e[s],t.Events.fire(new(t.Events.get(t.Events.VAR_CREATE))(n));t.Events.fire(new(t.Events.get(t.Events.CREATE))(i))}return i},t.Xml.domToVariables=function(e,n){for(var o,i=0;o=e.childNodes[i];i++)if(o.nodeType==t.utils.dom.NodeType.ELEMENT_NODE){var r=o.getAttribute("type"),s=o.getAttribute("id");n.createVariable(o.textContent,r,s)}},t.Xml.mapSupportedXmlTags_=function(e){for(var n,o={mutation:[],comment:[],data:[],field:[],input:[],next:[]},i=0;n=e.childNodes[i];i++)if(n.nodeType!=t.utils.dom.NodeType.TEXT_NODE)switch(n.nodeName.toLowerCase()){case"mutation":o.mutation.push(n);break;case"comment":if(!t.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}o.comment.push(n);break;case"data":o.data.push(n);break;case"title":case"field":o.field.push(n);break;case"value":case"statement":o.input.push(n);break;case"next":o.next.push(n);break;default:console.warn("Ignoring unknown tag: "+n.nodeName)}return o},t.Xml.applyMutationTagNodes_=function(t,e){for(var n,o=!1,i=0;n=t[i];i++)e.domToMutation&&(e.domToMutation(n),e.initSvg&&(o=!0));return o},t.Xml.applyCommentTagNodes_=function(e,n){for(var o,i=0;o=e[i];i++){var r=o.textContent,s="true"==o.getAttribute("pinned"),a=parseInt(o.getAttribute("w"),10);o=parseInt(o.getAttribute("h"),10),n.setCommentText(r),n.commentModel.pinned=s,isNaN(a)||isNaN(o)||(n.commentModel.size=new t.utils.Size(a,o)),s&&n.getCommentIcon&&!n.isInFlyout&&setTimeout((function(){n.getCommentIcon().setVisible(!0)}),1)}},t.Xml.applyDataTagNodes_=function(t,e){for(var n,o=0;n=t[o];o++)e.data=n.textContent},t.Xml.applyFieldTagNodes_=function(e,n){for(var o,i=0;o=e[i];i++){var r=o.getAttribute("name");t.Xml.domToField_(n,r,o)}},t.Xml.findChildBlocks_=function(e){for(var n,o={childBlockElement:null,childShadowElement:null},i=0;n=e.childNodes[i];i++)n.nodeType==t.utils.dom.NodeType.ELEMENT_NODE&&("block"==n.nodeName.toLowerCase()?o.childBlockElement=n:"shadow"==n.nodeName.toLowerCase()&&(o.childShadowElement=n));return o},t.Xml.applyInputTagNodes_=function(e,n,o,i){for(var r,s=0;r=e[s];s++){var a=r.getAttribute("name"),l=o.getInput(a);if(!l){console.warn("Ignoring non-existent input "+a+" in block "+i);break}if((r=t.Xml.findChildBlocks_(r)).childBlockElement){if(!l.connection)throw TypeError("Input connection does not exist.");t.Xml.domToBlockHeadless_(r.childBlockElement,n,l.connection,!1)}r.childShadowElement&&l.connection.setShadowDom(r.childShadowElement)}},t.Xml.applyNextTagNodes_=function(e,n,o){for(var i,r=0;i=e[r];r++){if((i=t.Xml.findChildBlocks_(i)).childBlockElement){if(!o.nextConnection)throw TypeError("Next statement does not exist.");if(o.nextConnection.isConnected())throw TypeError("Next statement is already connected.");t.Xml.domToBlockHeadless_(i.childBlockElement,n,o.nextConnection,!0)}i.childShadowElement&&o.nextConnection&&o.nextConnection.setShadowDom(i.childShadowElement)}},t.Xml.domToBlockHeadless_=function(e,n,o,i){var r=e.getAttribute("type");if(!r)throw TypeError("Block type unspecified: "+e.outerHTML);var s=e.getAttribute("id");s=n.newBlock(r,s);var a=t.Xml.mapSupportedXmlTags_(e),l=t.Xml.applyMutationTagNodes_(a.mutation,s);if(t.Xml.applyCommentTagNodes_(a.comment,s),t.Xml.applyDataTagNodes_(a.data,s),o)if(i){if(!s.previousConnection)throw TypeError("Next block does not have previous statement.");o.connect(s.previousConnection)}else if(s.outputConnection)o.connect(s.outputConnection);else{if(!s.previousConnection)throw TypeError("Child block does not have output or previous statement.");o.connect(s.previousConnection)}if(t.Xml.applyFieldTagNodes_(a.field,s),t.Xml.applyInputTagNodes_(a.input,n,s,r),t.Xml.applyNextTagNodes_(a.next,n,s),l&&s.initSvg(),(n=e.getAttribute("inline"))&&s.setInputsInline("true"==n),(n=e.getAttribute("disabled"))&&s.setEnabled("true"!=n&&"disabled"!=n),(n=e.getAttribute("deletable"))&&s.setDeletable("true"==n),(n=e.getAttribute("movable"))&&s.setMovable("true"==n),(n=e.getAttribute("editable"))&&s.setEditable("true"==n),(n=e.getAttribute("collapsed"))&&s.setCollapsed("true"==n),"shadow"==e.nodeName.toLowerCase()){for(e=s.getChildren(!1),n=0;o=e[n];n++)if(!o.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(s.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");s.setShadow(!0)}return s},t.Xml.domToField_=function(t,e,n){var o=t.getField(e);o?o.fromXml(n):console.warn("Ignoring non-existent field "+e+" in block "+t.type)},t.Xml.deleteNext=function(t){for(var e,n=0;e=t.childNodes[n];n++)if("next"==e.nodeName.toLowerCase()){t.removeChild(e);break}},t.Events.BlockBase=function(e){t.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank="undefined"==typeof e)?"":e.id,this.workspaceId=this.isBlank?"":e.workspace.id},t.utils.object.inherits(t.Events.BlockBase,t.Events.Abstract),t.Events.BlockBase.prototype.toJson=function(){var e=t.Events.BlockBase.superClass_.toJson.call(this);return e.blockId=this.blockId,e},t.Events.BlockBase.prototype.fromJson=function(e){t.Events.BlockBase.superClass_.fromJson.call(this,e),this.blockId=e.blockId},t.Events.Change=function(e,n,o,i,r){t.Events.Change.superClass_.constructor.call(this,e),e&&(this.element="undefined"==typeof n?"":n,this.name="undefined"==typeof o?"":o,this.oldValue="undefined"==typeof i?"":i,this.newValue="undefined"==typeof r?"":r)},t.utils.object.inherits(t.Events.Change,t.Events.BlockBase),t.Events.BlockChange=t.Events.Change,t.Events.Change.prototype.type=t.Events.CHANGE,t.Events.Change.prototype.toJson=function(){var e=t.Events.Change.superClass_.toJson.call(this);return e.element=this.element,this.name&&(e.name=this.name),e.oldValue=this.oldValue,e.newValue=this.newValue,e},t.Events.Change.prototype.fromJson=function(e){t.Events.Change.superClass_.fromJson.call(this,e),this.element=e.element,this.name=e.name,this.oldValue=e.oldValue,this.newValue=e.newValue},t.Events.Change.prototype.isNull=function(){return this.oldValue==this.newValue},t.Events.Change.prototype.run=function(e){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(e||null);break;case"collapsed":n.setCollapsed(!!e);break;case"disabled":n.setEnabled(!e);break;case"inline":n.setInputsInline(!!e);break;case"mutation":var o="";if(n.mutationToDom&&(o=(o=n.mutationToDom())&&t.Xml.domToText(o)),n.domToMutation){var i=t.Xml.textToDom(e||"<mutation/>");n.domToMutation(i)}t.Events.fire(new(t.Events.get(t.Events.CHANGE))(n,"mutation",null,o,e));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},t.Events.Create=function(e){t.Events.Create.superClass_.constructor.call(this,e),e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=e.workspace.rendered?t.Xml.blockToDomWithXY(e):t.Xml.blockToDom(e),this.ids=t.Events.getDescendantIds(e))},t.utils.object.inherits(t.Events.Create,t.Events.BlockBase),t.Events.BlockCreate=t.Events.Create,t.Events.Create.prototype.type=t.Events.CREATE,t.Events.Create.prototype.toJson=function(){var e=t.Events.Create.superClass_.toJson.call(this);return e.xml=t.Xml.domToText(this.xml),e.ids=this.ids,this.recordUndo||(e.recordUndo=this.recordUndo),e},t.Events.Create.prototype.fromJson=function(e){t.Events.Create.superClass_.fromJson.call(this,e),this.xml=t.Xml.textToDom(e.xml),this.ids=e.ids,void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},t.Events.Create.prototype.run=function(e){var n=this.getEventWorkspace_();if(e)(e=t.utils.xml.createElement("xml")).appendChild(this.xml),t.Xml.domToWorkspace(e,n);else{e=0;for(var o;o=this.ids[e];e++){var i=n.getBlockById(o);i?i.dispose(!1):o==this.blockId&&console.warn("Can't uncreate non-existent block: "+o)}}},t.Events.Delete=function(e){if(t.Events.Delete.superClass_.constructor.call(this,e),e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=e.workspace.rendered?t.Xml.blockToDomWithXY(e):t.Xml.blockToDom(e),this.ids=t.Events.getDescendantIds(e)}},t.utils.object.inherits(t.Events.Delete,t.Events.BlockBase),t.Events.BlockDelete=t.Events.Delete,t.Events.Delete.prototype.type=t.Events.DELETE,t.Events.Delete.prototype.toJson=function(){var e=t.Events.Delete.superClass_.toJson.call(this);return e.oldXml=t.Xml.domToText(this.oldXml),e.ids=this.ids,this.recordUndo||(e.recordUndo=this.recordUndo),e},t.Events.Delete.prototype.fromJson=function(e){t.Events.Delete.superClass_.fromJson.call(this,e),this.oldXml=t.Xml.textToDom(e.oldXml),this.ids=e.ids,void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},t.Events.Delete.prototype.run=function(e){var n=this.getEventWorkspace_();if(e){e=0;for(var o;o=this.ids[e];e++){var i=n.getBlockById(o);i?i.dispose(!1):o==this.blockId&&console.warn("Can't delete non-existent block: "+o)}}else(e=t.utils.xml.createElement("xml")).appendChild(this.oldXml),t.Xml.domToWorkspace(e,n)},t.Events.Move=function(e){t.Events.Move.superClass_.constructor.call(this,e),e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation_(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)},t.utils.object.inherits(t.Events.Move,t.Events.BlockBase),t.Events.BlockMove=t.Events.Move,t.Events.Move.prototype.type=t.Events.MOVE,t.Events.Move.prototype.toJson=function(){var e=t.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(e.newParentId=this.newParentId),this.newInputName&&(e.newInputName=this.newInputName),this.newCoordinate&&(e.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(e.recordUndo=this.recordUndo),e},t.Events.Move.prototype.fromJson=function(e){if(t.Events.Move.superClass_.fromJson.call(this,e),this.newParentId=e.newParentId,this.newInputName=e.newInputName,e.newCoordinate){var n=e.newCoordinate.split(",");this.newCoordinate=new t.utils.Coordinate(Number(n[0]),Number(n[1]))}void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},t.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},t.Events.Move.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),e={},n=t.getParent();return n?(e.parentId=n.id,(t=n.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e},t.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&t.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},t.Events.Move.prototype.run=function(e){var n=this.getEventWorkspace_(),o=n.getBlockById(this.blockId);if(o){var i=e?this.newParentId:this.oldParentId,r=e?this.newInputName:this.oldInputName,s=e?this.newCoordinate:this.oldCoordinate;if(e=null,i&&!(e=n.getBlockById(i)))return void console.warn("Can't connect to non-existent block: "+i);if(o.getParent()&&o.unplug(),s)r=o.getRelativeToSurfaceXY(),o.moveBy(s.x-r.x,s.y-r.y);else{if(n=(o=o.outputConnection||o.previousConnection).type,r){if(e=e.getInput(r))var a=e.connection}else n==t.connectionTypes.PREVIOUS_STATEMENT&&(a=e.nextConnection);a?o.connect(a):console.warn("Can't connect to non-existent input: "+r)}}else console.warn("Can't move non-existent block: "+this.blockId)},t.registry.register(t.registry.Type.EVENT,t.Events.CREATE,t.Events.Create),t.registry.register(t.registry.Type.EVENT,t.Events.DELETE,t.Events.Delete),t.registry.register(t.registry.Type.EVENT,t.Events.CHANGE,t.Events.Change),t.registry.register(t.registry.Type.EVENT,t.Events.MOVE,t.Events.Move),t.Events.FinishedLoading=function(e){this.isBlank="undefined"==typeof e,this.workspaceId=e?e.id:"",this.group=t.Events.getGroup(),this.recordUndo=!1},t.utils.object.inherits(t.Events.FinishedLoading,t.Events.Abstract),t.Events.FinishedLoading.prototype.type=t.Events.FINISHED_LOADING,t.Events.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},t.Events.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},t.registry.register(t.registry.Type.EVENT,t.Events.FINISHED_LOADING,t.Events.FinishedLoading),t.Events.UiBase=function(e){t.Events.UiBase.superClass_.constructor.call(this),this.isBlank="undefined"==typeof e,this.workspaceId=e||"",this.recordUndo=!1},t.utils.object.inherits(t.Events.UiBase,t.Events.Abstract),t.Events.UiBase.prototype.isUiEvent=!0,t.Events.Ui=function(e,n,o,i){t.Events.Ui.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.element="undefined"==typeof n?"":n,this.oldValue="undefined"==typeof o?"":o,this.newValue="undefined"==typeof i?"":i},t.utils.object.inherits(t.Events.Ui,t.Events.UiBase),t.Events.Ui.prototype.type=t.Events.UI,t.Events.Ui.prototype.toJson=function(){var e=t.Events.Ui.superClass_.toJson.call(this);return e.element=this.element,void 0!==this.newValue&&(e.newValue=this.newValue),this.blockId&&(e.blockId=this.blockId),e},t.Events.Ui.prototype.fromJson=function(e){t.Events.Ui.superClass_.fromJson.call(this,e),this.element=e.element,this.newValue=e.newValue,this.blockId=e.blockId},t.registry.register(t.registry.Type.EVENT,t.Events.UI,t.Events.Ui),t.Events.VarBase=function(e){t.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank="undefined"==typeof e)?"":e.getId(),this.workspaceId=this.isBlank?"":e.workspace.id},t.utils.object.inherits(t.Events.VarBase,t.Events.Abstract),t.Events.VarBase.prototype.toJson=function(){var e=t.Events.VarBase.superClass_.toJson.call(this);return e.varId=this.varId,e},t.Events.VarBase.prototype.fromJson=function(e){t.Events.VarBase.superClass_.toJson.call(this),this.varId=e.varId},t.Events.VarCreate=function(e){t.Events.VarCreate.superClass_.constructor.call(this,e),e&&(this.varType=e.type,this.varName=e.name)},t.utils.object.inherits(t.Events.VarCreate,t.Events.VarBase),t.Events.VarCreate.prototype.type=t.Events.VAR_CREATE,t.Events.VarCreate.prototype.toJson=function(){var e=t.Events.VarCreate.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},t.Events.VarCreate.prototype.fromJson=function(e){t.Events.VarCreate.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},t.Events.VarCreate.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.createVariable(this.varName,this.varType,this.varId):e.deleteVariableById(this.varId)},t.Events.VarDelete=function(e){t.Events.VarDelete.superClass_.constructor.call(this,e),e&&(this.varType=e.type,this.varName=e.name)},t.utils.object.inherits(t.Events.VarDelete,t.Events.VarBase),t.Events.VarDelete.prototype.type=t.Events.VAR_DELETE,t.Events.VarDelete.prototype.toJson=function(){var e=t.Events.VarDelete.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},t.Events.VarDelete.prototype.fromJson=function(e){t.Events.VarDelete.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},t.Events.VarDelete.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.deleteVariableById(this.varId):e.createVariable(this.varName,this.varType,this.varId)},t.Events.VarRename=function(e,n){t.Events.VarRename.superClass_.constructor.call(this,e),e&&(this.oldName=e.name,this.newName="undefined"==typeof n?"":n)},t.utils.object.inherits(t.Events.VarRename,t.Events.VarBase),t.Events.VarRename.prototype.type=t.Events.VAR_RENAME,t.Events.VarRename.prototype.toJson=function(){var e=t.Events.VarRename.superClass_.toJson.call(this);return e.oldName=this.oldName,e.newName=this.newName,e},t.Events.VarRename.prototype.fromJson=function(e){t.Events.VarRename.superClass_.fromJson.call(this,e),this.oldName=e.oldName,this.newName=e.newName},t.Events.VarRename.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.renameVariableById(this.varId,this.newName):e.renameVariableById(this.varId,this.oldName)},t.registry.register(t.registry.Type.EVENT,t.Events.VAR_CREATE,t.Events.VarCreate),t.registry.register(t.registry.Type.EVENT,t.Events.VAR_DELETE,t.Events.VarDelete),t.registry.register(t.registry.Type.EVENT,t.Events.VAR_RENAME,t.Events.VarRename),t.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},t.BlockDragSurfaceSvg.prototype.SVG_=null,t.BlockDragSurfaceSvg.prototype.dragGroup_=null,t.BlockDragSurfaceSvg.prototype.container_=null,t.BlockDragSurfaceSvg.prototype.scale_=1,t.BlockDragSurfaceSvg.prototype.surfaceXY_=null,t.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},this.SVG_))},t.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(e){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(e),this.SVG_.style.display="block",this.surfaceXY_=new t.utils.Coordinate(0,0)},t.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,e,n){this.scale_=n,t=t.toFixed(0),e=e.toFixed(0),this.dragGroup_.setAttribute("transform","translate("+t+","+e+") scale("+n+")")},t.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var e=this.surfaceXY_.x,n=this.surfaceXY_.y;e=e.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",t.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+n+"px, 0px)")},t.BlockDragSurfaceSvg.prototype.translateSurface=function(e,n){this.surfaceXY_=new t.utils.Coordinate(e*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},t.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var e=t.utils.getRelativeXY(this.SVG_);return new t.utils.Coordinate(e.x/this.scale_,e.y/this.scale_)},t.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},t.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},t.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},t.Css={},t.Css.injected_=!1,t.Css.register=function(e){if(t.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(t.Css.CONTENT,e),e.length=0},t.Css.inject=function(e,n){if(!t.Css.injected_){t.Css.injected_=!0;var o=t.Css.CONTENT.join("\n");t.Css.CONTENT.length=0,e&&(e=n.replace(/[\\/]$/,""),o=o.replace(/<<<PATH>>>/g,e),(e=document.createElement("style")).id="blockly-common-style",o=document.createTextNode(o),e.appendChild(o),document.head.insertBefore(e,document.head.firstChild))}},t.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],t.utils.math={},t.utils.math.toRadians=function(t){return t*Math.PI/180},t.utils.math.toDegrees=function(t){return 180*t/Math.PI},t.utils.math.clamp=function(t,e,n){if(n<t){var o=n;n=t,t=o}return Math.max(t,Math.min(e,n))},t.DropDownDiv=function(){},t.DropDownDiv.boundsElement_=null,t.DropDownDiv.owner_=null,t.DropDownDiv.positionToField_=null,t.DropDownDiv.ARROW_SIZE=16,t.DropDownDiv.BORDER_SIZE=1,t.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,t.DropDownDiv.PADDING_Y=16,t.DropDownDiv.ANIMATION_TIME=.25,t.DropDownDiv.animateOutTimer_=null,t.DropDownDiv.onHide_=null,t.DropDownDiv.rendererClassName_="",t.DropDownDiv.themeClassName_="",t.DropDownDiv.createDom=function(){if(!t.DropDownDiv.DIV_){var e=document.createElement("div");e.className="blocklyDropDownDiv",(t.parentContainer||document.body).appendChild(e),t.DropDownDiv.DIV_=e;var n=document.createElement("div");n.className="blocklyDropDownContent",e.appendChild(n),t.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",e.appendChild(n),t.DropDownDiv.arrow_=n,t.DropDownDiv.DIV_.style.opacity=0,t.DropDownDiv.DIV_.style.transition="transform "+t.DropDownDiv.ANIMATION_TIME+"s, opacity "+t.DropDownDiv.ANIMATION_TIME+"s",e.addEventListener("focusin",(function(){t.utils.dom.addClass(e,"blocklyFocused")})),e.addEventListener("focusout",(function(){t.utils.dom.removeClass(e,"blocklyFocused")}))}},t.DropDownDiv.setBoundsElement=function(e){t.DropDownDiv.boundsElement_=e},t.DropDownDiv.getContentDiv=function(){return t.DropDownDiv.content_},t.DropDownDiv.clearContent=function(){t.DropDownDiv.content_.textContent="",t.DropDownDiv.content_.style.width=""},t.DropDownDiv.setColour=function(e,n){t.DropDownDiv.DIV_.style.backgroundColor=e,t.DropDownDiv.DIV_.style.borderColor=n},t.DropDownDiv.showPositionedByBlock=function(e,n,o,i){return t.DropDownDiv.showPositionedByRect_(t.DropDownDiv.getScaledBboxOfBlock_(n),e,o,i)},t.DropDownDiv.showPositionedByField=function(e,n,o){return t.DropDownDiv.positionToField_=!0,t.DropDownDiv.showPositionedByRect_(t.DropDownDiv.getScaledBboxOfField_(e),e,n,o)},t.DropDownDiv.getScaledBboxOfBlock_=function(e){var n=e.getSvgRoot(),o=n.getBBox(),i=e.workspace.scale;return e=o.height*i,o=o.width*i,n=t.utils.style.getPageOffset(n),new t.utils.Rect(n.y,n.y+e,n.x,n.x+o)},t.DropDownDiv.getScaledBboxOfField_=function(e){return e=e.getScaledBBox(),new t.utils.Rect(e.top,e.bottom,e.left,e.right)},t.DropDownDiv.showPositionedByRect_=function(e,n,o,i){var r=e.left+(e.right-e.left)/2,s=e.bottom;e=e.top,i&&(e+=i);for(var a=(i=n.getSourceBlock()).workspace;a.options.parentWorkspace;)a=a.options.parentWorkspace;return t.DropDownDiv.setBoundsElement(a.getParentSvg().parentNode),t.DropDownDiv.show(n,i.RTL,r,s,r,e,o)},t.DropDownDiv.show=function(e,n,o,i,r,s,a){return t.DropDownDiv.owner_=e,t.DropDownDiv.onHide_=a||null,(e=t.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=t.getMainWorkspace(),t.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),t.DropDownDiv.themeClassName_=n.getTheme().getClassName(),t.utils.dom.addClass(e,t.DropDownDiv.rendererClassName_),t.utils.dom.addClass(e,t.DropDownDiv.themeClassName_),t.DropDownDiv.positionInternal_(o,i,r,s)},t.DropDownDiv.getBoundsInfo_=function(){var e=t.utils.style.getPageOffset(t.DropDownDiv.boundsElement_),n=t.utils.style.getSize(t.DropDownDiv.boundsElement_);return{left:e.x,right:e.x+n.width,top:e.y,bottom:e.y+n.height,width:n.width,height:n.height}},t.DropDownDiv.getPositionMetrics_=function(e,n,o,i){var r=t.DropDownDiv.getBoundsInfo_(),s=t.utils.style.getSize(t.DropDownDiv.DIV_);return n+s.height<r.bottom?t.DropDownDiv.getPositionBelowMetrics_(e,n,r,s):i-s.height>r.top?t.DropDownDiv.getPositionAboveMetrics_(o,i,r,s):n+s.height<document.documentElement.clientHeight?t.DropDownDiv.getPositionBelowMetrics_(e,n,r,s):i-s.height>document.documentElement.clientTop?t.DropDownDiv.getPositionAboveMetrics_(o,i,r,s):t.DropDownDiv.getPositionTopOfPageMetrics_(e,r,s)},t.DropDownDiv.getPositionBelowMetrics_=function(e,n,o,i){return{initialX:(e=t.DropDownDiv.getPositionX(e,o.left,o.right,i.width)).divX,initialY:n,finalX:e.divX,finalY:n+t.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:-(t.DropDownDiv.ARROW_SIZE/2+t.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},t.DropDownDiv.getPositionAboveMetrics_=function(e,n,o,i){return{initialX:(e=t.DropDownDiv.getPositionX(e,o.left,o.right,i.width)).divX,initialY:n-i.height,finalX:e.divX,finalY:n-i.height-t.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:i.height-2*t.DropDownDiv.BORDER_SIZE-t.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},t.DropDownDiv.getPositionTopOfPageMetrics_=function(e,n,o){return{initialX:(e=t.DropDownDiv.getPositionX(e,n.left,n.right,o.width)).divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},t.DropDownDiv.getPositionX=function(e,n,o,i){var r=e;return e=t.utils.math.clamp(n,e-i/2,o-i),r-=t.DropDownDiv.ARROW_SIZE/2,n=t.DropDownDiv.ARROW_HORIZONTAL_PADDING,{arrowX:i=t.utils.math.clamp(n,r-e,i-n-t.DropDownDiv.ARROW_SIZE),divX:e}},t.DropDownDiv.isVisible=function(){return!!t.DropDownDiv.owner_},t.DropDownDiv.hideIfOwner=function(e,n){return t.DropDownDiv.owner_===e&&(n?t.DropDownDiv.hideWithoutAnimation():t.DropDownDiv.hide(),!0)},t.DropDownDiv.hide=function(){var e=t.DropDownDiv.DIV_;e.style.transform="translate(0, 0)",e.style.opacity=0,t.DropDownDiv.animateOutTimer_=setTimeout((function(){t.DropDownDiv.hideWithoutAnimation()}),1e3*t.DropDownDiv.ANIMATION_TIME),t.DropDownDiv.onHide_&&(t.DropDownDiv.onHide_(),t.DropDownDiv.onHide_=null)},t.DropDownDiv.hideWithoutAnimation=function(){if(t.DropDownDiv.isVisible()){t.DropDownDiv.animateOutTimer_&&clearTimeout(t.DropDownDiv.animateOutTimer_);var e=t.DropDownDiv.DIV_;e.style.transform="",e.style.left="",e.style.top="",e.style.opacity=0,e.style.display="none",e.style.backgroundColor="",e.style.borderColor="",t.DropDownDiv.onHide_&&(t.DropDownDiv.onHide_(),t.DropDownDiv.onHide_=null),t.DropDownDiv.clearContent(),t.DropDownDiv.owner_=null,t.DropDownDiv.rendererClassName_&&(t.utils.dom.removeClass(e,t.DropDownDiv.rendererClassName_),t.DropDownDiv.rendererClassName_=""),t.DropDownDiv.themeClassName_&&(t.utils.dom.removeClass(e,t.DropDownDiv.themeClassName_),t.DropDownDiv.themeClassName_=""),t.getMainWorkspace().markFocused()}},t.DropDownDiv.positionInternal_=function(e,n,o,i){(e=t.DropDownDiv.getPositionMetrics_(e,n,o,i)).arrowVisible?(t.DropDownDiv.arrow_.style.display="",t.DropDownDiv.arrow_.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",t.DropDownDiv.arrow_.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):t.DropDownDiv.arrow_.style.display="none",n=Math.floor(e.initialX),o=Math.floor(e.initialY),i=Math.floor(e.finalX);var r=Math.floor(e.finalY),s=t.DropDownDiv.DIV_;return s.style.left=n+"px",s.style.top=o+"px",s.style.display="block",s.style.opacity=1,s.style.transform="translate("+(i-n)+"px,"+(r-o)+"px)",!!e.arrowAtTop},t.DropDownDiv.repositionForWindowResize=function(){if(t.DropDownDiv.owner_){var e=t.DropDownDiv.owner_,n=e.getSourceBlock();n=(e=t.DropDownDiv.positionToField_?t.DropDownDiv.getScaledBboxOfField_(e):t.DropDownDiv.getScaledBboxOfBlock_(n)).left+(e.right-e.left)/2,t.DropDownDiv.positionInternal_(n,e.bottom,n,e.top)}else t.DropDownDiv.hide()},t.Grid=function(t,e){this.gridPattern_=t,this.spacing_=e.spacing,this.length_=e.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=e.snap},t.Grid.prototype.scale_=1,t.Grid.prototype.dispose=function(){this.gridPattern_=null},t.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},t.Grid.prototype.getSpacing=function(){return this.spacing_},t.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},t.Grid.prototype.update=function(t){this.scale_=t;var e=this.spacing_*t||100;this.gridPattern_.setAttribute("width",e),this.gridPattern_.setAttribute("height",e);var n=(e=Math.floor(this.spacing_/2)+.5)-this.length_/2,o=e+this.length_/2;e*=t,n*=t,o*=t,this.setLineAttributes_(this.line1_,t,n,o,e,e),this.setLineAttributes_(this.line2_,t,e,e,n,o)},t.Grid.prototype.setLineAttributes_=function(t,e,n,o,i,r){t&&(t.setAttribute("stroke-width",e),t.setAttribute("x1",n),t.setAttribute("y1",i),t.setAttribute("x2",o),t.setAttribute("y2",r))},t.Grid.prototype.moveTo=function(e,n){this.gridPattern_.setAttribute("x",e),this.gridPattern_.setAttribute("y",n),(t.utils.userAgent.IE||t.utils.userAgent.EDGE)&&this.update(this.scale_)},t.Grid.createDom=function(e,n,o){return e=t.utils.dom.createSvgElement(t.utils.Svg.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},o),0<n.length&&0<n.spacing?(t.utils.dom.createSvgElement(t.utils.Svg.LINE,{stroke:n.colour},e),1<n.length&&t.utils.dom.createSvgElement(t.utils.Svg.LINE,{stroke:n.colour},e)):t.utils.dom.createSvgElement(t.utils.Svg.LINE,{},e),e},t.Theme=function(e,n,o,i){this.name=e,this.blockStyles=n||Object.create(null),this.categoryStyles=o||Object.create(null),this.componentStyles=i||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,t.registry.register(t.registry.Type.THEME,e,this)},t.Theme.prototype.getClassName=function(){return this.name+"-theme"},t.Theme.prototype.setBlockStyle=function(t,e){this.blockStyles[t]=e},t.Theme.prototype.setCategoryStyle=function(t,e){this.categoryStyles[t]=e},t.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},t.Theme.prototype.setComponentStyle=function(t,e){this.componentStyles[t]=e},t.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},t.Theme.prototype.setStartHats=function(t){this.startHats=t},t.Theme.defineTheme=function(e,n){var o=new t.Theme(e),i=n.base;return i&&("string"==typeof i&&(i=t.registry.getObject(t.registry.Type.THEME,i)),i instanceof t.Theme&&(t.utils.object.deepMerge(o,i),o.name=e)),t.utils.object.deepMerge(o.blockStyles,n.blockStyles),t.utils.object.deepMerge(o.categoryStyles,n.categoryStyles),t.utils.object.deepMerge(o.componentStyles,n.componentStyles),t.utils.object.deepMerge(o.fontStyle,n.fontStyle),null!=n.startHats&&(o.startHats=n.startHats),o},t.Themes={},t.Themes.Classic={},t.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},t.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},t.Themes.Classic=new t.Theme("classic",t.Themes.Classic.defaultBlockStyles,t.Themes.Classic.categoryStyles),t.utils.IdGenerator={},t.utils.IdGenerator.nextId_=0,t.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(t.utils.IdGenerator.nextId_++).toString(36)},t.utils.Metrics=function(){},t.utils.toolbox={},t.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",t.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",t.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},t.utils.toolbox.convertToolboxDefToJson=function(e){return e?((e instanceof Element||"string"==typeof e)&&(e=t.utils.toolbox.parseToolboxTree(e),e=t.utils.toolbox.convertToToolboxJson_(e)),t.utils.toolbox.validateToolbox_(e),e):null},t.utils.toolbox.validateToolbox_=function(e){var n=e.kind;if(e=e.contents,n&&n!=t.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=t.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+t.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+t.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!e)throw Error("Toolbox must have a contents attribute.")},t.utils.toolbox.convertFlyoutDefToJsonArray=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:t.utils.toolbox.xmlToJsonArray_(e):[]},t.utils.toolbox.hasCategories=function(e){if(!e)return!1;var n=e.kind;return n?n==t.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!e.contents.filter((function(t){return"CATEGORY"==t.kind.toUpperCase()})).length},t.utils.toolbox.isCategoryCollapsible=function(t){return!(!t||!t.contents)&&!!t.contents.filter((function(t){return"CATEGORY"==t.kind.toUpperCase()})).length},t.utils.toolbox.convertToToolboxJson_=function(e){var n={contents:t.utils.toolbox.xmlToJsonArray_(e)};return e instanceof Node&&t.utils.toolbox.addAttributes_(e,n),n},t.utils.toolbox.xmlToJsonArray_=function(e){var n,o=[],i=e.childNodes;for(i||(i=e),e=0;n=i[e];e++)if(n.tagName){var r={},s=n.tagName.toUpperCase();r.kind=s,"BLOCK"==s?r.blockxml=n:n.childNodes&&0<n.childNodes.length&&(r.contents=t.utils.toolbox.xmlToJsonArray_(n)),t.utils.toolbox.addAttributes_(n,r),o.push(r)}return o},t.utils.toolbox.addAttributes_=function(t,e){for(var n=0;n<t.attributes.length;n++){var o=t.attributes[n];-1<o.nodeName.indexOf("css-")?(e.cssconfig=e.cssconfig||{},e.cssconfig[o.nodeName.replace("css-","")]=o.value):e[o.nodeName]=o.value}},t.utils.toolbox.parseToolboxTree=function(e){if(e){if("string"!=typeof e&&(t.utils.userAgent.IE&&e.outerHTML?e=e.outerHTML:e instanceof Element||(e=null)),"string"==typeof e&&"xml"!=(e=t.Xml.textToDom(e)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else e=null;return e},t.Options=function(e){var n=!!e.readOnly;if(n)var o=null,i=!1,r=!1,s=!1,a=!1,l=!1,c=!1;else{o=t.utils.toolbox.convertToolboxDefToJson(e.toolbox),i=t.utils.toolbox.hasCategories(o),void 0===(r=e.trashcan)&&(r=i);var u=e.maxTrashcanContents;r?void 0===u&&(u=32):u=0,void 0===(s=e.collapse)&&(s=i),void 0===(a=e.comments)&&(a=i),void 0===(l=e.disable)&&(l=i),void 0===(c=e.sounds)&&(c=!0)}var p=!!e.rtl,h=e.horizontalLayout;void 0===h&&(h=!1);var d=e.toolboxPosition;d="end"!==d,d=h?d?t.utils.toolbox.Position.TOP:t.utils.toolbox.Position.BOTTOM:d==p?t.utils.toolbox.Position.RIGHT:t.utils.toolbox.Position.LEFT;var g=e.css;void 0===g&&(g=!0);var _="https://blockly-demo.appspot.com/static/media/";e.media?_=e.media:e.path&&(_=e.path+"media/");var f=void 0===e.oneBasedIndex||!!e.oneBasedIndex,v=e.renderer||"geras",m=e.plugins||{};this.RTL=p,this.oneBasedIndex=f,this.collapse=s,this.comments=a,this.disable=l,this.readOnly=n,this.maxBlocks=e.maxBlocks||1/0,this.maxInstances=e.maxInstances,this.pathToMedia=_,this.hasCategories=i,this.moveOptions=t.Options.parseMoveOptions_(e,i),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=r,this.maxTrashcanContents=u,this.hasSounds=c,this.hasCss=g,this.horizontalLayout=h,this.languageTree=o,this.gridOptions=t.Options.parseGridOptions_(e),this.zoomOptions=t.Options.parseZoomOptions_(e),this.toolboxPosition=d,this.theme=t.Options.parseThemeOptions_(e),this.renderer=v,this.rendererOverrides=e.rendererOverrides,this.gridPattern=null,this.parentWorkspace=e.parentWorkspace,this.plugins=m},t.BlocklyOptions=function(){},t.Options.parseMoveOptions_=function(t,e){var n=t.move||{},o={};return void 0===n.scrollbars&&void 0===t.scrollbars?o.scrollbars=e:"object"==typeof n.scrollbars?(o.scrollbars={},o.scrollbars.horizontal=!!n.scrollbars.horizontal,o.scrollbars.vertical=!!n.scrollbars.vertical,o.scrollbars.horizontal&&o.scrollbars.vertical?o.scrollbars=!0:o.scrollbars.horizontal||o.scrollbars.vertical||(o.scrollbars=!1)):o.scrollbars=!!n.scrollbars||!!t.scrollbars,o.wheel=o.scrollbars&&void 0!==n.wheel?!!n.wheel:"object"==typeof o.scrollbars,o.drag=!!o.scrollbars&&(void 0===n.drag||!!n.drag),o},t.Options.parseZoomOptions_=function(t){t=t.zoom||{};var e={};return e.controls=void 0!==t.controls&&!!t.controls,e.wheel=void 0!==t.wheel&&!!t.wheel,e.startScale=void 0===t.startScale?1:Number(t.startScale),e.maxScale=void 0===t.maxScale?3:Number(t.maxScale),e.minScale=void 0===t.minScale?.3:Number(t.minScale),e.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),e.pinch=void 0===t.pinch?e.wheel||e.controls:!!t.pinch,e},t.Options.parseGridOptions_=function(t){t=t.grid||{};var e={};return e.spacing=Number(t.spacing)||0,e.colour=t.colour||"#888",e.length=void 0===t.length?1:Number(t.length),e.snap=0<e.spacing&&!!t.snap,e},t.Options.parseThemeOptions_=function(e){return"string"==typeof(e=e.theme||t.Themes.Classic)?t.registry.getObject(t.registry.Type.THEME,e):e instanceof t.Theme?e:t.Theme.defineTheme(e.name||"builtin"+t.utils.IdGenerator.getNextUniqueId(),e)},t.Options.parseToolboxTree=function(e){return t.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),t.utils.toolbox.parseToolboxTree(e)},t.ScrollbarPair=function(e,n,o,i){this.workspace_=e,o=void 0===o||o;var r=(n=void 0===n||n)&&o;n&&(this.hScroll=new t.Scrollbar(e,!0,r,i)),o&&(this.vScroll=new t.Scrollbar(e,!1,r,i)),r&&(this.corner_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{height:t.Scrollbar.scrollbarThickness,width:t.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),t.utils.dom.insertAfter(this.corner_,e.getBubbleCanvas())),this.oldHostMetrics_=null},t.ScrollbarPair.prototype.dispose=function(){t.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},t.ScrollbarPair.prototype.resize=function(){var e=this.workspace_.getMetrics();if(e){var n=!1,o=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==e.scrollWidth&&this.oldHostMetrics_.viewLeft==e.viewLeft&&this.oldHostMetrics_.scrollLeft==e.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==e.scrollHeight&&this.oldHostMetrics_.viewTop==e.viewTop&&this.oldHostMetrics_.scrollTop==e.scrollTop||(o=!0)):o=n=!0,n||o){try{t.Events.disable(),this.hScroll&&n&&this.hScroll.resize(e),this.vScroll&&o&&this.vScroll.resize(e)}finally{t.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=e}},t.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},t.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},t.ScrollbarPair.prototype.setOrigin=function(t,e){this.hScroll&&this.hScroll.setOrigin(t,e),this.vScroll&&this.vScroll.setOrigin(t,e)},t.ScrollbarPair.prototype.set=function(t,e,n){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(e,!1),(n||void 0===n)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(t))},t.ScrollbarPair.prototype.setX=function(t){this.hScroll&&this.hScroll.set(t,!0)},t.ScrollbarPair.prototype.setY=function(t){this.vScroll&&this.vScroll.set(t,!0)},t.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)},t.ScrollbarPair.prototype.isVisible=function(){var t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t},t.ScrollbarPair.prototype.resizeContent=function(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)},t.ScrollbarPair.prototype.resizeView=function(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)},t.Scrollbar=function(e,n,o,i){this.workspace_=e,this.pair_=o||!1,this.horizontal_=n,this.ratio=this.oldHostMetrics_=null,this.createDom_(i),this.position=new t.utils.Coordinate(0,0),e=t.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",e),this.outerSvg_.setAttribute("height",e),this.svgHandle_.setAttribute("height",e-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",e),this.outerSvg_.setAttribute("width",e),this.svgHandle_.setAttribute("width",e-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=t.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=t.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},t.Scrollbar.prototype.origin_=new t.utils.Coordinate(0,0),t.Scrollbar.prototype.startDragMouse_=0,t.Scrollbar.prototype.scrollbarLength_=0,t.Scrollbar.prototype.handleLength_=0,t.Scrollbar.prototype.handlePosition_=0,t.Scrollbar.prototype.isVisible_=!0,t.Scrollbar.prototype.containerVisible_=!0,t.Scrollbar.scrollbarThickness=15,t.Touch.TOUCH_ENABLED&&(t.Scrollbar.scrollbarThickness=25),t.Scrollbar.SCROLLBAR_MARGIN=.5,t.Scrollbar.metricsAreEquivalent_=function(t,e){return!(!t||!e||t.viewWidth!=e.viewWidth||t.viewHeight!=e.viewHeight||t.viewLeft!=e.viewLeft||t.viewTop!=e.viewTop||t.absoluteTop!=e.absoluteTop||t.absoluteLeft!=e.absoluteLeft||t.scrollWidth!=e.scrollWidth||t.scrollHeight!=e.scrollHeight||t.scrollLeft!=e.scrollLeft||t.scrollTop!=e.scrollTop)},t.Scrollbar.prototype.dispose=function(){this.cleanUp_(),t.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,t.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,t.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},t.Scrollbar.prototype.constrainHandleLength_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_)},t.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},t.Scrollbar.prototype.constrainHandlePosition_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_-this.handleLength_)},t.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},t.Scrollbar.prototype.setScrollbarLength_=function(t){this.scrollbarLength_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},t.Scrollbar.prototype.setPosition=function(e,n){this.position.x=e,this.position.y=n,t.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},t.Scrollbar.prototype.resize=function(e){(e||(e=this.workspace_.getMetrics()))&&(t.Scrollbar.metricsAreEquivalent_(e,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(e):this.resizeVertical_(e),this.oldHostMetrics_=e,this.updateMetrics_()))},t.Scrollbar.prototype.requiresViewResize_=function(t){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics_.absoluteTop!==t.absoluteTop},t.Scrollbar.prototype.resizeHorizontal_=function(t){this.requiresViewResize_(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)},t.Scrollbar.prototype.resizeViewHorizontal=function(e){var n=e.viewWidth-2*t.Scrollbar.SCROLLBAR_MARGIN;this.pair_&&(n-=t.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),n=e.absoluteLeft+t.Scrollbar.SCROLLBAR_MARGIN,this.pair_&&this.workspace_.RTL&&(n+=t.Scrollbar.scrollbarThickness),this.setPosition(n,e.absoluteTop+e.viewHeight-t.Scrollbar.scrollbarThickness-t.Scrollbar.SCROLLBAR_MARGIN),this.resizeContentHorizontal(e)},t.Scrollbar.prototype.resizeContentHorizontal=function(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var e=this.scrollbarLength_*t.viewWidth/t.scrollWidth;e=this.constrainHandleLength_(e),this.setHandleLength_(e),e=t.scrollWidth-t.viewWidth;var n=this.scrollbarLength_-this.handleLength_;t=(t.viewLeft-t.scrollLeft)/e*n,t=this.constrainHandlePosition_(t),this.setHandlePosition(t),this.ratio=n/e}},t.Scrollbar.prototype.resizeVertical_=function(t){this.requiresViewResize_(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)},t.Scrollbar.prototype.resizeViewVertical=function(e){var n=e.viewHeight-2*t.Scrollbar.SCROLLBAR_MARGIN;this.pair_&&(n-=t.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),this.setPosition(this.workspace_.RTL?e.absoluteLeft+t.Scrollbar.SCROLLBAR_MARGIN:e.absoluteLeft+e.viewWidth-t.Scrollbar.scrollbarThickness-t.Scrollbar.SCROLLBAR_MARGIN,e.absoluteTop+t.Scrollbar.SCROLLBAR_MARGIN),this.resizeContentVertical(e)},t.Scrollbar.prototype.resizeContentVertical=function(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var e=this.scrollbarLength_*t.viewHeight/t.scrollHeight;e=this.constrainHandleLength_(e),this.setHandleLength_(e),e=t.scrollHeight-t.viewHeight;var n=this.scrollbarLength_-this.handleLength_;t=(t.viewTop-t.scrollTop)/e*n,t=this.constrainHandlePosition_(t),this.setHandlePosition(t),this.ratio=n/e}},t.Scrollbar.prototype.createDom_=function(e){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");e&&(n+=" "+e),this.outerSvg_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{class:n},null),this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),e=Math.floor((t.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),t.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},t.Scrollbar.prototype.isVisible=function(){return this.isVisible_},t.Scrollbar.prototype.setContainerVisible=function(t){var e=t!=this.containerVisible_;this.containerVisible_=t,e&&this.updateDisplay_()},t.Scrollbar.prototype.setVisible=function(t){var e=t!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,e&&this.updateDisplay_()},t.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},t.Scrollbar.prototype.onMouseDownBar_=function(e){if(this.workspace_.markFocused(),t.Touch.clearTouchIdentifier(),this.cleanUp_(),t.utils.isRightButton(e))e.stopPropagation();else{var n=t.utils.mouseToSvg(e,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var o=t.utils.getInjectionDivXY_(this.svgHandle_);o=this.horizontal_?o.x:o.y;var i=this.handlePosition_,r=.95*this.handleLength_;n<=o?i-=r:n>=o+this.handleLength_&&(i+=r),this.setHandlePosition(this.constrainHandlePosition_(i)),this.updateMetrics_(),e.stopPropagation(),e.preventDefault()}},t.Scrollbar.prototype.onMouseDownHandle_=function(e){this.workspace_.markFocused(),this.cleanUp_(),t.utils.isRightButton(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?e.clientX:e.clientY,t.Scrollbar.onMouseUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),t.Scrollbar.onMouseMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),e.stopPropagation(),e.preventDefault())},t.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.updateMetrics_()},t.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),t.Touch.clearTouchIdentifier(),this.cleanUp_()},t.Scrollbar.prototype.cleanUp_=function(){t.hideChaff(!0),t.Scrollbar.onMouseUpWrapper_&&(t.browserEvents.unbind(t.Scrollbar.onMouseUpWrapper_),t.Scrollbar.onMouseUpWrapper_=null),t.Scrollbar.onMouseMoveWrapper_&&(t.browserEvents.unbind(t.Scrollbar.onMouseMoveWrapper_),t.Scrollbar.onMouseMoveWrapper_=null)},t.Scrollbar.prototype.getRatio_=function(){var t=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(t)&&(t=0),t},t.Scrollbar.prototype.updateMetrics_=function(){var t=this.getRatio_(),e={};this.horizontal_?e.x=t:e.y=t,this.workspace_.setMetrics(e)},t.Scrollbar.prototype.set=function(t,e){this.setHandlePosition(this.constrainHandlePosition_(t*this.ratio)),(e||void 0===e)&&this.updateMetrics_()},t.Scrollbar.prototype.setOrigin=function(e,n){this.origin_=new t.utils.Coordinate(e,n)},t.Tooltip={},t.Tooltip.visible=!1,t.Tooltip.blocked_=!1,t.Tooltip.LIMIT=50,t.Tooltip.mouseOutPid_=0,t.Tooltip.showPid_=0,t.Tooltip.lastX_=0,t.Tooltip.lastY_=0,t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.OFFSET_X=0,t.Tooltip.OFFSET_Y=10,t.Tooltip.RADIUS_OK=10,t.Tooltip.HOVER_MS=750,t.Tooltip.MARGINS=5,t.Tooltip.DIV=null,t.Tooltip.getTooltipOfObject=function(e){if(e=t.Tooltip.getTargetObject_(e)){for(e=e.tooltip;"function"==typeof e;)e=e();if("string"!=typeof e)throw Error("Tooltip function must return a string.");return e}return""},t.Tooltip.getTargetObject_=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},t.Tooltip.createDom=function(){t.Tooltip.DIV||(t.Tooltip.DIV=document.createElement("div"),t.Tooltip.DIV.className="blocklyTooltipDiv",(t.parentContainer||document.body).appendChild(t.Tooltip.DIV))},t.Tooltip.bindMouseEvents=function(e){e.mouseOverWrapper_=t.browserEvents.bind(e,"mouseover",null,t.Tooltip.onMouseOver_),e.mouseOutWrapper_=t.browserEvents.bind(e,"mouseout",null,t.Tooltip.onMouseOut_),e.addEventListener("mousemove",t.Tooltip.onMouseMove_,!1)},t.Tooltip.unbindMouseEvents=function(e){e&&(t.browserEvents.unbind(e.mouseOverWrapper_),t.browserEvents.unbind(e.mouseOutWrapper_),e.removeEventListener("mousemove",t.Tooltip.onMouseMove_))},t.Tooltip.onMouseOver_=function(e){t.Tooltip.blocked_||(e=t.Tooltip.getTargetObject_(e.currentTarget),t.Tooltip.element_!=e&&(t.Tooltip.hide(),t.Tooltip.poisonedElement_=null,t.Tooltip.element_=e),clearTimeout(t.Tooltip.mouseOutPid_))},t.Tooltip.onMouseOut_=function(e){t.Tooltip.blocked_||(t.Tooltip.mouseOutPid_=setTimeout((function(){t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.hide()}),1),clearTimeout(t.Tooltip.showPid_))},t.Tooltip.onMouseMove_=function(e){if(t.Tooltip.element_&&t.Tooltip.element_.tooltip&&!t.Tooltip.blocked_)if(t.Tooltip.visible){var n=t.Tooltip.lastX_-e.pageX;e=t.Tooltip.lastY_-e.pageY,Math.sqrt(n*n+e*e)>t.Tooltip.RADIUS_OK&&t.Tooltip.hide()}else t.Tooltip.poisonedElement_!=t.Tooltip.element_&&(clearTimeout(t.Tooltip.showPid_),t.Tooltip.lastX_=e.pageX,t.Tooltip.lastY_=e.pageY,t.Tooltip.showPid_=setTimeout(t.Tooltip.show_,t.Tooltip.HOVER_MS))},t.Tooltip.dispose=function(){t.Tooltip.element_=null,t.Tooltip.poisonedElement_=null,t.Tooltip.hide()},t.Tooltip.hide=function(){t.Tooltip.visible&&(t.Tooltip.visible=!1,t.Tooltip.DIV&&(t.Tooltip.DIV.style.display="none")),t.Tooltip.showPid_&&clearTimeout(t.Tooltip.showPid_)},t.Tooltip.block=function(){t.Tooltip.hide(),t.Tooltip.blocked_=!0},t.Tooltip.unblock=function(){t.Tooltip.blocked_=!1},t.Tooltip.show_=function(){if(!t.Tooltip.blocked_&&(t.Tooltip.poisonedElement_=t.Tooltip.element_,t.Tooltip.DIV)){t.Tooltip.DIV.textContent="";var e=t.Tooltip.getTooltipOfObject(t.Tooltip.element_);e=(e=t.utils.string.wrap(e,t.Tooltip.LIMIT)).split("\n");for(var n=0;n<e.length;n++){var o=document.createElement("div");o.appendChild(document.createTextNode(e[n])),t.Tooltip.DIV.appendChild(o)}e=t.Tooltip.element_.RTL,n=document.documentElement.clientWidth,o=document.documentElement.clientHeight,t.Tooltip.DIV.style.direction=e?"rtl":"ltr",t.Tooltip.DIV.style.display="block",t.Tooltip.visible=!0;var i=t.Tooltip.lastX_;i=e?i-(t.Tooltip.OFFSET_X+t.Tooltip.DIV.offsetWidth):i+t.Tooltip.OFFSET_X;var r=t.Tooltip.lastY_+t.Tooltip.OFFSET_Y;r+t.Tooltip.DIV.offsetHeight>o+window.scrollY&&(r-=t.Tooltip.DIV.offsetHeight+2*t.Tooltip.OFFSET_Y),e?i=Math.max(t.Tooltip.MARGINS-window.scrollX,i):i+t.Tooltip.DIV.offsetWidth>n+window.scrollX-2*t.Tooltip.MARGINS&&(i=n-t.Tooltip.DIV.offsetWidth-2*t.Tooltip.MARGINS),t.Tooltip.DIV.style.top=r+"px",t.Tooltip.DIV.style.left=i+"px"}},t.utils.aria={},t.utils.aria.ARIA_PREFIX_="aria-",t.utils.aria.ROLE_ATTRIBUTE_="role",t.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},t.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},t.utils.aria.setRole=function(e,n){e.setAttribute(t.utils.aria.ROLE_ATTRIBUTE_,n)},t.utils.aria.setState=function(e,n,o){Array.isArray(o)&&(o=o.join(" ")),e.setAttribute(t.utils.aria.ARIA_PREFIX_+n,o)},t.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},t.WorkspaceDragSurfaceSvg.prototype.SVG_=null,t.WorkspaceDragSurfaceSvg.prototype.container_=null,t.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},t.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(e,n){e=e.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",t.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+n+"px, 0px)")},t.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return t.utils.getRelativeXY(this.SVG_)},t.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(e){if(!e)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],o=this.SVG_.childNodes[1];if(!(n&&o&&t.utils.dom.hasClass(n,"blocklyBlockCanvas")&&t.utils.dom.hasClass(o,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?t.utils.dom.insertAfter(n,this.previousSibling_):e.insertBefore(n,e.firstChild),t.utils.dom.insertAfter(o,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");t.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},t.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,e,n,o,i,r){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=n,t.setAttribute("transform","translate(0, 0) scale("+r+")"),e.setAttribute("transform","translate(0, 0) scale("+r+")"),this.SVG_.setAttribute("width",o),this.SVG_.setAttribute("height",i),this.SVG_.appendChild(t),this.SVG_.appendChild(e),this.SVG_.style.display="block"},t.blockRendering={},t.blockRendering.useDebugger=!1,t.blockRendering.register=function(e,n){t.registry.register(t.registry.Type.RENDERER,e,n)},t.blockRendering.unregister=function(e){t.registry.unregister(t.registry.Type.RENDERER,e)},t.blockRendering.startDebugger=function(){t.blockRendering.useDebugger=!0},t.blockRendering.stopDebugger=function(){t.blockRendering.useDebugger=!1},t.blockRendering.init=function(e,n,o){return(e=new(t.registry.getClass(t.registry.Type.RENDERER,e))(e)).init(n,o),e},t.ASTNode=function(e,n,o){if(!n)throw Error("Cannot create a node without a location.");this.type_=e,this.isConnection_=t.ASTNode.isConnectionType_(e),this.location_=n,this.wsCoordinate_=null,this.processParams_(o||null)},t.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},t.ASTNode.NAVIGATE_ALL_FIELDS=!1,t.ASTNode.DEFAULT_OFFSET_Y=-20,t.ASTNode.isConnectionType_=function(e){switch(e){case t.ASTNode.types.PREVIOUS:case t.ASTNode.types.NEXT:case t.ASTNode.types.INPUT:case t.ASTNode.types.OUTPUT:return!0}return!1},t.ASTNode.createFieldNode=function(e){return e?new t.ASTNode(t.ASTNode.types.FIELD,e):null},t.ASTNode.createConnectionNode=function(e){if(!e)return null;var n=e.type;return n==t.connectionTypes.INPUT_VALUE||n==t.connectionTypes.NEXT_STATEMENT&&e.getParentInput()?t.ASTNode.createInputNode(e.getParentInput()):n==t.connectionTypes.NEXT_STATEMENT?new t.ASTNode(t.ASTNode.types.NEXT,e):n==t.connectionTypes.OUTPUT_VALUE?new t.ASTNode(t.ASTNode.types.OUTPUT,e):n==t.connectionTypes.PREVIOUS_STATEMENT?new t.ASTNode(t.ASTNode.types.PREVIOUS,e):null},t.ASTNode.createInputNode=function(e){return e&&e.connection?new t.ASTNode(t.ASTNode.types.INPUT,e.connection):null},t.ASTNode.createBlockNode=function(e){return e?new t.ASTNode(t.ASTNode.types.BLOCK,e):null},t.ASTNode.createStackNode=function(e){return e?new t.ASTNode(t.ASTNode.types.STACK,e):null},t.ASTNode.createWorkspaceNode=function(e,n){return n&&e?new t.ASTNode(t.ASTNode.types.WORKSPACE,e,{wsCoordinate:n}):null},t.ASTNode.createTopNode=function(e){var n=e.previousConnection||e.outputConnection;return n?t.ASTNode.createConnectionNode(n):t.ASTNode.createBlockNode(e)},t.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},t.ASTNode.prototype.getLocation=function(){return this.location_},t.ASTNode.prototype.getType=function(){return this.type_},t.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},t.ASTNode.prototype.isConnection=function(){return this.isConnection_},t.ASTNode.prototype.findNextForInput_=function(){var e,n=this.location_.getParentInput(),o=n.getSourceBlock();for(n=o.inputList.indexOf(n)+1;e=o.inputList[n];n++){for(var i,r=e.fieldRow,s=0;i=r[s];s++)if(i.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(i);if(e.connection)return t.ASTNode.createInputNode(e)}return null},t.ASTNode.prototype.findNextForField_=function(){var e=this.location_,n=e.getParentInput(),o=e.getSourceBlock(),i=o.inputList.indexOf(n);for(e=n.fieldRow.indexOf(e)+1;n=o.inputList[i];i++){for(var r=n.fieldRow;e<r.length;){if(r[e].isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(r[e]);e++}if(e=0,n.connection)return t.ASTNode.createInputNode(n)}return null},t.ASTNode.prototype.findPrevForInput_=function(){for(var e,n=this.location_.getParentInput(),o=n.getSourceBlock(),i=o.inputList.indexOf(n);e=o.inputList[i];i--){if(e.connection&&e!==n)return t.ASTNode.createInputNode(e);for(var r,s=(e=e.fieldRow).length-1;r=e[s];s--)if(r.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(r)}return null},t.ASTNode.prototype.findPrevForField_=function(){var e,n=this.location_,o=n.getParentInput(),i=n.getSourceBlock(),r=i.inputList.indexOf(o);for(n=o.fieldRow.indexOf(n)-1;e=i.inputList[r];r--){if(e.connection&&e!==o)return t.ASTNode.createInputNode(e);for(e=e.fieldRow;-1<n;){if(e[n].isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(e[n]);n--}0<=r-1&&(n=i.inputList[r-1].fieldRow.length-1)}return null},t.ASTNode.prototype.navigateBetweenStacks_=function(e){var n=this.getLocation();if(n instanceof t.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var o=n.getRootBlock();n=o.workspace.getTopBlocks(!0);for(var i,r=0;i=n[r];r++)if(o.id==i.id)return-1==(e=r+(e?1:-1))||e==n.length?null:t.ASTNode.createStackNode(n[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")},t.ASTNode.prototype.findTopASTNodeForBlock_=function(e){var n=e.previousConnection||e.outputConnection;return n?t.ASTNode.createConnectionNode(n):t.ASTNode.createBlockNode(e)},t.ASTNode.prototype.getOutAstNodeForBlock_=function(e){if(!e)return null;var n=(e=e.getTopStackBlock()).previousConnection||e.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?t.ASTNode.createInputNode(n.targetConnection.getParentInput()):t.ASTNode.createStackNode(e)},t.ASTNode.prototype.findFirstFieldOrInput_=function(e){e=e.inputList;for(var n,o=0;n=e[o];o++){for(var i,r=n.fieldRow,s=0;i=r[s];s++)if(i.isClickable()||t.ASTNode.NAVIGATE_ALL_FIELDS)return t.ASTNode.createFieldNode(i);if(n.connection)return t.ASTNode.createInputNode(n)}return null},t.ASTNode.prototype.getSourceBlock=function(){return this.getType()===t.ASTNode.types.BLOCK||this.getType()===t.ASTNode.types.STACK?this.getLocation():this.getType()===t.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},t.ASTNode.prototype.next=function(){switch(this.type_){case t.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case t.ASTNode.types.OUTPUT:var e=this.location_;return t.ASTNode.createBlockNode(e.getSourceBlock());case t.ASTNode.types.FIELD:return this.findNextForField_();case t.ASTNode.types.INPUT:return this.findNextForInput_();case t.ASTNode.types.BLOCK:return t.ASTNode.createConnectionNode(this.location_.nextConnection);case t.ASTNode.types.PREVIOUS:return e=this.location_,t.ASTNode.createBlockNode(e.getSourceBlock());case t.ASTNode.types.NEXT:return e=this.location_,t.ASTNode.createConnectionNode(e.targetConnection)}return null},t.ASTNode.prototype.in=function(){switch(this.type_){case t.ASTNode.types.WORKSPACE:var e=this.location_.getTopBlocks(!0);if(0<e.length)return t.ASTNode.createStackNode(e[0]);break;case t.ASTNode.types.STACK:return e=this.location_,this.findTopASTNodeForBlock_(e);case t.ASTNode.types.BLOCK:return e=this.location_,this.findFirstFieldOrInput_(e);case t.ASTNode.types.INPUT:return t.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},t.ASTNode.prototype.prev=function(){switch(this.type_){case t.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case t.ASTNode.types.FIELD:return this.findPrevForField_();case t.ASTNode.types.INPUT:return this.findPrevForInput_();case t.ASTNode.types.BLOCK:var e=this.location_;return t.ASTNode.createConnectionNode(e.previousConnection||e.outputConnection);case t.ASTNode.types.PREVIOUS:if((e=(e=this.location_).targetConnection)&&!e.getParentInput())return t.ASTNode.createConnectionNode(e);break;case t.ASTNode.types.NEXT:return e=this.location_,t.ASTNode.createBlockNode(e.getSourceBlock())}return null},t.ASTNode.prototype.out=function(){switch(this.type_){case t.ASTNode.types.STACK:var e=this.location_,n=e.getRelativeToSurfaceXY();return n=new t.utils.Coordinate(n.x,n.y+t.ASTNode.DEFAULT_OFFSET_Y),t.ASTNode.createWorkspaceNode(e.workspace,n);case t.ASTNode.types.OUTPUT:return(n=(e=this.location_).targetConnection)?t.ASTNode.createConnectionNode(n):t.ASTNode.createStackNode(e.getSourceBlock());case t.ASTNode.types.FIELD:return t.ASTNode.createBlockNode(this.location_.getSourceBlock());case t.ASTNode.types.INPUT:return e=this.location_,t.ASTNode.createBlockNode(e.getSourceBlock());case t.ASTNode.types.BLOCK:return e=this.location_,this.getOutAstNodeForBlock_(e);case t.ASTNode.types.PREVIOUS:case t.ASTNode.types.NEXT:return e=this.location_,this.getOutAstNodeForBlock_(e.getSourceBlock())}return null},t.Blocks=Object.create(null),t.utils.deprecation={},t.utils.deprecation.warn=function(t,e,n,o){t=t+" was deprecated on "+e+" and will be deleted on "+n+".",o&&(t+="\nUse "+o+" instead."),console.warn(t)},t.Connection=function(t,e){this.sourceBlock_=t,this.type=e},t.Connection.CAN_CONNECT=0,t.Connection.REASON_SELF_CONNECTION=1,t.Connection.REASON_WRONG_TYPE=2,t.Connection.REASON_TARGET_NULL=3,t.Connection.REASON_CHECKS_FAILED=4,t.Connection.REASON_DIFFERENT_WORKSPACES=5,t.Connection.REASON_SHADOW_PARENT=6,t.Connection.REASON_DRAG_CHECKS_FAILED=7,t.Connection.prototype.targetConnection=null,t.Connection.prototype.disposed=!1,t.Connection.prototype.check_=null,t.Connection.prototype.shadowDom_=null,t.Connection.prototype.x=0,t.Connection.prototype.y=0,t.Connection.prototype.connect_=function(e){var n,o=this,i=o.getSourceBlock(),r=e.getSourceBlock();if(e.isConnected()&&e.disconnect(),o.isConnected()){var s=o.targetBlock(),a=o.getShadowDom();if(o.shadowDom_=null,s.isShadow())a=t.Xml.blockToDom(s),s.dispose(!1),s=null;else if(o.type==t.connectionTypes.INPUT_VALUE){if(!s.outputConnection)throw Error("Orphan block does not have an output connection.");var l=t.Connection.lastConnectionInRow(r,s);l&&(s.outputConnection.connect(l),s=null)}else if(o.type==t.connectionTypes.NEXT_STATEMENT){if(!s.previousConnection)throw Error("Orphan block does not have a previous connection.");for(l=r;l.nextConnection;){var c=l.getNextBlock();if(!c||c.isShadow()){s.workspace.connectionChecker.canConnect(s.previousConnection,l.nextConnection,!1)&&(l.nextConnection.connect(s.previousConnection),s=null);break}l=c}}if(s&&(o.disconnect(),t.Events.recordUndo)){var u=t.Events.getGroup();setTimeout((function(){s.workspace&&!s.getParent()&&(t.Events.setGroup(u),s.outputConnection?s.outputConnection.onFailedConnect(o):s.previousConnection&&s.previousConnection.onFailedConnect(o),t.Events.setGroup(!1))}),t.BUMP_DELAY)}o.shadowDom_=a}t.Events.isEnabled()&&(n=new(t.Events.get(t.Events.BLOCK_MOVE))(r)),t.Connection.connectReciprocally_(o,e),r.setParent(i),n&&(n.recordNew(),t.Events.fire(n))},t.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},t.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Connection.prototype.isSuperior=function(){return this.type==t.connectionTypes.INPUT_VALUE||this.type==t.connectionTypes.NEXT_STATEMENT},t.Connection.prototype.isConnected=function(){return!!this.targetConnection},t.Connection.prototype.canConnectWithReason=function(e){return t.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,e,!1)},t.Connection.prototype.checkConnection=function(e){t.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),o=n.canConnectWithReason(this,e,!1);if(o!=t.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(o,this,e))},t.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},t.Connection.prototype.isConnectionAllowed=function(e){return t.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,e,!0)},t.Connection.prototype.onFailedConnect=function(t){},t.Connection.prototype.connect=function(e){if(this.targetConnection!=e&&this.getConnectionChecker().canConnect(this,e,!1)){var n=t.Events.getGroup();n||t.Events.setGroup(!0),this.isSuperior()?this.connect_(e):e.connect_(this),n||t.Events.setGroup(!1)}},t.Connection.connectReciprocally_=function(t,e){if(!t||!e)throw Error("Cannot connect null connections.");t.targetConnection=e,e.targetConnection=t},t.Connection.singleConnection_=function(e,n){var o=null;n=n.outputConnection;for(var i=0;i<e.inputList.length;i++){var r=e.inputList[i].connection,s=n.getConnectionChecker();if(r&&r.type==t.connectionTypes.INPUT_VALUE&&s.canConnect(n,r,!1)){if(o)return null;o=r}}return o},t.Connection.lastConnectionInRow=function(e,n){for(var o;o=t.Connection.singleConnection_(e,n);)if(!(e=o.targetBlock())||e.isShadow())return o;return null},t.Connection.prototype.disconnect=function(){var e=this.targetConnection;if(!e)throw Error("Source connection not connected.");if(e.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,o=e.getSourceBlock();e=this}else n=e.getSourceBlock(),o=this.sourceBlock_;var i=t.Events.getGroup();i||t.Events.setGroup(!0),this.disconnectInternal_(n,o),o.isShadow()||e.respawnShadow_(),i||t.Events.setGroup(!1)},t.Connection.prototype.disconnectInternal_=function(e,n){var o;t.Events.isEnabled()&&(o=new(t.Events.get(t.Events.BLOCK_MOVE))(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),o&&(o.recordNew(),t.Events.fire(o))},t.Connection.prototype.respawnShadow_=function(){var e=this.getSourceBlock(),n=this.getShadowDom();if(e.workspace&&n)if((e=t.Xml.domToBlock(n,e.workspace)).outputConnection)this.connect(e.outputConnection);else{if(!e.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(e.previousConnection)}},t.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},t.Connection.prototype.checkType=function(e){return t.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,e,!1)},t.Connection.prototype.checkType_=function(e){return t.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(e)},t.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},t.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},t.Connection.prototype.getCheck=function(){return this.check_},t.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t,(t=this.targetBlock())?t.isShadow()&&(t.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},t.Connection.prototype.getShadowDom=function(){return this.shadowDom_},t.Connection.prototype.neighbours=function(t){return[]},t.Connection.prototype.getParentInput=function(){for(var t=null,e=this.sourceBlock_,n=e.inputList,o=0;o<e.inputList.length;o++)if(n[o].connection===this){t=n[o];break}return t},t.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var e="Output Connection of ";else if(t.previousConnection==this)e="Previous Connection of ";else if(t.nextConnection==this)e="Next Connection of ";else{e=null;for(var n,o=0;n=t.inputList[o];o++)if(n.connection==this){e=n;break}if(!e)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";e='Input "'+e.name+'" connection on '}return e+t.toDevString()},t.Extensions={},t.Extensions.ALL_={},t.Extensions.register=function(e,n){if("string"!=typeof e||""==e.trim())throw Error('Error: Invalid extension name "'+e+'"');if(t.Extensions.ALL_[e])throw Error('Error: Extension "'+e+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+e+'" must be a function');t.Extensions.ALL_[e]=n},t.Extensions.registerMixin=function(e,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+e+'" must be a object');t.Extensions.register(e,(function(){this.mixin(n)}))},t.Extensions.registerMutator=function(e,n,o,i){var r='Error when registering mutator "'+e+'": ';t.Extensions.checkHasFunction_(r,n.domToMutation,"domToMutation"),t.Extensions.checkHasFunction_(r,n.mutationToDom,"mutationToDom");var s=t.Extensions.checkMutatorDialog_(n,r);if(o&&"function"!=typeof o)throw Error('Extension "'+e+'" is not a function');t.Extensions.register(e,(function(){if(s){if(!t.Mutator)throw Error(r+"Missing require for Blockly.Mutator");this.setMutator(new t.Mutator(i||[]))}this.mixin(n),o&&o.apply(this)}))},t.Extensions.unregister=function(e){t.Extensions.ALL_[e]?delete t.Extensions.ALL_[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},t.Extensions.apply=function(e,n,o){var i=t.Extensions.ALL_[e];if("function"!=typeof i)throw Error('Error: Extension "'+e+'" not found.');if(o)t.Extensions.checkNoMutatorProperties_(e,n);else var r=t.Extensions.getMutatorProperties_(n);if(i.apply(n),o)t.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+e+'": ',n);else if(!t.Extensions.mutatorPropertiesMatch_(r,n))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},t.Extensions.checkHasFunction_=function(t,e,n){if(!e)throw Error(t+'missing required property "'+n+'"');if("function"!=typeof e)throw Error(t+'" required property "'+n+'" must be a function')},t.Extensions.checkNoMutatorProperties_=function(e,n){if(t.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+n.id)},t.Extensions.checkMutatorDialog_=function(t,e){var n=void 0!==t.compose,o=void 0!==t.decompose;if(n&&o){if("function"!=typeof t.compose)throw Error(e+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(e+"decompose must be a function.");return!0}if(n||o)throw Error(e+'Must have both or neither of "compose" and "decompose"');return!1},t.Extensions.checkBlockHasMutatorProperties_=function(e,n){if("function"!=typeof n.domToMutation)throw Error(e+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(e+'Applying a mutator didn\'t add "mutationToDom"');t.Extensions.checkMutatorDialog_(n,e)},t.Extensions.getMutatorProperties_=function(t){var e=[];return void 0!==t.domToMutation&&e.push(t.domToMutation),void 0!==t.mutationToDom&&e.push(t.mutationToDom),void 0!==t.compose&&e.push(t.compose),void 0!==t.decompose&&e.push(t.decompose),e},t.Extensions.mutatorPropertiesMatch_=function(e,n){if((n=t.Extensions.getMutatorProperties_(n)).length!=e.length)return!1;for(var o=0;o<n.length;o++)if(e[o]!=n[o])return!1;return!0},t.Extensions.buildTooltipForDropdown=function(e,n){var o=[];return"object"==typeof document&&t.utils.runAfterPageLoad((function(){for(var e in n)t.utils.checkMessageReferences(n[e])})),function(){this.type&&-1==o.indexOf(this.type)&&(t.Extensions.checkDropdownOptionsInTable_(this,e,n),o.push(this.type)),this.setTooltip(function(){var i=String(this.getFieldValue(e)),r=n[i];return null==r?-1==o.indexOf(this.type)&&(i="No tooltip mapping for value "+i+" of field "+e,null!=this.type&&(i+=" of block type "+this.type),console.warn(i+".")):r=t.utils.replaceMessageReferences(r),r}.bind(this))}},t.Extensions.checkDropdownOptionsInTable_=function(t,e,n){var o=t.getField(e);if(!o.isOptionListDynamic()){o=o.getOptions();for(var i=0;i<o.length;++i){var r=o[i][1];null==n[r]&&console.warn("No tooltip mapping for value "+r+" of field "+e+" of block type "+t.type)}}},t.Extensions.buildTooltipWithFieldText=function(e,n){return"object"==typeof document&&t.utils.runAfterPageLoad((function(){t.utils.checkMessageReferences(e)})),function(){this.setTooltip(function(){var o=this.getField(n);return t.utils.replaceMessageReferences(e).replace("%1",o?o.getText():"")}.bind(this))}},t.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},t.Extensions.register("parent_tooltip_when_inline",t.Extensions.extensionParentTooltip_),t.fieldRegistry={},t.fieldRegistry.register=function(e,n){t.registry.register(t.registry.Type.FIELD,e,n)},t.fieldRegistry.unregister=function(e){t.registry.unregister(t.registry.Type.FIELD,e)},t.fieldRegistry.fromJson=function(e){var n=t.registry.getObject(t.registry.Type.FIELD,e.type);return n?n.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},t.blockAnimations={},t.blockAnimations.disconnectPid_=0,t.blockAnimations.disconnectGroup_=null,t.blockAnimations.disposeUiEffect=function(e){var n=e.workspace,o=e.getSvgRoot();n.getAudioManager().play("delete"),e=n.getSvgXY(o),(o=o.cloneNode(!0)).translateX_=e.x,o.translateY_=e.y,o.setAttribute("transform","translate("+e.x+","+e.y+")"),n.getParentSvg().appendChild(o),o.bBox_=o.getBBox(),t.blockAnimations.disposeUiStep_(o,n.RTL,new Date,n.scale)},t.blockAnimations.disposeUiStep_=function(e,n,o,i){var r=(new Date-o)/150;1<r?t.utils.dom.removeNode(e):(e.setAttribute("transform","translate("+(e.translateX_+(n?-1:1)*e.bBox_.width*i/2*r)+","+(e.translateY_+e.bBox_.height*i*r)+") scale("+(1-r)*i+")"),setTimeout(t.blockAnimations.disposeUiStep_,10,e,n,o,i))},t.blockAnimations.connectionUiEffect=function(e){var n=e.workspace,o=n.scale;if(n.getAudioManager().play("click"),!(1>o)){var i=n.getSvgXY(e.getSvgRoot());e.outputConnection?(i.x+=(e.RTL?3:-3)*o,i.y+=13*o):e.previousConnection&&(i.x+=(e.RTL?-23:23)*o,i.y+=3*o),e=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{cx:i.x,cy:i.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),t.blockAnimations.connectionUiStep_(e,new Date,o)}},t.blockAnimations.connectionUiStep_=function(e,n,o){var i=(new Date-n)/150;1<i?t.utils.dom.removeNode(e):(e.setAttribute("r",25*i*o),e.style.opacity=1-i,t.blockAnimations.disconnectPid_=setTimeout(t.blockAnimations.connectionUiStep_,10,e,n,o))},t.blockAnimations.disconnectUiEffect=function(e){if(e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var n=e.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,e.RTL||(n*=-1),t.blockAnimations.disconnectUiStep_(e.getSvgRoot(),n,new Date)}},t.blockAnimations.disconnectUiStep_=function(e,n,o){var i=(new Date-o)/200;1<i?e.skew_="":(e.skew_="skewX("+Math.round(Math.sin(i*Math.PI*3)*(1-i)*n)+")",t.blockAnimations.disconnectGroup_=e,t.blockAnimations.disconnectPid_=setTimeout(t.blockAnimations.disconnectUiStep_,10,e,n,o)),e.setAttribute("transform",e.translate_+e.skew_)},t.blockAnimations.disconnectUiStop=function(){if(t.blockAnimations.disconnectGroup_){clearTimeout(t.blockAnimations.disconnectPid_);var e=t.blockAnimations.disconnectGroup_;e.skew_="",e.setAttribute("transform",e.translate_),t.blockAnimations.disconnectGroup_=null}},t.Events.BlockDrag=function(e,n,o){t.Events.BlockDrag.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.isStart=n,this.blocks=o},t.utils.object.inherits(t.Events.BlockDrag,t.Events.UiBase),t.Events.BlockDrag.prototype.type=t.Events.BLOCK_DRAG,t.Events.BlockDrag.prototype.toJson=function(){var e=t.Events.BlockDrag.superClass_.toJson.call(this);return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e},t.Events.BlockDrag.prototype.fromJson=function(e){t.Events.BlockDrag.superClass_.fromJson.call(this,e),this.isStart=e.isStart,this.blockId=e.blockId,this.blocks=e.blocks},t.registry.register(t.registry.Type.EVENT,t.Events.BLOCK_DRAG,t.Events.BlockDrag),t.InsertionMarkerManager=function(e){this.topBlock_=t.selected=e,this.workspace_=e.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},t.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},t.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,t.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{t.Events.enable()}},t.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},t.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},t.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},t.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(t.Events.disable(),this.hidePreview_(),t.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var e=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;t.blockAnimations.connectionUiEffect(e.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},t.InsertionMarkerManager.prototype.update=function(e,n){var o=this.getCandidate_(e);((this.wouldDeleteBlock_=this.shouldDelete_(o,n))||this.shouldUpdatePreviews_(o,e))&&(t.Events.disable(),this.maybeHidePreview_(o),this.maybeShowPreview_(o),t.Events.enable())},t.InsertionMarkerManager.prototype.createMarkerBlock_=function(e){var n=e.type;t.Events.disable();try{var o=this.workspace_.newBlock(n);if(o.setInsertionMarker(!0),e.mutationToDom){var i=e.mutationToDom();i&&o.domToMutation(i)}for(n=0;n<e.inputList.length;n++){var r=e.inputList[n];if(r.name!=t.constants.COLLAPSED_INPUT_NAME){var s=o.inputList[n];for(i=0;i<r.fieldRow.length;i++)s.fieldRow[i].setValue(r.fieldRow[i].getValue())}}o.setCollapsed(e.isCollapsed()),o.setInputsInline(e.getInputsInline()),o.initSvg(),o.getSvgRoot().setAttribute("visibility","hidden")}finally{t.Events.enable()}return o},t.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var e=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack();if(n&&n!=this.topBlock_.nextConnection){if(e.push(n),this.lastOnStack_=n,this.lastMarker_){t.Events.disable();try{this.lastMarker_.dispose()}finally{t.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return e},t.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(e,n){var o=e.local,i=e.closest;return e=e.radius,o&&i?this.localConnection_&&this.closestConnection_?(this.closestConnection_!=i||this.localConnection_!=o)&&(o=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(o*o+n*n),!(i&&e>n-t.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},t.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var e=this.getStartRadius_(),n=null,o=null,i=0;i<this.availableConnections_.length;i++){var r=this.availableConnections_[i],s=r.closest(e,t);s.connection&&(n=s.connection,o=r,e=s.radius)}return{closest:n,local:o,radius:e}},t.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?t.CONNECTING_SNAP_RADIUS:t.SNAP_RADIUS},t.InsertionMarkerManager.prototype.shouldDelete_=function(e,n){return e=e&&!!e.closest&&n!=t.DELETE_AREA_TOOLBOX,!!n&&!this.topBlock_.getParent()&&this.topBlock_.isDeletable()&&!e},t.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var e=t.closest;t=t.local,e&&(e==this.closestConnection_||e.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=e,this.localConnection_=t,this.showPreview_()))}},t.InsertionMarkerManager.prototype.showPreview_=function(){var e=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(e,this.localConnection_,this.topBlock_)){case t.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}e&&n.shouldHighlightConnection(e)&&e.highlight()},t.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var e=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(e||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},t.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},t.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,e=this.closestConnection_,n=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=n.getMatchingConnection(t.getSourceBlock(),t))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");n.render(),n.rendered=!0,n.getSvgRoot().setAttribute("visibility","visible"),t&&e&&n.positionNearConnection(t,e),e&&t.connect(e),this.markerConnection_=t},t.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var e=this.markerConnection_,n=e.getSourceBlock(),o=n.nextConnection,i=n.previousConnection,r=n.outputConnection;if(r=e.type==t.connectionTypes.INPUT_VALUE&&!(r&&r.targetConnection),!(e!=o||i&&i.targetConnection)||r?e.targetBlock().unplug(!1):e.type==t.connectionTypes.NEXT_STATEMENT&&e!=o?((o=e.targetConnection).getSourceBlock().unplug(!1),i=i?i.targetConnection:null,n.unplug(!0),i&&i.connect(o)):n.unplug(!0),e.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,n.getSvgRoot().setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},t.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},t.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},t.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},t.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},t.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},t.BlockDragger=function(e,n){this.draggingBlock_=e,this.workspace_=n,this.draggedConnectionManager_=new t.InsertionMarkerManager(this.draggingBlock_),this.deleteArea_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=t.BlockDragger.initIconData_(e)},t.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},t.BlockDragger.initIconData_=function(t){var e=[];t=t.getDescendants(!1);for(var n,o=0;n=t[o];o++){n=n.getIcons();for(var i=0;i<n.length;i++){var r={location:n[i].getIconLocation(),icon:n[i]};e.push(r)}}return e},t.BlockDragger.prototype.startBlockDrag=function(e,n){t.Events.getGroup()||t.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),t.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),t.blockAnimations.disconnectUiStop(),(this.draggingBlock_.getParent()||n&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())&&(this.draggingBlock_.unplug(n),e=this.pixelsToWorkspaceUnits_(e),e=t.utils.Coordinate.sum(this.startXY_,e),this.draggingBlock_.translate(e.x,e.y),t.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface(),(e=this.workspace_.getToolbox())&&"function"==typeof e.addStyle&&(n=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",e.addStyle(n))},t.BlockDragger.prototype.fireDragStartEvent_=function(){var e=new(t.Events.get(t.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));t.Events.fire(e)},t.BlockDragger.prototype.dragBlock=function(e,n){n=this.pixelsToWorkspaceUnits_(n);var o=t.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(o),this.dragIcons_(n),this.deleteArea_=this.workspace_.isDeleteArea(e),this.draggedConnectionManager_.update(n,this.deleteArea_),this.updateCursorDuringBlockDrag_()},t.BlockDragger.prototype.endBlockDrag=function(e,n){this.dragBlock(e,n),this.dragIconData_=[],this.fireDragEndEvent_(),t.utils.dom.stopTextWidthCache(),t.blockAnimations.disconnectUiStop(),e=this.pixelsToWorkspaceUnits_(n),n=t.utils.Coordinate.sum(this.startXY_,e),this.draggingBlock_.moveOffDragSurface(n),this.maybeDeleteBlock_()||(this.draggingBlock_.moveConnections(e.x,e.y),this.draggingBlock_.setDragging(!1),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()),this.workspace_.setResizesEnabled(!0),(e=this.workspace_.getToolbox())&&"function"==typeof e.removeStyle&&(n=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",e.removeStyle(n)),t.Events.setGroup(!1)},t.BlockDragger.prototype.fireDragEndEvent_=function(){var e=new(t.Events.get(t.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));t.Events.fire(e)},t.BlockDragger.prototype.fireMoveEvent_=function(){var e=new(t.Events.get(t.Events.BLOCK_MOVE))(this.draggingBlock_);e.oldCoordinate=this.startXY_,e.recordNew(),t.Events.fire(e)},t.BlockDragger.prototype.maybeDeleteBlock_=function(){var e=this.workspace_.trashcan;return this.wouldDeleteBlock_?(e&&setTimeout(e.closeLid.bind(e),100),this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),t.draggingConnections=[]):e&&e.closeLid(),this.wouldDeleteBlock_},t.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock();var e=this.workspace_.trashcan;this.wouldDeleteBlock_?(this.draggingBlock_.setDeleteStyle(!0),this.deleteArea_==t.DELETE_AREA_TRASH&&e&&e.setLidOpen(!0)):(this.draggingBlock_.setDeleteStyle(!1),e&&e.setLidOpen(!1))},t.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new t.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},t.BlockDragger.prototype.dragIcons_=function(e){for(var n=0;n<this.dragIconData_.length;n++){var o=this.dragIconData_[n];o.icon.setIconLocation(t.utils.Coordinate.sum(o.location,e))}},t.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},t.IConnectionChecker=function(){},t.ConnectionChecker=function(){},t.ConnectionChecker.prototype.canConnect=function(e,n,o,i){return this.canConnectWithReason(e,n,o,i)==t.Connection.CAN_CONNECT},t.ConnectionChecker.prototype.canConnectWithReason=function(e,n,o,i){var r=this.doSafetyChecks(e,n);return r!=t.Connection.CAN_CONNECT?r:this.doTypeChecks(e,n)?o&&!this.doDragChecks(e,n,i||0)?t.Connection.REASON_DRAG_CHECKS_FAILED:t.Connection.CAN_CONNECT:t.Connection.REASON_CHECKS_FAILED},t.ConnectionChecker.prototype.getErrorMessage=function(e,n,o){switch(e){case t.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case t.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case t.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case t.Connection.REASON_TARGET_NULL:return"Target connection is null.";case t.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+o.getCheck();case t.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case t.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},t.ConnectionChecker.prototype.doSafetyChecks=function(e,n){if(!e||!n)return t.Connection.REASON_TARGET_NULL;if(e.isSuperior())var o=e.getSourceBlock(),i=n.getSourceBlock();else i=e.getSourceBlock(),o=n.getSourceBlock();return o==i?t.Connection.REASON_SELF_CONNECTION:n.type!=t.OPPOSITE_TYPE[e.type]?t.Connection.REASON_WRONG_TYPE:o.workspace!==i.workspace?t.Connection.REASON_DIFFERENT_WORKSPACES:o.isShadow()&&!i.isShadow()?t.Connection.REASON_SHADOW_PARENT:t.Connection.CAN_CONNECT},t.ConnectionChecker.prototype.doTypeChecks=function(t,e){if(t=t.getCheck(),e=e.getCheck(),!t||!e)return!0;for(var n=0;n<t.length;n++)if(-1!=e.indexOf(t[n]))return!0;return!1},t.ConnectionChecker.prototype.doDragChecks=function(e,n,o){if(e.distanceFrom(n)>o||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case t.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,n);case t.connectionTypes.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case t.connectionTypes.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case t.connectionTypes.NEXT_STATEMENT:if(n.isConnected()&&!e.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==t.draggingConnections.indexOf(n)},t.ConnectionChecker.prototype.canConnectToPrevious_=function(e,n){return!e.targetConnection&&-1==t.draggingConnections.indexOf(n)&&(!n.targetConnection||!!(e=n.targetBlock()).isInsertionMarker()&&!e.getPreviousBlock())},t.registry.register(t.registry.Type.CONNECTION_CHECKER,t.registry.DEFAULT,t.ConnectionChecker),t.VariableMap=function(t){this.variableMap_=Object.create(null),this.workspace=t},t.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},t.VariableMap.prototype.renameVariable=function(e,n){var o=this.getVariable(n,e.type),i=this.workspace.getAllBlocks(!1);t.Events.setGroup(!0);try{o&&o.getId()!=e.getId()?this.renameVariableWithConflict_(e,n,o,i):this.renameVariableAndUses_(e,n,i)}finally{t.Events.setGroup(!1)}},t.VariableMap.prototype.renameVariableById=function(t,e){var n=this.getVariableById(t);if(!n)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(n,e)},t.VariableMap.prototype.renameVariableAndUses_=function(e,n,o){for(t.Events.fire(new(t.Events.get(t.Events.VAR_RENAME))(e,n)),e.name=n,n=0;n<o.length;n++)o[n].updateVarName(e)},t.VariableMap.prototype.renameVariableWithConflict_=function(e,n,o,i){var r=e.type;for(n!=o.name&&this.renameVariableAndUses_(o,n,i),n=0;n<i.length;n++)i[n].renameVarById(e.getId(),o.getId());t.Events.fire(new(t.Events.get(t.Events.VAR_DELETE))(e)),e=this.getVariablesOfType(r).indexOf(e),this.variableMap_[r].splice(e,1)},t.VariableMap.prototype.createVariable=function(e,n,o){var i=this.getVariable(e,n);if(i){if(o&&i.getId()!=o)throw Error('Variable "'+e+'" is already in use and its id is "'+i.getId()+'" which conflicts with the passed in id, "'+o+'".');return i}if(o&&this.getVariableById(o))throw Error('Variable id, "'+o+'", is already in use.');return i=o||t.utils.genUid(),n=n||"",i=new t.VariableModel(this.workspace,e,n,i),(e=this.variableMap_[n]||[]).push(i),delete this.variableMap_[n],this.variableMap_[n]=e,i},t.VariableMap.prototype.deleteVariable=function(e){for(var n,o=this.variableMap_[e.type],i=0;n=o[i];i++)if(n.getId()==e.getId()){o.splice(i,1),t.Events.fire(new(t.Events.get(t.Events.VAR_DELETE))(e));break}},t.VariableMap.prototype.deleteVariableById=function(e){var n=this.getVariableById(e);if(n){var o,i=n.name,r=this.getVariableUsesById(e);for(e=0;o=r[e];e++)if("procedures_defnoreturn"==o.type||"procedures_defreturn"==o.type)return e=o.getFieldValue("NAME"),i=t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",i).replace("%2",e),void t.alert(i);var s=this;1<r.length?(i=t.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(r.length)).replace("%2",i),t.confirm(i,(function(t){t&&n&&s.deleteVariableInternal(n,r)}))):s.deleteVariableInternal(n,r)}else console.warn("Can't delete non-existent variable: "+e)},t.VariableMap.prototype.deleteVariableInternal=function(e,n){var o=t.Events.getGroup();o||t.Events.setGroup(!0);try{for(var i=0;i<n.length;i++)n[i].dispose(!0);this.deleteVariable(e)}finally{o||t.Events.setGroup(!1)}},t.VariableMap.prototype.getVariable=function(e,n){if(n=this.variableMap_[n||""])for(var o,i=0;o=n[i];i++)if(t.Names.equals(o.name,e))return o;return null},t.VariableMap.prototype.getVariableById=function(t){for(var e=Object.keys(this.variableMap_),n=0;n<e.length;n++)for(var o,i=e[n],r=0;o=this.variableMap_[i][r];r++)if(o.getId()==t)return o;return null},t.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},t.VariableMap.prototype.getVariableTypes=function(e){var n={};t.utils.object.mixin(n,this.variableMap_),e&&e.getPotentialVariableMap()&&t.utils.object.mixin(n,e.getPotentialVariableMap().variableMap_),e=Object.keys(n),n=!1;for(var o=0;o<e.length;o++)""==e[o]&&(n=!0);return n||e.push(""),e},t.VariableMap.prototype.getAllVariables=function(){var t,e=[];for(t in this.variableMap_)e=e.concat(this.variableMap_[t]);return e},t.VariableMap.prototype.getAllVariableNames=function(){var t,e=[];for(t in this.variableMap_)for(var n,o=this.variableMap_[t],i=0;n=o[i];i++)e.push(n.name);return e},t.VariableMap.prototype.getVariableUsesById=function(t){for(var e=[],n=this.workspace.getAllBlocks(!1),o=0;o<n.length;o++){var i=n[o].getVarModels();if(i)for(var r=0;r<i.length;r++)i[r].getId()==t&&e.push(n[o])}return e},t.Workspace=function(e){this.id=t.utils.genUid(),t.Workspace.WorkspaceDB_[this.id]=this,this.options=e||new t.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(t.registry.getClassFromOptions(t.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new t.VariableMap(this),this.potentialVariableMap_=null},t.Workspace.prototype.rendered=!1,t.Workspace.prototype.isClearing=!1,t.Workspace.prototype.MAX_UNDO=1024,t.Workspace.prototype.connectionDBList=null,t.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete t.Workspace.WorkspaceDB_[this.id]},t.Workspace.SCAN_ANGLE=3,t.Workspace.prototype.sortObjects_=function(e,n){return e=e.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),e.y+t.Workspace.prototype.sortObjects_.offset*e.x-(n.y+t.Workspace.prototype.sortObjects_.offset*n.x)},t.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},t.Workspace.prototype.removeTopBlock=function(e){if(!t.utils.arrayRemove(this.topBlocks_,e))throw Error("Block not present in workspace's list of top-most blocks.")},t.Workspace.prototype.getTopBlocks=function(e){var n=[].concat(this.topBlocks_);return e&&1<n.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},t.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},t.Workspace.prototype.removeTypedBlock=function(t){this.typedBlocksDB_[t.type].splice(this.typedBlocksDB_[t.type].indexOf(t),1),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},t.Workspace.prototype.getBlocksByType=function(e,n){return this.typedBlocksDB_[e]?(e=this.typedBlocksDB_[e].slice(0),n&&1<e.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e):[]},t.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},t.Workspace.prototype.removeTopComment=function(e){if(!t.utils.arrayRemove(this.topComments_,e))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[e.id]},t.Workspace.prototype.getTopComments=function(e){var n=[].concat(this.topComments_);return e&&1<n.length&&(this.sortObjects_.offset=Math.sin(t.utils.math.toRadians(t.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},t.Workspace.prototype.getAllBlocks=function(t){if(t){t=this.getTopBlocks(!0);for(var e=[],n=0;n<t.length;n++)e.push.apply(e,t[n].getDescendants(!0))}else for(e=this.getTopBlocks(!1),n=0;n<e.length;n++)e.push.apply(e,e[n].getChildren(!1));return e.filter((function(t){return!t.isInsertionMarker()}))},t.Workspace.prototype.clear=function(){this.isClearing=!0;try{var e=t.Events.getGroup();for(e||t.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);e||t.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},t.Workspace.prototype.renameVariableById=function(t,e){this.variableMap_.renameVariableById(t,e)},t.Workspace.prototype.createVariable=function(t,e,n){return this.variableMap_.createVariable(t,e,n)},t.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},t.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},t.Workspace.prototype.getVariable=function(t,e){return this.variableMap_.getVariable(t,e)},t.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},t.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},t.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},t.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},t.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},t.Workspace.prototype.getWidth=function(){return 0},t.Workspace.prototype.newBlock=function(e,n){return new t.Block(this,e,n)},t.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},t.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},t.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var e,n=0;for(e in t){if(t[e]>this.remainingCapacityOfType(e))return!1;n+=t[e]}return!(n>this.remainingCapacity())},t.Workspace.prototype.hasBlockLimits=function(){return 1/0!=this.options.maxBlocks||!!this.options.maxInstances},t.Workspace.prototype.getUndoStack=function(){return this.undoStack_},t.Workspace.prototype.getRedoStack=function(){return this.redoStack_},t.Workspace.prototype.undo=function(e){var n=e?this.redoStack_:this.undoStack_,o=e?this.undoStack_:this.redoStack_,i=n.pop();if(i){for(var r=[i];n.length&&i.group&&i.group==n[n.length-1].group;)r.push(n.pop());for(n=0;i=r[n];n++)o.push(i);r=t.Events.filter(r,e),t.Events.recordUndo=!1;try{for(n=0;i=r[n];n++)i.run(e)}finally{t.Events.recordUndo=!0}}},t.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,t.Events.clearPendingUndo()},t.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},t.Workspace.prototype.removeChangeListener=function(e){t.utils.arrayRemove(this.listeners_,e)},t.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var e,n=0;e=this.listeners_[n];n++)e(t)},t.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},t.Workspace.prototype.setBlockById=function(t,e){this.blockDB_[t]=e},t.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},t.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},t.Workspace.prototype.allInputsFilled=function(t){for(var e,n=this.getTopBlocks(!1),o=0;e=n[o];o++)if(!e.allInputsFilled(t))return!1;return!0},t.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},t.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new t.VariableMap(this)},t.Workspace.prototype.getVariableMap=function(){return this.variableMap_},t.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},t.Workspace.WorkspaceDB_=Object.create(null),t.Workspace.getById=function(e){return t.Workspace.WorkspaceDB_[e]||null},t.Workspace.getAll=function(){var e,n=[];for(e in t.Workspace.WorkspaceDB_)n.push(t.Workspace.WorkspaceDB_[e]);return n},t.Bubble=function(e,n,o,i,r,s){this.workspace_=e,this.content_=n,this.shape_=o,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,o=t.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(o=-o),this.arrow_radians_=t.utils.math.toRadians(o),e.getBubbleCanvas().appendChild(this.createDom_(n,!(!r||!s))),this.setAnchorLocation(i),r&&s||(r=(e=this.content_.getBBox()).width+2*t.Bubble.BORDER_WIDTH,s=e.height+2*t.Bubble.BORDER_WIDTH),this.setBubbleSize(r,s),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},t.Bubble.BORDER_WIDTH=6,t.Bubble.ARROW_THICKNESS=5,t.Bubble.ARROW_ANGLE=20,t.Bubble.ARROW_BEND=4,t.Bubble.ANCHOR_RADIUS=8,t.Bubble.onMouseUpWrapper_=null,t.Bubble.onMouseMoveWrapper_=null,t.Bubble.unbindDragEvents_=function(){t.Bubble.onMouseUpWrapper_&&(t.browserEvents.unbind(t.Bubble.onMouseUpWrapper_),t.Bubble.onMouseUpWrapper_=null),t.Bubble.onMouseMoveWrapper_&&(t.browserEvents.unbind(t.Bubble.onMouseMoveWrapper_),t.Bubble.onMouseMoveWrapper_=null)},t.Bubble.bubbleMouseUp_=function(e){t.Touch.clearTouchIdentifier(),t.Bubble.unbindDragEvents_()},t.Bubble.prototype.rendered_=!1,t.Bubble.prototype.anchorXY_=null,t.Bubble.prototype.relativeLeft_=0,t.Bubble.prototype.relativeTop_=0,t.Bubble.prototype.width_=0,t.Bubble.prototype.height_=0,t.Bubble.prototype.autoLayout_=!0,t.Bubble.prototype.createDom_=function(e,n){this.bubbleGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null);var o={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return t.utils.userAgent.JAVA_FX&&(o={}),o=t.utils.dom.createSvgElement(t.utils.Svg.G,o,this.bubbleGroup_),this.bubbleArrow_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{},o),this.bubbleBack_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:t.Bubble.BORDER_WIDTH,ry:t.Bubble.BORDER_WIDTH},o),n?(this.resizeGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),n=2*t.Bubble.BORDER_WIDTH,t.utils.dom.createSvgElement(t.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,n.toString())},this.resizeGroup_),t.utils.dom.createSvgElement(t.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),t.utils.dom.createSvgElement(t.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=t.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=t.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(e),this.bubbleGroup_},t.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},t.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},t.Bubble.prototype.bubbleMouseDown_=function(t){var e=this.workspace_.getGesture(t);e&&e.handleBubbleStart(t,this)},t.Bubble.prototype.showContextMenu=function(t){},t.Bubble.prototype.isDeletable=function(){return!1},t.Bubble.prototype.setDeleteStyle=function(t){},t.Bubble.prototype.resizeMouseDown_=function(e){this.promote(),t.Bubble.unbindDragEvents_(),t.utils.isRightButton(e)||(this.workspace_.startDrag(e,new t.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),t.Bubble.onMouseUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",this,t.Bubble.bubbleMouseUp_),t.Bubble.onMouseMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),t.hideChaff()),e.stopPropagation()},t.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},t.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},t.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},t.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},t.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},t.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetricsManager().getViewMetrics(!0),e=this.getOptimalRelativeLeft_(t),n=this.getOptimalRelativeTop_(t),o=this.shape_.getBBox(),i={x:e,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},r={x:-this.width_-30,y:n};n={x:o.width,y:n};var s={x:e,y:o.height};e=o.width<o.height?n:s,o=o.width<o.height?s:n,n=this.getOverlap_(i,t),s=this.getOverlap_(r,t);var a=this.getOverlap_(e,t);t=this.getOverlap_(o,t),n==(t=Math.max(n,s,a,t))?(this.relativeLeft_=i.x,this.relativeTop_=i.y):s==t?(this.relativeLeft_=r.x,this.relativeTop_=r.y):a==t?(this.relativeLeft_=e.x,this.relativeTop_=e.y):(this.relativeLeft_=o.x,this.relativeTop_=o.y)},t.Bubble.prototype.getOverlap_=function(t,e){var n=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(n+this.width_,e.left+e.width)-Math.max(n,e.left))*(Math.min(t+this.height_,e.top+e.height)-Math.max(t,e.top))/(this.width_*this.height_)))},t.Bubble.prototype.getOptimalRelativeLeft_=function(e){var n=-this.width_/4;if(this.width_>e.width)return n;if(this.workspace_.RTL)var o=this.anchorXY_.x-n,i=o-this.width_,r=e.left+e.width,s=e.left+t.Scrollbar.scrollbarThickness/this.workspace_.scale;else o=(i=n+this.anchorXY_.x)+this.width_,s=e.left,r=e.left+e.width-t.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?i<s?n=-(s-this.anchorXY_.x+this.width_):o>r&&(n=-(r-this.anchorXY_.x)):i<s?n=s-this.anchorXY_.x:o>r&&(n=r-this.anchorXY_.x-this.width_),n},t.Bubble.prototype.getOptimalRelativeTop_=function(e){var n=-this.height_/4;if(this.height_>e.height)return n;var o=this.anchorXY_.y+n,i=o+this.height_,r=e.top;e=e.top+e.height-t.Scrollbar.scrollbarThickness/this.workspace_.scale;var s=this.anchorXY_.y;return o<r?n=r-s:i>e&&(n=e-s-this.height_),n},t.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.moveTo(t,this.relativeTop_+this.anchorXY_.y)},t.Bubble.prototype.moveTo=function(t,e){this.bubbleGroup_.setAttribute("transform","translate("+t+","+e+")")},t.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},t.Bubble.prototype.getBubbleSize=function(){return new t.utils.Size(this.width_,this.height_)},t.Bubble.prototype.setBubbleSize=function(e,n){var o=2*t.Bubble.BORDER_WIDTH;e=Math.max(e,o+45),n=Math.max(n,o+20),this.width_=e,this.height_=n,this.bubbleBack_.setAttribute("width",e),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&(this.workspace_.RTL?this.resizeGroup_.setAttribute("transform","translate("+2*t.Bubble.BORDER_WIDTH+","+(n-o)+") scale(-1 1)"):this.resizeGroup_.setAttribute("transform","translate("+(e-o)+","+(n-o)+")")),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},t.Bubble.prototype.renderArrow_=function(){var e=[],n=this.width_/2,o=this.height_/2,i=-this.relativeLeft_,r=-this.relativeTop_;if(n==i&&o==r)e.push("M "+n+","+o);else{r-=o,i-=n,this.workspace_.RTL&&(i*=-1);var s=Math.sqrt(r*r+i*i),a=Math.acos(i/s);0>r&&(a=2*Math.PI-a);var l=a+Math.PI/2;l>2*Math.PI&&(l-=2*Math.PI);var c=Math.sin(l),u=Math.cos(l),p=this.getBubbleSize();l=(p.width+p.height)/t.Bubble.ARROW_THICKNESS,l=Math.min(l,p.width,p.height)/4,i=n+(p=1-t.Bubble.ANCHOR_RADIUS/s)*i,r=o+p*r,p=n+l*u;var h=o+l*c;n-=l*u,o-=l*c,(c=a+this.arrow_radians_)>2*Math.PI&&(c-=2*Math.PI),a=Math.sin(c)*s/t.Bubble.ARROW_BEND,s=Math.cos(c)*s/t.Bubble.ARROW_BEND,e.push("M"+p+","+h),e.push("C"+(p+s)+","+(h+a)+" "+i+","+r+" "+i+","+r),e.push("C"+i+","+r+" "+(n+s)+","+(o+a)+" "+n+","+o)}e.push("z"),this.bubbleArrow_.setAttribute("d",e.join(" "))},t.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},t.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&t.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&t.browserEvents.unbind(this.onMouseDownResizeWrapper_),t.Bubble.unbindDragEvents_(),t.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},t.Bubble.prototype.moveDuringDrag=function(t,e){t?t.translateSurface(e.x,e.y):this.moveTo(e.x,e.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-e.x-this.width_:e.x-this.anchorXY_.x,this.relativeTop_=e.y-this.anchorXY_.y,this.renderArrow_()},t.Bubble.prototype.getRelativeToSurfaceXY=function(){return new t.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},t.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},t.Bubble.textToDom=function(e){var n=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:t.Bubble.BORDER_WIDTH},null);e=e.split("\n");for(var o=0;o<e.length;o++){var i=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{dy:"1em",x:t.Bubble.BORDER_WIDTH},n),r=document.createTextNode(e[o]);i.appendChild(r)}return n},t.Bubble.createNonEditableBubble=function(e,n,o){if((o=new t.Bubble(n.workspace,e,n.pathObject.svgPath,o,null,null)).setSvgId(n.id),n.RTL){n=e.getBBox().width;for(var i,r=0;i=e.childNodes[r];r++)i.setAttribute("text-anchor","end"),i.setAttribute("x",n+t.Bubble.BORDER_WIDTH)}return o},t.Events.CommentBase=function(e){this.commentId=(this.isBlank="undefined"==typeof e)?"":e.id,this.workspaceId=this.isBlank?"":e.workspace.id,this.group=t.Events.getGroup(),this.recordUndo=t.Events.recordUndo},t.utils.object.inherits(t.Events.CommentBase,t.Events.Abstract),t.Events.CommentBase.prototype.toJson=function(){var e=t.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(e.commentId=this.commentId),e},t.Events.CommentBase.prototype.fromJson=function(e){t.Events.CommentBase.superClass_.fromJson.call(this,e),this.commentId=e.commentId},t.Events.CommentChange=function(e,n,o){t.Events.CommentChange.superClass_.constructor.call(this,e),e&&(this.oldContents_="undefined"==typeof n?"":n,this.newContents_="undefined"==typeof o?"":o)},t.utils.object.inherits(t.Events.CommentChange,t.Events.CommentBase),t.Events.CommentChange.prototype.type=t.Events.COMMENT_CHANGE,t.Events.CommentChange.prototype.toJson=function(){var e=t.Events.CommentChange.superClass_.toJson.call(this);return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e},t.Events.CommentChange.prototype.fromJson=function(e){t.Events.CommentChange.superClass_.fromJson.call(this,e),this.oldContents_=e.oldContents,this.newContents_=e.newContents},t.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},t.Events.CommentChange.prototype.run=function(t){var e=this.getEventWorkspace_().getCommentById(this.commentId);e?e.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},t.Events.CommentCreate=function(e){t.Events.CommentCreate.superClass_.constructor.call(this,e),e&&(this.xml=e.toXmlWithXY())},t.utils.object.inherits(t.Events.CommentCreate,t.Events.CommentBase),t.Events.CommentCreate.prototype.type=t.Events.COMMENT_CREATE,t.Events.CommentCreate.prototype.toJson=function(){var e=t.Events.CommentCreate.superClass_.toJson.call(this);return e.xml=t.Xml.domToText(this.xml),e},t.Events.CommentCreate.prototype.fromJson=function(e){t.Events.CommentCreate.superClass_.fromJson.call(this,e),this.xml=t.Xml.textToDom(e.xml)},t.Events.CommentCreate.prototype.run=function(e){t.Events.CommentCreateDeleteHelper(this,e)},t.Events.CommentCreateDeleteHelper=function(e,n){var o=e.getEventWorkspace_();n?((n=t.utils.xml.createElement("xml")).appendChild(e.xml),t.Xml.domToWorkspace(n,o)):(o=o.getCommentById(e.commentId))?o.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+e.commentId)},t.Events.CommentDelete=function(e){t.Events.CommentDelete.superClass_.constructor.call(this,e),e&&(this.xml=e.toXmlWithXY())},t.utils.object.inherits(t.Events.CommentDelete,t.Events.CommentBase),t.Events.CommentDelete.prototype.type=t.Events.COMMENT_DELETE,t.Events.CommentDelete.prototype.toJson=function(){return t.Events.CommentDelete.superClass_.toJson.call(this)},t.Events.CommentDelete.prototype.fromJson=function(e){t.Events.CommentDelete.superClass_.fromJson.call(this,e)},t.Events.CommentDelete.prototype.run=function(e){t.Events.CommentCreateDeleteHelper(this,!e)},t.Events.CommentMove=function(e){t.Events.CommentMove.superClass_.constructor.call(this,e),e&&(this.comment_=e,this.oldCoordinate_=e.getXY(),this.newCoordinate_=null)},t.utils.object.inherits(t.Events.CommentMove,t.Events.CommentBase),t.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},t.Events.CommentMove.prototype.type=t.Events.COMMENT_MOVE,t.Events.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},t.Events.CommentMove.prototype.toJson=function(){var e=t.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(e.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),e},t.Events.CommentMove.prototype.fromJson=function(e){if(t.Events.CommentMove.superClass_.fromJson.call(this,e),e.oldCoordinate){var n=e.oldCoordinate.split(",");this.oldCoordinate_=new t.utils.Coordinate(Number(n[0]),Number(n[1]))}e.newCoordinate&&(n=e.newCoordinate.split(","),this.newCoordinate_=new t.utils.Coordinate(Number(n[0]),Number(n[1])))},t.Events.CommentMove.prototype.isNull=function(){return t.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},t.Events.CommentMove.prototype.run=function(t){var e=this.getEventWorkspace_().getCommentById(this.commentId);if(e){t=t?this.newCoordinate_:this.oldCoordinate_;var n=e.getXY();e.moveBy(t.x-n.x,t.y-n.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_CREATE,t.Events.CommentCreate),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_CHANGE,t.Events.CommentChange),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_MOVE,t.Events.CommentMove),t.registry.register(t.registry.Type.EVENT,t.Events.COMMENT_DELETE,t.Events.CommentDelete),t.BubbleDragger=function(e,n){this.draggingBubble_=e,this.workspace_=n,this.deleteArea_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=t.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},t.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},t.BubbleDragger.prototype.startBubbleDrag=function(){t.Events.getGroup()||t.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0);var e=this.workspace_.getToolbox();if(e&&"function"==typeof e.addStyle){var n=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";e.addStyle(n)}},t.BubbleDragger.prototype.dragBubble=function(e,n){n=this.pixelsToWorkspaceUnits_(n),n=t.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),this.draggingBubble_.isDeletable()&&(this.deleteArea_=this.workspace_.isDeleteArea(e),this.updateCursorDuringBubbleDrag_())},t.BubbleDragger.prototype.maybeDeleteBubble_=function(){var t=this.workspace_.trashcan;return this.wouldDeleteBubble_?(t&&setTimeout(t.closeLid.bind(t),100),this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):t&&t.closeLid(),this.wouldDeleteBubble_},t.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.wouldDeleteBubble_=this.deleteArea_!=t.DELETE_AREA_NONE;var e=this.workspace_.trashcan;this.wouldDeleteBubble_?(this.draggingBubble_.setDeleteStyle(!0),this.deleteArea_==t.DELETE_AREA_TRASH&&e&&e.setLidOpen(!0)):(this.draggingBubble_.setDeleteStyle(!1),e&&e.setLidOpen(!1))},t.BubbleDragger.prototype.endBubbleDrag=function(e,n){this.dragBubble(e,n),e=this.pixelsToWorkspaceUnits_(n),e=t.utils.Coordinate.sum(this.startXY_,e),this.draggingBubble_.moveTo(e.x,e.y),this.maybeDeleteBubble_()||(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),(e=this.workspace_.getToolbox())&&"function"==typeof e.removeStyle&&(n=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",e.removeStyle(n)),t.Events.setGroup(!1)},t.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var e=new(t.Events.get(t.Events.COMMENT_MOVE))(this.draggingBubble_);e.setOldCoordinate(this.startXY_),e.recordNew(),t.Events.fire(e)}},t.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new t.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},t.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},t.Events.Click=function(e,n,o){t.Events.Click.superClass_.constructor.call(this,e?e.workspace.id:n),this.blockId=e?e.id:null,this.targetType=o},t.utils.object.inherits(t.Events.Click,t.Events.UiBase),t.Events.Click.prototype.type=t.Events.CLICK,t.Events.Click.prototype.toJson=function(){var e=t.Events.Click.superClass_.toJson.call(this);return e.targetType=this.targetType,this.blockId&&(e.blockId=this.blockId),e},t.Events.Click.prototype.fromJson=function(e){t.Events.Click.superClass_.fromJson.call(this,e),this.targetType=e.targetType,this.blockId=e.blockId},t.registry.register(t.registry.Type.EVENT,t.Events.CLICK,t.Events.Click),t.WorkspaceDragger=function(e){this.workspace_=e,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new t.utils.Coordinate(e.scrollX,e.scrollY)},t.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},t.WorkspaceDragger.prototype.startDrag=function(){t.selected&&t.selected.unselect(),this.workspace_.setupDragSurface()},t.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},t.WorkspaceDragger.prototype.drag=function(e){if(e=t.utils.Coordinate.sum(this.startScrollXY_,e),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(e.x,e.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(e.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,e.y)}},t.Gesture=function(e,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new t.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=e,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!t.DRAG_STACK},t.Gesture.prototype.dispose=function(){t.Touch.clearTouchIdentifier(),t.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&t.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&t.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},t.Gesture.prototype.updateFromEvent_=function(e){var n=new t.utils.Coordinate(e.clientX,e.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),t.longStop_()),this.mostRecentEvent_=e},t.Gesture.prototype.updateDragDelta_=function(e){return this.currentDragDeltaXY_=t.utils.Coordinate.difference(e,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=t.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?t.FLYOUT_DRAG_RADIUS:t.DRAG_RADIUS))},t.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_))&&!(this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_))&&(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),t.Events.getGroup()||t.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),!0)},t.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},t.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},t.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new t.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},t.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},t.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new t.BlockDragger(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startBlockDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_)},t.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new t.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},t.Gesture.prototype.doStart=function(e){t.utils.isTargetInput(e)?this.cancel():(this.hasStarted_=!0,t.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),t.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=e,t.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),t.utils.isRightButton(e)?this.handleRightClick(e):("touchstart"!=e.type.toLowerCase()&&"pointerdown"!=e.type.toLowerCase()||"mouse"==e.pointerType||t.longStart(e,this),this.mouseDownXY_=new t.utils.Coordinate(e.clientX,e.clientY),this.healStack_=e.altKey||e.ctrlKey||e.metaKey,this.bindMouseEvents(e)))},t.Gesture.prototype.bindMouseEvents=function(e){this.onMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),e.preventDefault(),e.stopPropagation()},t.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},t.Gesture.prototype.handleUp=function(e){this.updateFromEvent_(e),t.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(e,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(e,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(e),e.preventDefault(),e.stopPropagation(),this.dispose())},t.Gesture.prototype.cancel=function(){this.isEnding_||(t.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},t.Gesture.prototype.handleRightClick=function(e){this.targetBlock_?(this.bringBlockToFront_(),t.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(e)):this.startBubble_?this.startBubble_.showContextMenu(e):this.startWorkspace_&&!this.flyout_&&(t.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()},t.Gesture.prototype.handleWsStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(e),this.mostRecentEvent_=t,this.doStart(t)},t.Gesture.prototype.fireWorkspaceClick_=function(e){t.Events.fire(new(t.Events.get(t.Events.CLICK))(null,e.id,"workspace"))},t.Gesture.prototype.handleFlyoutStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(e),this.handleWsStart(t,e.getWorkspace())},t.Gesture.prototype.handleBlockStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(e),this.mostRecentEvent_=t},t.Gesture.prototype.handleBubbleStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(e),this.mostRecentEvent_=t},t.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},t.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},t.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(t.Events.getGroup()||t.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var e=new(t.Events.get(t.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");t.Events.fire(e)}this.bringBlockToFront_(),t.Events.setGroup(!1)},t.Gesture.prototype.doWorkspaceClick_=function(e){e=this.creatorWorkspace_,t.selected&&t.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||e)},t.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},t.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},t.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},t.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},t.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},t.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},t.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},t.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},t.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},t.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},t.Gesture.prototype.isWorkspaceClick_=function(){return!this.startBlock_&&!this.startBubble_&&!this.startField_&&!this.hasExceededDragRadius_},t.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},t.Gesture.prototype.hasStarted=function(){return this.hasStarted_},t.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},t.Gesture.inProgress=function(){for(var e,n=t.Workspace.getAll(),o=0;e=n[o];o++)if(e.currentGesture_)return!0;return!1},t.Field=function(e,n,o){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new t.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,o&&this.configure_(o),this.setValue(e),n&&this.setValidator(n)},t.Field.prototype.DEFAULT_VALUE=null,t.Field.prototype.name=void 0,t.Field.prototype.disposed=!1,t.Field.prototype.maxDisplayLength=50,t.Field.prototype.sourceBlock_=null,t.Field.prototype.isDirty_=!0,t.Field.prototype.visible_=!0,t.Field.prototype.clickTarget_=null,t.Field.NBSP="\xa0",t.Field.prototype.EDITABLE=!0,t.Field.prototype.SERIALIZABLE=!1,t.Field.prototype.configure_=function(e){var n=e.tooltip;"string"==typeof n&&(n=t.utils.replaceMessageReferences(e.tooltip)),n&&this.setTooltip(n)},t.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=t},t.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},t.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},t.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},t.Field.prototype.initModel=function(){},t.Field.prototype.createBorderRect_=function(){this.borderRect_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},t.Field.prototype.createTextElement_=function(){this.textElement_=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},t.Field.prototype.bindEvents_=function(){t.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=t.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},t.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},t.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},t.Field.prototype.dispose=function(){t.DropDownDiv.hideIfOwner(this),t.WidgetDiv.hideIfOwner(this),t.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&t.browserEvents.unbind(this.mouseDownWrapper_),t.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},t.Field.prototype.updateEditable=function(){var e=this.fieldGroup_;this.EDITABLE&&e&&(this.sourceBlock_.isEditable()?(t.utils.dom.addClass(e,"blocklyEditableText"),t.utils.dom.removeClass(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(t.utils.dom.addClass(e,"blocklyNonEditableText"),t.utils.dom.removeClass(e,"blocklyEditableText"),e.style.cursor=""))},t.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"===typeof this.showEditor_},t.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},t.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},t.Field.prototype.isVisible=function(){return this.visible_},t.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var e=this.getSvgRoot();e&&(e.style.display=t?"block":"none")}},t.Field.prototype.setValidator=function(t){this.validator_=t},t.Field.prototype.getValidator=function(){return this.validator_},t.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},t.Field.prototype.applyColour=function(){},t.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},t.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},t.Field.prototype.updateSize_=function(e){var n=this.getConstants(),o=2*(e=void 0!=e?e:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),i=n.FIELD_TEXT_HEIGHT,r=0;this.textElement_&&(o+=r=t.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(i=Math.max(i,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=i,this.size_.width=o,this.positionTextElement_(e,r),this.positionBorderRect_()},t.Field.prototype.positionTextElement_=function(t,e){if(this.textElement_){var n=this.getConstants(),o=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-e-t:t),this.textElement_.setAttribute("y",n.FIELD_TEXT_BASELINE_CENTER?o:o-n.FIELD_TEXT_HEIGHT/2+n.FIELD_TEXT_BASELINE)}},t.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},t.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new t.utils.Size(0,0)},t.Field.prototype.getScaledBBox=function(){if(this.borderRect_)e=this.borderRect_.getBoundingClientRect(),o=t.utils.style.getPageOffset(this.borderRect_),i=e.width,e=e.height;else{var e=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,o=this.getAbsoluteXY_(),i=e.width*n;e=e.height*n,t.utils.userAgent.GECKO?(o.x+=1.5*n,o.y+=1.5*n):t.utils.userAgent.EDGE||t.utils.userAgent.IE||(o.x-=.5*n,o.y-=.5*n),i+=1*n,e+=1*n}return new t.utils.Rect(o.y,o.y+e,o.x,o.x+i)},t.Field.prototype.getDisplayText_=function(){var e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"\u2026"),e=e.replace(/\s/g,t.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="\u200f"),e):t.Field.NBSP},t.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},t.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},t.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},t.Field.prototype.setValue=function(e){if(null!==e){var n=this.doClassValidation_(e);if(!((e=this.processValidation_(e,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,e),(e=this.processValidation_(e,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var o=this.getValue();o===e?this.doValueUpdate_(e):(n&&t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(n,"field",this.name||null,o,e)),this.doValueUpdate_(e),this.isDirty_&&this.forceRerender())}}}},t.Field.prototype.processValidation_=function(t,e){return null===e?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==e&&(t=e),t)},t.Field.prototype.getValue=function(){return this.value_},t.Field.prototype.doClassValidation_=function(t){return null===t||void 0===t?null:t},t.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},t.Field.prototype.doValueInvalid_=function(t){},t.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},t.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var e=this.getClickTarget_();e?e.tooltip=t:this.tooltip_=t},t.Field.prototype.getTooltip=function(){var e=this.getClickTarget_();return e?t.Tooltip.getTooltipOfObject(e):t.Tooltip.getTooltipOfObject({tooltip:this.tooltip_})},t.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},t.Field.prototype.getAbsoluteXY_=function(){return t.utils.style.getPageOffset(this.getClickTarget_())},t.Field.prototype.referencesVariables=function(){return!1},t.Field.prototype.getParentInput=function(){for(var t=null,e=this.sourceBlock_,n=e.inputList,o=0;o<e.inputList.length;o++)for(var i=n[o],r=i.fieldRow,s=0;s<r.length;s++)if(r[s]===this){t=i;break}return t},t.Field.prototype.getFlipRtl=function(){return!1},t.Field.prototype.isTabNavigable=function(){return!1},t.Field.prototype.onShortcut=function(t){return!1},t.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},t.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},t.Field.prototype.updateMarkers_=function(){var e=this.sourceBlock_.workspace;e.keyboardAccessibilityMode&&this.cursorSvg_&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg_&&e.getMarker(t.MarkerManager.LOCAL_MARKER).draw()},t.FieldLabel=function(e,n,o){this.class_=null,t.FieldLabel.superClass_.constructor.call(this,e,null,o),o||(this.class_=n||null)},t.utils.object.inherits(t.FieldLabel,t.Field),t.FieldLabel.prototype.DEFAULT_VALUE="",t.FieldLabel.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldLabel(n,void 0,e)},t.FieldLabel.prototype.EDITABLE=!1,t.FieldLabel.prototype.configure_=function(e){t.FieldLabel.superClass_.configure_.call(this,e),this.class_=e.class},t.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&t.utils.dom.addClass(this.textElement_,this.class_)},t.FieldLabel.prototype.doClassValidation_=function(t){return null===t||void 0===t?null:String(t)},t.FieldLabel.prototype.setClass=function(e){this.textElement_&&(this.class_&&t.utils.dom.removeClass(this.textElement_,this.class_),e&&t.utils.dom.addClass(this.textElement_,e)),this.class_=e},t.fieldRegistry.register("field_label",t.FieldLabel),t.Input=function(e,n,o,i){if(e!=t.inputTypes.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=e,this.name=n,this.sourceBlock_=o,this.connection=i,this.fieldRow=[]},t.Input.prototype.align=t.constants.ALIGN.LEFT,t.Input.prototype.visible_=!0,t.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},t.Input.prototype.appendField=function(t,e){return this.insertFieldAt(this.fieldRow.length,t,e),this},t.Input.prototype.insertFieldAt=function(e,n,o){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return n||""==n&&o?("string"==typeof n&&(n=t.fieldRegistry.fromJson({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=o,n.setVisible(this.isVisible()),n.prefixField&&(e=this.insertFieldAt(e,n.prefixField)),this.fieldRow.splice(e,0,n),++e,n.suffixField&&(e=this.insertFieldAt(e,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),e):e},t.Input.prototype.removeField=function(t,e){for(var n,o=0;n=this.fieldRow[o];o++)if(n.name===t)return n.dispose(),this.fieldRow.splice(o,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(e)return!1;throw Error('Field "'+t+'" not found.')},t.Input.prototype.isVisible=function(){return this.visible_},t.Input.prototype.setVisible=function(t){var e=[];if(this.visible_==t)return e;this.visible_=t;for(var n,o=0;n=this.fieldRow[o];o++)n.setVisible(t);return this.connection&&(this.connection=this.connection,t?e=this.connection.startTrackingAll():this.connection.stopTrackingAll(),o=this.connection.targetBlock())&&(o.getSvgRoot().style.display=t?"block":"none"),e},t.Input.prototype.markDirty=function(){for(var t,e=0;t=this.fieldRow[e];e++)t.markDirty()},t.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},t.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},t.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},t.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},t.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},t.Input.prototype.dispose=function(){for(var t,e=0;t=this.fieldRow[e];e++)t.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},t.Block=function(e,n,o){if(t.Generator&&"undefined"!=typeof t.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=o&&!e.getBlockById(o)?o:t.utils.genUid(),e.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new t.utils.Size(160,80)},this.xy_=new t.utils.Coordinate(0,0),this.workspace=e,this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(o=t.Blocks[n])||"object"!=typeof o)throw TypeError("Unknown block type: "+n);t.utils.object.mixin(this,o)}e.addTopBlock(this),e.addTypedBlock(this),(e=t.Events.getGroup())||t.Events.setGroup(!0),n=t.Events.recordUndo;try{"function"==typeof this.init&&(t.Events.recordUndo=!1,this.init(),t.Events.recordUndo=n),t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(this))}finally{e||t.Events.setGroup(!1),t.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},t.Block.COLLAPSED_INPUT_NAME=t.constants.COLLAPSED_INPUT_NAME,t.Block.COLLAPSED_FIELD_NAME=t.constants.COLLAPSED_FIELD_NAME,t.Block.prototype.data=null,t.Block.prototype.disposed=!1,t.Block.prototype.hue_=null,t.Block.prototype.colour_="#000000",t.Block.prototype.styleName_=null,t.Block.prototype.dispose=function(e){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(e),t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_DELETE))(this)),t.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),t.selected==this&&(t.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var o;o=this.inputList[n];n++)o.dispose();this.inputList.length=0;var i,r=this.getConnections_(!0);for(n=0;i=r[n];n++)i.dispose()}finally{t.Events.enable(),this.disposed=!0}}},t.Block.prototype.initModel=function(){for(var t,e=0;t=this.inputList[e];e++)for(var n,o=0;n=t.fieldRow[o];o++)n.initModel&&n.initModel()},t.Block.prototype.unplug=function(t){this.outputConnection?this.unplugFromRow_(t):this.previousConnection&&this.unplugFromStack_(t)},t.Block.prototype.unplugFromRow_=function(t){var e=null;this.outputConnection.isConnected()&&(e=this.outputConnection.targetConnection,this.outputConnection.disconnect()),e&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,e,!1)?e.connect(t):t.onFailedConnect(e))},t.Block.prototype.getOnlyValueConnection_=function(){for(var e=null,n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;if(o&&o.type==t.connectionTypes.INPUT_VALUE&&o.targetConnection){if(e)return null;e=o}}return e},t.Block.prototype.unplugFromStack_=function(t){var e=null;this.previousConnection.isConnected()&&(e=this.previousConnection.targetConnection,this.previousConnection.disconnect());var n=this.getNextBlock();t&&n&&!n.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),e&&this.workspace.connectionChecker.canConnect(e,t,!1)&&e.connect(t))},t.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var e,n=0;e=this.inputList[n];n++)e.connection&&t.push(e.connection);return t},t.Block.prototype.lastConnectionInStack=function(){for(var t=this.nextConnection;t;){var e=t.targetBlock();if(!e)return t;t=e.nextConnection}return null},t.Block.prototype.bumpNeighbours=function(){},t.Block.prototype.getParent=function(){return this.parentBlock_},t.Block.prototype.getInputWithBlock=function(t){for(var e,n=0;e=this.inputList[n];n++)if(e.connection&&e.connection.targetBlock()==t)return e;return null},t.Block.prototype.getSurroundParent=function(){var t=this;do{var e=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==e);return t},t.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},t.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},t.Block.prototype.getFirstStatementConnection=function(){for(var e,n=0;e=this.inputList[n];n++)if(e.connection&&e.connection.type==t.connectionTypes.NEXT_STATEMENT)return e.connection;return null},t.Block.prototype.getRootBlock=function(){var t=this;do{var e=t;t=e.parentBlock_}while(t);return e},t.Block.prototype.getTopStackBlock=function(){var t=this;do{var e=t.getPreviousBlock()}while(e&&e.getNextBlock()==t&&(t=e));return t},t.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var e,n=0;e=this.inputList[n];n++)e.connection&&(e=e.connection.targetBlock())&&t.push(e);return(n=this.getNextBlock())&&t.push(n),t},t.Block.prototype.setParent=function(e){if(e!=this.parentBlock_){if(this.parentBlock_){if(t.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}},t.Block.prototype.getDescendants=function(t){for(var e,n=[this],o=this.getChildren(t),i=0;e=o[i];i++)n.push.apply(n,e.getDescendants(t));return n},t.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setDeletable=function(t){this.deletable_=t},t.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setMovable=function(t){this.movable_=t},t.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(t.utils.getBlockTypeCounts(this,!0))},t.Block.prototype.isShadow=function(){return this.isShadow_},t.Block.prototype.setShadow=function(t){this.isShadow_=t},t.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},t.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},t.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},t.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var e;e=this.inputList[t];t++)for(var n,o=0;n=e.fieldRow[o];o++)n.updateEditable()},t.Block.prototype.isDisposed=function(){return this.disposed},t.Block.prototype.getMatchingConnection=function(t,e){var n=this.getConnections_(!0);if(t=t.getConnections_(!0),n.length!=t.length)throw Error("Connection lists did not match in length.");for(var o=0;o<t.length;o++)if(t[o]==e)return n[o];return null},t.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},t.Block.prototype.setTooltip=function(t){this.tooltip=t},t.Block.prototype.getTooltip=function(){return t.Tooltip.getTooltipOfObject(this)},t.Block.prototype.getColour=function(){return this.colour_},t.Block.prototype.getStyleName=function(){return this.styleName_},t.Block.prototype.getHue=function(){return this.hue_},t.Block.prototype.setColour=function(e){e=t.utils.parseBlockColour(e),this.hue_=e.hue,this.colour_=e.hex},t.Block.prototype.setStyle=function(t){this.styleName_=t},t.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},t.Block.prototype.getField=function(t){for(var e,n=0;e=this.inputList[n];n++)for(var o,i=0;o=e.fieldRow[i];i++)if(o.name==t)return o;return null},t.Block.prototype.getVars=function(){for(var t,e=[],n=0;t=this.inputList[n];n++)for(var o,i=0;o=t.fieldRow[i];i++)o.referencesVariables()&&e.push(o.getValue());return e},t.Block.prototype.getVarModels=function(){for(var t,e=[],n=0;t=this.inputList[n];n++)for(var o,i=0;o=t.fieldRow[i];i++)o.referencesVariables()&&(o=this.workspace.getVariableById(o.getValue()))&&e.push(o);return e},t.Block.prototype.updateVarName=function(t){for(var e,n=0;e=this.inputList[n];n++)for(var o,i=0;o=e.fieldRow[i];i++)o.referencesVariables()&&t.getId()==o.getValue()&&o.refreshVariableName()},t.Block.prototype.renameVarById=function(t,e){for(var n,o=0;n=this.inputList[o];o++)for(var i,r=0;i=n.fieldRow[r];r++)i.referencesVariables()&&t==i.getValue()&&i.setValue(e)},t.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},t.Block.prototype.setFieldValue=function(t,e){var n=this.getField(e);if(!n)throw Error('Field "'+e+'" not found.');n.setValue(t)},t.Block.prototype.setPreviousStatement=function(e,n){if(e){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(t.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},t.Block.prototype.setNextStatement=function(e,n){if(e)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(t.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},t.Block.prototype.setOutput=function(e,n){if(e){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(t.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},t.Block.prototype.setInputsInline=function(e){this.inputsInline!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)},t.Block.prototype.getInputsInline=function(){if(void 0!=this.inputsInline)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==t.inputTypes.DUMMY&&this.inputList[e].type==t.inputTypes.DUMMY)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==t.inputTypes.VALUE&&this.inputList[e].type==t.inputTypes.DUMMY)return!0;return!1},t.Block.prototype.setOutputShape=function(t){this.outputShape_=t},t.Block.prototype.getOutputShape=function(){return this.outputShape_},t.Block.prototype.isEnabled=function(){return!this.disabled},t.Block.prototype.setEnabled=function(e){this.isEnabled()!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!e)),this.disabled=!e)},t.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},t.Block.prototype.isCollapsed=function(){return this.collapsed_},t.Block.prototype.setCollapsed=function(e){this.collapsed_!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)},t.Block.prototype.toString=function(e,n){function o(t){var e=t.getCheck();return!e&&t.targetConnection&&(e=t.targetConnection.getCheck()),!!e&&(-1!=e.indexOf("Boolean")||-1!=e.indexOf("Number"))}function i(){a&&a.getType()==l.getType()&&a.getLocation()==l.getLocation()&&(a=null)}var r=[];n=n||"?";var s=t.ASTNode.NAVIGATE_ALL_FIELDS;t.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var a=t.ASTNode.createBlockNode(this),l=a;a;){switch(a.getType()){case t.ASTNode.types.INPUT:var c=a.getLocation();a.in()?o(c)&&r.push("("):r.push(n);break;case t.ASTNode.types.FIELD:(c=a.getLocation()).name!=t.constants.COLLAPSED_FIELD_NAME&&r.push(c.getText())}if(!(a=(c=a).in()||c.next())){for(a=c.out(),i();a&&!a.next();)a=a.out(),i(),a&&a.getType()==t.ASTNode.types.INPUT&&o(a.getLocation())&&r.push(")");a&&(a=a.next())}}for(t.ASTNode.NAVIGATE_ALL_FIELDS=s,n=2,s=r.length;n<s;n++)"("==r[n-2]&&")"==r[n]&&(r[n-2]=r[n-1],r.splice(n-1,2),s-=2);return r=r.join(" ").replace(/(\() | (\))/gim,"$1$2").trim()||"???",e&&r.length>e&&(r=r.substring(0,e-3)+"..."),r},t.Block.prototype.appendValueInput=function(e){return this.appendInput_(t.inputTypes.VALUE,e)},t.Block.prototype.appendStatementInput=function(e){return this.appendInput_(t.inputTypes.STATEMENT,e)},t.Block.prototype.appendDummyInput=function(e){return this.appendInput_(t.inputTypes.DUMMY,e||"")},t.Block.prototype.jsonInit=function(e){var n=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(n+"Must not have both a colour and a style.");e.style?this.jsonInitStyle_(e,n):this.jsonInitColour_(e,n);for(var o=0;void 0!==e["message"+o];)this.interpolate_(e["message"+o],e["args"+o]||[],e["lastDummyAlign"+o],n),o++;if(void 0!==e.inputsInline&&this.setInputsInline(e.inputsInline),void 0!==e.output&&this.setOutput(!0,e.output),void 0!==e.outputShape&&this.setOutputShape(e.outputShape),void 0!==e.previousStatement&&this.setPreviousStatement(!0,e.previousStatement),void 0!==e.nextStatement&&this.setNextStatement(!0,e.nextStatement),void 0!==e.tooltip&&(o=e.tooltip,o=t.utils.replaceMessageReferences(o),this.setTooltip(o)),void 0!==e.enableContextMenu&&(o=e.enableContextMenu,this.contextMenu=!!o),void 0!==e.helpUrl&&(o=e.helpUrl,o=t.utils.replaceMessageReferences(o),this.setHelpUrl(o)),"string"==typeof e.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),void 0!==e.mutator&&t.Extensions.apply(e.mutator,this,!0),Array.isArray(e.extensions))for(e=e.extensions,n=0;n<e.length;++n)t.Extensions.apply(e[n],this,!1)},t.Block.prototype.jsonInitColour_=function(t,e){if("colour"in t)if(void 0===t.colour)console.warn(e+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(n){console.warn(e+"Illegal colour value: ",t)}}},t.Block.prototype.jsonInitStyle_=function(t,e){t=t.style;try{this.setStyle(t)}catch(n){console.warn(e+"Style does not exist: ",t)}},t.Block.prototype.mixin=function(e,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var o in n=[],e)void 0!==this[o]&&n.push(o);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}t.utils.object.mixin(this,e)},t.Block.prototype.interpolate_=function(e,n,o,i){e=t.utils.tokenizeInterpolation(e),this.validateTokens_(e,n.length),n=this.interpolateArguments_(e,n,o),o=[],e=0;for(var r;r=n[e];e++)if(this.isInputKeyword_(r.type)){if(r=this.inputFromJson_(r,i)){for(var s,a=0;s=o[a];a++)r.appendField(s[0],s[1]);o.length=0}}else(a=this.fieldFromJson_(r))&&o.push([a,r.name])},t.Block.prototype.validateTokens_=function(t,e){for(var n=[],o=0,i=0;i<t.length;i++){var r=t[i];if("number"==typeof r){if(1>r||r>e)throw Error('Block "'+this.type+'": Message index %'+r+" out of range.");if(n[r])throw Error('Block "'+this.type+'": Message index %'+r+" duplicated.");n[r]=!0,o++}}if(o!=e)throw Error('Block "'+this.type+'": Message does not reference all '+e+" arg(s).")},t.Block.prototype.interpolateArguments_=function(t,e,n){for(var o=[],i=0;i<t.length;i++){var r=t[i];"number"==typeof r&&(r=e[r-1]),("string"!=typeof r||(r=this.stringToFieldJson_(r)))&&o.push(r)}return(t=o.length)&&!this.isInputKeyword_(o[t-1].type)&&(t={type:"input_dummy"},n&&(t.align=n),o.push(t)),o},t.Block.prototype.fieldFromJson_=function(e){var n=t.fieldRegistry.fromJson(e);return!n&&e.alt?"string"==typeof e.alt?(e=this.stringToFieldJson_(e.alt))?this.fieldFromJson_(e):null:this.fieldFromJson_(e.alt):n},t.Block.prototype.inputFromJson_=function(e,n){var o={LEFT:t.constants.ALIGN.LEFT,RIGHT:t.constants.ALIGN.RIGHT,CENTRE:t.constants.ALIGN.CENTRE,CENTER:t.constants.ALIGN.CENTRE},i=null;switch(e.type){case"input_value":i=this.appendValueInput(e.name);break;case"input_statement":i=this.appendStatementInput(e.name);break;case"input_dummy":i=this.appendDummyInput(e.name)}return i?(e.check&&i.setCheck(e.check),e.align&&(void 0===(o=o[e.align.toUpperCase()])?console.warn(n+"Illegal align value: ",e.align):i.setAlign(o)),i):null},t.Block.prototype.isInputKeyword_=function(t){return"input_value"==t||"input_statement"==t||"input_dummy"==t},t.Block.prototype.stringToFieldJson_=function(t){return(t=t.trim())?{type:"field_label",text:t}:null},t.Block.prototype.appendInput_=function(e,n){var o=null;return e!=t.inputTypes.VALUE&&e!=t.inputTypes.STATEMENT||(o=this.makeConnection_(e)),e==t.inputTypes.STATEMENT&&this.statementInputCount++,e=new t.Input(e,n,this,o),this.inputList.push(e),e},t.Block.prototype.moveInputBefore=function(t,e){if(t!=e){for(var n,o=-1,i=e?-1:this.inputList.length,r=0;n=this.inputList[r];r++)if(n.name==t){if(o=r,-1!=i)break}else if(e&&n.name==e&&(i=r,-1!=o))break;if(-1==o)throw Error('Named input "'+t+'" not found.');if(-1==i)throw Error('Reference input "'+e+'" not found.');this.moveNumberedInputBefore(o,i)}},t.Block.prototype.moveNumberedInputBefore=function(t,e){if(t==e)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(e>this.inputList.length)throw RangeError("Reference input "+e+" out of bounds.");var n=this.inputList[t];this.inputList.splice(t,1),t<e&&e--,this.inputList.splice(e,0,n)},t.Block.prototype.removeInput=function(e,n){for(var o,i=0;o=this.inputList[i];i++)if(o.name==e)return o.type==t.inputTypes.STATEMENT&&this.statementInputCount--,o.dispose(),this.inputList.splice(i,1),!0;if(n)return!1;throw Error("Input not found: "+e)},t.Block.prototype.getInput=function(t){for(var e,n=0;e=this.inputList[n];n++)if(e.name==t)return e;return null},t.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},t.Block.prototype.getCommentText=function(){return this.commentModel.text},t.Block.prototype.setCommentText=function(e){this.commentModel.text!=e&&(t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,e)),this.comment=this.commentModel.text=e)},t.Block.prototype.setWarningText=function(t,e){},t.Block.prototype.setMutator=function(t){},t.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},t.Block.prototype.moveBy=function(e,n){if(this.parentBlock_)throw Error("Block has parent.");var o=new(t.Events.get(t.Events.BLOCK_MOVE))(this);this.xy_.translate(e,n),o.recordNew(),t.Events.fire(o)},t.Block.prototype.makeConnection_=function(e){return new t.Connection(this,e)},t.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var e,n=0;e=this.inputList[n];n++)if(e.connection&&(!(e=e.connection.targetBlock())||!e.allInputsFilled(t)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(t)},t.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},t.blockRendering.IPathObject=function(t,e){},t.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},t.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},t.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},t.Menu.prototype.render=function(e){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&t.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var o,i=0;o=this.menuItems_[i];i++)n.appendChild(o.createDom());this.mouseOverHandler_=t.browserEvents.conditionalBind(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=t.browserEvents.conditionalBind(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=t.browserEvents.conditionalBind(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=t.browserEvents.conditionalBind(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=t.browserEvents.conditionalBind(n,"keydown",this,this.handleKeyEvent_),e.appendChild(n)},t.Menu.prototype.getElement=function(){return this.element_},t.Menu.prototype.focus=function(){var e=this.getElement();e&&(e.focus({preventScroll:!0}),t.utils.dom.addClass(e,"blocklyFocused"))},t.Menu.prototype.blur_=function(){var e=this.getElement();e&&(e.blur(),t.utils.dom.removeClass(e,"blocklyFocused"))},t.Menu.prototype.setRole=function(t){this.roleName_=t},t.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(t.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(t.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(t.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(t.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(t.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var e,n=0;e=this.menuItems_[n];n++)e.dispose();this.element_=null},t.Menu.prototype.getMenuItem_=function(e){for(var n=this.getElement();e&&e!=n;){if(t.utils.dom.hasClass(e,"blocklyMenuItem"))for(var o,i=0;o=this.menuItems_[i];i++)if(o.getElement()==e)return o;e=e.parentElement}return null},t.Menu.prototype.setHighlighted=function(e){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),e&&(e.setHighlighted(!0),this.highlightedItem_=e,n=this.getElement(),t.utils.style.scrollIntoContainerView(e.getElement(),n),t.utils.aria.setState(n,t.utils.aria.State.ACTIVEDESCENDANT,e.getId()))},t.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},t.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},t.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},t.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},t.Menu.prototype.highlightHelper_=function(t,e){t+=e;for(var n;n=this.menuItems_[t];){if(n.isEnabled()){this.setHighlighted(n);break}t+=e}},t.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!=t&&this.setHighlighted(t):this.setHighlighted(null))},t.Menu.prototype.handleClick_=function(e){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof e.clientX){var o=new t.utils.Coordinate(e.clientX,e.clientY);if(1>t.utils.Coordinate.distance(n,o))return}(e=this.getMenuItem_(e.target))&&e.performAction()},t.Menu.prototype.handleMouseEnter_=function(t){this.focus()},t.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},t.Menu.prototype.handleKeyEvent_=function(e){if(this.menuItems_.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var n=this.highlightedItem_;switch(e.keyCode){case t.utils.KeyCodes.ENTER:case t.utils.KeyCodes.SPACE:n&&n.performAction();break;case t.utils.KeyCodes.UP:this.highlightPrevious();break;case t.utils.KeyCodes.DOWN:this.highlightNext();break;case t.utils.KeyCodes.PAGE_UP:case t.utils.KeyCodes.HOME:this.highlightFirst_();break;case t.utils.KeyCodes.PAGE_DOWN:case t.utils.KeyCodes.END:this.highlightLast_();break;default:return}e.preventDefault(),e.stopPropagation()}},t.Menu.prototype.getSize=function(){var e=this.getElement(),n=t.utils.style.getSize(e);return n.height=e.scrollHeight,n},t.MenuItem=function(t,e){this.content_=t,this.value_=e,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},t.MenuItem.prototype.createDom=function(){var e=document.createElement("div");e.id=t.utils.IdGenerator.getNextUniqueId(),this.element_=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var o=document.createElement("div");o.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(o)}return o=this.content_,"string"==typeof this.content_&&(o=document.createTextNode(this.content_)),n.appendChild(o),e.appendChild(n),this.roleName_&&t.utils.aria.setRole(e,this.roleName_),t.utils.aria.setState(e,t.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),t.utils.aria.setState(e,t.utils.aria.State.DISABLED,!this.enabled_),e},t.MenuItem.prototype.dispose=function(){this.element_=null},t.MenuItem.prototype.getElement=function(){return this.element_},t.MenuItem.prototype.getId=function(){return this.element_.id},t.MenuItem.prototype.getValue=function(){return this.value_},t.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},t.MenuItem.prototype.setRole=function(t){this.roleName_=t},t.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},t.MenuItem.prototype.setChecked=function(t){this.checked_=t},t.MenuItem.prototype.setHighlighted=function(e){this.highlight_=e;var n=this.getElement();n&&this.isEnabled()&&(e?(t.utils.dom.addClass(n,"blocklyMenuItemHighlight"),t.utils.dom.addClass(n,"goog-menuitem-highlight")):(t.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),t.utils.dom.removeClass(n,"goog-menuitem-highlight")))},t.MenuItem.prototype.isEnabled=function(){return this.enabled_},t.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},t.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},t.MenuItem.prototype.onAction=function(t,e){this.actionHandler_=t.bind(e)},t.WidgetDiv={},t.WidgetDiv.owner_=null,t.WidgetDiv.dispose_=null,t.WidgetDiv.rendererClassName_="",t.WidgetDiv.themeClassName_="",t.WidgetDiv.createDom=function(){t.WidgetDiv.DIV||(t.WidgetDiv.DIV=document.createElement("div"),t.WidgetDiv.DIV.className="blocklyWidgetDiv",(t.parentContainer||document.body).appendChild(t.WidgetDiv.DIV))},t.WidgetDiv.show=function(e,n,o){t.WidgetDiv.hide(),t.WidgetDiv.owner_=e,t.WidgetDiv.dispose_=o,(e=t.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",e.style.display="block",n=t.getMainWorkspace(),t.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),t.WidgetDiv.themeClassName_=n.getTheme().getClassName(),t.utils.dom.addClass(e,t.WidgetDiv.rendererClassName_),t.utils.dom.addClass(e,t.WidgetDiv.themeClassName_)},t.WidgetDiv.hide=function(){if(t.WidgetDiv.isVisible()){t.WidgetDiv.owner_=null;var e=t.WidgetDiv.DIV;e.style.display="none",e.style.left="",e.style.top="",t.WidgetDiv.dispose_&&t.WidgetDiv.dispose_(),t.WidgetDiv.dispose_=null,e.textContent="",t.WidgetDiv.rendererClassName_&&(t.utils.dom.removeClass(e,t.WidgetDiv.rendererClassName_),t.WidgetDiv.rendererClassName_=""),t.WidgetDiv.themeClassName_&&(t.utils.dom.removeClass(e,t.WidgetDiv.themeClassName_),t.WidgetDiv.themeClassName_=""),t.getMainWorkspace().markFocused()}},t.WidgetDiv.isVisible=function(){return!!t.WidgetDiv.owner_},t.WidgetDiv.hideIfOwner=function(e){t.WidgetDiv.owner_==e&&t.WidgetDiv.hide()},t.WidgetDiv.positionInternal_=function(e,n,o){t.WidgetDiv.DIV.style.left=e+"px",t.WidgetDiv.DIV.style.top=n+"px",t.WidgetDiv.DIV.style.height=o+"px"},t.WidgetDiv.positionWithAnchor=function(e,n,o,i){var r=t.WidgetDiv.calculateY_(e,n,o);e=t.WidgetDiv.calculateX_(e,n,o,i),0>r?t.WidgetDiv.positionInternal_(e,0,o.height+r):t.WidgetDiv.positionInternal_(e,r,o.height)},t.WidgetDiv.calculateX_=function(t,e,n,o){return o?(e=Math.max(e.right-n.width,t.left),Math.min(e,t.right-n.width)):(e=Math.min(e.left,t.right-n.width),Math.max(e,t.left))},t.WidgetDiv.calculateY_=function(t,e,n){return e.bottom+n.height>=t.bottom?e.top-n.height:e.bottom},t.ContextMenu={},t.ContextMenu.currentBlock=null,t.ContextMenu.menu_=null,t.ContextMenu.show=function(e,n,o){if(t.WidgetDiv.show(t.ContextMenu,o,t.ContextMenu.dispose),n.length){var i=t.ContextMenu.populate_(n,o);t.ContextMenu.menu_=i,t.ContextMenu.position_(i,e,o),setTimeout((function(){i.focus()}),1),t.ContextMenu.currentBlock=null}else t.ContextMenu.hide()},t.ContextMenu.populate_=function(e,n){var o=new t.Menu;o.setRole(t.utils.aria.Role.MENU);for(var i,r=0;i=e[r];r++){var s=new t.MenuItem(i.text);s.setRightToLeft(n),s.setRole(t.utils.aria.Role.MENUITEM),o.addChild(s),s.setEnabled(i.enabled),i.enabled&&s.onAction((function(e){t.ContextMenu.hide(),this.callback(this.scope)}),i)}return o},t.ContextMenu.position_=function(e,n,o){var i=t.utils.getViewportBBox();n=new t.utils.Rect(n.clientY+i.top,n.clientY+i.top,n.clientX+i.left,n.clientX+i.left),t.ContextMenu.createWidget_(e);var r=e.getSize();o&&(n.left+=r.width,n.right+=r.width,i.left+=r.width,i.right+=r.width),t.WidgetDiv.positionWithAnchor(i,n,r,o),e.focus()},t.ContextMenu.createWidget_=function(e){e.render(t.WidgetDiv.DIV);var n=e.getElement();t.utils.dom.addClass(n,"blocklyContextMenu"),t.browserEvents.conditionalBind(n,"contextmenu",null,t.utils.noEvent),e.focus()},t.ContextMenu.hide=function(){t.WidgetDiv.hideIfOwner(t.ContextMenu),t.ContextMenu.currentBlock=null},t.ContextMenu.dispose=function(){t.ContextMenu.menu_&&(t.ContextMenu.menu_.dispose(),t.ContextMenu.menu_=null)},t.ContextMenu.callbackFactory=function(e,n){return function(){t.Events.disable();try{var o=t.Xml.domToBlock(n,e.workspace),i=e.getRelativeToSurfaceXY();i.x=e.RTL?i.x-t.SNAP_RADIUS:i.x+t.SNAP_RADIUS,i.y+=2*t.SNAP_RADIUS,o.moveBy(i.x,i.y)}finally{t.Events.enable()}t.Events.isEnabled()&&!o.isShadow()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(o)),o.select()}},t.ContextMenu.commentDeleteOption=function(e){return{text:t.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){t.Events.setGroup(!0),e.dispose(!0,!0),t.Events.setGroup(!1)}}},t.ContextMenu.commentDuplicateOption=function(e){return{text:t.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){t.duplicate(e)}}},t.ContextMenu.workspaceCommentOption=function(e,n){if(!t.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var o={enabled:!t.utils.userAgent.IE};return o.text=t.Msg.ADD_COMMENT,o.callback=function(){var o=new t.WorkspaceCommentSvg(e,t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,t.WorkspaceCommentSvg.DEFAULT_SIZE,t.WorkspaceCommentSvg.DEFAULT_SIZE),i=e.getInjectionDiv().getBoundingClientRect();i=new t.utils.Coordinate(n.clientX-i.left,n.clientY-i.top);var r=e.getOriginOffsetInPixels();(i=t.utils.Coordinate.difference(i,r)).scale(1/e.scale),o.moveBy(i.x,i.y),e.rendered&&(o.initSvg(),o.render(),o.select())},o},t.ContextMenuRegistry=function(){t.ContextMenuRegistry.registry=this,this.registry_={}},t.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},t.ContextMenuRegistry.registry=null,t.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with id "'+t.id+'" is already registered.');this.registry_[t.id]=t},t.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with id "'+t+'" not found.');delete this.registry_[t]},t.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]?this.registry_[t]:null},t.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,e){var n=[],o=this.registry_;return Object.keys(o).forEach((function(i){if(i=o[i],t==i.scopeType){var r=i.preconditionFn(e);"hidden"!=r&&(i={text:"function"==typeof i.displayText?i.displayText(e):i.displayText,enabled:"enabled"==r,callback:i.callback,scope:e,weight:i.weight},n.push(i))}})),n.sort((function(t,e){return t.weight-e.weight})),n},new t.ContextMenuRegistry,t.Events.Selected=function(e,n,o){t.Events.Selected.superClass_.constructor.call(this,o),this.oldElementId=e,this.newElementId=n},t.utils.object.inherits(t.Events.Selected,t.Events.UiBase),t.Events.Selected.prototype.type=t.Events.SELECTED,t.Events.Selected.prototype.toJson=function(){var e=t.Events.Selected.superClass_.toJson.call(this);return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e},t.Events.Selected.prototype.fromJson=function(e){t.Events.Selected.superClass_.fromJson.call(this,e),this.oldElementId=e.oldElementId,this.newElementId=e.newElementId},t.registry.register(t.registry.Type.EVENT,t.Events.SELECTED,t.Events.Selected),t.RenderedConnection=function(e,n){t.RenderedConnection.superClass_.constructor.call(this,e,n),this.db_=e.workspace.connectionDBList[n],this.dbOpposite_=e.workspace.connectionDBList[t.OPPOSITE_TYPE[n]],this.offsetInBlock_=new t.utils.Coordinate(0,0),this.trackedState_=t.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},t.utils.object.inherits(t.RenderedConnection,t.Connection),t.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},t.RenderedConnection.prototype.dispose=function(){t.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},t.RenderedConnection.prototype.getSourceBlock=function(){return t.RenderedConnection.superClass_.getSourceBlock.call(this)},t.RenderedConnection.prototype.targetBlock=function(){return t.RenderedConnection.superClass_.targetBlock.call(this)},t.RenderedConnection.prototype.distanceFrom=function(t){var e=this.x-t.x;return t=this.y-t.y,Math.sqrt(e*e+t*t)},t.RenderedConnection.prototype.bumpAwayFrom=function(e){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var o=!1;if(!n.isMovable()){if(!(n=e.getSourceBlock().getRootBlock()).isMovable())return;e=this,o=!0}var i=t.selected==n;i||n.addSelect();var r=e.x+t.SNAP_RADIUS+Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.x,s=e.y+t.SNAP_RADIUS+Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.y;o&&(s=-s),n.RTL&&(r=e.x-t.SNAP_RADIUS-Math.floor(Math.random()*t.BUMP_RANDOMNESS)-this.x),n.moveBy(r,s),i||n.removeSelect()}}},t.RenderedConnection.prototype.moveTo=function(e,n){this.trackedState_==t.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=t.RenderedConnection.TrackedState.TRACKED):this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=e,this.y=n},t.RenderedConnection.prototype.moveBy=function(t,e){this.moveTo(this.x+t,this.y+e)},t.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},t.RenderedConnection.prototype.setOffsetInBlock=function(t,e){this.offsetInBlock_.x=t,this.offsetInBlock_.y=e},t.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},t.RenderedConnection.prototype.tighten=function(){var e=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=e||0!=n){var o=this.targetBlock(),i=o.getSvgRoot();if(!i)throw Error("block is not rendered.");i=t.utils.getRelativeXY(i),o.getSvgRoot().setAttribute("transform","translate("+(i.x-e)+","+(i.y-n)+")"),o.moveConnections(-e,-n)}},t.RenderedConnection.prototype.closest=function(t,e){return this.dbOpposite_.searchForClosest(this,t,e)},t.RenderedConnection.prototype.highlight=function(){var e=this.sourceBlock_.workspace.getRenderer().getConstants(),n=e.shapeFor(this);this.type==t.connectionTypes.INPUT_VALUE||this.type==t.connectionTypes.OUTPUT_VALUE?(e=e.TAB_OFFSET_FROM_TOP,n=t.utils.svgPaths.moveBy(0,-e)+t.utils.svgPaths.lineOnAxis("v",e)+n.pathDown+t.utils.svgPaths.lineOnAxis("v",e)):(e=e.NOTCH_OFFSET_LEFT-e.CORNER_RADIUS,n=t.utils.svgPaths.moveBy(-e,0)+t.utils.svgPaths.lineOnAxis("h",e)+n.pathLeft+t.utils.svgPaths.lineOnAxis("h",e)),e=this.sourceBlock_.getRelativeToSurfaceXY(),t.Connection.highlightedPath_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-e.x)+","+(this.y-e.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},t.RenderedConnection.prototype.unhighlight=function(){t.utils.dom.removeNode(t.Connection.highlightedPath_),delete t.Connection.highlightedPath_},t.RenderedConnection.prototype.setTracking=function(e){e&&this.trackedState_==t.RenderedConnection.TrackedState.TRACKED||!e&&this.trackedState_==t.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db_.addConnection(this,this.y),this.trackedState_=t.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==t.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=t.RenderedConnection.TrackedState.UNTRACKED))},t.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),e=0;e<t.length;e++){for(var n=t[e],o=n.getConnections_(!0),i=0;i<o.length;i++)o[i].setTracking(!1);for(n=n.getIcons(),i=0;i<n.length;i++)n[i].setVisible(!1)}},t.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var e=[];if(this.type!=t.connectionTypes.INPUT_VALUE&&this.type!=t.connectionTypes.NEXT_STATEMENT)return e;var n=this.targetBlock();if(n){if(n.isCollapsed()){var o=[];n.outputConnection&&o.push(n.outputConnection),n.nextConnection&&o.push(n.nextConnection),n.previousConnection&&o.push(n.previousConnection)}else o=n.getConnections_(!0);for(var i=0;i<o.length;i++)e.push.apply(e,o[i].startTrackingAll());e.length||(e[0]=n)}return e},t.RenderedConnection.prototype.isConnectionAllowed=function(e,n){return t.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(e)>n)&&t.RenderedConnection.superClass_.isConnectionAllowed.call(this,e)},t.RenderedConnection.prototype.onFailedConnect=function(t){this.bumpAwayFrom(t)},t.RenderedConnection.prototype.disconnectInternal_=function(e,n){t.RenderedConnection.superClass_.disconnectInternal_.call(this,e,n),e.rendered&&e.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},t.RenderedConnection.prototype.respawnShadow_=function(){t.RenderedConnection.superClass_.respawnShadow_.call(this);var e=this.targetBlock();e&&(e.initSvg(),e.render(!1),(e=this.getSourceBlock()).rendered&&e.render())},t.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},t.RenderedConnection.prototype.connect_=function(e){t.RenderedConnection.superClass_.connect_.call(this,e);var n=this.getSourceBlock();e=e.getSourceBlock();var o=n.rendered,i=e.rendered;o&&n.updateDisabled(),i&&e.updateDisabled(),o&&i&&(this.type==t.connectionTypes.NEXT_STATEMENT||this.type==t.connectionTypes.PREVIOUS_STATEMENT?e.render():n.render()),(n=n.getInputWithBlock(e))&&(n=n.isVisible(),e.getSvgRoot().style.display=n?"block":"none")},t.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},t.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},t.Marker.prototype.setDrawer=function(t){this.drawer_=t},t.Marker.prototype.getDrawer=function(){return this.drawer_},t.Marker.prototype.getCurNode=function(){return this.curNode_},t.Marker.prototype.setCurNode=function(t){var e=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(e,this.curNode_)},t.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},t.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},t.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},t.Cursor=function(){t.Cursor.superClass_.constructor.call(this),this.type="cursor"},t.utils.object.inherits(t.Cursor,t.Marker),t.Cursor.prototype.next=function(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()==t.ASTNode.types.NEXT||e.getType()==t.ASTNode.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e},t.Cursor.prototype.in=function(){var e=this.getCurNode();return e?(e.getType()!=t.ASTNode.types.PREVIOUS&&e.getType()!=t.ASTNode.types.OUTPUT||(e=e.next()),(e=e.in())&&this.setCurNode(e),e):null},t.Cursor.prototype.prev=function(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()==t.ASTNode.types.NEXT||e.getType()==t.ASTNode.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e},t.Cursor.prototype.out=function(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()==t.ASTNode.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null},t.registry.register(t.registry.Type.CURSOR,t.registry.DEFAULT,t.Cursor),t.BasicCursor=function(){t.BasicCursor.superClass_.constructor.call(this)},t.utils.object.inherits(t.BasicCursor,t.Cursor),t.BasicCursor.registrationName="basicCursor",t.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},t.BasicCursor.prototype.in=function(){return this.next()},t.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},t.BasicCursor.prototype.out=function(){return this.prev()},t.BasicCursor.prototype.getNextNode_=function(t,e){if(!t)return null;var n=t.in()||t.next();return e(n)?n:n?this.getNextNode_(n,e):e(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,e):null},t.BasicCursor.prototype.getPreviousNode_=function(t,e){if(!t)return null;var n=t.prev();return e(n=n?this.getRightMostChild_(n):t.out())?n:n?this.getPreviousNode_(n,e):null},t.BasicCursor.prototype.validNode_=function(e){var n=!1;return(e=e&&e.getType())!=t.ASTNode.types.OUTPUT&&e!=t.ASTNode.types.INPUT&&e!=t.ASTNode.types.FIELD&&e!=t.ASTNode.types.NEXT&&e!=t.ASTNode.types.PREVIOUS&&e!=t.ASTNode.types.WORKSPACE||(n=!0),n},t.BasicCursor.prototype.findSiblingOrParent_=function(t){if(!t)return null;var e=t.next();return e||this.findSiblingOrParent_(t.out())},t.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},t.registry.register(t.registry.Type.CURSOR,t.BasicCursor.registrationName,t.BasicCursor),t.TabNavigateCursor=function(){t.TabNavigateCursor.superClass_.constructor.call(this)},t.utils.object.inherits(t.TabNavigateCursor,t.BasicCursor),t.TabNavigateCursor.prototype.validNode_=function(e){var n=!1,o=e&&e.getType();return e&&(e=e.getLocation(),o==t.ASTNode.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(n=!0)),n},t.BlockSvg=function(e,n,o){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=e,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=t.utils.is3dSupported()&&!!e.getBlockDragSurface();var i=this.pathObject.svgPath;i.tooltip=this,t.Tooltip.bindMouseEvents(i),t.BlockSvg.superClass_.constructor.call(this,e,n,o),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:t.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},t.utils.object.inherits(t.BlockSvg,t.Block),t.BlockSvg.prototype.height=0,t.BlockSvg.prototype.width=0,t.BlockSvg.prototype.warningTextDb_=null,t.BlockSvg.INLINE=-1,t.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",t.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var e,n=0;e=this.inputList[n];n++)e.init();for(e=this.getIcons(),n=0;n<e.length;n++)e[n].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),n=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!n||t.browserEvents.conditionalBind(n,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,n.parentNode||this.workspace.getCanvas().appendChild(n)},t.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},t.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},t.BlockSvg.prototype.getColourShadow=function(){return t.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},t.BlockSvg.prototype.getColourBorder=function(){return t.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},t.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(t.selected!=this){var e=null;if(t.selected){e=t.selected.id,t.Events.disable();try{t.selected.unselect()}finally{t.Events.enable()}}e=new(t.Events.get(t.Events.SELECTED))(e,this.id,this.workspace.id),t.Events.fire(e),t.selected=this,this.addSelect()}},t.BlockSvg.prototype.unselect=function(){if(t.selected==this){var e=new(t.Events.get(t.Events.SELECTED))(this.id,null,this.workspace.id);e.workspaceId=this.workspace.id,t.Events.fire(e),t.selected=null,this.removeSelect()}},t.BlockSvg.prototype.mutator=null,t.BlockSvg.prototype.comment=null,t.BlockSvg.prototype.commentIcon_=null,t.BlockSvg.prototype.warning=null,t.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},t.BlockSvg.prototype.setParent=function(e){var n=this.parentBlock_;if(e!=n){t.utils.dom.startTextWidthCache(),t.BlockSvg.superClass_.setParent.call(this,e),t.utils.dom.stopTextWidthCache();var o=this.getSvgRoot();if(!this.workspace.isClearing&&o){var i=this.getRelativeToSurfaceXY();e?(e.getSvgRoot().appendChild(o),e=this.getRelativeToSurfaceXY(),this.moveConnections(e.x-i.x,e.y-i.y)):n&&(this.workspace.getCanvas().appendChild(o),this.translate(i.x,i.y)),this.applyColour()}}},t.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var e=0,n=0,o=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,i=this.getSvgRoot();if(i)do{var r=t.utils.getRelativeXY(i);e+=r.x,n+=r.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==i&&(e+=(r=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=r.y),i=i.parentNode}while(i&&i!=this.workspace.getCanvas()&&i!=o);return new t.utils.Coordinate(e,n)},t.BlockSvg.prototype.moveBy=function(e,n){if(this.parentBlock_)throw Error("Block has parent.");var o=t.Events.isEnabled();if(o)var i=new(t.Events.get(t.Events.BLOCK_MOVE))(this);var r=this.getRelativeToSurfaceXY();this.translate(r.x+e,r.y+n),this.moveConnections(e,n),o&&(i.recordNew(),t.Events.fire(i)),this.workspace.resizeContents()},t.BlockSvg.prototype.translate=function(t,e){this.getSvgRoot().setAttribute("transform","translate("+t+","+e+")")},t.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},t.BlockSvg.prototype.moveTo=function(t){var e=this.getRelativeToSurfaceXY();this.moveBy(t.x-e.x,t.y-e.y)},t.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},t.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},t.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},t.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var e=t.getSpacing(),n=e/2,o=this.getRelativeToSurfaceXY();t=Math.round((o.x-n)/e)*e+n-o.x,e=Math.round((o.y-n)/e)*e+n-o.y,t=Math.round(t),e=Math.round(e),0==t&&0==e||this.moveBy(t,e)}}},t.BlockSvg.prototype.getBoundingRectangle=function(){var e=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var o=e.x-n.width,i=e.x;else o=e.x,i=e.x+n.width;return new t.utils.Rect(e.y,e.y+n.height,o,i)},t.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var t,e=0;t=this.inputList[e];e++)t.markDirty()},t.BlockSvg.prototype.setCollapsed=function(e){this.collapsed_!=e&&(t.BlockSvg.superClass_.setCollapsed.call(this,e),e?this.rendered&&this.render():this.updateCollapsed_())},t.BlockSvg.prototype.updateCollapsed_=function(){for(var e,n=this.isCollapsed(),o=t.constants.COLLAPSED_INPUT_NAME,i=t.constants.COLLAPSED_FIELD_NAME,r=0;e=this.inputList[r];r++)e.name!=o&&e.setVisible(!n);if(n){for(e=this.getIcons(),r=0;n=e[r];r++)n.setVisible(!1);r=this.toString(t.COLLAPSE_CHARS),(e=this.getField(i))?e.setValue(r):(e=this.getInput(o)||this.appendDummyInput(o)).appendField(new t.FieldLabel(r),i)}else this.updateDisabled(),this.removeInput(o)},t.BlockSvg.prototype.tab=function(e,n){var o=new t.TabNavigateCursor;o.setCurNode(t.ASTNode.createFieldNode(e)),e=o.getCurNode(),n?o.next():o.prev(),(n=o.getCurNode())&&n!==e&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},t.BlockSvg.prototype.onMouseDown_=function(t){var e=this.workspace&&this.workspace.getGesture(t);e&&e.handleBlockStart(t,this)},t.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},t.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var e=t.ContextMenuRegistry.registry.getContextMenuOptions(t.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e},t.BlockSvg.prototype.showContextMenu=function(e){var n=this.generateContextMenu();n&&n.length&&(t.ContextMenu.show(e,n,this.RTL),t.ContextMenu.currentBlock=this)},t.BlockSvg.prototype.moveConnections=function(t,e){if(this.rendered){for(var n=this.getConnections_(!1),o=0;o<n.length;o++)n[o].moveBy(t,e);for(n=this.getIcons(),o=0;o<n.length;o++)n[o].computeIconLocation();for(o=0;o<this.childBlocks_.length;o++)this.childBlocks_[o].moveConnections(t,e)}},t.BlockSvg.prototype.setDragging=function(e){if(e){var n=this.getSvgRoot();n.translate_="",n.skew_="",t.draggingConnections=t.draggingConnections.concat(this.getConnections_(!0)),t.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else t.draggingConnections=[],t.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(e)},t.BlockSvg.prototype.setMovable=function(e){t.BlockSvg.superClass_.setMovable.call(this,e),this.pathObject.updateMovable(e)},t.BlockSvg.prototype.setEditable=function(e){t.BlockSvg.superClass_.setEditable.call(this,e),e=this.getIcons();for(var n=0;n<e.length;n++)e[n].updateEditable()},t.BlockSvg.prototype.setShadow=function(e){t.BlockSvg.superClass_.setShadow.call(this,e),this.applyColour()},t.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},t.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},t.BlockSvg.prototype.dispose=function(e,n){if(this.workspace){t.Tooltip.dispose(),t.Tooltip.unbindMouseEvents(this.pathObject.svgPath),t.utils.dom.startTextWidthCache();var o=this.workspace;if(t.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),t.ContextMenu.currentBlock==this&&t.ContextMenu.hide(),n&&this.rendered&&(this.unplug(e),t.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var i in this.warningTextDb_)clearTimeout(this.warningTextDb_[i]);this.warningTextDb_=null}for(n=this.getIcons(),i=0;i<n.length;i++)n[i].dispose();t.BlockSvg.superClass_.dispose.call(this,!!e),t.utils.dom.removeNode(this.svgGroup_),o.resizeContents(),this.svgGroup_=null,t.utils.dom.stopTextWidthCache()}},t.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var e=t.Xml.blockToDom(this,!0);t.Xml.deleteNext(e);var n=this.getRelativeToSurfaceXY();return e.setAttribute("x",this.RTL?-n.x:n.x),e.setAttribute("y",n.y),{xml:e,source:this.workspace,typeCounts:t.utils.getBlockTypeCounts(this,!0)}},t.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),e=0;e<t.length;e++)t[e].applyColour();for(t=0;e=this.inputList[t];t++)for(var n,o=0;n=e.fieldRow[o];o++)n.applyColour()},t.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var e,n=0;e=t[n];n++)e.rendered&&e.updateDisabled()},t.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},t.BlockSvg.prototype.setCommentText=function(e){if(!t.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=e&&(t.BlockSvg.superClass_.setCommentText.call(this,e),e=null!=e,!!this.commentIcon_==e?this.commentIcon_.updateText():(e?this.comment=this.commentIcon_=new t.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},t.BlockSvg.prototype.setWarningText=function(e,n){if(!t.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var o=n||"";if(o)this.warningTextDb_[o]&&(clearTimeout(this.warningTextDb_[o]),delete this.warningTextDb_[o]);else for(var i in this.warningTextDb_)clearTimeout(this.warningTextDb_[i]),delete this.warningTextDb_[i];if(this.workspace.isDragging()){var r=this;this.warningTextDb_[o]=setTimeout((function(){r.workspace&&(delete r.warningTextDb_[o],r.setWarningText(e,o))}),100)}else{if(this.isInFlyout&&(e=null),n=!1,"string"==typeof e){i=this.getSurroundParent();for(var s=null;i;)i.isCollapsed()&&(s=i),i=i.getSurroundParent();s&&s.setWarningText(t.Msg.COLLAPSED_WARNINGS_WARNING,t.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new t.Warning(this),n=!0),this.warning.setText(e,o)}else this.warning&&!o?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",o),(i=this.warning.getText())||this.warning.dispose(),n=n!=i);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},t.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setEnabled=function(e){this.isEnabled()!=e&&(t.BlockSvg.superClass_.setEnabled.call(this,e),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},t.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},t.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},t.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},t.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},t.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},t.BlockSvg.prototype.setColour=function(e){t.BlockSvg.superClass_.setColour.call(this,e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()},t.BlockSvg.prototype.setStyle=function(t){var e=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!e)throw Error("Invalid style name: "+t);this.hat=e.hat,this.pathObject.setStyle(e),this.colour_=e.colourPrimary,this.style=e,this.applyColour()},t.BlockSvg.prototype.bringToFront=function(){var t=this;do{var e=t.getSvgRoot(),n=e.parentNode,o=n.childNodes;o[o.length-1]!==e&&n.appendChild(e),t=t.getParent()}while(t)},t.BlockSvg.prototype.setPreviousStatement=function(e,n){t.BlockSvg.superClass_.setPreviousStatement.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setNextStatement=function(e,n){t.BlockSvg.superClass_.setNextStatement.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setOutput=function(e,n){t.BlockSvg.superClass_.setOutput.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.setInputsInline=function(e){t.BlockSvg.superClass_.setInputsInline.call(this,e),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.removeInput=function(e,n){return e=t.BlockSvg.superClass_.removeInput.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours()),e},t.BlockSvg.prototype.moveNumberedInputBefore=function(e,n){t.BlockSvg.superClass_.moveNumberedInputBefore.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours())},t.BlockSvg.prototype.appendInput_=function(e,n){return e=t.BlockSvg.superClass_.appendInput_.call(this,e,n),this.rendered&&(this.render(),this.bumpNeighbours()),e},t.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var e=this.nextConnection.targetBlock();e&&e.setConnectionTracking(t)}if(!this.collapsed_)for(e=0;e<this.inputList.length;e++){var n=this.inputList[e].connection;n&&(n.setTracking(t),(n=n.targetBlock())&&n.setConnectionTracking(t))}},t.BlockSvg.prototype.getConnections_=function(t){var e=[];if((t||this.rendered)&&(this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var n;n=this.inputList[t];t++)n.connection&&e.push(n.connection)}return e},t.BlockSvg.prototype.lastConnectionInStack=function(){return t.BlockSvg.superClass_.lastConnectionInStack.call(this)},t.BlockSvg.prototype.getMatchingConnection=function(e,n){return t.BlockSvg.superClass_.getMatchingConnection.call(this,e,n)},t.BlockSvg.prototype.makeConnection_=function(e){return new t.RenderedConnection(this,e)},t.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var e=this.getRootBlock();if(!e.isInFlyout)for(var n,o=this.getConnections_(!1),i=0;n=o[i];i++){n.isConnected()&&n.isSuperior()&&n.targetBlock().bumpNeighbours();for(var r,s=n.neighbours(t.SNAP_RADIUS),a=0;r=s[a];a++)n.isConnected()&&r.isConnected()||r.getSourceBlock().getRootBlock()!=e&&(n.isSuperior()?r.bumpAwayFrom(n):n.bumpAwayFrom(r))}}},t.BlockSvg.prototype.scheduleSnapAndBump=function(){var e=this,n=t.Events.getGroup();setTimeout((function(){t.Events.setGroup(n),e.snapToGrid(),t.Events.setGroup(!1)}),t.BUMP_DELAY/2),setTimeout((function(){t.Events.setGroup(n),e.bumpNeighbours(),t.Events.setGroup(!1)}),t.BUMP_DELAY)},t.BlockSvg.prototype.positionNearConnection=function(e,n){e.type!=t.connectionTypes.NEXT_STATEMENT&&e.type!=t.connectionTypes.INPUT_VALUE||this.moveBy(n.x-e.x,n.y-e.y)},t.BlockSvg.prototype.getParent=function(){return t.BlockSvg.superClass_.getParent.call(this)},t.BlockSvg.prototype.getRootBlock=function(){return t.BlockSvg.superClass_.getRootBlock.call(this)},t.BlockSvg.prototype.render=function(e){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,t.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==e){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}t.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},t.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(t.MarkerManager.LOCAL_MARKER).draw()},t.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var e=0;e<this.inputList.length;e++){var n=this.inputList[e].connection;n&&(n.moveToOffset(t),n.isConnected()&&n.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},t.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},t.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},t.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,e=this.width,n=this.getNextBlock();if(n){n=n.getHeightWidth();var o=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=n.height-o,e=Math.max(e,n.width)}return{height:t,width:e}},t.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},t.BlockSvg.prototype.highlightShapeForInput=function(t,e){this.pathObject.updateShapeForInputHighlight(t,e)},t.ConnectionDB=function(t){this.connections_=[],this.connectionChecker_=t},t.ConnectionDB.prototype.addConnection=function(t,e){e=this.calculateIndexForYPos_(e),this.connections_.splice(e,0,t)},t.ConnectionDB.prototype.findIndexOfConnection_=function(t,e){if(!this.connections_.length)return-1;var n=this.calculateIndexForYPos_(e);if(n>=this.connections_.length)return-1;e=t.y;for(var o=n;0<=o&&this.connections_[o].y==e;){if(this.connections_[o]==t)return o;o--}for(;n<this.connections_.length&&this.connections_[n].y==e;){if(this.connections_[n]==t)return n;n++}return-1},t.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var e=0,n=this.connections_.length;e<n;){var o=Math.floor((e+n)/2);if(this.connections_[o].y<t)e=o+1;else{if(!(this.connections_[o].y>t)){e=o;break}n=o}}return e},t.ConnectionDB.prototype.removeConnection=function(t,e){if(-1==(t=this.findIndexOfConnection_(t,e)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},t.ConnectionDB.prototype.getNeighbours=function(t,e){function n(t){var n=i-o[t].x,s=r-o[t].y;return Math.sqrt(n*n+s*s)<=e&&l.push(o[t]),s<e}var o=this.connections_,i=t.x,r=t.y;t=0;for(var s=o.length-2,a=s;t<a;)o[a].y<r?t=a:s=a,a=Math.floor((t+s)/2);var l=[];if(s=t=a,o.length){for(;0<=t&&n(t);)t--;do{s++}while(s<o.length&&n(s))}return l},t.ConnectionDB.prototype.isInYRange_=function(t,e,n){return Math.abs(this.connections_[t].y-e)<=n},t.ConnectionDB.prototype.searchForClosest=function(t,e,n){if(!this.connections_.length)return{connection:null,radius:e};var o=t.y,i=t.x;t.x=i+n.x,t.y=o+n.y;var r=this.calculateIndexForYPos_(t.y);n=null;for(var s,a=e,l=r-1;0<=l&&this.isInYRange_(l,t.y,e);)s=this.connections_[l],this.connectionChecker_.canConnect(t,s,!0,a)&&(n=s,a=s.distanceFrom(t)),l--;for(;r<this.connections_.length&&this.isInYRange_(r,t.y,e);)s=this.connections_[r],this.connectionChecker_.canConnect(t,s,!0,a)&&(n=s,a=s.distanceFrom(t)),r++;return t.x=i,t.y=o,{connection:n,radius:a}},t.ConnectionDB.init=function(e){var n=[];return n[t.connectionTypes.INPUT_VALUE]=new t.ConnectionDB(e),n[t.connectionTypes.OUTPUT_VALUE]=new t.ConnectionDB(e),n[t.connectionTypes.NEXT_STATEMENT]=new t.ConnectionDB(e),n[t.connectionTypes.PREVIOUS_STATEMENT]=new t.ConnectionDB(e),n},t.Events.ThemeChange=function(e,n){t.Events.ThemeChange.superClass_.constructor.call(this,n),this.themeName=e},t.utils.object.inherits(t.Events.ThemeChange,t.Events.UiBase),t.Events.ThemeChange.prototype.type=t.Events.THEME_CHANGE,t.Events.ThemeChange.prototype.toJson=function(){var e=t.Events.ThemeChange.superClass_.toJson.call(this);return e.themeName=this.themeName,e},t.Events.ThemeChange.prototype.fromJson=function(e){t.Events.ThemeChange.superClass_.fromJson.call(this,e),this.themeName=e.themeName},t.registry.register(t.registry.Type.EVENT,t.Events.THEME_CHANGE,t.Events.ThemeChange),t.Events.ViewportChange=function(e,n,o,i,r){t.Events.ViewportChange.superClass_.constructor.call(this,i),this.viewTop=e,this.viewLeft=n,this.scale=o,this.oldScale=r},t.utils.object.inherits(t.Events.ViewportChange,t.Events.UiBase),t.Events.ViewportChange.prototype.type=t.Events.VIEWPORT_CHANGE,t.Events.ViewportChange.prototype.toJson=function(){var e=t.Events.ViewportChange.superClass_.toJson.call(this);return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e},t.Events.ViewportChange.prototype.fromJson=function(e){t.Events.ViewportChange.superClass_.fromJson.call(this,e),this.viewTop=e.viewTop,this.viewLeft=e.viewLeft,this.scale=e.scale,this.oldScale=e.oldScale},t.registry.register(t.registry.Type.EVENT,t.Events.VIEWPORT_CHANGE,t.Events.ViewportChange),t.MarkerManager=function(t){this.cursorSvg_=this.cursor_=null,this.markers_={},this.workspace_=t},t.MarkerManager.LOCAL_MARKER="local_marker_1",t.MarkerManager.prototype.registerMarker=function(t,e){this.markers_[t]&&this.unregisterMarker(t),e.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,e)),this.setMarkerSvg(e.getDrawer().createDom()),this.markers_[t]=e},t.MarkerManager.prototype.unregisterMarker=function(t){var e=this.markers_[t];if(!e)throw Error("Marker with id "+t+" does not exist. Can only unregistermarkers that exist.");e.dispose(),delete this.markers_[t]},t.MarkerManager.prototype.getCursor=function(){return this.cursor_},t.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]},t.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},t.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},t.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},t.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},t.MarkerManager.prototype.dispose=function(){for(var t,e=Object.keys(this.markers_),n=0;t=e[n];n++)this.unregisterMarker(t);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},t.IMetricsManager=function(){},t.MetricsManager=function(t){this.workspace_=t},t.MetricsManager.prototype.getDimensionsPx_=function(e){var n=0,o=0;return e&&(n=e.getWidth(),o=e.getHeight()),new t.utils.Size(n,o)},t.MetricsManager.prototype.getFlyoutMetrics=function(t){return{width:(t=this.getDimensionsPx_(this.workspace_.getFlyout(t))).width,height:t.height,position:this.workspace_.toolboxPosition}},t.MetricsManager.prototype.getToolboxMetrics=function(){var t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}},t.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},t.MetricsManager.prototype.getAbsoluteMetrics=function(){var e=0,n=this.getToolboxMetrics(),o=this.getFlyoutMetrics(!0),i=!!this.workspace_.getToolbox(),r=!!this.workspace_.getFlyout(!0),s=i?n.position:o.position,a=s==t.utils.toolbox.Position.LEFT;return s=s==t.utils.toolbox.Position.TOP,i&&a?e=n.width:r&&a&&(e=o.width),a=0,i&&s?a=n.height:r&&s&&(a=o.height),{top:a,left:e}},t.MetricsManager.prototype.getViewMetrics=function(e){e=e?this.workspace_.scale:1;var n=this.getSvgMetrics(),o=this.getToolboxMetrics(),i=this.getFlyoutMetrics(!0),r=this.workspace_.getToolbox()?o.position:i.position;return this.workspace_.getToolbox()?r==t.utils.toolbox.Position.TOP||r==t.utils.toolbox.Position.BOTTOM?n.height-=o.height:r!=t.utils.toolbox.Position.LEFT&&r!=t.utils.toolbox.Position.RIGHT||(n.width-=o.width):this.workspace_.getFlyout(!0)&&(r==t.utils.toolbox.Position.TOP||r==t.utils.toolbox.Position.BOTTOM?n.height-=i.height:r!=t.utils.toolbox.Position.LEFT&&r!=t.utils.toolbox.Position.RIGHT||(n.width-=i.width)),{height:n.height/e,width:n.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}},t.MetricsManager.prototype.getContentMetrics=function(t){t=t?1:this.workspace_.scale;var e=this.workspace_.getBlocksBoundingBox();return{height:(e.bottom-e.top)*t,width:(e.right-e.left)*t,top:e.top*t,left:e.left*t}},t.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},t.MetricsManager.prototype.getComputedFixedEdges_=function(t){if(!this.hasFixedEdges())return{};var e=this.workspace_.isMovableHorizontally(),n=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);var o={};return n||(o.top=t.top,o.bottom=t.top+t.height),e||(o.left=t.left,o.right=t.left+t.width),o},t.MetricsManager.prototype.getPaddedContent_=function(t,e){var n=e.top+e.height,o=e.left+e.width,i=t.width,r=i/2,s=(t=t.height)/2;return{top:Math.min(e.top-s,n-t),bottom:Math.max(n+s,e.top+t),left:Math.min(e.left-r,o-i),right:Math.max(o+r,e.left+i)}},t.MetricsManager.prototype.getScrollMetrics=function(t,e,n){t=t?this.workspace_.scale:1,e=e||this.getViewMetrics(!1);var o=n||this.getContentMetrics();n=this.getComputedFixedEdges_(e),e=this.getPaddedContent_(e,o),o=void 0!==n.top?n.top:e.top;var i=void 0!==n.left?n.left:e.left;return{top:o/t,left:i/t,width:((void 0!==n.right?n.right:e.right)-i)/t,height:((void 0!==n.bottom?n.bottom:e.bottom)-o)/t}},t.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},t.MetricsManager.prototype.getMetrics=function(){var t=this.getToolboxMetrics(),e=this.getFlyoutMetrics(!0),n=this.getSvgMetrics(),o=this.getAbsoluteMetrics(),i=this.getViewMetrics(),r=this.getContentMetrics(),s=this.getScrollMetrics(!1,i,r);return{contentHeight:r.height,contentWidth:r.width,contentTop:r.top,contentLeft:r.left,scrollHeight:s.height,scrollWidth:s.width,scrollTop:s.top,scrollLeft:s.left,viewHeight:i.height,viewWidth:i.width,viewTop:i.top,viewLeft:i.left,absoluteTop:o.top,absoluteLeft:o.left,svgHeight:n.height,svgWidth:n.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:e.width,flyoutHeight:e.height}},t.registry.register(t.registry.Type.METRICS_MANAGER,t.registry.DEFAULT,t.MetricsManager),t.FlyoutMetricsManager=function(e,n){this.flyout_=n,t.FlyoutMetricsManager.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.FlyoutMetricsManager,t.MetricsManager),t.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var t=this.workspace_.getCanvas().getBBox()}catch(e){t={height:0,y:0,width:0,x:0}}return t},t.FlyoutMetricsManager.prototype.getContentMetrics=function(t){var e=this.getBoundingBox_();return t=t?1:this.workspace_.scale,{height:e.height*t,width:e.width*t,top:e.y*t,left:e.x*t}},t.FlyoutMetricsManager.prototype.getScrollMetrics=function(t,e,n){return e=n||this.getContentMetrics(),n=this.flyout_.MARGIN*this.workspace_.scale,t=t?this.workspace_.scale:1,{height:(e.height+2*n)/t,width:(e.width+e.left+n)/t,top:0,left:0}},t.FlyoutMetricsManager.prototype.getViewMetrics=function(t){var e=this.getSvgMetrics();if(t=t?this.workspace_.scale:1,this.flyout_.horizontalLayout){var n=e.width-2*this.flyout_.SCROLLBAR_PADDING;e=e.height-this.flyout_.SCROLLBAR_PADDING}else n=e.width-this.flyout_.SCROLLBAR_PADDING,e=e.height-2*this.flyout_.SCROLLBAR_PADDING;return{height:e/t,width:n/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}},t.FlyoutMetricsManager.prototype.getAbsoluteMetrics=function(){var t=this.flyout_.SCROLLBAR_PADDING;return this.flyout_.horizontalLayout?{top:0,left:t}:{top:t,left:0}},t.PluginManager=function(){this.pluginData_={},this.typeToPluginIds_={}},t.PluginManager.prototype.addPlugin=function(t){this.pluginData_[t.id]=t;for(var e,n=0;e=t.types[n];n++)e=String(e).toLowerCase(),void 0===this.typeToPluginIds_[e]?this.typeToPluginIds_[e]=[t.id]:this.typeToPluginIds_[e].push(t.id)},t.PluginManager.prototype.getPlugin=function(t){return this.pluginData_[t]&&this.pluginData_[t].plugin},t.PluginManager.prototype.getPlugins=function(t,e){if(t=String(t).toLowerCase(),!(t=this.typeToPluginIds_[t]))return[];var n=[];if(e){var o=[],i=this.pluginData_;t.forEach((function(t){o.push(i[t])})),o.sort((function(t,e){return t.weight-e.weight})),o.forEach((function(t){n.push(t.plugin)}))}else i=this.pluginData_,t.forEach((function(t){n.push(i[t].plugin)}));return n},t.PluginManager.Type=function(t){this.name_=t},t.PluginManager.Type.prototype.toString=function(){return this.name_},t.PluginManager.Type.POSITIONABLE=new t.PluginManager.Type("positionable"),t.ThemeManager=function(t,e){this.workspace_=t,this.theme_=e,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},t.ThemeManager.prototype.getTheme=function(){return this.theme_},t.ThemeManager.prototype.setTheme=function(e){var n,o=this.theme_;for(this.theme_=e,(e=this.workspace_.getInjectionDiv())&&(o&&t.utils.dom.removeClass(e,o.getClassName()),t.utils.dom.addClass(e,this.theme_.getClassName())),o=0;e=this.subscribedWorkspaces_[o];o++)e.refreshTheme();for(o=0,e=Object.keys(this.componentDB_);n=e[o];o++)for(var i,r=0;i=this.componentDB_[n][r];r++){var s=i.element;i=i.propertyName;var a=this.theme_&&this.theme_.getComponentStyle(n);s.style[i]=a||""}t.hideChaff()},t.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},t.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(0>(t=this.subscribedWorkspaces_.indexOf(t)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(t,1)},t.ThemeManager.prototype.subscribe=function(t,e,n){this.componentDB_[e]||(this.componentDB_[e]=[]),this.componentDB_[e].push({element:t,propertyName:n}),e=this.theme_&&this.theme_.getComponentStyle(e),t.style[n]=e||""},t.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var e,n=Object.keys(this.componentDB_),o=0;e=n[o];o++){for(var i=this.componentDB_[e],r=i.length-1;0<=r;r--)i[r].element===t&&i.splice(r,1);this.componentDB_[e].length||delete this.componentDB_[e]}},t.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},t.TouchGesture=function(e,n){t.TouchGesture.superClass_.constructor.call(this,e,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},t.utils.object.inherits(t.TouchGesture,t.Gesture),t.TouchGesture.ZOOM_IN_MULTIPLIER=5,t.TouchGesture.ZOOM_OUT_MULTIPLIER=6,t.TouchGesture.prototype.doStart=function(e){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,t.TouchGesture.superClass_.doStart.call(this,e),!this.isEnding_&&t.Touch.isTouchEvent(e)&&this.handleTouchStart(e)},t.TouchGesture.prototype.bindMouseEvents=function(e){this.onStartWrapper_=t.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=t.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=t.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),e.preventDefault(),e.stopPropagation()},t.TouchGesture.prototype.handleStart=function(e){!this.isDragging()&&t.Touch.isTouchEvent(e)&&(this.handleTouchStart(e),this.isMultiTouch()&&t.longStop_())},t.TouchGesture.prototype.handleMove=function(e){this.isDragging()?t.Touch.shouldHandleEvent(e)&&t.TouchGesture.superClass_.handleMove.call(this,e):this.isMultiTouch()?(t.Touch.isTouchEvent(e)&&this.handleTouchMove(e),t.longStop_()):t.TouchGesture.superClass_.handleMove.call(this,e)},t.TouchGesture.prototype.handleUp=function(e){t.Touch.isTouchEvent(e)&&!this.isDragging()&&this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()?t.Touch.shouldHandleEvent(e)&&t.TouchGesture.superClass_.handleUp.call(this,e):(e.preventDefault(),e.stopPropagation(),this.dispose())},t.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},t.TouchGesture.prototype.dispose=function(){t.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&t.browserEvents.unbind(this.onStartWrapper_)},t.TouchGesture.prototype.handleTouchStart=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[n]=this.getTouchPoint(e),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=t.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,e.preventDefault())},t.TouchGesture.prototype.handleTouchMove=function(e){var n=t.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[n]=this.getTouchPoint(e),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(e):t.TouchGesture.superClass_.handleMove.call(this,e)},t.TouchGesture.prototype.handlePinch_=function(e){var n=Object.keys(this.cachedPoints_);if(n=t.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var o=n-this.previousScale_;o=0<o?o*t.TouchGesture.ZOOM_IN_MULTIPLIER:o*t.TouchGesture.ZOOM_OUT_MULTIPLIER;var i=this.startWorkspace_,r=t.utils.mouseToSvg(e,i.getParentSvg(),i.getInverseScreenCTM());i.zoom(r.x,r.y,o)}this.previousScale_=n,e.preventDefault()},t.TouchGesture.prototype.handleTouchEnd=function(e){e=t.Touch.getTouchIdentifierFromEvent(e),this.cachedPoints_[e]&&delete this.cachedPoints_[e],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},t.TouchGesture.prototype.getTouchPoint=function(e){return this.startWorkspace_?new t.utils.Coordinate(e.pageX?e.pageX:e.changedTouches[0].pageX,e.pageY?e.pageY:e.changedTouches[0].pageY):null},t.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},t.WorkspaceAudio.prototype.lastSound_=null,t.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},t.WorkspaceAudio.prototype.load=function(e,n){if(e.length){try{var o=new t.utils.global.Audio}catch(l){return}for(var i,r=0;r<e.length;r++){var s=e[r],a=s.match(/\.(\w+)$/);if(a&&o.canPlayType("audio/"+a[1])){i=new t.utils.global.Audio(s);break}}i&&i.play&&(this.SOUNDS_[n]=i)}},t.WorkspaceAudio.prototype.preload=function(){for(var e in this.SOUNDS_){var n=this.SOUNDS_[e];n.volume=.01;var o=n.play();if(void 0!==o?o.then(n.pause).catch((function(){})):n.pause(),t.utils.userAgent.IPAD||t.utils.userAgent.IPHONE)break}},t.WorkspaceAudio.prototype.play=function(e,n){var o=this.SOUNDS_[e];o?(e=new Date,null!=this.lastSound_&&e-this.lastSound_<t.SOUND_LIMIT||(this.lastSound_=e,(o=t.utils.userAgent.IPAD||t.utils.userAgent.ANDROID?o:o.cloneNode()).volume=void 0===n?1:n,o.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(e,n)},t.WorkspaceSvg=function(e,n,o){t.WorkspaceSvg.superClass_.constructor.call(this,e),this.metricsManager_=new(t.registry.getClassFromOptions(t.registry.Type.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=e.setMetrics||t.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.pluginManager_=new t.PluginManager,this.connectionDBList=t.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),o&&(this.workspaceDragSurface_=o),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&t.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new t.WorkspaceAudio(e.parentWorkspace),this.grid_=this.options.gridPattern?new t.Grid(this.options.gridPattern,e.gridOptions):null,this.markerManager_=new t.MarkerManager(this),this.toolboxCategoryCallbacks_={},this.flyoutButtonCallbacks_={},t.Variables&&t.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(t.VARIABLE_CATEGORY_NAME,t.Variables.flyoutCategory),t.VariablesDynamic&&t.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(t.VARIABLE_DYNAMIC_CATEGORY_NAME,t.VariablesDynamic.flyoutCategory),t.Procedures&&t.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(t.PROCEDURE_CATEGORY_NAME,t.Procedures.flyoutCategory),this.addChangeListener(t.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new t.ThemeManager(this,this.options.theme||t.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=t.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.cachedParentSvgSize_=new t.utils.Size(0,0)},t.utils.object.inherits(t.WorkspaceSvg,t.Workspace),t.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,t.WorkspaceSvg.prototype.rendered=!0,t.WorkspaceSvg.prototype.isVisible_=!0,t.WorkspaceSvg.prototype.isFlyout=!1,t.WorkspaceSvg.prototype.isMutator=!1,t.WorkspaceSvg.prototype.resizesEnabled_=!0,t.WorkspaceSvg.prototype.scrollX=0,t.WorkspaceSvg.prototype.scrollY=0,t.WorkspaceSvg.prototype.startScrollX=0,t.WorkspaceSvg.prototype.startScrollY=0,t.WorkspaceSvg.prototype.dragDeltaXY_=null,t.WorkspaceSvg.prototype.scale=1,t.WorkspaceSvg.prototype.oldScale_=1,t.WorkspaceSvg.prototype.oldTop_=0,t.WorkspaceSvg.prototype.oldLeft_=0,t.WorkspaceSvg.prototype.trashcan=null,t.WorkspaceSvg.prototype.scrollbar=null,t.WorkspaceSvg.prototype.flyout_=null,t.WorkspaceSvg.prototype.toolbox_=null,t.WorkspaceSvg.prototype.currentGesture_=null,t.WorkspaceSvg.prototype.blockDragSurface_=null,t.WorkspaceSvg.prototype.workspaceDragSurface_=null,t.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,t.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,t.WorkspaceSvg.prototype.injectionDiv_=null,t.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,t.WorkspaceSvg.prototype.targetWorkspace=null,t.WorkspaceSvg.prototype.inverseScreenCTM_=null,t.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,t.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},t.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},t.WorkspaceSvg.prototype.setMetricsManager=function(t){this.metricsManager_=t,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},t.WorkspaceSvg.prototype.getPluginManager=function(){return this.pluginManager_},t.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},t.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},t.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},t.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},t.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},t.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},t.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},t.WorkspaceSvg.prototype.setTheme=function(e){e||(e=t.Themes.Classic),this.themeManager_.setTheme(e)},t.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter((function(t){return void 0!==t.getStyleName()}))),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var e=new(t.Events.get(t.Events.THEME_CHANGE))(this.getTheme().name,this.id);t.Events.fire(e)},t.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var e,n=0;e=t[n];n++){var o=e.getStyleName();o&&(e.setStyle(o),e.mutator&&e.mutator.updateBlockStyle())}},t.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},t.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},t.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},t.WorkspaceSvg.prototype.getSvgXY=function(e){var n=0,o=0,i=1;(t.utils.dom.containsNode(this.getCanvas(),e)||t.utils.dom.containsNode(this.getBubbleCanvas(),e))&&(i=this.scale);do{var r=t.utils.getRelativeXY(e);e!=this.getCanvas()&&e!=this.getBubbleCanvas()||(i=1),n+=r.x*i,o+=r.y*i,e=e.parentNode}while(e&&e!=this.getParentSvg());return new t.utils.Coordinate(n,o)},t.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var e=this.cachedParentSvgSize_;return new t.utils.Size(e.width,e.height)},t.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return t.utils.getInjectionDivXY_(this.getCanvas())},t.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},t.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},t.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},t.WorkspaceSvg.prototype.createDom=function(e){return this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyWorkspace"},null),e&&(this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),"blocklyMainBackground"==e&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(t.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),t.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(t.registry.getClassFromOptions(t.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDeleteAreas(),(e=t.registry.getClassFromOptions(t.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new e),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},t.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),t.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var e=this.getParentSvg();e&&e.parentNode&&t.utils.dom.removeNode(e.parentNode)}this.resizeHandlerWrapper_&&(t.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},t.WorkspaceSvg.prototype.newBlock=function(e,n){return new t.BlockSvg(this,e,n)},t.WorkspaceSvg.prototype.addTrashcan=function(){if(!t.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new t.Trashcan(this);var e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.svgBlockCanvas_),this.pluginManager_.addPlugin({id:"trashcan",plugin:this.trashcan,weight:1,types:[t.PluginManager.Type.POSITIONABLE]})},t.WorkspaceSvg.prototype.addZoomControls=function(){if(!t.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new t.ZoomControls(this);var e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e),this.pluginManager_.addPlugin({id:"zoomControls",plugin:this.zoomControls_,weight:2,types:[t.PluginManager.Type.POSITIONABLE]})},t.WorkspaceSvg.prototype.addFlyout=function(e){var n=new t.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(e)},t.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},t.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},t.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDeleteAreas()},t.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},t.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var e,n=this.pluginManager_.getPlugins(t.PluginManager.Type.POSITIONABLE,!0),o=this.getMetricsManager().getUiMetrics(),i=[],r=0;e=n[r];r++)e.position(o,i),i.push(e.getBoundingRectangle());this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},t.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var e=t.utils.getDocumentScroll();t.utils.Coordinate.equals(this.lastRecordedPageScroll_,e)||(this.lastRecordedPageScroll_=e,this.updateScreenCalculations_())},t.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},t.WorkspaceSvg.prototype.setCachedParentSvgSize=function(t,e){var n=this.getParentSvg();t&&(this.cachedParentSvgSize_.width=t,n.cachedWidth_=t),e&&(this.cachedParentSvgSize_.height=e,n.cachedHeight_=e)},t.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},t.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"==t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},t.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(t.Events.isEnabled()){var e=this.scale,n=-this.scrollY,o=-this.scrollX;if(!(e==this.oldScale_&&1>Math.abs(n-this.oldTop_)&&1>Math.abs(o-this.oldLeft_))){var i=new(t.Events.get(t.Events.VIEWPORT_CHANGE))(n,o,e,this.id,this.oldScale_);this.oldScale_=e,this.oldTop_=n,this.oldLeft_=o,t.Events.fire(i)}}},t.WorkspaceSvg.prototype.translate=function(t,e){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,e);else{var n="translate("+t+","+e+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",n),this.svgBubbleCanvas_.setAttribute("transform",n)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,e,this.scale),this.grid_&&this.grid_.moveTo(t,e),this.maybeFireViewportChangeEvent()},t.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),t="translate("+t.x+","+t.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",t),this.svgBubbleCanvas_.setAttribute("transform",t)}},t.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var e=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),o=parseInt(this.getParentSvg().getAttribute("height"),10),i=t.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),e,n,o,this.scale),this.workspaceDragSurface_.translateSurface(i.x,i.y)}},t.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},t.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},t.WorkspaceSvg.prototype.setVisible=function(e){if(this.isVisible_=e,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox_&&this.toolbox_.setVisible(e),e){for(var n=(e=this.getAllBlocks(!1)).length-1;0<=n;n--)e[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else t.hideChaff(!0)},t.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),e=t.length-1;0<=e;e--)t[e].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),e=0;e<t.length;e++)t[e].render(!1);this.markerManager_.updateMarkers()},t.WorkspaceSvg.prototype.highlightBlock=function(e,n){if(void 0===n){for(var o,i=0;o=this.highlightedBlocks_[i];i++)o.setHighlighted(!1);this.highlightedBlocks_.length=0}(o=e?this.getBlockById(e):null)&&((e=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(o)&&this.highlightedBlocks_.push(o):t.utils.arrayRemove(this.highlightedBlocks_,o),o.setHighlighted(e))},t.WorkspaceSvg.prototype.paste=function(t){!this.rendered||!t.tagName||t.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t))},t.WorkspaceSvg.prototype.pasteBlock_=function(e){t.Events.disable();try{var n=t.Xml.domToBlock(e,this),o=parseInt(e.getAttribute("x"),10),i=parseInt(e.getAttribute("y"),10);if(!isNaN(o)&&!isNaN(i)){this.RTL&&(o=-o);do{e=!1;for(var r,s=this.getAllBlocks(!1),a=0;r=s[a];a++){var l=r.getRelativeToSurfaceXY();if(1>=Math.abs(o-l.x)&&1>=Math.abs(i-l.y)){e=!0;break}}if(!e){var c,u=n.getConnections_(!1);for(a=0;c=u[a];a++)if(c.closest(t.SNAP_RADIUS,new t.utils.Coordinate(o,i)).connection){e=!0;break}}e&&(o=this.RTL?o-t.SNAP_RADIUS:o+t.SNAP_RADIUS,i+=2*t.SNAP_RADIUS)}while(e);n.moveBy(o,i)}}finally{t.Events.enable()}t.Events.isEnabled()&&!n.isShadow()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(n)),n.select()},t.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(e){t.Events.disable();try{var n=t.WorkspaceCommentSvg.fromXml(e,this),o=parseInt(e.getAttribute("x"),10),i=parseInt(e.getAttribute("y"),10);isNaN(o)||isNaN(i)||(this.RTL&&(o=-o),n.moveBy(o+50,i+50))}finally{t.Events.enable()}t.Events.isEnabled()&&t.WorkspaceComment.fireCreateEvent(n),n.select()},t.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},t.WorkspaceSvg.prototype.renameVariableById=function(e,n){t.WorkspaceSvg.superClass_.renameVariableById.call(this,e,n),this.refreshToolboxSelection()},t.WorkspaceSvg.prototype.deleteVariableById=function(e){t.WorkspaceSvg.superClass_.deleteVariableById.call(this,e),this.refreshToolboxSelection()},t.WorkspaceSvg.prototype.createVariable=function(e,n,o){return e=t.WorkspaceSvg.superClass_.createVariable.call(this,e,n,o),this.refreshToolboxSelection(),e},t.WorkspaceSvg.prototype.recordDeleteAreas=function(){this.deleteAreaTrash_=this.trashcan&&this.svgGroup_.parentNode?this.trashcan.getClientRect():null,this.deleteAreaToolbox_=this.flyout_?this.flyout_.getClientRect():this.toolbox_&&"function"==typeof this.toolbox_.getClientRect?this.toolbox_.getClientRect():null},t.WorkspaceSvg.prototype.isDeleteArea=function(e){return this.deleteAreaTrash_&&this.deleteAreaTrash_.contains(e.clientX,e.clientY)?t.DELETE_AREA_TRASH:this.deleteAreaToolbox_&&this.deleteAreaToolbox_.contains(e.clientX,e.clientY)?t.DELETE_AREA_TOOLBOX:t.DELETE_AREA_NONE},t.WorkspaceSvg.prototype.onMouseDown_=function(t){var e=this.getGesture(t);e&&e.handleWsStart(t,this)},t.WorkspaceSvg.prototype.startDrag=function(e,n){(e=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,this.dragDeltaXY_=t.utils.Coordinate.difference(n,e)},t.WorkspaceSvg.prototype.moveDrag=function(e){return(e=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,t.utils.Coordinate.sum(this.dragDeltaXY_,e)},t.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},t.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},t.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},t.WorkspaceSvg.prototype.isMovableHorizontally=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())},t.WorkspaceSvg.prototype.isMovableVertically=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())},t.WorkspaceSvg.prototype.onMouseWheel_=function(e){if(t.Gesture.inProgress())e.preventDefault(),e.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,o=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||o){var i=t.utils.getScrollDeltaPixels(e);!n||!e.ctrlKey&&o?(n=this.scrollX-i.x,o=this.scrollY-i.y,e.shiftKey&&!i.x&&(n=this.scrollX-i.y,o=this.scrollY),this.scroll(n,o)):(i=-i.y/50,n=t.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,i)),e.preventDefault()}}},t.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var e=this.getTopBoundedElements();if(!e.length)return new t.utils.Rect(0,0,0,0);for(var n=e[0].getBoundingRectangle(),o=1;o<e.length;o++){var i=e[o];i.isInsertionMarker&&i.isInsertionMarker()||((i=i.getBoundingRectangle()).top<n.top&&(n.top=i.top),i.bottom>n.bottom&&(n.bottom=i.bottom),i.left<n.left&&(n.left=i.left),i.right>n.right&&(n.right=i.right))}return n},t.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),t.Events.setGroup(!0);for(var e,n=this.getTopBlocks(!0),o=0,i=0;e=n[i];i++)if(e.isMovable()){var r=e.getRelativeToSurfaceXY();e.moveBy(-r.x,o-r.y),e.snapToGrid(),o=e.getRelativeToSurfaceXY().y+e.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}t.Events.setGroup(!1),this.setResizesEnabled(!0)},t.WorkspaceSvg.prototype.showContextMenu=function(e){if(!this.options.readOnly&&!this.isFlyout){var n=t.ContextMenuRegistry.registry.getContextMenuOptions(t.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,e),t.ContextMenu.show(e,n,this.RTL)}},t.WorkspaceSvg.prototype.updateToolbox=function(e){if(e=t.utils.toolbox.convertToolboxDefToJson(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(t.utils.toolbox.hasCategories(e)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox_.render(e)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout_.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},t.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(t.mainWorkspace=this,this.setBrowserFocus())},t.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(e){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},t.WorkspaceSvg.prototype.zoom=function(t,e,n){n=Math.pow(this.options.zoomOptions.scaleSpeed,n);var o=this.scale*n;if(this.scale!=o){o>this.options.zoomOptions.maxScale?n=this.options.zoomOptions.maxScale/this.scale:o<this.options.zoomOptions.minScale&&(n=this.options.zoomOptions.minScale/this.scale);var i=this.getCanvas().getCTM(),r=this.getParentSvg().createSVGPoint();r.x=t,r.y=e,t=(r=r.matrixTransform(i.inverse())).x,e=r.y,i=i.translate(t*(1-n),e*(1-n)).scale(n),this.scrollX=i.e,this.scrollY=i.f,this.setScale(o)}},t.WorkspaceSvg.prototype.zoomCenter=function(t){var e=this.getMetrics();if(this.flyout_){var n=e.svgWidth?e.svgWidth/2:0;e=e.svgHeight?e.svgHeight/2:0}else n=e.viewWidth/2+e.absoluteLeft,e=e.viewHeight/2+e.absoluteTop;this.zoom(n,e,t)},t.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var e=this.getMetrics(),n=e.viewWidth;e=e.viewHeight;var o=this.getBlocksBoundingBox(),i=o.right-o.left;if(o=o.bottom-o.top,i){this.flyout_&&(this.horizontalLayout?(e+=this.flyout_.getHeight(),o+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),i+=this.flyout_.getWidth()/this.scale)),n/=i,e/=o,t.Events.disable();try{this.setScale(Math.min(n,e)),this.scrollCenter()}finally{t.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.beginCanvasTransition=function(){t.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),t.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},t.WorkspaceSvg.prototype.endCanvasTransition=function(){t.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),t.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},t.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),e=(t.scrollWidth-t.viewWidth)/2,n=(t.scrollHeight-t.viewHeight)/2;e=-e-t.scrollLeft,n=-n-t.scrollTop,this.scroll(e,n)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var e=t.getRelativeToSurfaceXY(),n=t.getHeightWidth(),o=this.scale;t=(e.x+(this.RTL?-1:1)*n.width/2)*o,e=(e.y+n.height/2)*o,n=this.getMetrics(),this.scroll(-(t-n.viewWidth/2),-(e-n.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},t.WorkspaceSvg.prototype.setScale=function(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,t.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDeleteAreas()),this.grid_&&this.grid_.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))},t.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},t.WorkspaceSvg.prototype.scroll=function(e,n){t.hideChaff(!0);var o=this.getMetrics();e=Math.min(e,-o.scrollLeft),n=Math.min(n,-o.scrollTop);var i=o.scrollTop+Math.max(0,o.scrollHeight-o.viewHeight);e=Math.max(e,-(o.scrollLeft+Math.max(0,o.scrollWidth-o.viewWidth))),n=Math.max(n,-i),this.scrollX=e,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(e+o.scrollLeft),-(n+o.scrollTop),!1),e+=o.absoluteLeft,n+=o.absoluteTop,this.translate(e,n)},t.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var e=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-(e.scrollLeft+(e.scrollWidth-e.viewWidth)*t.x)),"number"==typeof t.y&&(this.scrollY=-(e.scrollTop+(e.scrollHeight-e.viewHeight)*t.y)),this.translate(this.scrollX+e.absoluteLeft,this.scrollY+e.absoluteTop)},t.WorkspaceSvg.prototype.getBlockById=function(e){return t.WorkspaceSvg.superClass_.getBlockById.call(this,e)},t.WorkspaceSvg.prototype.getTopBlocks=function(e){return t.WorkspaceSvg.superClass_.getTopBlocks.call(this,e)},t.WorkspaceSvg.prototype.addTopBlock=function(e){this.addTopBoundedElement(e),t.WorkspaceSvg.superClass_.addTopBlock.call(this,e)},t.WorkspaceSvg.prototype.removeTopBlock=function(e){this.removeTopBoundedElement(e),t.WorkspaceSvg.superClass_.removeTopBlock.call(this,e)},t.WorkspaceSvg.prototype.addTopComment=function(e){this.addTopBoundedElement(e),t.WorkspaceSvg.superClass_.addTopComment.call(this,e)},t.WorkspaceSvg.prototype.removeTopComment=function(e){this.removeTopBoundedElement(e),t.WorkspaceSvg.superClass_.removeTopComment.call(this,e)},t.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},t.WorkspaceSvg.prototype.removeTopBoundedElement=function(e){t.utils.arrayRemove(this.topBoundedElements_,e)},t.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},t.WorkspaceSvg.prototype.setResizesEnabled=function(t){var e=!this.resizesEnabled_&&t;this.resizesEnabled_=t,e&&this.resizeContents()},t.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),t.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},t.WorkspaceSvg.prototype.registerButtonCallback=function(t,e){if("function"!=typeof e)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=e},t.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},t.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},t.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,e){if("function"!=typeof e)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=e},t.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},t.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},t.WorkspaceSvg.prototype.getGesture=function(e){var n="mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type,o=this.currentGesture_;return o?n&&o.hasStarted()?(console.warn("Tried to start the same gesture twice."),o.cancel(),null):o:n?this.currentGesture_=new t.TouchGesture(e,this):null},t.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},t.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},t.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},t.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},t.inject=function(e,n){if(t.checkBlockColourConstants(),"string"==typeof e&&(e=document.getElementById(e)||document.querySelector(e)),!e||!t.utils.dom.containsNode(document,e))throw Error("Error: container is not in current document.");n=new t.Options(n||{});var o=document.createElement("div");o.className="injectionDiv",o.tabIndex=0,t.utils.aria.setState(o,t.utils.aria.State.LABEL,t.Msg.WORKSPACE_ARIA_LABEL),e.appendChild(o),e=t.createDom_(o,n);var i=new t.BlockDragSurfaceSvg(o),r=new t.WorkspaceDragSurfaceSvg(o),s=t.createMainWorkspace_(e,n,i,r);return t.init_(s),t.mainWorkspace=s,t.svgResize(s),o.addEventListener("focusin",(function(){t.mainWorkspace=s})),s},t.createDom_=function(e,n){e.setAttribute("dir","LTR"),t.Css.inject(n.hasCss,n.pathToMedia),e=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},e);var o=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),i=String(Math.random()).substring(2);return n.gridPattern=t.Grid.createDom(i,n.gridOptions,o),e},t.createMainWorkspace_=function(e,n,o,i){return n.parentWorkspace=null,o=(n=new t.WorkspaceSvg(n,o,i)).options,n.scale=o.zoomOptions.startScale,e.appendChild(n.createDom("blocklyMainBackground")),t.utils.dom.addClass(n.getInjectionDiv(),n.getRenderer().getClassName()),t.utils.dom.addClass(n.getInjectionDiv(),n.getTheme().getClassName()),!o.hasCategories&&o.languageTree&&(i=n.addFlyout(t.utils.Svg.SVG),t.utils.dom.insertAfter(i,e)),o.hasTrashcan&&n.addTrashcan(),o.zoomOptions&&o.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(e,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(t.bumpIntoBoundsHandler_(n)),t.svgResize(n),t.WidgetDiv.createDom(),t.DropDownDiv.createDom(),t.Tooltip.createDom(),n},t.extractObjectFromEvent_=function(e,n){var o=null;switch(n.type){case t.Events.BLOCK_CREATE:case t.Events.BLOCK_MOVE:(o=e.getBlockById(n.blockId))&&(o=o.getRootBlock());break;case t.Events.COMMENT_CREATE:case t.Events.COMMENT_MOVE:o=e.getCommentById(n.commentId)}return o},t.bumpTopObjectsIntoBounds_=function(e){var n=e.getMetricsManager();if(n.hasFixedEdges()&&!e.isDragging()){n=n.getScrollMetrics(!0);for(var o,i=e.getTopBoundedElements(),r=0;o=i[r];r++)t.bumpObjectIntoBounds_(e,n,o)}},t.bumpIntoBoundsHandler_=function(e){return function(n){var o=e.getMetricsManager();if(o.hasFixedEdges&&!e.isDragging())if(-1!==t.Events.BUMP_EVENTS.indexOf(n.type)){o=o.getScrollMetrics(!0);var i=t.extractObjectFromEvent_(e,n);if(i){var r=t.Events.getGroup();t.Events.setGroup(n.group),t.bumpObjectIntoBounds_(e,o,i)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==r&&t.Events.setGroup(r)}}else n.type===t.Events.VIEWPORT_CHANGE&&n.scale>n.oldScale&&t.bumpTopObjectsIntoBounds_(e)}},t.bumpObjectIntoBounds_=function(e,n,o){var i=o.getBoundingRectangle(),r=i.right-i.left,s=t.utils.math.clamp(n.top,i.top,n.top+n.height-(i.bottom-i.top))-i.top,a=n.left;return n=n.left+n.width-r,e.RTL?a=Math.min(n,a):n=Math.max(a,n),!(!(e=t.utils.math.clamp(a,i.left,n)-i.left)&&!s)&&(o.moveBy(e,s),!0)},t.init_=function(e){var n=e.options,o=e.getParentSvg();if(t.browserEvents.conditionalBind(o.parentNode,"contextmenu",null,(function(e){t.utils.isTargetInput(e)||e.preventDefault()})),o=t.browserEvents.conditionalBind(window,"resize",null,(function(){t.hideChaff(!0),t.svgResize(e),t.bumpTopObjectsIntoBounds_(e)})),e.setResizeHandlerWrapper(o),t.inject.bindDocumentEvents_(),n.languageTree){o=e.getToolbox();var i=e.getFlyout(!0);o?o.init():i&&(i.init(e),i.show(n.languageTree),"function"==typeof i.scrollToStart&&i.scrollToStart())}o=t.Scrollbar.scrollbarThickness,n.hasTrashcan&&(o=e.trashcan.init(o)),n.zoomOptions&&n.zoomOptions.controls&&e.zoomControls_.init(o),n.moveOptions&&n.moveOptions.scrollbars?(e.scrollbar=new t.ScrollbarPair(e,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),n.hasSounds&&t.inject.loadSounds_(n.pathToMedia,e)},t.inject.bindDocumentEvents_=function(){t.documentEventsBound_||(t.browserEvents.conditionalBind(document,"scroll",null,(function(){for(var e,n=t.Workspace.getAll(),o=0;e=n[o];o++)e.updateInverseScreenCTM&&e.updateInverseScreenCTM()})),t.browserEvents.conditionalBind(document,"keydown",null,t.onKeyDown),t.browserEvents.bind(document,"touchend",null,t.longStop_),t.browserEvents.bind(document,"touchcancel",null,t.longStop_),t.utils.userAgent.IPAD&&t.browserEvents.conditionalBind(window,"orientationchange",document,(function(){t.svgResize(t.getMainWorkspace())}))),t.documentEventsBound_=!0},t.inject.loadSounds_=function(e,n){var o=n.getAudioManager();o.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),o.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),o.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");var i=[];e=function(){for(;i.length;)t.browserEvents.unbind(i.pop());o.preload()},i.push(t.browserEvents.conditionalBind(document,"mousemove",null,e,!0)),i.push(t.browserEvents.conditionalBind(document,"touchstart",null,e,!0))},t.Names=function(t,e){if(this.variablePrefix_=e||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),e=0;e<t.length;e++)this.reservedDict_[t[e]]=!0;this.reset()},t.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",t.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},t.Names.prototype.setVariableMap=function(t){this.variableMap_=t},t.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.log("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.variableDB_.setVariableMap(workspace.getVariableMap());"),null)},t.Names.prototype.getName=function(e,n){if(n==t.VARIABLE_CATEGORY_NAME){var o=this.getNameForUserVariable_(e);o&&(e=o)}o=e.toLowerCase()+"_"+n;var i=n==t.VARIABLE_CATEGORY_NAME||n==t.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";return o in this.db_?i+this.db_[o]:(e=this.getDistinctName(e,n),this.db_[o]=e.substr(i.length),e)},t.Names.prototype.getDistinctName=function(e,n){e=this.safeName_(e);for(var o="";this.dbReverse_[e+o]||e+o in this.reservedDict_;)o=o?o+1:2;return e+=o,this.dbReverse_[e]=!0,(n==t.VARIABLE_CATEGORY_NAME||n==t.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+e},t.Names.prototype.safeName_=function(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(e[0])&&(e="my_"+e)):e=t.Msg.UNNAMED_KEY||"unnamed",e},t.Names.equals=function(t,e){return t.toLowerCase()==e.toLowerCase()},t.Procedures={},t.Procedures.NAME_TYPE=t.PROCEDURE_CATEGORY_NAME,t.Procedures.DEFAULT_ARG="x",t.Procedures.allProcedures=function(e){var n=e.getBlocksByType("procedures_defnoreturn",!1).map((function(t){return t.getProcedureDef()}));return e=e.getBlocksByType("procedures_defreturn",!1).map((function(t){return t.getProcedureDef()})),n.sort(t.Procedures.procTupleComparator_),e.sort(t.Procedures.procTupleComparator_),[n,e]},t.Procedures.procTupleComparator_=function(t,e){return t[0].toLowerCase().localeCompare(e[0].toLowerCase())},t.Procedures.findLegalName=function(e,n){if(n.isInFlyout)return e;for(e=e||t.Msg.UNNAMED_KEY||"unnamed";!t.Procedures.isLegalName_(e,n.workspace,n);){var o=e.match(/^(.*?)(\d+)$/);e=o?o[1]+(parseInt(o[2],10)+1):e+"2"}return e},t.Procedures.isLegalName_=function(e,n,o){return!t.Procedures.isNameUsed(e,n,o)},t.Procedures.isNameUsed=function(e,n,o){n=n.getAllBlocks(!1);for(var i=0;i<n.length;i++)if(n[i]!=o&&n[i].getProcedureDef){var r=n[i].getProcedureDef();if(t.Names.equals(r[0],e))return!0}return!1},t.Procedures.rename=function(e){e=e.trim();var n=t.Procedures.findLegalName(e,this.getSourceBlock()),o=this.getValue();if(o!=e&&o!=n){e=this.getSourceBlock().workspace.getAllBlocks(!1);for(var i=0;i<e.length;i++)e[i].renameProcedure&&e[i].renameProcedure(o,n)}return n},t.Procedures.flyoutCategory=function(e){function n(e,n){for(var i=0;i<e.length;i++){var r=e[i][0],s=e[i][1],a=t.utils.xml.createElement("block");a.setAttribute("type",n),a.setAttribute("gap",16);var l=t.utils.xml.createElement("mutation");for(l.setAttribute("name",r),a.appendChild(l),r=0;r<s.length;r++){var c=t.utils.xml.createElement("arg");c.setAttribute("name",s[r]),l.appendChild(c)}o.push(a)}}var o=[];if(t.Blocks.procedures_defnoreturn){var i=t.utils.xml.createElement("block");i.setAttribute("type","procedures_defnoreturn"),i.setAttribute("gap",16);var r=t.utils.xml.createElement("field");r.setAttribute("name","NAME"),r.appendChild(t.utils.xml.createTextNode(t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),i.appendChild(r),o.push(i)}return t.Blocks.procedures_defreturn&&((i=t.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),i.setAttribute("gap",16),(r=t.utils.xml.createElement("field")).setAttribute("name","NAME"),r.appendChild(t.utils.xml.createTextNode(t.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),i.appendChild(r),o.push(i)),t.Blocks.procedures_ifreturn&&((i=t.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),i.setAttribute("gap",16),o.push(i)),o.length&&o[o.length-1].setAttribute("gap",24),n((e=t.Procedures.allProcedures(e))[0],"procedures_callnoreturn"),n(e[1],"procedures_callreturn"),o},t.Procedures.updateMutatorFlyout_=function(e){for(var n,o=[],i=e.getBlocksByType("procedures_mutatorarg",!1),r=0;n=i[r];r++)o.push(n.getFieldValue("NAME"));i=t.utils.xml.createElement("xml"),(r=t.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(n=t.utils.xml.createElement("field")).setAttribute("name","NAME"),o=t.Variables.generateUniqueNameFromOptions(t.Procedures.DEFAULT_ARG,o),o=t.utils.xml.createTextNode(o),n.appendChild(o),r.appendChild(n),i.appendChild(r),e.updateToolbox(i)},t.Procedures.mutatorOpenListener=function(e){if(e.type==t.Events.BUBBLE_OPEN&&"mutator"===e.bubbleType&&e.isOpen){var n=(e=t.Workspace.getById(e.workspaceId).getBlockById(e.blockId)).type;"procedures_defnoreturn"!=n&&"procedures_defreturn"!=n||(e=e.mutator.getWorkspace(),t.Procedures.updateMutatorFlyout_(e),e.addChangeListener(t.Procedures.mutatorChangeListener_))}},t.Procedures.mutatorChangeListener_=function(e){e.type!=t.Events.BLOCK_CREATE&&e.type!=t.Events.BLOCK_DELETE&&e.type!=t.Events.BLOCK_CHANGE||(e=t.Workspace.getById(e.workspaceId),t.Procedures.updateMutatorFlyout_(e))},t.Procedures.getCallers=function(e,n){var o=[];n=n.getAllBlocks(!1);for(var i=0;i<n.length;i++)if(n[i].getProcedureCall){var r=n[i].getProcedureCall();r&&t.Names.equals(r,e)&&o.push(n[i])}return o},t.Procedures.mutateCallers=function(e){var n,o=t.Events.recordUndo,i=e.getProcedureDef()[0],r=e.mutationToDom(!0);for(e=t.Procedures.getCallers(i,e.workspace),i=0;n=e[i];i++){var s=n.mutationToDom();s=s&&t.Xml.domToText(s),n.domToMutation(r);var a=n.mutationToDom();s!=(a=a&&t.Xml.domToText(a))&&(t.Events.recordUndo=!1,t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(n,"mutation",null,s,a)),t.Events.recordUndo=o)}},t.Procedures.getDefinition=function(e,n){n=n.getTopBlocks(!1);for(var o=0;o<n.length;o++)if(n[o].getProcedureDef){var i=n[o].getProcedureDef();if(i&&t.Names.equals(i[0],e))return n[o]}return null},t.ShortcutRegistry=function(){t.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},t.ShortcutRegistry.modifierKeys={Shift:t.utils.KeyCodes.SHIFT,Control:t.utils.KeyCodes.CTRL,Alt:t.utils.KeyCodes.ALT,Meta:t.utils.KeyCodes.META},t.ShortcutRegistry.prototype.register=function(t,e){if(this.registry_[t.name]&&!e)throw Error('Shortcut with name "'+t.name+'" already exists.');this.registry_[t.name]=t},t.ShortcutRegistry.prototype.unregister=function(t){return this.registry_[t]?(this.removeAllKeyMappings(t),delete this.registry_[t],!0):(console.warn('Keyboard shortcut with name "'+t+'" not found.'),!1)},t.ShortcutRegistry.prototype.addKeyMapping=function(t,e,n){t=String(t);var o=this.keyMap_[t];if(o&&!n)throw Error('Shortcut with name "'+e+'" collides with shortcuts '+o.toString());o&&n?o.unshift(e):this.keyMap_[t]=[e]},t.ShortcutRegistry.prototype.removeKeyMapping=function(t,e,n){var o=this.keyMap_[t];if(!o&&!n)return console.warn('No keyboard shortcut with name "'+e+'" registered with key code "'+t+'"'),!1;var i=o.indexOf(e);return-1<i?(o.splice(i,1),0==o.length&&delete this.keyMap_[t],!0):(n||console.warn('No keyboard shortcut with name "'+e+'" registered with key code "'+t+'"'),!1)},t.ShortcutRegistry.prototype.removeAllKeyMappings=function(t){for(var e in this.keyMap_)this.removeKeyMapping(e,t,!0)},t.ShortcutRegistry.prototype.setKeyMap=function(t){this.keyMap_=t},t.ShortcutRegistry.prototype.getKeyMap=function(){return t.utils.object.deepMerge(Object.create(null),this.keyMap_)},t.ShortcutRegistry.prototype.getRegistry=function(){return t.utils.object.deepMerge(Object.create(null),this.registry_)},t.ShortcutRegistry.prototype.onKeyDown=function(t,e){var n=this.serializeKeyEvent_(e);if(!(n=this.getShortcutNamesByKeyCode(n)))return!1;for(var o,i=0;o=n[i];i++)if((!(o=this.registry_[o]).preconditionFn||o.preconditionFn(t))&&o.callback&&o.callback(t,e,o))return!0;return!1},t.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(t){return this.keyMap_[t]||[]},t.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(t){var e,n=[];for(e in this.keyMap_)-1<this.keyMap_[e].indexOf(t)&&n.push(e);return n},t.ShortcutRegistry.prototype.serializeKeyEvent_=function(e){var n,o="";for(n in t.ShortcutRegistry.modifierKeys)e.getModifierState(n)&&(""!=o&&(o+="+"),o+=n);return""!=o&&e.keyCode?o=o+"+"+e.keyCode:e.keyCode&&(o=e.keyCode.toString()),o},t.ShortcutRegistry.prototype.checkModifiers_=function(e){for(var n,o=t.utils.object.values(t.ShortcutRegistry.modifierKeys),i=0;n=e[i];i++)if(0>o.indexOf(n))throw Error(n+" is not a valid modifier key.")},t.ShortcutRegistry.prototype.createSerializedKey=function(e,n){var o="";if(n)for(var i in this.checkModifiers_(n),t.ShortcutRegistry.modifierKeys)-1<n.indexOf(t.ShortcutRegistry.modifierKeys[i])&&(""!=o&&(o+="+"),o+=i);return""!=o&&e?o=o+"+"+e:e&&(o=e.toString()),o},new t.ShortcutRegistry,t.VariableModel=function(e,n,o,i){this.workspace=e,this.name=n,this.type=o||"",this.id_=i||t.utils.genUid(),t.Events.fire(new(t.Events.get(t.Events.VAR_CREATE))(this))},t.VariableModel.prototype.getId=function(){return this.id_},t.VariableModel.compareByName=function(t,e){return(t=t.name.toLowerCase())<(e=e.name.toLowerCase())?-1:t==e?0:1},t.Variables={},t.Variables.NAME_TYPE=t.VARIABLE_CATEGORY_NAME,t.Variables.allUsedVarModels=function(t){var e=t.getAllBlocks(!1);t=Object.create(null);for(var n=0;n<e.length;n++){var o=e[n].getVarModels();if(o)for(var i=0;i<o.length;i++){var r=o[i],s=r.getId();s&&(t[s]=r)}}for(s in e=[],t)e.push(t[s]);return e},t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},t.Variables.allDeveloperVariables=function(e){e=e.getAllBlocks(!1);for(var n,o=Object.create(null),i=0;n=e[i];i++){var r=n.getDeveloperVariables;if(!r&&n.getDeveloperVars&&(r=n.getDeveloperVars,t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[n.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+n.type+"')"),t.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[n.type]=!0)),r)for(n=r(),r=0;r<n.length;r++)o[n[r]]=!0}return Object.keys(o)},t.Variables.flyoutCategory=function(e){var n=[],o=document.createElement("button");return o.setAttribute("text","%{BKY_NEW_VARIABLE}"),o.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",(function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace())})),n.push(o),e=t.Variables.flyoutCategoryBlocks(e),n.concat(e)},t.Variables.flyoutCategoryBlocks=function(e){var n=[];if(0<(e=e.getVariablesOfType("")).length){var o=e[e.length-1];if(t.Blocks.variables_set){var i=t.utils.xml.createElement("block");i.setAttribute("type","variables_set"),i.setAttribute("gap",t.Blocks.math_change?8:24),i.appendChild(t.Variables.generateVariableFieldDom(o)),n.push(i)}if(t.Blocks.math_change&&((i=t.utils.xml.createElement("block")).setAttribute("type","math_change"),i.setAttribute("gap",t.Blocks.variables_get?20:8),i.appendChild(t.Variables.generateVariableFieldDom(o)),o=t.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),i.appendChild(o),n.push(i)),t.Blocks.variables_get){e.sort(t.VariableModel.compareByName),o=0;for(var r;r=e[o];o++)(i=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),i.setAttribute("gap",8),i.appendChild(t.Variables.generateVariableFieldDom(r)),n.push(i)}}return n},t.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",t.Variables.generateUniqueName=function(e){return t.Variables.generateUniqueNameFromOptions(t.Variables.VAR_LETTER_OPTIONS.charAt(0),e.getAllVariableNames())},t.Variables.generateUniqueNameFromOptions=function(e,n){if(!n.length)return e;for(var o=t.Variables.VAR_LETTER_OPTIONS,i="",r=o.indexOf(e);;){for(var s=!1,a=0;a<n.length;a++)if(n[a].toLowerCase()==e){s=!0;break}if(!s)return e;++r==o.length&&(r=0,i=Number(i)+1),e=o.charAt(r)+i}},t.Variables.createVariableButtonHandler=function(e,n,o){var i=o||"";!function o(r){t.Variables.promptName(t.Msg.NEW_VARIABLE_TITLE,r,(function(r){if(r){var s=t.Variables.nameUsedWithAnyType(r,e);if(s){if(s.type==i)var a=t.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",s.name);else a=(a=t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",s.name).replace("%2",s.type);t.alert(a,(function(){o(r)}))}else e.createVariable(r,i),n&&n(r)}else n&&n(null)}))}("")},t.Variables.createVariable=t.Variables.createVariableButtonHandler,t.Variables.renameVariable=function(e,n,o){!function i(r){var s=t.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);t.Variables.promptName(s,r,(function(r){if(r){var s=t.Variables.nameUsedWithOtherType_(r,n.type,e);s?(s=t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",s.name).replace("%2",s.type),t.alert(s,(function(){i(r)}))):(e.renameVariableById(n.getId(),r),o&&o(r))}else o&&o(null)}))}("")},t.Variables.promptName=function(e,n,o){t.prompt(e,n,(function(e){e&&((e=e.replace(/[\s\xa0]+/g," ").trim())==t.Msg.RENAME_VARIABLE||e==t.Msg.NEW_VARIABLE)&&(e=null),o(e)}))},t.Variables.nameUsedWithOtherType_=function(t,e,n){n=n.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var o,i=0;o=n[i];i++)if(o.name.toLowerCase()==t&&o.type!=e)return o;return null},t.Variables.nameUsedWithAnyType=function(t,e){e=e.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var n,o=0;n=e[o];o++)if(n.name.toLowerCase()==t)return n;return null},t.Variables.generateVariableFieldDom=function(e){var n=t.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",e.getId()),n.setAttribute("variabletype",e.type),e=t.utils.xml.createTextNode(e.name),n.appendChild(e),n},t.Variables.getOrCreateVariablePackage=function(e,n,o,i){var r=t.Variables.getVariable(e,n,o,i);return r||(r=t.Variables.createVariable_(e,n,o,i)),r},t.Variables.getVariable=function(t,e,n,o){var i=t.getPotentialVariableMap(),r=null;if(e&&(!(r=t.getVariableById(e))&&i&&(r=i.getVariableById(e)),r))return r;if(n){if(void 0==o)throw Error("Tried to look up a variable by name without a type");!(r=t.getVariable(n,o))&&i&&(r=i.getVariable(n,o))}return r},t.Variables.createVariable_=function(e,n,o,i){var r=e.getPotentialVariableMap();return o||(o=t.Variables.generateUniqueName(e.isFlyout?e.targetWorkspace:e)),r?r.createVariable(o,i,n):e.createVariable(o,i,n)},t.Variables.getAddedVariables=function(t,e){t=t.getAllVariables();var n=[];if(e.length!=t.length)for(var o=0;o<t.length;o++){var i=t[o];-1==e.indexOf(i)&&n.push(i)}return n},t.VERSION="5.20210325.1",t.mainWorkspace=null,t.selected=null,t.draggingConnections=[],t.clipboardXml_=null,t.clipboardSource_=null,t.clipboardTypeCounts_=null,t.cache3dSupported_=null,t.parentContainer=null,t.svgSize=function(e){return t.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new t.utils.Size(e.cachedWidth_,e.cachedHeight_)},t.resizeSvgContents=function(t){t.resizeContents()},t.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var e=t.getParentSvg(),n=t.getCachedParentSvgSize(),o=e.parentNode;if(o){var i=o.offsetWidth;o=o.offsetHeight,n.width!=i&&(e.setAttribute("width",i+"px"),t.setCachedParentSvgSize(i,null)),n.height!=o&&(e.setAttribute("height",o+"px"),t.setCachedParentSvgSize(null,o)),t.resize()}},t.onKeyDown=function(e){var n=t.mainWorkspace;n&&!(t.utils.isTargetInput(e)||n.rendered&&!n.isVisible())&&t.ShortcutRegistry.registry.onKeyDown(n,e)},t.deleteBlock=function(e){e.workspace.isFlyout||(t.Events.setGroup(!0),t.hideChaff(),e.dispose(!0,!0),t.Events.setGroup(!1))},t.copy=function(e){(e=e.toCopyData())&&(t.clipboardXml_=e.xml,t.clipboardSource_=e.source,t.clipboardTypeCounts_=e.typeCounts)},t.paste=function(){if(!t.clipboardXml_)return!1;var e=t.clipboardSource_;return e.isFlyout&&(e=e.targetWorkspace),!(!t.clipboardTypeCounts_||!e.isCapacityAvailable(t.clipboardTypeCounts_))&&(t.Events.setGroup(!0),e.paste(t.clipboardXml_),t.Events.setGroup(!1),!0)},t.duplicate=function(e){var n=t.clipboardXml_,o=t.clipboardSource_;t.copy(e),e.workspace.paste(t.clipboardXml_),t.clipboardXml_=n,t.clipboardSource_=o},t.onContextMenu_=function(e){t.utils.isTargetInput(e)||e.preventDefault()},t.hideChaff=function(e){t.Tooltip.hide(),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation(),e||((e=t.getMainWorkspace()).trashcan&&e.trashcan.flyout&&e.trashcan.closeFlyout(),(e=e.getToolbox())&&e.getFlyout()&&e.getFlyout().autoClose&&e.clearSelection())},t.getMainWorkspace=function(){return t.mainWorkspace},t.alert=function(t,e){alert(t),e&&e()},t.confirm=function(t,e){e(confirm(t))},t.prompt=function(t,e,n){n(prompt(t,e))},t.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},t.defineBlocksWithJsonArray=function(e){for(var n=0;n<e.length;n++){var o=e[n];if(o){var i=o.type;null==i||""===i?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(t.Blocks[i]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+i+'".'),t.Blocks[i]={init:t.jsonInitFactory_(o)})}else console.warn("Block definition #"+n+" in JSON array is "+o+". Skipping.")}},t.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},t.hueToHex=function(e){return t.utils.colour.hsvToHex(e,t.HSV_SATURATION,255*t.HSV_VALUE)},t.checkBlockColourConstants=function(){t.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),t.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),t.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),t.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),t.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),t.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),t.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),t.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),t.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),t.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),t.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),t.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),t.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),t.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),t.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),t.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},t.checkBlockColourConstant_=function(e,n,o){for(var i="Blockly",r=t,s=0;s<n.length;++s)i+="."+n[s],r&&(r=r[n[s]]);r&&r!==o&&(e=(void 0===o?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",i).replace("%2",e),console.warn(e))},t.setParentContainer=function(e){t.parentContainer=e},t.bindEvent_=t.browserEvents.bind,t.unbindEvent_=t.browserEvents.unbind,t.bindEventWithChecks_=t.browserEvents.conditionalBind,t.ALIGN_LEFT=t.constants.ALIGN.LEFT,t.ALIGN_CENTRE=t.constants.ALIGN.CENTRE,t.ALIGN_RIGHT=t.constants.ALIGN.RIGHT,t.INPUT_VALUE=t.connectionTypes.INPUT_VALUE,t.OUTPUT_VALUE=t.connectionTypes.OUTPUT_VALUE,t.NEXT_STATEMENT=t.connectionTypes.NEXT_STATEMENT,t.PREVIOUS_STATEMENT=t.connectionTypes.PREVIOUS_STATEMENT,t.DUMMY_INPUT=t.inputTypes.DUMMY,t.TOOLBOX_AT_TOP=t.utils.toolbox.Position.TOP,t.TOOLBOX_AT_BOTTOM=t.utils.toolbox.Position.BOTTOM,t.TOOLBOX_AT_LEFT=t.utils.toolbox.Position.LEFT,t.TOOLBOX_AT_RIGHT=t.utils.toolbox.Position.RIGHT,t.Events.BubbleOpen=function(e,n,o){t.Events.BubbleOpen.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.isOpen=n,this.bubbleType=o},t.utils.object.inherits(t.Events.BubbleOpen,t.Events.UiBase),t.Events.BubbleOpen.prototype.type=t.Events.BUBBLE_OPEN,t.Events.BubbleOpen.prototype.toJson=function(){var e=t.Events.BubbleOpen.superClass_.toJson.call(this);return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId,e},t.Events.BubbleOpen.prototype.fromJson=function(e){t.Events.BubbleOpen.superClass_.fromJson.call(this,e),this.isOpen=e.isOpen,this.bubbleType=e.bubbleType,this.blockId=e.blockId},t.registry.register(t.registry.Type.EVENT,t.Events.BUBBLE_OPEN,t.Events.BubbleOpen),t.Icon=function(t){this.block_=t,this.iconGroup_=null},t.Icon.prototype.collapseHidden=!0,t.Icon.prototype.SIZE=17,t.Icon.prototype.bubble_=null,t.Icon.prototype.iconXY_=null,t.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&t.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),t.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},t.Icon.prototype.dispose=function(){t.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},t.Icon.prototype.updateEditable=function(){},t.Icon.prototype.isVisible=function(){return!!this.bubble_},t.Icon.prototype.iconClick_=function(e){this.block_.workspace.isDragging()||this.block_.isInFlyout||t.utils.isRightButton(e)||this.setVisible(!this.isVisible())},t.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},t.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},t.Icon.prototype.computeIconLocation=function(){var e=this.block_.getRelativeToSurfaceXY(),n=t.utils.getRelativeXY(this.iconGroup_);e=new t.utils.Coordinate(e.x+n.x+this.SIZE/2,e.y+n.y+this.SIZE/2),t.utils.Coordinate.equals(this.getIconLocation(),e)||this.setIconLocation(e)},t.Icon.prototype.getIconLocation=function(){return this.iconXY_},t.Icon.prototype.getCorrectedSize=function(){return new t.utils.Size(t.Icon.prototype.SIZE,t.Icon.prototype.SIZE-2)},t.Warning=function(e){t.Warning.superClass_.constructor.call(this,e),this.createIcon(),this.text_={}},t.utils.object.inherits(t.Warning,t.Icon),t.Warning.prototype.collapseHidden=!1,t.Warning.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},e)},t.Warning.prototype.setVisible=function(e){e!=this.isVisible()&&(t.Events.fire(new(t.Events.get(t.Events.BUBBLE_OPEN))(this.block_,e,"warning")),e?this.createBubble_():this.disposeBubble_())},t.Warning.prototype.createBubble_=function(){this.paragraphElement_=t.Bubble.textToDom(this.getText()),this.bubble_=t.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},t.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},t.Warning.prototype.setText=function(t,e){this.text_[e]!=t&&(t?this.text_[e]=t:delete this.text_[e],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},t.Warning.prototype.getText=function(){var t,e=[];for(t in this.text_)e.push(this.text_[t]);return e.join("\n")},t.Warning.prototype.dispose=function(){this.block_.warning=null,t.Icon.prototype.dispose.call(this)},t.Comment=function(e){t.Comment.superClass_.constructor.call(this,e),this.model_=e.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},t.utils.object.inherits(t.Comment,t.Icon),t.Comment.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},e)},t.Comment.prototype.createEditor_=function(){this.foreignObject_=t.utils.dom.createSvgElement(t.utils.Svg.FOREIGNOBJECT,{x:t.Bubble.BORDER_WIDTH,y:t.Bubble.BORDER_WIDTH},null);var e=document.createElementNS(t.utils.dom.HTML_NS,"body");e.setAttribute("xmlns",t.utils.dom.HTML_NS),e.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(t.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),e.appendChild(n),this.foreignObject_.appendChild(e),this.onMouseUpWrapper_=t.browserEvents.conditionalBind(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=t.browserEvents.conditionalBind(n,"wheel",this,(function(t){t.stopPropagation()})),this.onChangeWrapper_=t.browserEvents.conditionalBind(n,"change",this,(function(e){this.cachedText_!=this.model_.text&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))})),this.onInputWrapper_=t.browserEvents.conditionalBind(n,"input",this,(function(t){this.model_.text=n.value})),setTimeout(n.focus.bind(n),0),this.foreignObject_},t.Comment.prototype.updateEditable=function(){t.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},t.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},t.Comment.prototype.resizeTextarea_=function(){var e=this.model_.size,n=2*t.Bubble.BORDER_WIDTH,o=e.width-n;e=e.height-n,this.foreignObject_.setAttribute("width",o),this.foreignObject_.setAttribute("height",e),this.textarea_.style.width=o-4+"px",this.textarea_.style.height=e-4+"px"},t.Comment.prototype.setVisible=function(e){e!=this.isVisible()&&(t.Events.fire(new(t.Events.get(t.Events.BUBBLE_OPEN))(this.block_,e,"comment")),(this.model_.pinned=e)?this.createBubble_():this.disposeBubble_())},t.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||t.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},t.Comment.prototype.createEditableBubble_=function(){this.bubble_=new t.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},t.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=t.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=t.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},t.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(t.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(t.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(t.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(t.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},t.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},t.Comment.prototype.getBubbleSize=function(){return this.model_.size},t.Comment.prototype.setBubbleSize=function(t,e){this.bubble_?this.bubble_.setBubbleSize(t,e):(this.model_.size.width=t,this.model_.size.height=e)},t.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},t.Comment.prototype.dispose=function(){this.block_.comment=null,t.Icon.prototype.dispose.call(this)},t.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),t.Flyout=function(e){e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new t.WorkspaceSvg(e),this.workspace_.setMetricsManager(new t.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.RTL=!!e.RTL,this.horizontalLayout=!1,this.toolboxPosition_=e.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},t.Flyout.prototype.autoClose=!0,t.Flyout.prototype.isVisible_=!1,t.Flyout.prototype.containerVisible_=!0,t.Flyout.prototype.CORNER_RADIUS=8,t.Flyout.prototype.MARGIN=t.Flyout.prototype.CORNER_RADIUS,t.Flyout.prototype.GAP_X=3*t.Flyout.prototype.MARGIN,t.Flyout.prototype.GAP_Y=3*t.Flyout.prototype.MARGIN,t.Flyout.prototype.SCROLLBAR_PADDING=2,t.Flyout.prototype.width_=0,t.Flyout.prototype.height_=0,t.Flyout.prototype.dragAngleRange_=70,t.Flyout.prototype.createDom=function(e){return this.svgGroup_=t.utils.dom.createSvgElement(e,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},t.Flyout.prototype.init=function(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new t.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar"),this.hide(),Array.prototype.push.apply(this.eventWrappers_,t.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,t.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap()},t.Flyout.prototype.dispose=function(){this.hide(),t.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},t.Flyout.prototype.getWidth=function(){return this.width_},t.Flyout.prototype.getHeight=function(){return this.height_},t.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},t.Flyout.prototype.getWorkspace=function(){return this.workspace_},t.Flyout.prototype.isVisible=function(){return this.isVisible_},t.Flyout.prototype.setVisible=function(t){var e=t!=this.isVisible();this.isVisible_=t,e&&this.updateDisplay_()},t.Flyout.prototype.setContainerVisible=function(t){var e=t!=this.containerVisible_;this.containerVisible_=t,e&&this.updateDisplay_()},t.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.workspace_.scrollbar.setContainerVisible(t)},t.Flyout.prototype.positionAt_=function(e,n,o,i){this.svgGroup_.setAttribute("width",e),this.svgGroup_.setAttribute("height",n),this.workspace_.setCachedParentSvgSize(e,n),"svg"==this.svgGroup_.tagName?t.utils.dom.setCssTransform(this.svgGroup_,"translate("+o+"px,"+i+"px)"):this.svgGroup_.setAttribute("transform","translate("+o+","+i+")"),(e=this.workspace_.scrollbar)&&(e.setOrigin(o,i),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))},t.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var e,n=0;e=this.listeners_[n];n++)t.browserEvents.unbind(e);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},t.Flyout.prototype.show=function(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof e&&(e=this.getDynamicCategoryContents_(e)),this.setVisible(!0),e=t.utils.toolbox.convertFlyoutDefToJsonArray(e),e=this.createFlyoutInfo_(e),this.layout_(e.contents,e.gaps),this.listeners_.push(t.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,(function(){for(var t,e=this.workspace_.getTopBlocks(!1),n=0;t=e[n];n++)t.removeSelect()}))),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},t.Flyout.prototype.createFlyoutInfo_=function(e){var n=[],o=[];this.permanentlyDisabled_.length=0;for(var i,r=this.horizontalLayout?this.GAP_X:this.GAP_Y,s=0;i=e[s];s++)switch(i.custom&&(i=this.getDynamicCategoryContents_(i.custom),i=t.utils.toolbox.convertFlyoutDefToJsonArray(i),e.splice.apply(e,[s,1].concat(i)),i=e[s]),i.kind.toUpperCase()){case"BLOCK":var a=i,l=this.getBlockXml_(a);i=this.createBlock_(l),a=parseInt(a.gap||l.getAttribute("gap"),10),o.push(isNaN(a)?r:a),n.push({type:"block",block:i});break;case"SEP":this.addSeparatorGap_(i,o,r);break;case"LABEL":i=this.createButton_(i,!0),n.push({type:"button",button:i}),o.push(r);break;case"BUTTON":i=this.createButton_(i,!1),n.push({type:"button",button:i}),o.push(r)}return{contents:n,gaps:o}},t.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw new TypeError("Result of toolbox category callback must be an array.");return t},t.Flyout.prototype.createButton_=function(e,n){if(!t.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new t.FlyoutButton(this.workspace_,this.targetWorkspace,e,n)},t.Flyout.prototype.createBlock_=function(e){return(e=t.Xml.domToBlock(e,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(e),e},t.Flyout.prototype.getBlockXml_=function(e){var n=null,o=e.blockxml;if(o&&"string"!=typeof o?n=o:o&&"string"==typeof o?(n=t.Xml.textToDom(o),e.blockxml=n):e.type&&((n=t.utils.xml.createElement("xml")).setAttribute("type",e.type),n.setAttribute("disabled",e.disabled),e.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},t.Flyout.prototype.addSeparatorGap_=function(t,e,n){t=parseInt(t.gap,10),!isNaN(t)&&0<e.length?e[e.length-1]=t:e.push(n)},t.Flyout.prototype.clearOldBlocks_=function(){for(var e,n=this.workspace_.getTopBlocks(!1),o=0;e=n[o];o++)e.workspace==this.workspace_&&e.dispose(!1,!1);for(o=0;o<this.mats_.length;o++)(n=this.mats_[o])&&(t.Tooltip.unbindMouseEvents(n),t.utils.dom.removeNode(n));for(o=this.mats_.length=0;n=this.buttons_[o];o++)n.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},t.Flyout.prototype.addBlockListeners_=function(e,n,o){this.listeners_.push(t.browserEvents.conditionalBind(e,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(t.browserEvents.conditionalBind(o,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(t.browserEvents.bind(e,"mouseenter",n,n.addSelect)),this.listeners_.push(t.browserEvents.bind(e,"mouseleave",n,n.removeSelect)),this.listeners_.push(t.browserEvents.bind(o,"mouseenter",n,n.addSelect)),this.listeners_.push(t.browserEvents.bind(o,"mouseleave",n,n.removeSelect))},t.Flyout.prototype.blockMouseDown_=function(t){var e=this;return function(n){var o=e.targetWorkspace.getGesture(n);o&&(o.setStartBlock(t),o.handleFlyoutStart(n,e))}},t.Flyout.prototype.onMouseDown_=function(t){var e=this.targetWorkspace.getGesture(t);e&&e.handleFlyoutStart(t,this)},t.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},t.Flyout.prototype.createBlock=function(e){var n=null;t.Events.disable();var o=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(e)}finally{t.Events.enable()}if(t.hideChaff(),e=t.Variables.getAddedVariables(this.targetWorkspace,o),t.Events.isEnabled()){for(t.Events.setGroup(!0),o=0;o<e.length;o++){var i=e[o];t.Events.fire(new(t.Events.get(t.Events.VAR_CREATE))(i))}t.Events.fire(new(t.Events.get(t.Events.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},t.Flyout.prototype.initFlyoutButton_=function(e,n,o){var i=e.createDom();e.moveTo(n,o),e.show(),this.listeners_.push(t.browserEvents.conditionalBind(i,"mousedown",this,this.onMouseDown_)),this.buttons_.push(e)},t.Flyout.prototype.createRect_=function(e,n,o,i,r){return(n=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{"fill-opacity":0,x:n,y:o,height:i.height,width:i.width},null)).tooltip=e,t.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,e.getSvgRoot()),e.flyoutRect_=n,this.mats_[r]=n},t.Flyout.prototype.moveRectToBlock_=function(t,e){var n=e.getHeightWidth();t.setAttribute("width",n.width),t.setAttribute("height",n.height),e=e.getRelativeToSurfaceXY(),t.setAttribute("y",e.y),t.setAttribute("x",this.RTL?e.x-n.width:e.x)},t.Flyout.prototype.filterForCapacity_=function(){for(var e,n=this.workspace_.getTopBlocks(!1),o=0;e=n[o];o++)if(-1==this.permanentlyDisabled_.indexOf(e))for(var i=this.targetWorkspace.isCapacityAvailable(t.utils.getBlockTypeCounts(e));e;)e.setEnabled(i),e=e.getNextBlock()},t.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},t.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},t.Flyout.prototype.placeNewBlock_=function(e){var n=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered.");var o=t.Xml.blockToDom(e,!0);if(n.setResizesEnabled(!1),!(o=t.Xml.domToBlock(o,n)).getSvgRoot())throw Error("block is not rendered.");var i=n.getOriginOffsetInPixels(),r=this.workspace_.getOriginOffsetInPixels();return(e=e.getRelativeToSurfaceXY()).scale(this.workspace_.scale),e=t.utils.Coordinate.sum(r,e),(i=t.utils.Coordinate.difference(e,i)).scale(1/n.scale),o.moveBy(i.x,i.y),o},t.HorizontalFlyout=function(e){t.HorizontalFlyout.superClass_.constructor.call(this,e),this.horizontalLayout=!0},t.utils.object.inherits(t.HorizontalFlyout,t.Flyout),t.HorizontalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var e=this.workspace_.getMetricsManager(),n=e.getScrollMetrics(),o=e.getViewMetrics();e=e.getAbsoluteMetrics(),"number"==typeof t.x&&(this.workspace_.scrollX=-(n.left+(n.width-o.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+e.left,this.workspace_.scrollY+e.top)}},t.HorizontalFlyout.prototype.getX=function(){return 0},t.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager(),n=e.getAbsoluteMetrics(),o=e.getViewMetrics();e=e.getToolboxMetrics();var i=this.toolboxPosition_==t.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?i?e.height:o.height-this.height_:i?0:o.height:i?0:o.height+n.top-this.height_},t.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath_(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var e=this.getY();this.positionAt_(this.width_,this.height_,t,e)}},t.HorizontalFlyout.prototype.setBackgroundPath_=function(e,n){var o=this.toolboxPosition_==t.utils.toolbox.Position.TOP,i=["M 0,"+(o?0:this.CORNER_RADIUS)];o?(i.push("h",e+2*this.CORNER_RADIUS),i.push("v",n),i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),i.push("h",-e),i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),i.push("h",e),i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),i.push("v",n),i.push("h",-e-2*this.CORNER_RADIUS)),i.push("z"),this.svgBackground_.setAttribute("d",i.join(" "))},t.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},t.HorizontalFlyout.prototype.wheel_=function(e){var n=t.utils.getScrollDeltaPixels(e);if(n=n.x||n.y){var o=this.workspace_.getMetricsManager(),i=o.getScrollMetrics();n=o.getViewMetrics().left-i.left+n,this.workspace_.scrollbar.setX(n),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()}e.preventDefault(),e.stopPropagation()},t.HorizontalFlyout.prototype.layout_=function(t,e){this.workspace_.scale=this.targetWorkspace.scale;var n=this.MARGIN,o=n+this.tabWidth_;this.RTL&&(t=t.reverse());for(var i,r=0;i=t[r];r++)if("block"==i.type){for(var s,a=(i=i.block).getDescendants(!1),l=0;s=a[l];l++)s.isInFlyout=!0;i.render(),a=i.getSvgRoot(),l=i.getHeightWidth(),s=i.outputConnection?this.tabWidth_:0,s=this.RTL?o+l.width:o-s,i.moveBy(s,n),s=this.createRect_(i,s,n,l,r),o+=l.width+e[r],this.addBlockListeners_(a,i,s)}else"button"==i.type&&(this.initFlyoutButton_(i.button,o,n),o+=i.button.width+e[r])},t.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var e=this.dragAngleRange_;return t<90+e&&t>90-e||t>-90-e&&t<-90+e},t.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.top;return this.toolboxPosition_==t.utils.toolbox.Position.TOP?new t.utils.Rect(-1e9,n+e.height,-1e9,1e9):new t.utils.Rect(n,1e9,-1e9,1e9)},t.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var e,n=0,o=this.workspace_.getTopBlocks(!1),i=0;e=o[i];i++)n=Math.max(n,e.getHeightWidth().height);if(n+=1.5*this.MARGIN,n*=this.workspace_.scale,n+=t.Scrollbar.scrollbarThickness,this.height_!=n){for(i=0;e=o[i];i++)e.flyoutRect_&&this.moveRectToBlock_(e.flyoutRect_,e);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=t.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+n),this.height_=n,this.position()}},t.registry.register(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,t.registry.DEFAULT,t.HorizontalFlyout),t.VerticalFlyout=function(e){t.VerticalFlyout.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.VerticalFlyout,t.Flyout),t.VerticalFlyout.registryName="verticalFlyout",t.VerticalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var e=this.workspace_.getMetricsManager(),n=e.getScrollMetrics(),o=e.getViewMetrics();e=e.getAbsoluteMetrics(),"number"==typeof t.y&&(this.workspace_.scrollY=-(n.top+(n.height-o.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+e.left,this.workspace_.scrollY+e.top)}},t.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager(),n=e.getAbsoluteMetrics(),o=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==t.utils.toolbox.Position.LEFT?e.width:o.width-this.width_:this.toolboxPosition_==t.utils.toolbox.Position.LEFT?0:o.width:this.toolboxPosition_==t.utils.toolbox.Position.LEFT?0:o.width+n.left-this.width_},t.VerticalFlyout.prototype.getY=function(){return 0},t.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var e=this.getY();this.positionAt_(this.width_,this.height_,t,e)}},t.VerticalFlyout.prototype.setBackgroundPath_=function(e,n){var o=this.toolboxPosition_==t.utils.toolbox.Position.RIGHT,i=e+this.CORNER_RADIUS;(i=["M "+(o?i:0)+",0"]).push("h",o?-e:e),i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),i.push("v",Math.max(0,n)),i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),i.push("h",o?e:-e),i.push("z"),this.svgBackground_.setAttribute("d",i.join(" "))},t.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},t.VerticalFlyout.prototype.wheel_=function(e){var n=t.utils.getScrollDeltaPixels(e);if(n.y){var o=this.workspace_.getMetricsManager(),i=o.getScrollMetrics();n=o.getViewMetrics().top-i.top+n.y,this.workspace_.scrollbar.setY(n),t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()}e.preventDefault(),e.stopPropagation()},t.VerticalFlyout.prototype.layout_=function(t,e){this.workspace_.scale=this.targetWorkspace.scale;for(var n,o=this.MARGIN,i=this.RTL?o:o+this.tabWidth_,r=0;n=t[r];r++)if("block"==n.type){for(var s,a=(n=n.block).getDescendants(!1),l=0;s=a[l];l++)s.isInFlyout=!0;n.render(),a=n.getSvgRoot(),l=n.getHeightWidth(),s=n.outputConnection?i-this.tabWidth_:i,n.moveBy(s,o),s=this.createRect_(n,this.RTL?s-l.width:s,o,l,r),this.addBlockListeners_(a,n,s),o+=l.height+e[r]}else"button"==n.type&&(this.initFlyoutButton_(n.button,i,o),o+=n.button.height+e[r])},t.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var e=this.dragAngleRange_;return t<e&&t>-e||t<-180+e||t>180-e},t.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.left;return this.toolboxPosition_==t.utils.toolbox.Position.LEFT?new t.utils.Rect(-1e9,1e9,-1e9,n+e.width):new t.utils.Rect(-1e9,1e9,n,1e9)},t.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var e,n=0,o=this.workspace_.getTopBlocks(!1),i=0;e=o[i];i++){var r=e.getHeightWidth().width;e.outputConnection&&(r-=this.tabWidth_),n=Math.max(n,r)}for(i=0;e=this.buttons_[i];i++)n=Math.max(n,e.width);if(n+=1.5*this.MARGIN+this.tabWidth_,n*=this.workspace_.scale,n+=t.Scrollbar.scrollbarThickness,this.width_!=n){for(i=0;e=o[i];i++){if(this.RTL){r=e.getRelativeToSurfaceXY().x;var s=n/this.workspace_.scale-this.MARGIN;e.outputConnection||(s-=this.tabWidth_),e.moveBy(s-r,0)}e.flyoutRect_&&this.moveRectToBlock_(e.flyoutRect_,e)}if(this.RTL)for(i=0;e=this.buttons_[i];i++)o=e.getPosition().y,e.moveTo(n/this.workspace_.scale-e.width-this.MARGIN-this.tabWidth_,o);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=t.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+n,this.targetWorkspace.scrollY),this.width_=n,this.position()}},t.registry.register(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.registry.DEFAULT,t.VerticalFlyout),t.FlyoutButton=function(e,n,o,i){this.workspace_=e,this.targetWorkspace_=n,this.text_=o.text,this.position_=new t.utils.Coordinate(0,0),this.isLabel_=i,this.callbackKey_=o.callbackKey||o.callbackkey,this.cssClass_=o["web-class"]||null,this.onMouseUpWrapper_=null,this.info=o},t.FlyoutButton.MARGIN_X=5,t.FlyoutButton.MARGIN_Y=2,t.FlyoutButton.prototype.width=0,t.FlyoutButton.prototype.height=0,t.FlyoutButton.prototype.createDom=function(){var e=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(e+=" "+this.cssClass_),this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:e},this.workspace_.getCanvas()),!this.isLabel_)var n=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);e=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var o=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),i=t.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(i+="\u200f"),o.textContent=i,this.isLabel_&&(this.svgText_=o,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var r=t.utils.style.getComputedStyle(o,"fontSize"),s=t.utils.style.getComputedStyle(o,"fontWeight"),a=t.utils.style.getComputedStyle(o,"fontFamily");return this.width=t.utils.dom.getFastTextWidthWithSizeString(o,r,s,a),i=t.utils.dom.measureFontMetrics(i,r,s,a),this.height=i.height,this.isLabel_||(this.width+=2*t.FlyoutButton.MARGIN_X,this.height+=2*t.FlyoutButton.MARGIN_Y,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),e.setAttribute("width",this.width),e.setAttribute("height",this.height),o.setAttribute("x",this.width/2),o.setAttribute("y",this.height/2-i.height/2+i.baseline),this.updateTransform_(),this.onMouseUpWrapper_=t.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},t.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},t.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},t.FlyoutButton.prototype.moveTo=function(t,e){this.position_.x=t,this.position_.y=e,this.updateTransform_()},t.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},t.FlyoutButton.prototype.getPosition=function(){return this.position_},t.FlyoutButton.prototype.getButtonText=function(){return this.text_},t.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},t.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&t.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},t.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},t.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),t.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},t.Generator.NAME_TYPE="generated_function",t.Generator.prototype.INFINITE_LOOP_TRAP=null,t.Generator.prototype.STATEMENT_PREFIX=null,t.Generator.prototype.STATEMENT_SUFFIX=null,t.Generator.prototype.INDENT="  ",t.Generator.prototype.COMMENT_WRAP=60,t.Generator.prototype.ORDER_OVERRIDES=[],t.Generator.prototype.isInitialized=null,t.Generator.prototype.workspaceToCode=function(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=t.getMainWorkspace());var n=[];this.init(e),e=e.getTopBlocks(!0);for(var o,i=0;o=e[i];i++){var r=this.blockToCode(o);Array.isArray(r)&&(r=r[0]),r&&(o.outputConnection&&(r=this.scrubNakedValue(r),this.STATEMENT_PREFIX&&!o.suppressPrefixSuffix&&(r=this.injectId(this.STATEMENT_PREFIX,o)+r),this.STATEMENT_SUFFIX&&!o.suppressPrefixSuffix&&(r+=this.injectId(this.STATEMENT_SUFFIX,o))),n.push(r))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},t.Generator.prototype.prefixLines=function(t,e){return e+t.replace(/(?!\n$)\n/g,"\n"+e)},t.Generator.prototype.allNestedComments=function(t){var e=[];t=t.getDescendants(!0);for(var n=0;n<t.length;n++){var o=t[n].getCommentText();o&&e.push(o)}return e.length&&e.push(""),e.join("\n")},t.Generator.prototype.blockToCode=function(t,e){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return e?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return e?"":this.blockToCode(t.getChildren(!1)[0]);var n=this[t.type];if("function"!=typeof n)throw Error('Language "'+this.name_+'" does not know how to generate  code for block type "'+t.type+'".');if(n=n.call(t,t),Array.isArray(n)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,n[0],e),n[1]]}if("string"==typeof n)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(n=this.injectId(this.STATEMENT_PREFIX,t)+n),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(n+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,n,e);if(null===n)return"";throw SyntaxError("Invalid code generated: "+n)},t.Generator.prototype.valueToCode=function(t,e,n){if(isNaN(n))throw TypeError("Expecting valid order from block: "+t.type);var o=t.getInputTargetBlock(e);if(!o)return"";if(""===(e=this.blockToCode(o)))return"";if(!Array.isArray(e))throw TypeError("Expecting tuple from value block: "+o.type);if(t=e[0],e=e[1],isNaN(e))throw TypeError("Expecting valid order from value block: "+o.type);if(!t)return"";o=!1;var i=Math.floor(n),r=Math.floor(e);if(i<=r&&(i!=r||0!=i&&99!=i))for(o=!0,i=0;i<this.ORDER_OVERRIDES.length;i++)if(this.ORDER_OVERRIDES[i][0]==n&&this.ORDER_OVERRIDES[i][1]==e){o=!1;break}return o&&(t="("+t+")"),t},t.Generator.prototype.statementToCode=function(t,e){if(t=t.getInputTargetBlock(e),"string"!=typeof(e=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return e&&(e=this.prefixLines(e,this.INDENT)),e},t.Generator.prototype.addLoopTrap=function(t,e){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,e),this.INDENT)+t),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,e),this.INDENT)+t),this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,e),this.INDENT)),t},t.Generator.prototype.injectId=function(t,e){return e=e.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+e+"'")},t.Generator.prototype.RESERVED_WORDS_="",t.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},t.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",t.Generator.prototype.provideFunction_=function(e,n){if(!this.definitions_[e]){var o,i=this.variableDB_.getDistinctName(e,t.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[e]=i,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,i);o!=n;)o=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[e]=n}return this.functionNames_[e]},t.Generator.prototype.init=function(t){},t.Generator.prototype.scrub_=function(t,e,n){return e},t.Generator.prototype.finish=function(t){return t},t.Generator.prototype.scrubNakedValue=function(t){return t},t.ToolboxItem=function(e,n,o){this.id_=e.toolboxitemid||t.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=o||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},t.ToolboxItem.prototype.init=function(){},t.ToolboxItem.prototype.getDiv=function(){return null},t.ToolboxItem.prototype.getId=function(){return this.id_},t.ToolboxItem.prototype.getParent=function(){return null},t.ToolboxItem.prototype.getLevel=function(){return this.level_},t.ToolboxItem.prototype.isSelectable=function(){return!1},t.ToolboxItem.prototype.isCollapsible=function(){return!1},t.ToolboxItem.prototype.dispose=function(){},t.ToolboxCategory=function(e,n,o){t.ToolboxCategory.superClass_.constructor.call(this,e,n,o),this.name_=t.utils.replaceMessageReferences(e.name),this.colour_=this.getColour_(e),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),t.utils.object.mixin(this.cssConfig_,e.cssconfig||e.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(e)},t.utils.object.inherits(t.ToolboxCategory,t.ToolboxItem),t.ToolboxCategory.registrationName="category",t.ToolboxCategory.nestedPadding=19,t.ToolboxCategory.borderWidth=8,t.ToolboxCategory.defaultBackgroundColour="#57e",t.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},t.ToolboxCategory.prototype.parseContents_=function(t){var e=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(e){t=0;for(var n;n=e[t];t++)this.flyoutItems_.push(n)}},t.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},t.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),t.utils.aria.setRole(this.htmlDiv_,t.utils.aria.Role.TREEITEM),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.SELECTED,!1),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),t.utils.aria.setRole(this.iconDom_,t.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},t.ToolboxCategory.prototype.createContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.container),e},t.ToolboxCategory.prototype.createRowContainer_=function(){var e=document.createElement("div");t.utils.dom.addClass(e,this.cssConfig_.row);var n=t.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?e.style.paddingRight=n:e.style.paddingLeft=n,e},t.ToolboxCategory.prototype.createRowContentsContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.rowcontentcontainer),e},t.ToolboxCategory.prototype.createIconDom_=function(){var e=document.createElement("span");return this.parentToolbox_.isHorizontal()||t.utils.dom.addClass(e,this.cssConfig_.icon),e.style.display="inline-block",e},t.ToolboxCategory.prototype.createLabelDom_=function(e){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=e,t.utils.dom.addClass(n,this.cssConfig_.label),n},t.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},t.ToolboxCategory.prototype.addColourBorder_=function(e){e&&(e=t.ToolboxCategory.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)},t.ToolboxCategory.prototype.getColour_=function(t){var e=t.categorystyle||t.categoryStyle;return(t=t.colour)&&e?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):e?this.getColourfromStyle_(e):this.parseColour_(t)},t.ToolboxCategory.prototype.getColourfromStyle_=function(t){var e=this.workspace_.getTheme();if(t&&e){if((e=e.categoryStyles[t])&&e.colour)return this.parseColour_(e.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},t.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},t.ToolboxCategory.prototype.parseColour_=function(e){if(null==(e=t.utils.replaceMessageReferences(e))||""===e)return"";var n=Number(e);return isNaN(n)?(n=t.utils.colour.parse(e))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):t.hueToHex(n)},t.ToolboxCategory.prototype.openIcon_=function(e){e&&(t.utils.dom.removeClasses(e,this.cssConfig_.closedicon),t.utils.dom.addClass(e,this.cssConfig_.openicon))},t.ToolboxCategory.prototype.closeIcon_=function(e){e&&(t.utils.dom.removeClasses(e,this.cssConfig_.openicon),t.utils.dom.addClass(e,this.cssConfig_.closedicon))},t.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},t.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},t.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},t.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},t.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},t.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},t.ToolboxCategory.prototype.onClick=function(t){},t.ToolboxCategory.prototype.setSelected=function(e){if(e){var n=this.parseColour_(t.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,t.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",t.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.SELECTED,e)},t.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},t.ToolboxCategory.prototype.getName=function(){return this.name_},t.ToolboxCategory.prototype.getParent=function(){return this.parent_},t.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},t.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},t.ToolboxCategory.prototype.updateFlyoutContents=function(e){this.flyoutItems_=[],"string"==typeof e?this.toolboxItemDef_.custom=e:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=t.utils.toolbox.convertFlyoutDefToJsonArray(e)),this.parseContents_(this.toolboxItemDef_)},t.ToolboxCategory.prototype.dispose=function(){t.utils.dom.removeNode(this.htmlDiv_)},t.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.ToolboxCategory.registrationName,t.ToolboxCategory),t.ToolboxSeparator=function(e,n){t.ToolboxSeparator.superClass_.constructor.call(this,e,n),this.cssConfig_={container:"blocklyTreeSeparator"},t.utils.object.mixin(this.cssConfig_,e.cssconfig||e.cssConfig)},t.utils.object.inherits(t.ToolboxSeparator,t.ToolboxItem),t.ToolboxSeparator.registrationName="sep",t.ToolboxSeparator.prototype.init=function(){this.createDom_()},t.ToolboxSeparator.prototype.createDom_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,this.cssConfig_.container),this.htmlDiv_=e},t.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},t.ToolboxSeparator.prototype.dispose=function(){t.utils.dom.removeNode(this.htmlDiv_)},t.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.ToolboxSeparator.registrationName,t.ToolboxSeparator),t.CollapsibleToolboxCategory=function(e,n,o){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],t.CollapsibleToolboxCategory.superClass_.constructor.call(this,e,n,o)},t.utils.object.inherits(t.CollapsibleToolboxCategory,t.ToolboxCategory),t.CollapsibleToolboxCategory.registrationName="collapsibleCategory",t.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var e=t.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return e.contents="blocklyToolboxContents",e},t.CollapsibleToolboxCategory.prototype.parseContents_=function(e){var n=e.contents,o=!0;if(e.custom)this.flyoutItems_=e.custom;else if(n){e=0;for(var i;i=n[e];e++)!t.registry.hasItem(t.registry.Type.TOOLBOX_ITEM,i.kind)||i.kind.toLowerCase()==t.ToolboxSeparator.registrationName&&o?(this.flyoutItems_.push(i),o=!0):(this.createToolboxItem_(i),o=!1)}},t.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(e){var n=e.kind;"CATEGORY"==n.toUpperCase()&&t.utils.toolbox.isCategoryCollapsible(e)&&(n=t.CollapsibleToolboxCategory.registrationName),e=new(t.registry.getClass(t.registry.Type.TOOLBOX_ITEM,n))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)},t.CollapsibleToolboxCategory.prototype.init=function(){t.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},t.CollapsibleToolboxCategory.prototype.createDom_=function(){t.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),t.utils.aria.setRole(this.subcategoriesDiv_,t.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},t.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var e=document.createElement("span");return this.parentToolbox_.isHorizontal()||(t.utils.dom.addClass(e,this.cssConfig_.icon),e.style.visibility="visible"),e.style.display="inline-block",e},t.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(e){var n=document.createElement("div");t.utils.dom.addClass(n,this.cssConfig_.contents);for(var o=0;o<e.length;o++){var i=e[o];i.init();var r=i.getDiv();n.appendChild(r),i.getClickTarget&&i.getClickTarget().setAttribute("id",i.getId())}return n},t.CollapsibleToolboxCategory.prototype.setExpanded=function(e){this.expanded_!=e&&((this.expanded_=e)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),t.utils.aria.setState(this.htmlDiv_,t.utils.aria.State.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize())},t.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var e,n=0;e=this.getChildToolboxItems()[n];n++)e.setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},t.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},t.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},t.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},t.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},t.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},t.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},t.registry.register(t.registry.Type.TOOLBOX_ITEM,t.CollapsibleToolboxCategory.registrationName,t.CollapsibleToolboxCategory),t.Events.ToolboxItemSelect=function(e,n,o){t.Events.ToolboxItemSelect.superClass_.constructor.call(this,o),this.oldItem=e,this.newItem=n},t.utils.object.inherits(t.Events.ToolboxItemSelect,t.Events.UiBase),t.Events.ToolboxItemSelect.prototype.type=t.Events.TOOLBOX_ITEM_SELECT,t.Events.ToolboxItemSelect.prototype.toJson=function(){var e=t.Events.ToolboxItemSelect.superClass_.toJson.call(this);return e.oldItem=this.oldItem,e.newItem=this.newItem,e},t.Events.ToolboxItemSelect.prototype.fromJson=function(e){t.Events.ToolboxItemSelect.superClass_.fromJson.call(this,e),this.oldItem=e.oldItem,this.newItem=e.newItem},t.registry.register(t.registry.Type.EVENT,t.Events.TOOLBOX_ITEM_SELECT,t.Events.ToolboxItemSelect),t.Toolbox=function(t){this.workspace_=t,this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_={},this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},t.Toolbox.prototype.onShortcut=function(t){return!1},t.Toolbox.prototype.init=function(){var e=this.workspace_,n=e.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),t.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.flyout_.init(e),this.render(this.toolboxDef_),(e=e.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color")},t.Toolbox.prototype.createDom_=function(e){e=e.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,t.utils.aria.setRole(this.contentsDiv_,t.utils.aria.Role.TREE),n.appendChild(this.contentsDiv_),e.parentNode.insertBefore(n,e),this.attachEvents_(n,this.contentsDiv_),n},t.Toolbox.prototype.createContainer_=function(){var e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),t.utils.dom.addClass(e,"blocklyToolboxDiv"),t.utils.dom.addClass(e,"blocklyNonSelectable"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e},t.Toolbox.prototype.createContentsContainer_=function(){var e=document.createElement("div");return t.utils.dom.addClass(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e},t.Toolbox.prototype.attachEvents_=function(e,n){e=t.browserEvents.conditionalBind(e,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(e),n=t.browserEvents.conditionalBind(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},t.Toolbox.prototype.onClick_=function(e){if(t.utils.isRightButton(e)||e.target==this.HtmlDiv)t.hideChaff(!1);else{var n=e.target.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(e)),t.hideChaff(!0)}t.Touch.clearTouchIdentifier()},t.Toolbox.prototype.onKeyDown_=function(e){var n=!1;switch(e.keyCode){case t.utils.KeyCodes.DOWN:n=this.selectNext_();break;case t.utils.KeyCodes.UP:n=this.selectPrevious_();break;case t.utils.KeyCodes.LEFT:n=this.selectParent_();break;case t.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case t.utils.KeyCodes.ENTER:case t.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(e)),n&&e.preventDefault()},t.Toolbox.prototype.createFlyout_=function(){var e=this.workspace_,n=new t.Options({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(n)},t.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var e=0;e<this.contents_.length;e++){var n=this.contents_[e];n&&n.dispose()}this.contents_=[],this.contentMap_={},this.renderContents_(t.contents),this.position()},t.Toolbox.prototype.renderContents_=function(t){for(var e,n=document.createDocumentFragment(),o=0;e=t[o];o++)this.createToolboxItem_(e,n);this.contentsDiv_.appendChild(n)},t.Toolbox.prototype.createToolboxItem_=function(e,n){var o=e.kind;"CATEGORY"==o.toUpperCase()&&t.utils.toolbox.isCategoryCollapsible(e)&&(o=t.CollapsibleToolboxCategory.registrationName),(o=t.registry.getClass(t.registry.Type.TOOLBOX_ITEM,o.toLowerCase()))&&(e=new o(e,this),this.addToolboxItem_(e),e.init(),(o=e.getDiv())&&n.appendChild(o),e.getClickTarget&&e.getClickTarget().setAttribute("id",e.getId()))},t.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible())for(var e,n=0;e=t.getChildToolboxItems()[n];n++)this.addToolboxItem_(e)},t.Toolbox.prototype.getToolboxItems=function(){return this.contents_},t.Toolbox.prototype.addStyle=function(e){t.utils.dom.addClass(this.HtmlDiv,e)},t.Toolbox.prototype.removeStyle=function(e){t.utils.dom.removeClass(this.HtmlDiv,e)},t.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv)return null;var e=this.HtmlDiv.getBoundingClientRect(),n=e.top,o=n+e.height,i=e.left;return e=i+e.width,this.toolboxPosition==t.utils.toolbox.Position.TOP?new t.utils.Rect(-1e7,o,-1e7,1e7):this.toolboxPosition==t.utils.toolbox.Position.BOTTOM?new t.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==t.utils.toolbox.Position.LEFT?new t.utils.Rect(-1e7,1e7,-1e7,e):new t.utils.Rect(-1e7,1e7,i,1e7)},t.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]},t.Toolbox.prototype.getWidth=function(){return this.width_},t.Toolbox.prototype.getHeight=function(){return this.height_},t.Toolbox.prototype.getFlyout=function(){return this.flyout_},t.Toolbox.prototype.getWorkspace=function(){return this.workspace_},t.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},t.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},t.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},t.Toolbox.prototype.position=function(){var e=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition==t.utils.toolbox.Position.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition==t.utils.toolbox.Position.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=e.viewHeight),this.flyout_.position())},t.Toolbox.prototype.handleToolboxItemResize=function(){var e=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition==t.utils.toolbox.Position.LEFT?e.scrollX+n.width:e.scrollX,this.toolboxPosition==t.utils.toolbox.Position.TOP?e.scrollY+n.height:e.scrollY),t.svgResize(e)},t.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},t.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var e=this.contents_[t];e.refreshTheme&&e.refreshTheme()}},t.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},t.Toolbox.prototype.setVisible=function(t){this.HtmlDiv.style.display=t?"block":"none"},t.Toolbox.prototype.setSelectedItem=function(t){var e=this.selectedItem_;!t&&!e||t&&!t.isSelectable()||(this.shouldDeselectItem_(e,t)&&null!=e&&this.deselectItem_(e),this.shouldSelectItem_(e,t)&&null!=t&&this.selectItem_(e,t),this.updateFlyout_(e,t),this.fireSelectEvent_(e,t))},t.Toolbox.prototype.shouldDeselectItem_=function(t,e){return null!=t&&(!t.isCollapsible()||t!=e)},t.Toolbox.prototype.shouldSelectItem_=function(t,e){return null!=e&&e!=t},t.Toolbox.prototype.deselectItem_=function(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),t.utils.aria.setState(this.contentsDiv_,t.utils.aria.State.ACTIVEDESCENDANT,"")},t.Toolbox.prototype.selectItem_=function(e,n){this.selectedItem_=n,this.previouslySelectedItem_=e,n.setSelected(!0),t.utils.aria.setState(this.contentsDiv_,t.utils.aria.State.ACTIVEDESCENDANT,n.getId())},t.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)},t.Toolbox.prototype.updateFlyout_=function(t,e){(t!=e||e.isCollapsible())&&e&&e.getContents().length?(this.flyout_.show(e.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},t.Toolbox.prototype.fireSelectEvent_=function(e,n){var o=e&&e.getName(),i=n&&n.getName();e==n&&(i=null),e=new(t.Events.get(t.Events.TOOLBOX_ITEM_SELECT))(o,i,this.workspace_.id),t.Events.fire(e)},t.Toolbox.prototype.selectParent_=function(){return!!this.selectedItem_&&(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),!0):!(!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable())&&(this.setSelectedItem(this.selectedItem_.getParent()),!0))},t.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},t.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var e=this.contents_[t];e&&!e.isSelectable();)e=this.contents_[++t];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1},t.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var e=this.contents_[t];e&&!e.isSelectable();)e=this.contents_[--t];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1},t.Toolbox.prototype.dispose=function(){this.flyout_.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)t.browserEvents.unbind(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),t.utils.dom.removeNode(this.HtmlDiv)},t.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),t.registry.register(t.registry.Type.TOOLBOX,t.registry.DEFAULT,t.Toolbox),t.Events.TrashcanOpen=function(e,n){t.Events.TrashcanOpen.superClass_.constructor.call(this,n),this.isOpen=e},t.utils.object.inherits(t.Events.TrashcanOpen,t.Events.UiBase),t.Events.TrashcanOpen.prototype.type=t.Events.TRASHCAN_OPEN,t.Events.TrashcanOpen.prototype.toJson=function(){var e=t.Events.TrashcanOpen.superClass_.toJson.call(this);return e.isOpen=this.isOpen,e},t.Events.TrashcanOpen.prototype.fromJson=function(e){t.Events.TrashcanOpen.superClass_.fromJson.call(this,e),this.isOpen=e.isOpen},t.registry.register(t.registry.Type.EVENT,t.Events.TRASHCAN_OPEN,t.Events.TrashcanOpen),t.IPlugin=function(){},t.IPositionable=function(){},t.Trashcan=function(e){this.workspace_=e,this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(e=new t.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(e.toolboxPosition=this.workspace_.toolboxPosition==t.utils.toolbox.Position.TOP?t.utils.toolbox.Position.BOTTOM:t.utils.toolbox.Position.TOP,this.flyout=new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(e)):(e.toolboxPosition=this.workspace_.toolboxPosition==t.utils.toolbox.Position.RIGHT?t.utils.toolbox.Position.LEFT:t.utils.toolbox.Position.RIGHT,this.flyout=new(t.registry.getClassFromOptions(t.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(e)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},t.Trashcan.prototype.WIDTH_=47,t.Trashcan.prototype.BODY_HEIGHT_=44,t.Trashcan.prototype.LID_HEIGHT_=16,t.Trashcan.prototype.MARGIN_BOTTOM_=20,t.Trashcan.prototype.MARGIN_SIDE_=20,t.Trashcan.prototype.MARGIN_HOTSPOT_=10,t.Trashcan.prototype.SPRITE_LEFT_=0,t.Trashcan.prototype.SPRITE_TOP_=32,t.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,t.Trashcan.ANIMATION_LENGTH_=80,t.Trashcan.ANIMATION_FRAMES_=4,t.Trashcan.OPACITY_MIN_=.4,t.Trashcan.OPACITY_MAX_=.8,t.Trashcan.MAX_LID_ANGLE_=45,t.Trashcan.prototype.isLidOpen=!1,t.Trashcan.prototype.minOpenness_=0,t.Trashcan.prototype.svgGroup_=null,t.Trashcan.prototype.svgLid_=null,t.Trashcan.prototype.lidTask_=0,t.Trashcan.prototype.lidOpen_=0,t.Trashcan.prototype.left_=0,t.Trashcan.prototype.top_=0,t.Trashcan.prototype.createDom=function(){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyTrash"},null);var e=String(Math.random()).substring(2),n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+e},this.svgGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var o=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,x:-this.SPRITE_LEFT_,height:t.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+e+")"},this.svgGroup_);return o.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+e},this.svgGroup_),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,x:-this.SPRITE_LEFT_,height:t.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+e+")"},this.svgGroup_),this.svgLid_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),t.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),t.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),t.browserEvents.bind(o,"mouseover",this,this.mouseOver_),t.browserEvents.bind(o,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},t.Trashcan.prototype.init=function(e){return 0<this.workspace_.options.maxTrashcanContents&&(t.utils.dom.insertAfter(this.flyout.createDom(t.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.verticalSpacing_=this.MARGIN_BOTTOM_+e,this.setLidOpen(!1),this.verticalSpacing_+this.BODY_HEIGHT_+this.LID_HEIGHT_},t.Trashcan.prototype.dispose=function(){this.svgGroup_&&(t.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},t.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},t.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},t.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){for(var e,n=[],o=0;e=this.contents_[o];o++)n[o]=t.Xml.textToDom(e);this.flyout.show(n),this.fireUiEvent_(!0)}},t.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},t.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},t.Trashcan.prototype.position=function(e,n){if(this.verticalSpacing_){this.left_=e.toolboxMetrics.position==t.utils.toolbox.Position.LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?e.viewMetrics.width+e.absoluteMetrics.left-this.WIDTH_-this.MARGIN_SIDE_-t.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+t.Scrollbar.scrollbarThickness;var o=this.BODY_HEIGHT_+this.LID_HEIGHT_,i=this.top_=e.absoluteMetrics.top+this.verticalSpacing_,r=e.absoluteMetrics.top+e.viewMetrics.height-o-this.verticalSpacing_;this.top_=(e=e.toolboxMetrics.position!==t.utils.toolbox.Position.BOTTOM)?r:i;for(var s,a=this.getBoundingRectangle(),l=0;s=n[l];l++)a.intersects(s)&&(this.top_=e?s.top-o-this.MARGIN_BOTTOM_:s.bottom+this.MARGIN_BOTTOM_,a=this.getBoundingRectangle(),l=-1);this.top_=t.utils.math.clamp(i,this.top_,r),this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},t.Trashcan.prototype.getBoundingRectangle=function(){return new t.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},t.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),n=e.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return e=e.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,new t.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,e,e+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},t.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!=t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},t.Trashcan.prototype.animateLid_=function(){var e=t.Trashcan.ANIMATION_FRAMES_,n=1/(e+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*t.Trashcan.MAX_LID_ANGLE_),n=t.Trashcan.OPACITY_MIN_,this.svgGroup_.style.opacity=n+this.lidOpen_*(t.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),t.Trashcan.ANIMATION_LENGTH_/e))},t.Trashcan.prototype.setLidAngle_=function(e){var n=this.workspace_.toolboxPosition==t.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-e:e)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},t.Trashcan.prototype.setMinOpenness_=function(e){this.minOpenness_=e,this.isLidOpen||this.setLidAngle_(e*t.Trashcan.MAX_LID_ANGLE_)},t.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},t.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},t.Trashcan.prototype.fireUiEvent_=function(e){e=new(t.Events.get(t.Events.TRASHCAN_OPEN))(e,this.workspace_.id),t.Events.fire(e)},t.Trashcan.prototype.blockMouseDownWhenOpenable_=function(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()},t.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},t.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},t.Trashcan.prototype.onDelete_=function(e){if(!(0>=this.workspace_.options.maxTrashcanContents)&&e.type==t.Events.BLOCK_DELETE&&e.oldXml.tagName&&"shadow"!=e.oldXml.tagName.toLowerCase()&&(e=this.cleanBlockXML_(e.oldXml),-1==this.contents_.indexOf(e))){for(this.contents_.unshift(e);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},t.Trashcan.prototype.cleanBlockXML_=function(e){for(var n=e=e.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var o=n.firstChild||n.nextSibling;if(!o)for(o=n.parentNode;o;){if(o.nextSibling){o=o.nextSibling;break}o=o.parentNode}n=o}return t.Xml.domToText(e)},t.VariablesDynamic={},t.VariablesDynamic.onCreateVariableButtonClick_String=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"String")},t.VariablesDynamic.onCreateVariableButtonClick_Number=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Number")},t.VariablesDynamic.onCreateVariableButtonClick_Colour=function(e){t.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Colour")},t.VariablesDynamic.flyoutCategory=function(e){var n=[],o=document.createElement("button");return o.setAttribute("text",t.Msg.NEW_STRING_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(o),(o=document.createElement("button")).setAttribute("text",t.Msg.NEW_NUMBER_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(o),(o=document.createElement("button")).setAttribute("text",t.Msg.NEW_COLOUR_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(o),e.registerButtonCallback("CREATE_VARIABLE_STRING",t.VariablesDynamic.onCreateVariableButtonClick_String),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",t.VariablesDynamic.onCreateVariableButtonClick_Number),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",t.VariablesDynamic.onCreateVariableButtonClick_Colour),e=t.VariablesDynamic.flyoutCategoryBlocks(e),n.concat(e)},t.VariablesDynamic.flyoutCategoryBlocks=function(e){var n=[];if(0<(e=e.getAllVariables()).length){if(t.Blocks.variables_set_dynamic){var o=e[e.length-1],i=t.utils.xml.createElement("block");i.setAttribute("type","variables_set_dynamic"),i.setAttribute("gap",24),i.appendChild(t.Variables.generateVariableFieldDom(o)),n.push(i)}if(t.Blocks.variables_get_dynamic){e.sort(t.VariableModel.compareByName),o=0;for(var r;r=e[o];o++)(i=t.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),i.setAttribute("gap",8),i.appendChild(t.Variables.generateVariableFieldDom(r)),n.push(i)}}return n},t.ZoomControls=function(t){this.workspace_=t,this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.verticalSpacing_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},t.ZoomControls.prototype.WIDTH_=32,t.ZoomControls.prototype.HEIGHT_=110,t.ZoomControls.prototype.MARGIN_BOTTOM_=20,t.ZoomControls.prototype.MARGIN_SIDE_=20,t.ZoomControls.prototype.svgGroup_=null,t.ZoomControls.prototype.left_=0,t.ZoomControls.prototype.top_=0,t.ZoomControls.prototype.createDom=function(){this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{},null);var e=String(Math.random()).substring(2);return this.createZoomOutSvg_(e),this.createZoomInSvg_(e),this.workspace_.isMovable()&&this.createZoomResetSvg_(e),this.svgGroup_},t.ZoomControls.prototype.init=function(t){return this.verticalSpacing_=this.MARGIN_BOTTOM_+t,this.verticalSpacing_+this.HEIGHT_},t.ZoomControls.prototype.dispose=function(){this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&t.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&t.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&t.browserEvents.unbind(this.onZoomOutWrapper_)},t.ZoomControls.prototype.getBoundingRectangle=function(){return new t.utils.Rect(this.top_,this.top_+this.HEIGHT_,this.left_,this.left_+this.WIDTH_)},t.ZoomControls.prototype.position=function(e,n){if(this.verticalSpacing_){this.left_=e.toolboxMetrics.position==t.utils.toolbox.Position.LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?e.viewMetrics.width+e.absoluteMetrics.left-this.WIDTH_-this.MARGIN_SIDE_-t.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+t.Scrollbar.scrollbarThickness;var o=this.top_=e.absoluteMetrics.top+this.verticalSpacing_,i=e.absoluteMetrics.top+e.viewMetrics.height-this.HEIGHT_-this.verticalSpacing_;this.top_=(e=e.toolboxMetrics.position!==t.utils.toolbox.Position.BOTTOM)?i:o,e?(this.zoomInGroup_.setAttribute("transform","translate(0, 43)"),this.zoomOutGroup_.setAttribute("transform","translate(0, 77)")):(this.zoomInGroup_.setAttribute("transform","translate(0, 34)"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, 77)"));for(var r,s=this.getBoundingRectangle(),a=0;r=n[a];a++)s.intersects(r)&&(this.top_=e?r.top-this.HEIGHT_-this.MARGIN_BOTTOM_:r.bottom+this.MARGIN_BOTTOM_,s=this.getBoundingRectangle(),a=-1);this.top_=t.utils.math.clamp(o,this.top_,i),this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},t.ZoomControls.prototype.createZoomOutSvg_=function(e){this.zoomOutGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomOutWrapper_=t.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},t.ZoomControls.prototype.createZoomInSvg_=function(e){this.zoomInGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomInWrapper_=t.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},t.ZoomControls.prototype.zoom_=function(e,n){this.workspace_.markFocused(),this.workspace_.zoomCenter(e),this.fireZoomEvent_(),t.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},t.ZoomControls.prototype.createZoomResetSvg_=function(e){this.zoomResetGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=t.utils.dom.createSvgElement(t.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup_);t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:32,height:32},n),t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{width:t.SPRITE.width,height:t.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup_).setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+t.SPRITE.url),this.onZoomResetWrapper_=t.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},t.ZoomControls.prototype.resetZoom_=function(e){this.workspace_.markFocused();var n=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(n),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),t.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()},t.ZoomControls.prototype.fireZoomEvent_=function(){var e=new(t.Events.get(t.Events.CLICK))(null,this.workspace_.id,"zoom_controls");t.Events.fire(e)},t.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),t.ShortcutItems={},t.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},t.ShortcutItems.registerEscape=function(){var e={name:t.ShortcutItems.names.ESCAPE,preconditionFn:function(t){return!t.options.readOnly},callback:function(){return t.hideChaff(),!0}};t.ShortcutRegistry.registry.register(e),t.ShortcutRegistry.registry.addKeyMapping(t.utils.KeyCodes.ESC,e.name)},t.ShortcutItems.registerDelete=function(){var e={name:t.ShortcutItems.names.DELETE,preconditionFn:function(e){return!e.options.readOnly&&t.selected&&t.selected.isDeletable()},callback:function(e,n){return n.preventDefault(),!t.Gesture.inProgress()&&(t.deleteBlock(t.selected),!0)}};t.ShortcutRegistry.registry.register(e),t.ShortcutRegistry.registry.addKeyMapping(t.utils.KeyCodes.DELETE,e.name),t.ShortcutRegistry.registry.addKeyMapping(t.utils.KeyCodes.BACKSPACE,e.name)},t.ShortcutItems.registerCopy=function(){var e={name:t.ShortcutItems.names.COPY,preconditionFn:function(e){return!e.options.readOnly&&!t.Gesture.inProgress()&&t.selected&&t.selected.isDeletable()&&t.selected.isMovable()},callback:function(){return t.hideChaff(),t.copy(t.selected),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.C,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.C,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.C,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerCut=function(){var e={name:t.ShortcutItems.names.CUT,preconditionFn:function(e){return!e.options.readOnly&&!t.Gesture.inProgress()&&t.selected&&t.selected.isDeletable()&&t.selected.isMovable()&&!t.selected.workspace.isFlyout},callback:function(){return t.copy(t.selected),t.deleteBlock(t.selected),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.X,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.X,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.X,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerPaste=function(){var e={name:t.ShortcutItems.names.PASTE,preconditionFn:function(e){return!e.options.readOnly&&!t.Gesture.inProgress()},callback:function(){return t.paste()}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.V,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.V,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.V,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerUndo=function(){var e={name:t.ShortcutItems.names.UNDO,preconditionFn:function(e){return!e.options.readOnly&&!t.Gesture.inProgress()},callback:function(e){return t.hideChaff(),e.undo(!1),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerRedo=function(){var e={name:t.ShortcutItems.names.REDO,preconditionFn:function(e){return!t.Gesture.inProgress()&&!e.options.readOnly},callback:function(e){return t.hideChaff(),e.undo(!0),!0}};t.ShortcutRegistry.registry.register(e);var n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.SHIFT,t.utils.KeyCodes.CTRL]);t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.SHIFT,t.utils.KeyCodes.ALT]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Z,[t.utils.KeyCodes.SHIFT,t.utils.KeyCodes.META]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name),n=t.ShortcutRegistry.registry.createSerializedKey(t.utils.KeyCodes.Y,[t.utils.KeyCodes.CTRL]),t.ShortcutRegistry.registry.addKeyMapping(n,e.name)},t.ShortcutItems.registerDefaultShortcuts=function(){t.ShortcutItems.registerEscape(),t.ShortcutItems.registerDelete(),t.ShortcutItems.registerCopy(),t.ShortcutItems.registerCut(),t.ShortcutItems.registerPaste(),t.ShortcutItems.registerUndo(),t.ShortcutItems.registerRedo()},t.ShortcutItems.registerDefaultShortcuts(),t.ContextMenuItems={},t.ContextMenuItems.registerUndo=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},t.ContextMenuItems.registerRedo=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},t.ContextMenuItems.registerCleanup=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},t.ContextMenuItems.toggleOption_=function(t,e){for(var n=0,o=0;o<e.length;o++)for(var i=e[o];i;)setTimeout(i.setCollapsed.bind(i,t),n),i=i.getNextBlock(),n+=10},t.ContextMenuItems.registerCollapse=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var e=0;e<t.length;e++)for(var n=t[e];n;){if(!n.isCollapsed())return"enabled";n=n.getNextBlock()}return"disabled"}return"hidden"},callback:function(e){t.ContextMenuItems.toggleOption_(!0,e.workspace.getTopBlocks(!0))},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},t.ContextMenuItems.registerExpand=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var e=0;e<t.length;e++)for(var n=t[e];n;){if(n.isCollapsed())return"enabled";n=n.getNextBlock()}return"disabled"}return"hidden"},callback:function(e){t.ContextMenuItems.toggleOption_(!1,e.workspace.getTopBlocks(!0))},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},t.ContextMenuItems.addDeletableBlocks_=function(e,n){if(e.isDeletable())Array.prototype.push.apply(n,e.getDescendants(!1));else{e=e.getChildren(!1);for(var o=0;o<e.length;o++)t.ContextMenuItems.addDeletableBlocks_(e[o],n)}},t.ContextMenuItems.getDeletableBlocks_=function(e){var n=[];e=e.getTopBlocks(!0);for(var o=0;o<e.length;o++)t.ContextMenuItems.addDeletableBlocks_(e[o],n);return n},t.ContextMenuItems.deleteNext_=function(e,n){t.Events.setGroup(n);var o=e.shift();o&&(o.workspace?(o.dispose(!1,!0),setTimeout(t.ContextMenuItems.deleteNext_,10,e,n)):t.ContextMenuItems.deleteNext_(e,n)),t.Events.setGroup(!1)},t.ContextMenuItems.registerDeleteAll=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){if(e.workspace)return 1==(e=t.ContextMenuItems.getDeletableBlocks_(e.workspace).length)?t.Msg.DELETE_BLOCK:t.Msg.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:function(e){if(e.workspace)return 0<t.ContextMenuItems.getDeletableBlocks_(e.workspace).length?"enabled":"disabled"},callback:function(e){if(e.workspace){e.workspace.cancelCurrentGesture();var n=t.ContextMenuItems.getDeletableBlocks_(e.workspace),o=t.utils.genUid();2>n.length?t.ContextMenuItems.deleteNext_(n,o):t.confirm(t.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),(function(e){e&&t.ContextMenuItems.deleteNext_(n,o)}))}},scopeType:t.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},t.ContextMenuItems.registerWorkspaceOptions_=function(){t.ContextMenuItems.registerUndo(),t.ContextMenuItems.registerRedo(),t.ContextMenuItems.registerCleanup(),t.ContextMenuItems.registerCollapse(),t.ContextMenuItems.registerExpand(),t.ContextMenuItems.registerDeleteAll()},t.ContextMenuItems.registerDuplicate=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(e){e.block&&t.duplicate(e.block)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},t.ContextMenuItems.registerComment=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.getCommentIcon()?t.Msg.REMOVE_COMMENT:t.Msg.ADD_COMMENT},preconditionFn:function(e){return e=e.block,t.utils.userAgent.IE||e.isInFlyout||!e.workspace.options.comments||e.isCollapsed()||!e.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},t.ContextMenuItems.registerInline=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.getInputsInline()?t.Msg.EXTERNAL_INPUTS:t.Msg.INLINE_INPUTS},preconditionFn:function(e){if(!(e=e.block).isInFlyout&&e.isMovable()&&!e.isCollapsed())for(var n=1;n<e.inputList.length;n++)if(e.inputList[n-1].type!=t.inputTypes.STATEMENT&&e.inputList[n].type!=t.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},t.ContextMenuItems.registerCollapseExpandBlock=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.isCollapsed()?t.Msg.EXPAND_BLOCK:t.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},t.ContextMenuItems.registerDisable=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.isEnabled()?t.Msg.DISABLE_BLOCK:t.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(e){e=e.block;var n=t.Events.getGroup();n||t.Events.setGroup(!0),e.setEnabled(!e.isEnabled()),n||t.Events.setGroup(!1)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},t.ContextMenuItems.registerDelete=function(){t.ContextMenuRegistry.registry.register({displayText:function(e){var n=e.block;return e=n.getDescendants(!1).length,(n=n.getNextBlock())&&(e-=n.getDescendants(!1).length),1==e?t.Msg.DELETE_BLOCK:t.Msg.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(e){t.Events.setGroup(!0),e.block.dispose(!0,!0),t.Events.setGroup(!1)},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},t.ContextMenuItems.registerHelp=function(){t.ContextMenuRegistry.registry.register({displayText:function(){return t.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:t.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},t.ContextMenuItems.registerBlockOptions_=function(){t.ContextMenuItems.registerDuplicate(),t.ContextMenuItems.registerComment(),t.ContextMenuItems.registerInline(),t.ContextMenuItems.registerCollapseExpandBlock(),t.ContextMenuItems.registerDisable(),t.ContextMenuItems.registerDelete(),t.ContextMenuItems.registerHelp()},t.ContextMenuItems.registerDefaultOptions=function(){t.ContextMenuItems.registerWorkspaceOptions_(),t.ContextMenuItems.registerBlockOptions_()},t.ContextMenuItems.registerDefaultOptions(),t.Mutator=function(e){t.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=e},t.utils.object.inherits(t.Mutator,t.Icon),t.Mutator.prototype.workspaceWidth_=0,t.Mutator.prototype.workspaceHeight_=0,t.Mutator.prototype.setBlock=function(t){this.block_=t},t.Mutator.prototype.getWorkspace=function(){return this.workspace_},t.Mutator.prototype.drawIcon_=function(e){t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},e),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},e),t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},e)},t.Mutator.prototype.iconClick_=function(e){this.block_.isEditable()&&t.Icon.prototype.iconClick_.call(this,e)},t.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{x:t.Bubble.BORDER_WIDTH,y:t.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var e,n=t.utils.xml.createElement("xml"),o=0;e=this.quarkNames_[o];o++){var i=t.utils.xml.createElement("block");i.setAttribute("type",e),n.appendChild(i)}else n=null;return(o=new t.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?t.utils.toolbox.Position.RIGHT:t.utils.toolbox.Position.LEFT,(e=!!n)&&(o.languageTree=t.utils.toolbox.convertToolboxDefToJson(n)),this.workspace_=new t.WorkspaceSvg(o),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(t.Events.disableOrphans),n=e?this.workspace_.addFlyout(t.utils.Svg.G):null,o=this.workspace_.createDom("blocklyMutatorBackground"),n&&o.insertBefore(n,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(o),this.svgDialog_},t.Mutator.prototype.updateEditable=function(){t.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&t.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&t.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},t.Mutator.prototype.resizeBubble_=function(){var e=2*t.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),o=n.width+n.x,i=n.height+3*e,r=this.workspace_.getFlyout();if(r){var s=r.getWorkspace().getMetricsManager().getScrollMetrics();i=Math.max(i,s.height+20),o+=r.getWidth()}this.block_.RTL&&(o=-n.x),o+=3*e,(Math.abs(this.workspaceWidth_-o)>e||Math.abs(this.workspaceHeight_-i)>e)&&(this.workspaceWidth_=o,this.workspaceHeight_=i,this.bubble_.setBubbleSize(o+e,i+e),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(e="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",e)),this.workspace_.resize()},t.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDeleteAreas()},t.Mutator.prototype.setVisible=function(e){if(e!=this.isVisible())if(t.Events.fire(new(t.Events.get(t.Events.BUBBLE_OPEN))(this.block_,e,"mutator")),e){this.bubble_=new t.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;e=this.workspace_.getFlyout(),n&&(e.init(this.workspace_),e.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var o,i=0;o=n[i];i++)o.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),e?(n=2*e.CORNER_RADIUS,e=this.rootBlock_.RTL?e.getWidth()+n:n):e=n=16,this.block_.RTL&&(e=-e),this.rootBlock_.moveBy(e,n),this.block_.saveConnections){var r=this,s=this.block_;s.saveConnections(this.rootBlock_),this.sourceListener_=function(){s.saveConnections(r.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},t.Mutator.prototype.workspaceChanged_=function(e){if(!(e.isUiEvent||e.type==t.Events.CHANGE&&"disabled"==e.element)){if(!this.workspace_.isDragging()){e=this.workspace_.getTopBlocks(!1);for(var n,o=0;n=e[o];o++){var i=n.getRelativeToSurfaceXY();if(20>i.y&&n.moveBy(0,20-i.y),n.RTL){var r=-20,s=this.workspace_.getFlyout();s&&(r-=s.getWidth()),i.x>r&&n.moveBy(r-i.x,0)}else 20>i.x&&n.moveBy(20-i.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(t.Events.setGroup(!0),e=(e=(n=this.block_).mutationToDom())&&t.Xml.domToText(e),o=n.rendered,n.rendered=!1,n.compose(this.rootBlock_),n.rendered=o,n.initSvg(),n.rendered&&n.render(),e!=(o=(o=n.mutationToDom())&&t.Xml.domToText(o))){t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(n,"mutation",null,e,o));var a=t.Events.getGroup();setTimeout((function(){t.Events.setGroup(a),n.bumpNeighbours(),t.Events.setGroup(!1)}),t.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),t.Events.setGroup(!1)}}},t.Mutator.prototype.dispose=function(){this.block_.mutator=null,t.Icon.prototype.dispose.call(this)},t.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var e=t.getAllBlocks(!1),n=0;n<e.length;n++){var o=e[n];o.setStyle(o.getStyleName())}if(n=t.getFlyout())for(t=n.workspace_.getAllBlocks(!1),n=0;n<t.length;n++)(o=t[n]).setStyle(o.getStyleName())}},t.Mutator.reconnect=function(t,e,n){if(!t||!t.getSourceBlock().workspace)return!1;n=e.getInput(n).connection;var o=t.targetBlock();return!(o&&o!=e||n.targetConnection==t)&&(n.isConnected()&&n.disconnect(),n.connect(t),!0)},t.Mutator.findParentWs=function(t){var e=null;if(t&&t.options){var n=t.options.parentWorkspace;t.isFlyout?n&&n.options&&(e=n.options.parentWorkspace):n&&(e=n)}return e},t.FieldTextInput=function(e,n,o){this.spellcheck_=!0,t.FieldTextInput.superClass_.constructor.call(this,e,n,o),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},t.utils.object.inherits(t.FieldTextInput,t.Field),t.FieldTextInput.prototype.DEFAULT_VALUE="",t.FieldTextInput.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldTextInput(n,void 0,e)},t.FieldTextInput.prototype.SERIALIZABLE=!0,t.FieldTextInput.BORDERRADIUS=4,t.FieldTextInput.prototype.CURSOR="text",t.FieldTextInput.prototype.configure_=function(e){t.FieldTextInput.superClass_.configure_.call(this,e),"boolean"==typeof e.spellcheck&&(this.spellcheck_=e.spellcheck)},t.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var t,e=0,n=0,o=0;t=this.sourceBlock_.inputList[o];o++){for(var i=0;t.fieldRow[i];i++)e++;t.connection&&n++}this.fullBlockClickTarget_=1>=e&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},t.FieldTextInput.prototype.doClassValidation_=function(t){return null===t||void 0===t?null:String(t)},t.FieldTextInput.prototype.doValueInvalid_=function(e){this.isBeingEdited_&&(this.isTextValid_=!1,e=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&t.Events.isEnabled()&&t.Events.fire(new(t.Events.get(t.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))},t.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},t.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},t.FieldTextInput.prototype.render_=function(){if(t.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var e=this.htmlInput_;this.isTextValid_?(t.utils.dom.removeClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!1)):(t.utils.dom.addClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!0))}},t.FieldTextInput.prototype.setSpellcheck=function(t){t!=this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},t.FieldTextInput.prototype.showEditor_=function(e,n){this.workspace_=this.sourceBlock_.workspace,!(e=n||!1)&&(t.utils.userAgent.MOBILE||t.utils.userAgent.ANDROID||t.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(e)},t.FieldTextInput.prototype.showPromptEditor_=function(){t.prompt(t.Msg.CHANGE_VALUE_TITLE,this.getText(),function(t){this.setValue(this.getValueFromEditorText_(t))}.bind(this))},t.FieldTextInput.prototype.showInlineEditor_=function(e){t.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},t.FieldTextInput.prototype.widgetCreate_=function(){var e=t.WidgetDiv.DIV;t.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var o=this.workspace_.getScale(),i=this.getConstants().FIELD_TEXT_FONTSIZE*o+"pt";if(e.style.fontSize=i,n.style.fontSize=i,i=t.FieldTextInput.BORDERRADIUS*o+"px",this.fullBlockClickTarget_){i=((i=this.getScaledBBox()).bottom-i.top)/2+"px";var r=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*o+"px solid "+r,e.style.borderRadius=i,e.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(e.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*o+"px")}return n.style.borderRadius=i,e.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},t.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var e=t.WidgetDiv.DIV.style;e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,t.utils.dom.removeClass(this.getClickTarget_(),"editing")},t.FieldTextInput.prototype.bindInputEvents_=function(e){this.onKeyDownWrapper_=t.browserEvents.conditionalBind(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=t.browserEvents.conditionalBind(e,"input",this,this.onHtmlInputChange_)},t.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(t.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(t.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},t.FieldTextInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode==t.utils.KeyCodes.ENTER?(t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()):e.keyCode==t.utils.KeyCodes.ESC?(this.htmlInput_.value=this.htmlInput_.defaultValue,t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation()):e.keyCode==t.utils.KeyCodes.TAB&&(t.WidgetDiv.hide(),t.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())},t.FieldTextInput.prototype.onHtmlInputChange_=function(e){(e=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=e,t.Events.setGroup(!0),e=this.getValueFromEditorText_(e),this.setValue(e),this.forceRerender(),this.resizeEditor_(),t.Events.setGroup(!1))},t.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},t.FieldTextInput.prototype.resizeEditor_=function(){var e=t.WidgetDiv.DIV,n=this.getScaledBBox();e.style.width=n.right-n.left+"px",e.style.height=n.bottom-n.top+"px",n=new t.utils.Coordinate(this.sourceBlock_.RTL?n.right-e.offsetWidth:n.left,n.top),e.style.left=n.x+"px",e.style.top=n.y+"px"},t.FieldTextInput.prototype.isTabNavigable=function(){return!0},t.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},t.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},t.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},t.fieldRegistry.register("field_input",t.FieldTextInput),t.FieldAngle=function(e,n,o){this.clockwise_=t.FieldAngle.CLOCKWISE,this.offset_=t.FieldAngle.OFFSET,this.wrap_=t.FieldAngle.WRAP,this.round_=t.FieldAngle.ROUND,t.FieldAngle.superClass_.constructor.call(this,e,n,o),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=null},t.utils.object.inherits(t.FieldAngle,t.FieldTextInput),t.FieldAngle.prototype.DEFAULT_VALUE=0,t.FieldAngle.fromJson=function(e){return new t.FieldAngle(e.angle,void 0,e)},t.FieldAngle.prototype.SERIALIZABLE=!0,t.FieldAngle.ROUND=15,t.FieldAngle.HALF=50,t.FieldAngle.CLOCKWISE=!1,t.FieldAngle.OFFSET=0,t.FieldAngle.WRAP=360,t.FieldAngle.RADIUS=t.FieldAngle.HALF-1,t.FieldAngle.prototype.configure_=function(e){switch(t.FieldAngle.superClass_.configure_.call(this,e),e.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=e.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=e.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=e.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(e=e.round)&&(e=Number(e),isNaN(e)||(this.round_=e))},t.FieldAngle.prototype.initView=function(){t.FieldAngle.superClass_.initView.call(this),this.symbol_=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},t.FieldAngle.prototype.render_=function(){t.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},t.FieldAngle.prototype.showEditor_=function(e){t.FieldAngle.superClass_.showEditor_.call(this,e,t.utils.userAgent.MOBILE||t.utils.userAgent.ANDROID||t.utils.userAgent.IPAD),e=this.dropdownCreate_(),t.DropDownDiv.getContentDiv().appendChild(e),t.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},t.FieldAngle.prototype.dropdownCreate_=function(){var e=t.utils.dom.createSvgElement(t.utils.Svg.SVG,{xmlns:t.utils.dom.SVG_NS,"xmlns:html":t.utils.dom.HTML_NS,"xmlns:xlink":t.utils.dom.XLINK_NS,version:"1.1",height:2*t.FieldAngle.HALF+"px",width:2*t.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{cx:t.FieldAngle.HALF,cy:t.FieldAngle.HALF,r:t.FieldAngle.RADIUS,class:"blocklyAngleCircle"},e);this.gauge_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyAngleGauge"},e),this.line_=t.utils.dom.createSvgElement(t.utils.Svg.LINE,{x1:t.FieldAngle.HALF,y1:t.FieldAngle.HALF,class:"blocklyAngleLine"},e);for(var o=0;360>o;o+=15)t.utils.dom.createSvgElement(t.utils.Svg.LINE,{x1:t.FieldAngle.HALF+t.FieldAngle.RADIUS,y1:t.FieldAngle.HALF,x2:t.FieldAngle.HALF+t.FieldAngle.RADIUS-(0==o%45?10:5),y2:t.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+o+","+t.FieldAngle.HALF+","+t.FieldAngle.HALF+")"},e);return this.clickWrapper_=t.browserEvents.conditionalBind(e,"click",this,this.hide_),this.clickSurfaceWrapper_=t.browserEvents.conditionalBind(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=t.browserEvents.conditionalBind(n,"mousemove",this,this.onMouseMove_,!0,!0),e},t.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(t.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(t.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(t.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},t.FieldAngle.prototype.hide_=function(){t.DropDownDiv.hideIfOwner(this),t.WidgetDiv.hide()},t.FieldAngle.prototype.onMouseMove_=function(e){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),o=e.clientX-n.left-t.FieldAngle.HALF;e=e.clientY-n.top-t.FieldAngle.HALF,n=Math.atan(-e/o),isNaN(n)||(n=t.utils.math.toDegrees(n),0>o?n+=180:0<e&&(n+=360),n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n),this.displayMouseOrKeyboardValue_(n))},t.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!=this.value_&&this.setEditorValue_(t)},t.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var e=Number(this.getText())+this.offset_,n=t.utils.math.toRadians(e%360);e=["M ",t.FieldAngle.HALF,",",t.FieldAngle.HALF];var o=t.FieldAngle.HALF,i=t.FieldAngle.HALF;if(!isNaN(n)){var r=Number(this.clockwise_),s=t.utils.math.toRadians(this.offset_),a=Math.cos(s)*t.FieldAngle.RADIUS,l=Math.sin(s)*-t.FieldAngle.RADIUS;r&&(n=2*s-n),o+=Math.cos(n)*t.FieldAngle.RADIUS,i-=Math.sin(n)*t.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-s)/Math.PI)%2),r&&(n=1-n),e.push(" l ",a,",",l," A ",t.FieldAngle.RADIUS,",",t.FieldAngle.RADIUS," 0 ",n," ",r," ",o,",",i," z")}this.gauge_.setAttribute("d",e.join("")),this.line_.setAttribute("x2",o),this.line_.setAttribute("y2",i)}},t.FieldAngle.prototype.onHtmlInputKeyDown_=function(e){var n;if(t.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,e),e.keyCode===t.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:e.keyCode===t.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:e.keyCode===t.utils.KeyCodes.DOWN?n=-1:e.keyCode===t.utils.KeyCodes.UP&&(n=1),n){var o=this.getValue();this.displayMouseOrKeyboardValue_(o+n*this.round_),e.preventDefault(),e.stopPropagation()}},t.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},t.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},t.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),t.fieldRegistry.register("field_angle",t.FieldAngle),t.FieldCheckbox=function(e,n,o){this.checkChar_=null,t.FieldCheckbox.superClass_.constructor.call(this,e,n,o)},t.utils.object.inherits(t.FieldCheckbox,t.Field),t.FieldCheckbox.prototype.DEFAULT_VALUE=!1,t.FieldCheckbox.fromJson=function(e){return new t.FieldCheckbox(e.checked,void 0,e)},t.FieldCheckbox.CHECK_CHAR="\u2713",t.FieldCheckbox.prototype.SERIALIZABLE=!0,t.FieldCheckbox.prototype.CURSOR="default",t.FieldCheckbox.prototype.configure_=function(e){t.FieldCheckbox.superClass_.configure_.call(this,e),e.checkCharacter&&(this.checkChar_=e.checkCharacter)},t.FieldCheckbox.prototype.initView=function(){t.FieldCheckbox.superClass_.initView.call(this),t.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},t.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},t.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||t.FieldCheckbox.CHECK_CHAR},t.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},t.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},t.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},t.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},t.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},t.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},t.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},t.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"==t:!!t},t.fieldRegistry.register("field_checkbox",t.FieldCheckbox),t.FieldColour=function(e,n,o){t.FieldColour.superClass_.constructor.call(this,e,n,o),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},t.utils.object.inherits(t.FieldColour,t.Field),t.FieldColour.fromJson=function(e){return new t.FieldColour(e.colour,void 0,e)},t.FieldColour.prototype.SERIALIZABLE=!0,t.FieldColour.prototype.CURSOR="default",t.FieldColour.prototype.isDirty_=!1,t.FieldColour.prototype.colours_=null,t.FieldColour.prototype.titles_=null,t.FieldColour.prototype.columns_=0,t.FieldColour.prototype.configure_=function(e){t.FieldColour.superClass_.configure_.call(this,e),e.colourOptions&&(this.colours_=e.colourOptions,this.titles_=e.colourTitles),e.columns&&(this.columns_=e.columns)},t.FieldColour.prototype.initView=function(){this.size_=new t.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},t.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},t.FieldColour.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:t.utils.colour.parse(e)},t.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},t.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},t.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),t.FieldColour.prototype.DEFAULT_VALUE=t.FieldColour.COLOURS[0],t.FieldColour.TITLES=[],t.FieldColour.COLUMNS=7,t.FieldColour.prototype.setColours=function(t,e){return this.colours_=t,e&&(this.titles_=e),this},t.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},t.FieldColour.prototype.showEditor_=function(){this.picker_=this.dropdownCreate_(),t.DropDownDiv.getContentDiv().appendChild(this.picker_),t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},t.FieldColour.prototype.onClick_=function(e){null!==(e=(e=e.target)&&e.label)&&(this.setValue(e),t.DropDownDiv.hideIfOwner(this))},t.FieldColour.prototype.onKeyDown_=function(e){var n=!1;e.keyCode===t.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):e.keyCode===t.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):e.keyCode===t.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):e.keyCode===t.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):e.keyCode===t.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),t.DropDownDiv.hideWithoutAnimation(),n=!0),n&&e.stopPropagation()},t.FieldColour.prototype.moveHighlightBy_=function(e,n){var o=this.colours_||t.FieldColour.COLOURS,i=this.columns_||t.FieldColour.COLUMNS,r=this.highlightedIndex_%i,s=Math.floor(this.highlightedIndex_/i);r+=e,s+=n,0>e?0>r&&0<s?(r=i-1,s--):0>r&&(r=0):0<e?r>i-1&&s<Math.floor(o.length/i)-1?(r=0,s++):r>i-1&&r--:0>n?0>s&&(s=0):0<n&&s>Math.floor(o.length/i)-1&&(s=Math.floor(o.length/i)-1),this.setHighlightedCell_(this.picker_.childNodes[s].childNodes[r],s*i+r)},t.FieldColour.prototype.onMouseMove_=function(t){var e=(t=t.target)&&Number(t.getAttribute("data-index"));null!==e&&e!==this.highlightedIndex_&&this.setHighlightedCell_(t,e)},t.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},t.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var e=this.getHighlighted_();e&&t.utils.dom.removeClass(e,"blocklyColourHighlighted")},t.FieldColour.prototype.getHighlighted_=function(){var e=this.columns_||t.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/e)];return n?n.childNodes[this.highlightedIndex_%e]:null},t.FieldColour.prototype.setHighlightedCell_=function(e,n){var o=this.getHighlighted_();o&&t.utils.dom.removeClass(o,"blocklyColourHighlighted"),t.utils.dom.addClass(e,"blocklyColourHighlighted"),this.highlightedIndex_=n,t.utils.aria.setState(this.picker_,t.utils.aria.State.ACTIVEDESCENDANT,e.getAttribute("id"))},t.FieldColour.prototype.dropdownCreate_=function(){var e=this.columns_||t.FieldColour.COLUMNS,n=this.colours_||t.FieldColour.COLOURS,o=this.titles_||t.FieldColour.TITLES,i=this.getValue(),r=document.createElement("table");r.className="blocklyColourTable",r.tabIndex=0,r.dir="ltr",t.utils.aria.setRole(r,t.utils.aria.Role.GRID),t.utils.aria.setState(r,t.utils.aria.State.EXPANDED,!0),t.utils.aria.setState(r,t.utils.aria.State.ROWCOUNT,Math.floor(n.length/e)),t.utils.aria.setState(r,t.utils.aria.State.COLCOUNT,e);for(var s,a=0;a<n.length;a++){0==a%e&&(s=document.createElement("tr"),t.utils.aria.setRole(s,t.utils.aria.Role.ROW),r.appendChild(s));var l=document.createElement("td");s.appendChild(l),l.label=n[a],l.title=o[a]||n[a],l.id=t.utils.IdGenerator.getNextUniqueId(),l.setAttribute("data-index",a),t.utils.aria.setRole(l,t.utils.aria.Role.GRIDCELL),t.utils.aria.setState(l,t.utils.aria.State.LABEL,n[a]),t.utils.aria.setState(l,t.utils.aria.State.SELECTED,n[a]==i),l.style.backgroundColor=n[a],n[a]==i&&(l.className="blocklyColourSelected",this.highlightedIndex_=a)}return this.onClickWrapper_=t.browserEvents.conditionalBind(r,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=t.browserEvents.conditionalBind(r,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=t.browserEvents.conditionalBind(r,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=t.browserEvents.conditionalBind(r,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=t.browserEvents.conditionalBind(r,"keydown",this,this.onKeyDown_),r},t.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(t.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(t.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(t.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(t.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(t.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},t.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),t.fieldRegistry.register("field_colour",t.FieldColour),t.FieldDropdown=function(e,n,o){"function"!=typeof e&&t.FieldDropdown.validateOptions_(e),this.menuGenerator_=e,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],t.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,o),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},t.utils.object.inherits(t.FieldDropdown,t.Field),t.FieldDropdown.fromJson=function(e){return new t.FieldDropdown(e.options,void 0,e)},t.FieldDropdown.prototype.fromXml=function(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)},t.FieldDropdown.prototype.SERIALIZABLE=!0,t.FieldDropdown.CHECKMARK_OVERHANG=25,t.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,t.FieldDropdown.IMAGE_Y_OFFSET=5,t.FieldDropdown.IMAGE_Y_PADDING=2*t.FieldDropdown.IMAGE_Y_OFFSET,t.FieldDropdown.ARROW_CHAR=t.utils.userAgent.ANDROID?"\u25bc":"\u25be",t.FieldDropdown.prototype.CURSOR="default",t.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&t.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},t.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},t.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=t.utils.dom.createSvgElement(t.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?t.FieldDropdown.ARROW_CHAR+" ":" "+t.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},t.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},t.FieldDropdown.prototype.showEditor_=function(e){if(this.menu_=this.dropdownCreate_(),this.menu_.openingCoords=e&&"number"===typeof e.clientX?new t.utils.Coordinate(e.clientX,e.clientY):null,this.menu_.render(t.DropDownDiv.getContentDiv()),e=this.menu_.getElement(),t.utils.dom.addClass(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){e=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;t.DropDownDiv.setColour(e,n)}t.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},t.FieldDropdown.prototype.dropdownCreate_=function(){var e=new t.Menu;e.setRole(t.utils.aria.Role.LISTBOX);var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var o=0;o<n.length;o++){var i=n[o][0],r=n[o][1];if("object"==typeof i){var s=new Image(i.width,i.height);s.src=i.src,s.alt=i.alt||"",i=s}(i=new t.MenuItem(i,r)).setRole(t.utils.aria.Role.OPTION),i.setRightToLeft(this.sourceBlock_.RTL),i.setCheckable(!0),e.addChild(i),i.setChecked(r==this.value_),r==this.value_&&(this.selectedMenuItem_=i),i.onAction(this.handleMenuActionEvent_,this)}return e},t.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},t.FieldDropdown.prototype.handleMenuActionEvent_=function(e){t.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,e)},t.FieldDropdown.prototype.onItemSelected_=function(t,e){this.setValue(e.getValue())},t.FieldDropdown.prototype.trimOptions_=function(){var e=this.menuGenerator_;if(Array.isArray(e)){for(var n=!1,o=0;o<e.length;o++){var i=e[o][0];"string"==typeof i?e[o][0]=t.utils.replaceMessageReferences(i):(null!=i.alt&&(e[o][0].alt=t.utils.replaceMessageReferences(i.alt)),n=!0)}if(!(n||2>e.length)){for(n=[],o=0;o<e.length;o++)n.push(e[o][0]);o=t.utils.string.shortestStringLength(n),i=t.utils.string.commonWordPrefix(n,o);var r=t.utils.string.commonWordSuffix(n,o);!i&&!r||o<=i+r||(i&&(this.prefixField=n[0].substring(0,i-1)),r&&(this.suffixField=n[0].substr(1-r)),this.menuGenerator_=t.FieldDropdown.applyTrim_(e,i,r))}}},t.FieldDropdown.applyTrim_=function(t,e,n){for(var o=[],i=0;i<t.length;i++){var r=t[i][0],s=t[i][1];r=r.substring(e,r.length-n),o[i]=[r,s]}return o},t.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},t.FieldDropdown.prototype.getOptions=function(e){return this.isOptionListDynamic()?(this.generatedOptions_&&e||(this.generatedOptions_=this.menuGenerator_.call(this),t.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},t.FieldDropdown.prototype.doClassValidation_=function(t){for(var e,n=!1,o=this.getOptions(!0),i=0;e=o[i];i++)if(e[1]==t){n=!0;break}return n?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},t.FieldDropdown.prototype.doValueUpdate_=function(e){t.FieldDropdown.superClass_.doValueUpdate_.call(this,e),e=this.getOptions(!0);for(var n,o=0;n=e[o];o++)n[1]==this.value_&&(this.selectedOption_=n)},t.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",this.sourceBlock_.style.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=this.sourceBlock_.style.colourSecondary:this.arrow_.style.fill=this.sourceBlock_.style.colourPrimary)},t.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},t.FieldDropdown.prototype.renderSelectedImage_=function(e){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",e.src),this.imageElement_.setAttribute("height",e.height),this.imageElement_.setAttribute("width",e.width);var n=Number(e.height);e=Number(e.width);var o=!!this.borderRect_,i=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+t.FieldDropdown.IMAGE_Y_PADDING);o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var r=this.svgArrow_?this.positionSVGArrow_(e+o,i/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):t.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=e+r+2*o,this.size_.height=i;var s=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",o+r):(s=e+r,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",o)),this.imageElement_.setAttribute("y",i/2-n/2),this.positionTextElement_(s+o,e+r)},t.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),t.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var e=!!this.borderRect_,n=Math.max(e?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),o=t.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);e=e?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var i=0;this.svgArrow_&&(i=this.positionSVGArrow_(o+e,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=o+i+2*e,this.size_.height=n,this.positionTextElement_(e,o)},t.FieldDropdown.prototype.positionSVGArrow_=function(t,e){if(!this.svgArrow_)return 0;var n=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,o=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,i=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?n:t+o)+","+e+")"),i+o},t.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t},t.FieldDropdown.validateOptions_=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var e=!1,n=0;n<t.length;++n){var o=t[n];Array.isArray(o)?"string"!=typeof o[1]?(e=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option id must be a string. Found "+o[1]+" in: ",o)):o[0]&&"string"!=typeof o[0]&&"string"!=typeof o[0].src&&(e=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must have a string label or image description. Found"+o[0]+" in: ",o)):(e=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must be an array. Found: ",o))}if(e)throw TypeError("Found invalid FieldDropdown options.")},t.fieldRegistry.register("field_dropdown",t.FieldDropdown),t.FieldLabelSerializable=function(e,n,o){t.FieldLabelSerializable.superClass_.constructor.call(this,e,n,o)},t.utils.object.inherits(t.FieldLabelSerializable,t.FieldLabel),t.FieldLabelSerializable.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldLabelSerializable(n,void 0,e)},t.FieldLabelSerializable.prototype.EDITABLE=!1,t.FieldLabelSerializable.prototype.SERIALIZABLE=!0,t.fieldRegistry.register("field_label_serializable",t.FieldLabelSerializable),t.FieldImage=function(e,n,o,i,r,s,a){if(!e)throw Error("Src value of an image field is required");if(e=t.utils.replaceMessageReferences(e),o=Number(t.utils.replaceMessageReferences(o)),n=Number(t.utils.replaceMessageReferences(n)),isNaN(o)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=o||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",t.FieldImage.superClass_.constructor.call(this,e,null,a),a||(this.flipRtl_=!!s,this.altText_=t.utils.replaceMessageReferences(i)||""),this.size_=new t.utils.Size(n,o+t.FieldImage.Y_PADDING),this.imageHeight_=o,this.clickHandler_=null,"function"==typeof r&&(this.clickHandler_=r),this.imageElement_=null},t.utils.object.inherits(t.FieldImage,t.Field),t.FieldImage.prototype.DEFAULT_VALUE="",t.FieldImage.fromJson=function(e){return new t.FieldImage(e.src,e.width,e.height,void 0,void 0,void 0,e)},t.FieldImage.Y_PADDING=1,t.FieldImage.prototype.EDITABLE=!1,t.FieldImage.prototype.isDirty_=!1,t.FieldImage.prototype.configure_=function(e){t.FieldImage.superClass_.configure_.call(this,e),this.flipRtl_=!!e.flipRtl,this.altText_=t.utils.replaceMessageReferences(e.alt)||""},t.FieldImage.prototype.initView=function(){this.imageElement_=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},t.FieldImage.prototype.updateSize_=function(){},t.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},t.FieldImage.prototype.doValueUpdate_=function(e){this.value_=e,this.imageElement_&&this.imageElement_.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},t.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},t.FieldImage.prototype.setAlt=function(t){t!=this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},t.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},t.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},t.FieldImage.prototype.getText_=function(){return this.altText_},t.fieldRegistry.register("field_image",t.FieldImage),t.FieldMultilineInput=function(e,n,o){t.FieldMultilineInput.superClass_.constructor.call(this,e,n,o),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},t.utils.object.inherits(t.FieldMultilineInput,t.FieldTextInput),t.FieldMultilineInput.prototype.configure_=function(e){t.FieldMultilineInput.superClass_.configure_.call(this,e),e.maxLines&&this.setMaxLines(e.maxLines)},t.FieldMultilineInput.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.text);return new t.FieldMultilineInput(n,void 0,e)},t.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},t.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},t.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},t.FieldMultilineInput.prototype.getDisplayText_=function(){var e=this.getText();if(!e)return t.Field.NBSP;var n=e.split("\n");e="";for(var o=this.isOverflowedY_?this.maxLines_:n.length,i=0;i<o;i++){var r=n[i];r.length>this.maxDisplayLength?r=r.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&i===o-1&&(r=r.substring(0,r.length-3)+"..."),e+=r=r.replace(/\s/g,t.Field.NBSP),i!==o-1&&(e+="\n")}return this.sourceBlock_.RTL&&(e+="\u200f"),e},t.FieldMultilineInput.prototype.doValueUpdate_=function(e){t.FieldMultilineInput.superClass_.doValueUpdate_.call(this,e),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},t.FieldMultilineInput.prototype.render_=function(){for(var e;e=this.textGroup_.firstChild;)this.textGroup_.removeChild(e);e=this.getDisplayText_().split("\n");for(var n=0,o=0;o<e.length;o++){var i=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(e[o])),n+=i}this.isBeingEdited_&&(e=this.htmlInput_,this.isOverflowedY_?t.utils.dom.addClass(e,"blocklyHtmlTextAreaInputOverflowedY"):t.utils.dom.removeClass(e,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),e=this.htmlInput_,this.isTextValid_?(t.utils.dom.removeClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!1)):(t.utils.dom.addClass(e,"blocklyInvalidInput"),t.utils.aria.setState(e,t.utils.aria.State.INVALID,!0)))},t.FieldMultilineInput.prototype.updateSize_=function(){for(var e=this.textGroup_.childNodes,n=0,o=0,i=0;i<e.length;i++){var r=t.utils.dom.getTextWidth(e[i]);r>n&&(n=r),o+=this.getConstants().FIELD_TEXT_HEIGHT+(0<i?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){e=this.value_.split("\n"),r=t.utils.dom.createSvgElement(t.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var s=this.getConstants().FIELD_TEXT_FONTSIZE,a=this.getConstants().FIELD_TEXT_FONTWEIGHT,l=this.getConstants().FIELD_TEXT_FONTFAMILY;for(i=0;i<e.length;i++){e[i].length>this.maxDisplayLength&&(e[i]=e[i].substring(0,this.maxDisplayLength)),r.textContent=e[i];var c=t.utils.dom.getFastTextWidth(r,s,a,l);c>n&&(n=c)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(o+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",o)),this.size_.width=n,this.size_.height=o,this.positionBorderRect_()},t.FieldMultilineInput.prototype.showEditor_=function(e,n){t.FieldMultilineInput.superClass_.showEditor_.call(this,e,n),this.forceRerender()},t.FieldMultilineInput.prototype.widgetCreate_=function(){var e=t.WidgetDiv.DIV,n=this.workspace_.getScale(),o=document.createElement("textarea");o.className="blocklyHtmlInput blocklyHtmlTextAreaInput",o.setAttribute("spellcheck",this.spellcheck_);var i=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";e.style.fontSize=i,o.style.fontSize=i,o.style.borderRadius=t.FieldTextInput.BORDERRADIUS*n+"px",i=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var r=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return o.style.padding=r+"px "+i+"px "+r+"px "+i+"px",i=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,o.style.lineHeight=i*n+"px",e.appendChild(o),o.value=o.defaultValue=this.getEditorText_(this.value_),o.untypedDefaultValue_=this.value_,o.oldValue_=null,t.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(o),o},t.FieldMultilineInput.prototype.setMaxLines=function(t){"number"===typeof t&&0<t&&t!==this.maxLines_&&(this.maxLines_=t,this.forceRerender())},t.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},t.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode!==t.utils.KeyCodes.ENTER&&t.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,e)},t.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),t.fieldRegistry.register("field_multilinetext",t.FieldMultilineInput),t.FieldNumber=function(e,n,o,i,r,s){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,t.FieldNumber.superClass_.constructor.call(this,e,r,s),s||this.setConstraints(n,o,i)},t.utils.object.inherits(t.FieldNumber,t.FieldTextInput),t.FieldNumber.prototype.DEFAULT_VALUE=0,t.FieldNumber.fromJson=function(e){return new t.FieldNumber(e.value,void 0,void 0,void 0,void 0,e)},t.FieldNumber.prototype.SERIALIZABLE=!0,t.FieldNumber.prototype.configure_=function(e){t.FieldNumber.superClass_.configure_.call(this,e),this.setMinInternal_(e.min),this.setMaxInternal_(e.max),this.setPrecisionInternal_(e.precision)},t.FieldNumber.prototype.setConstraints=function(t,e,n){this.setMinInternal_(t),this.setMaxInternal_(e),this.setPrecisionInternal_(n),this.setValue(this.getValue())},t.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},t.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},t.FieldNumber.prototype.getMin=function(){return this.min_},t.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},t.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},t.FieldNumber.prototype.getMax=function(){return this.max_},t.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},t.FieldNumber.prototype.setPrecisionInternal_=function(t){null==t?this.precision_=0:(t=Number(t),isNaN(t)||(this.precision_=t));var e=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}),n=e.indexOf(".");this.decimalPlaces_=-1==n?t?0:null:e.length-n-1},t.FieldNumber.prototype.getPrecision=function(){return this.precision_},t.FieldNumber.prototype.doClassValidation_=function(t){return null===t?null:(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t)?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_))),t))},t.FieldNumber.prototype.widgetCreate_=function(){var e=t.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&t.utils.aria.setState(e,t.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&t.utils.aria.setState(e,t.utils.aria.State.VALUEMAX,this.max_),e},t.fieldRegistry.register("field_number",t.FieldNumber),t.FieldVariable=function(e,n,o,i,r){this.menuGenerator_=t.FieldVariable.dropdownCreate,this.defaultVariableName="string"===typeof e?e:"",this.size_=new t.utils.Size(0,0),r&&this.configure_(r),n&&this.setValidator(n),r||this.setTypes_(o,i)},t.utils.object.inherits(t.FieldVariable,t.FieldDropdown),t.FieldVariable.fromJson=function(e){var n=t.utils.replaceMessageReferences(e.variable);return new t.FieldVariable(n,void 0,void 0,void 0,e)},t.FieldVariable.prototype.SERIALIZABLE=!0,t.FieldVariable.prototype.configure_=function(e){t.FieldVariable.superClass_.configure_.call(this,e),this.setTypes_(e.variableTypes,e.defaultType)},t.FieldVariable.prototype.initModel=function(){if(!this.variable_){var e=t.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(e.getId())}},t.FieldVariable.prototype.shouldAddBorderRect_=function(){return t.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},t.FieldVariable.prototype.fromXml=function(e){var n=e.getAttribute("id"),o=e.textContent,i=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(n=t.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,o,i),null!=i&&i!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+t.Xml.domToText(e)+".");this.setValue(n.getId())},t.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},t.FieldVariable.prototype.setSourceBlock=function(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");t.FieldVariable.superClass_.setSourceBlock.call(this,e)},t.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},t.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},t.FieldVariable.prototype.getVariable=function(){return this.variable_},t.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},t.FieldVariable.prototype.doClassValidation_=function(e){if(null===e)return null;var n=t.Variables.getVariable(this.sourceBlock_.workspace,e);return n?(n=n.type,this.typeIsAllowed_(n)?e:(console.warn("Variable type doesn't match this field!  Type was "+n),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)},t.FieldVariable.prototype.doValueUpdate_=function(e){this.variable_=t.Variables.getVariable(this.sourceBlock_.workspace,e),t.FieldVariable.superClass_.doValueUpdate_.call(this,e)},t.FieldVariable.prototype.typeIsAllowed_=function(t){var e=this.getVariableTypes_();if(!e)return!0;for(var n=0;n<e.length;n++)if(t==e[n])return!0;return!1},t.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},t.FieldVariable.prototype.setTypes_=function(t,e){if(e=e||"",null==t||void 0==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var n=!1,o=0;o<t.length;o++)t[o]==e&&(n=!0);if(!n)throw Error("Invalid default type '"+e+"' in the definition of a FieldVariable")}this.defaultType_=e,this.variableTypes=t},t.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},t.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var e=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var o=this.getVariableTypes_(),i=0;i<o.length;i++){var r=this.sourceBlock_.workspace.getVariablesOfType(o[i]);n=n.concat(r)}for(n.sort(t.VariableModel.compareByName),o=[],i=0;i<n.length;i++)o[i]=[n[i].name,n[i].getId()];return o.push([t.Msg.RENAME_VARIABLE,t.RENAME_VARIABLE_ID]),t.Msg.DELETE_VARIABLE&&o.push([t.Msg.DELETE_VARIABLE.replace("%1",e),t.DELETE_VARIABLE_ID]),o},t.FieldVariable.prototype.onItemSelected_=function(e,n){if(e=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(e==t.RENAME_VARIABLE_ID)return void t.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(e==t.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(e)},t.FieldVariable.prototype.referencesVariables=function(){return!0},t.fieldRegistry.register("field_variable",t.FieldVariable),t.utils.svgPaths={},t.utils.svgPaths.point=function(t,e){return" "+t+","+e+" "},t.utils.svgPaths.curve=function(t,e){return" "+t+e.join("")},t.utils.svgPaths.moveTo=function(t,e){return" M "+t+","+e+" "},t.utils.svgPaths.moveBy=function(t,e){return" m "+t+","+e+" "},t.utils.svgPaths.lineTo=function(t,e){return" l "+t+","+e+" "},t.utils.svgPaths.line=function(t){return" l"+t.join("")},t.utils.svgPaths.lineOnAxis=function(t,e){return" "+t+" "+e+" "},t.utils.svgPaths.arc=function(t,e,n,o){return t+" "+n+" "+n+" "+e+o},t.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=t.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!t.utils.userAgent.IE&&!t.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},t.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},t.blockRendering.ConstantProvider.prototype.setTheme=function(t){this.blockStyles={};var e,n=t.blockStyles;for(e in n)this.blockStyles[e]=this.validatedBlockStyle_(n[e]);this.setDynamicProperties_(t)},t.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!=t.startHats?t.startHats:this.ADD_START_HATS},t.blockRendering.ConstantProvider.prototype.setFontConstants_=function(e){this.FIELD_TEXT_FONTFAMILY=e.fontStyle&&void 0!=e.fontStyle.family?e.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=e.fontStyle&&void 0!=e.fontStyle.weight?e.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=e.fontStyle&&void 0!=e.fontStyle.size?e.fontStyle.size:this.FIELD_TEXT_FONTSIZE,e=t.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline},t.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},t.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(t){var e="auto_"+t;return this.blockStyles[e]||(this.blockStyles[e]=this.createBlockStyle_(t)),{style:this.blockStyles[e],name:e}},t.blockRendering.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0==t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},t.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},t.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(e){var n={};return e&&t.utils.object.mixin(n,e),e=t.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=e.hex,n.colourSecondary=n.colourSecondary?t.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?t.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},t.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(e){return t.utils.colour.blend("#fff",e,.6)||e},t.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(e){return t.utils.colour.blend("#fff",e,.3)||e},t.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&t.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&t.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&t.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},t.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var e=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.line([t.utils.svgPaths.point(n,e/4),t.utils.svgPaths.point(2*-n,e/2),t.utils.svgPaths.point(n,e/4)])}},t.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(30,-e),t.utils.svgPaths.point(70,-e),t.utils.svgPaths.point(n,0)])}},t.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function e(e){var i=-(e=e?-1:1),r=o/2,s=r+2.5,a=r+.5,l=t.utils.svgPaths.point(-n,e*r);return r=t.utils.svgPaths.point(n,e*r),t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(0,e*s),t.utils.svgPaths.point(-n,i*a),l])+t.utils.svgPaths.curve("s",[t.utils.svgPaths.point(n,2.5*i),r])}var n=this.TAB_WIDTH,o=this.TAB_HEIGHT,i=e(!0),r=e(!1);return{type:this.SHAPES.PUZZLE,width:n,height:o,pathDown:r,pathUp:i}},t.blockRendering.ConstantProvider.prototype.makeNotch=function(){function e(e){return t.utils.svgPaths.line([t.utils.svgPaths.point(e*i,o),t.utils.svgPaths.point(3*e,0),t.utils.svgPaths.point(e*i,-o)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,i=(n-3)/2,r=e(1),s=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:r,pathRight:s}},t.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS;return{width:e,height:e,pathTop:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-e,e)),pathBottom:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(e,e))}},t.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var e=this.CORNER_RADIUS,n=t.utils.svgPaths.moveBy(0,e)+t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,-e)),o=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,e)),i=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,-e));return{topLeft:n,topRight:o,bottomRight:t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,e)),bottomLeft:i,rightHeight:e}},t.blockRendering.ConstantProvider.prototype.shapeFor=function(e){switch(e.type){case t.connectionTypes.INPUT_VALUE:case t.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case t.connectionTypes.PREVIOUS_STATEMENT:case t.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},t.blockRendering.ConstantProvider.prototype.createDom=function(e,n,o){this.injectCSS_(n,o),e=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),o=t.utils.dom.createSvgElement(t.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},o),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=t.utils.dom.createSvgElement(t.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},e),t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),t.utils.dom.createSvgElement(t.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,t.blockRendering.Debug&&(e=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter_=e)},t.blockRendering.ConstantProvider.prototype.injectCSS_=function(t,e){e=this.getCSS_(e),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var n=e.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=n:((e=document.createElement("style")).id=t,t=document.createTextNode(n),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild),this.cssNode_=e)},t.blockRendering.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},t.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},t.blockRendering.Types.LEFT_CORNER=t.blockRendering.Types.LEFT_SQUARE_CORNER|t.blockRendering.Types.LEFT_ROUND_CORNER,t.blockRendering.Types.RIGHT_CORNER=t.blockRendering.Types.RIGHT_SQUARE_CORNER|t.blockRendering.Types.RIGHT_ROUND_CORNER,t.blockRendering.Types.nextTypeValue_=16777216,t.blockRendering.Types.getType=function(e){return Object.prototype.hasOwnProperty.call(t.blockRendering.Types,e)||(t.blockRendering.Types[e]=t.blockRendering.Types.nextTypeValue_,t.blockRendering.Types.nextTypeValue_<<=1),t.blockRendering.Types[e]},t.blockRendering.Types.isField=function(e){return e.type&t.blockRendering.Types.FIELD},t.blockRendering.Types.isHat=function(e){return e.type&t.blockRendering.Types.HAT},t.blockRendering.Types.isIcon=function(e){return e.type&t.blockRendering.Types.ICON},t.blockRendering.Types.isSpacer=function(e){return e.type&t.blockRendering.Types.SPACER},t.blockRendering.Types.isInRowSpacer=function(e){return e.type&t.blockRendering.Types.IN_ROW_SPACER},t.blockRendering.Types.isInput=function(e){return e.type&t.blockRendering.Types.INPUT},t.blockRendering.Types.isExternalInput=function(e){return e.type&t.blockRendering.Types.EXTERNAL_VALUE_INPUT},t.blockRendering.Types.isInlineInput=function(e){return e.type&t.blockRendering.Types.INLINE_INPUT},t.blockRendering.Types.isStatementInput=function(e){return e.type&t.blockRendering.Types.STATEMENT_INPUT},t.blockRendering.Types.isPreviousConnection=function(e){return e.type&t.blockRendering.Types.PREVIOUS_CONNECTION},t.blockRendering.Types.isNextConnection=function(e){return e.type&t.blockRendering.Types.NEXT_CONNECTION},t.blockRendering.Types.isPreviousOrNextConnection=function(e){return e.type&(t.blockRendering.Types.PREVIOUS_CONNECTION|t.blockRendering.Types.NEXT_CONNECTION)},t.blockRendering.Types.isLeftRoundedCorner=function(e){return e.type&t.blockRendering.Types.LEFT_ROUND_CORNER},t.blockRendering.Types.isRightRoundedCorner=function(e){return e.type&t.blockRendering.Types.RIGHT_ROUND_CORNER},t.blockRendering.Types.isLeftSquareCorner=function(e){return e.type&t.blockRendering.Types.LEFT_SQUARE_CORNER},t.blockRendering.Types.isRightSquareCorner=function(e){return e.type&t.blockRendering.Types.RIGHT_SQUARE_CORNER},t.blockRendering.Types.isCorner=function(e){return e.type&t.blockRendering.Types.CORNER},t.blockRendering.Types.isJaggedEdge=function(e){return e.type&t.blockRendering.Types.JAGGED_EDGE},t.blockRendering.Types.isRow=function(e){return e.type&t.blockRendering.Types.ROW},t.blockRendering.Types.isBetweenRowSpacer=function(e){return e.type&t.blockRendering.Types.BETWEEN_ROW_SPACER},t.blockRendering.Types.isTopRow=function(e){return e.type&t.blockRendering.Types.TOP_ROW},t.blockRendering.Types.isBottomRow=function(e){return e.type&t.blockRendering.Types.BOTTOM_ROW},t.blockRendering.Types.isTopOrBottomRow=function(e){return e.type&(t.blockRendering.Types.TOP_ROW|t.blockRendering.Types.BOTTOM_ROW)},t.blockRendering.Types.isInputRow=function(e){return e.type&t.blockRendering.Types.INPUT_ROW},t.blockRendering.Measurable=function(e){this.height=this.width=0,this.type=t.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},t.blockRendering.Connection=function(e,n){t.blockRendering.Connection.superClass_.constructor.call(this,e),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=t.blockRendering.Types.CONNECTION},t.utils.object.inherits(t.blockRendering.Connection,t.blockRendering.Measurable),t.blockRendering.OutputConnection=function(e,n){t.blockRendering.OutputConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},t.utils.object.inherits(t.blockRendering.OutputConnection,t.blockRendering.Connection),t.blockRendering.PreviousConnection=function(e,n){t.blockRendering.PreviousConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},t.utils.object.inherits(t.blockRendering.PreviousConnection,t.blockRendering.Connection),t.blockRendering.NextConnection=function(e,n){t.blockRendering.NextConnection.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},t.utils.object.inherits(t.blockRendering.NextConnection,t.blockRendering.Connection),t.blockRendering.InputConnection=function(e,n){t.blockRendering.InputConnection.superClass_.constructor.call(this,e,n.connection),this.type|=t.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},t.utils.object.inherits(t.blockRendering.InputConnection,t.blockRendering.Connection),t.blockRendering.InlineInput=function(e,n){t.blockRendering.InlineInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},t.utils.object.inherits(t.blockRendering.InlineInput,t.blockRendering.InputConnection),t.blockRendering.StatementInput=function(e,n){t.blockRendering.StatementInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},t.utils.object.inherits(t.blockRendering.StatementInput,t.blockRendering.InputConnection),t.blockRendering.ExternalValueInput=function(e,n){t.blockRendering.ExternalValueInput.superClass_.constructor.call(this,e,n),this.type|=t.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},t.utils.object.inherits(t.blockRendering.ExternalValueInput,t.blockRendering.InputConnection),t.blockRendering.Icon=function(e,n){t.blockRendering.Icon.superClass_.constructor.call(this,e),this.icon=n,this.isVisible=n.isVisible(),this.type|=t.blockRendering.Types.ICON,e=n.getCorrectedSize(),this.height=e.height,this.width=e.width},t.utils.object.inherits(t.blockRendering.Icon,t.blockRendering.Measurable),t.blockRendering.JaggedEdge=function(e){t.blockRendering.JaggedEdge.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},t.utils.object.inherits(t.blockRendering.JaggedEdge,t.blockRendering.Measurable),t.blockRendering.Field=function(e,n,o){t.blockRendering.Field.superClass_.constructor.call(this,e),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=t.blockRendering.Types.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width,this.parentInput=o},t.utils.object.inherits(t.blockRendering.Field,t.blockRendering.Measurable),t.blockRendering.Hat=function(e){t.blockRendering.Hat.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},t.utils.object.inherits(t.blockRendering.Hat,t.blockRendering.Measurable),t.blockRendering.SquareCorner=function(e,n){t.blockRendering.SquareCorner.superClass_.constructor.call(this,e),this.type=(n&&"left"!=n?t.blockRendering.Types.RIGHT_SQUARE_CORNER:t.blockRendering.Types.LEFT_SQUARE_CORNER)|t.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},t.utils.object.inherits(t.blockRendering.SquareCorner,t.blockRendering.Measurable),t.blockRendering.RoundCorner=function(e,n){t.blockRendering.RoundCorner.superClass_.constructor.call(this,e),this.type=(n&&"left"!=n?t.blockRendering.Types.RIGHT_ROUND_CORNER:t.blockRendering.Types.LEFT_ROUND_CORNER)|t.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},t.utils.object.inherits(t.blockRendering.RoundCorner,t.blockRendering.Measurable),t.blockRendering.InRowSpacer=function(e,n){t.blockRendering.InRowSpacer.superClass_.constructor.call(this,e),this.type=this.type|t.blockRendering.Types.SPACER|t.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},t.utils.object.inherits(t.blockRendering.InRowSpacer,t.blockRendering.Measurable),t.blockRendering.Row=function(e){this.type=t.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},t.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},t.blockRendering.Row.prototype.getLastInput=function(){for(var e,n=this.elements.length-1;e=this.elements[n];n--)if(t.blockRendering.Types.isInput(e))return e;return null},t.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},t.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},t.blockRendering.Row.prototype.getFirstSpacer=function(){for(var e,n=0;e=this.elements[n];n++)if(t.blockRendering.Types.isSpacer(e))return e;return null},t.blockRendering.Row.prototype.getLastSpacer=function(){for(var e,n=this.elements.length-1;e=this.elements[n];n--)if(t.blockRendering.Types.isSpacer(e))return e;return null},t.blockRendering.TopRow=function(e){t.blockRendering.TopRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},t.utils.object.inherits(t.blockRendering.TopRow,t.blockRendering.Row),t.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var e=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,n=t.getPreviousBlock();return!!t.outputConnection||e||!!n&&n.getNextBlock()==t},t.blockRendering.TopRow.prototype.hasRightSquareCorner=function(t){return!0},t.blockRendering.TopRow.prototype.measure=function(){for(var e,n=0,o=0,i=0,r=0;e=this.elements[r];r++)o+=e.width,t.blockRendering.Types.isSpacer(e)||(t.blockRendering.Types.isHat(e)?i=Math.max(i,e.ascenderHeight):n=Math.max(n,e.height));this.width=Math.max(this.minWidth,o),this.height=Math.max(this.minHeight,n)+i,this.capline=this.ascenderHeight=i,this.widthWithConnectedBlocks=this.width},t.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},t.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},t.blockRendering.BottomRow=function(e){t.blockRendering.BottomRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},t.utils.object.inherits(t.blockRendering.BottomRow,t.blockRendering.Row),t.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},t.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},t.blockRendering.BottomRow.prototype.measure=function(){for(var e,n=0,o=0,i=0,r=0;e=this.elements[r];r++)o+=e.width,t.blockRendering.Types.isSpacer(e)||(t.blockRendering.Types.isNextConnection(e)?i=Math.max(i,e.height):n=Math.max(n,e.height));this.width=Math.max(this.minWidth,o),this.height=Math.max(this.minHeight,n)+i,this.descenderHeight=i,this.widthWithConnectedBlocks=this.width},t.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},t.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},t.blockRendering.SpacerRow=function(e,n,o){t.blockRendering.SpacerRow.superClass_.constructor.call(this,e),this.type=this.type|t.blockRendering.Types.SPACER|t.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=o,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new t.blockRendering.InRowSpacer(this.constants_,o)]},t.utils.object.inherits(t.blockRendering.SpacerRow,t.blockRendering.Row),t.blockRendering.SpacerRow.prototype.measure=function(){},t.blockRendering.InputRow=function(e){t.blockRendering.InputRow.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},t.utils.object.inherits(t.blockRendering.InputRow,t.blockRendering.Row),t.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var e,n=0,o=0;e=this.elements[o];o++)this.width+=e.width,t.blockRendering.Types.isInput(e)&&(t.blockRendering.Types.isStatementInput(e)?n+=e.connectedBlockWidth:t.blockRendering.Types.isExternalInput(e)&&0!=e.connectedBlockWidth&&(n+=e.connectedBlockWidth-e.connectionWidth)),t.blockRendering.Types.isSpacer(e)||(this.height=Math.max(this.height,e.height));this.connectedBlockWidths=n,this.widthWithConnectedBlocks=this.width+n},t.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},t.blockRendering.RenderInfo=function(e,n){this.block_=n,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new t.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new t.blockRendering.TopRow(this.constants_),this.bottomRow=new t.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},t.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},t.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var e=new t.blockRendering.InputRow(this.constants_);this.inputRows.push(e);var n=this.block_.getIcons();if(n.length)for(var o,i=0;o=n[i];i++){var r=new t.blockRendering.Icon(this.constants_,o);this.isCollapsed&&o.collapseHidden?this.hiddenIcons.push(r):e.elements.push(r)}for(o=null,i=0;n=this.block_.inputList[i];i++)if(n.isVisible()){for(this.shouldStartNewRow_(n,o)&&(this.rows.push(e),e=new t.blockRendering.InputRow(this.constants_),this.inputRows.push(e)),o=0;r=n.fieldRow[o];o++)e.elements.push(new t.blockRendering.Field(this.constants_,r,n));this.addInput_(n,e),o=n}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new t.blockRendering.JaggedEdge(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)},t.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var e=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;this.topRow.hasLeftSquareCorner(this.block_)?this.topRow.elements.push(new t.blockRendering.SquareCorner(this.constants_)):this.topRow.elements.push(new t.blockRendering.RoundCorner(this.constants_)),n?(e=new t.blockRendering.Hat(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new t.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type==t.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,this.topRow.hasRightSquareCorner(this.block_)?this.topRow.elements.push(new t.blockRendering.SquareCorner(this.constants_,"right")):this.topRow.elements.push(new t.blockRendering.RoundCorner(this.constants_,"right"))},t.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==t.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new t.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new t.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new t.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new t.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new t.blockRendering.RoundCorner(this.constants_,"right"))},t.blockRendering.RenderInfo.prototype.addInput_=function(e,n){this.isInline&&e.type==t.inputTypes.VALUE?(n.elements.push(new t.blockRendering.InlineInput(this.constants_,e)),n.hasInlineInput=!0):e.type==t.inputTypes.STATEMENT?(n.elements.push(new t.blockRendering.StatementInput(this.constants_,e)),n.hasStatement=!0):e.type==t.inputTypes.VALUE?(n.elements.push(new t.blockRendering.ExternalValueInput(this.constants_,e)),n.hasExternalInput=!0):e.type==t.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=e.align)},t.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(e,n){return!!n&&(e.type==t.inputTypes.STATEMENT||n.type==t.inputTypes.STATEMENT||(e.type==t.inputTypes.VALUE||e.type==t.inputTypes.DUMMY)&&!this.isInline)},t.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var e,n=0;e=this.rows[n];n++){var o=e.elements;if(e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(var i=0;i<o.length-1;i++){e.elements.push(o[i]);var r=this.getInRowSpacing_(o[i],o[i+1]);e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,r))}e.elements.push(o[o.length-1]),e.endsWithElemSpacer()&&e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(o[o.length-1],null)))}}},t.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e&&n&&t.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}return e&&t.blockRendering.Types.isLeftSquareCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset:e&&t.blockRendering.Types.isLeftRoundedCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},t.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var t,e=0,n=0,o=0,i=0;t=this.rows[i];i++){if(t.measure(),n=Math.max(n,t.width),t.hasStatement){var r=t.getLastInput();e=Math.max(e,t.width-r.width)}o=Math.max(o,t.widthWithConnectedBlocks)}for(this.statementEdge=e,this.width=n,i=0;t=this.rows[i];i++)t.hasStatement&&(t.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,o),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},t.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var e,n=0;e=this.rows[n];n++)if(e.hasStatement)this.alignStatementRow_(e);else{var o=e.width;0<(o=this.getDesiredRowWidth_(e)-o)&&this.addAlignmentPadding_(e,o),t.blockRendering.Types.isTopOrBottomRow(e)&&(e.widthWithConnectedBlocks=e.width)}},t.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},t.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(e,n){var o=e.getFirstSpacer(),i=e.getLastSpacer();(e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=n),e.align==t.constants.ALIGN.LEFT?i.width+=n:e.align==t.constants.ALIGN.CENTRE?(o.width+=n/2,i.width+=n/2):e.align==t.constants.ALIGN.RIGHT?o.width+=n:i.width+=n,e.width+=n},t.blockRendering.RenderInfo.prototype.alignStatementRow_=function(t){var e=t.getLastInput(),n=t.width-e.width,o=this.statementEdge;0<(n=o-n)&&this.addAlignmentPadding_(t,n),n=t.width,o=this.getDesiredRowWidth_(t),e.width+=o-n,e.height=Math.max(e.height,t.height),t.width+=o-n,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},t.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var e=0;e<t.length;e++)this.rows.push(t[e]),e!=t.length-1&&this.rows.push(this.makeSpacerRow_(t[e],t[e+1]))},t.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(e,n){var o=this.getSpacerRowHeight_(e,n),i=this.getSpacerRowWidth_(e,n);return o=new t.blockRendering.SpacerRow(this.constants_,o,i),e.hasStatement&&(o.followsStatement=!0),n.hasStatement&&(o.precedesStatement=!0),o},t.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(t,e){return this.width-this.startX},t.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(t,e){return this.constants_.MEDIUM_PADDING},t.blockRendering.RenderInfo.prototype.getElemCenterline_=function(e,n){return t.blockRendering.Types.isSpacer(n)?e.yPos+n.height/2:t.blockRendering.Types.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2):t.blockRendering.Types.isTopRow(e)?t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2:e.yPos+e.height/2},t.blockRendering.RenderInfo.prototype.recordElemPositions_=function(e){for(var n,o=e.xPos,i=0;n=e.elements[i];i++)t.blockRendering.Types.isSpacer(n)&&(n.height=e.height),n.xPos=o,n.centerline=this.getElemCenterline_(e,n),o+=n.width},t.blockRendering.RenderInfo.prototype.finalize_=function(){for(var t,e=0,n=0,o=0;t=this.rows[o];o++)t.yPos=n,t.xPos=this.startX,n+=t.height,e=Math.max(e,t.widthWithConnectedBlocks),this.recordElemPositions_(t);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},t.blockRendering.Debug=function(t){this.debugElements_=[],this.svgRoot_=null,this.constants_=t},t.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},t.blockRendering.Debug.prototype.clearElems=function(){for(var e,n=0;e=this.debugElements_[n];n++)t.utils.dom.removeNode(e);this.debugElements_=[]},t.blockRendering.Debug.prototype.drawSpacerRow=function(e,n,o){if(t.blockRendering.Debug.config.rowSpacers){var i=Math.abs(e.height),r=0>e.height;r&&(n-=i),this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:o?-(e.xPos+e.width):e.xPos,y:n,width:e.width,height:i,stroke:r?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawSpacerElem=function(e,n,o){if(t.blockRendering.Debug.config.elemSpacers){n=Math.abs(e.width);var i=0>e.width,r=i?e.xPos-n:e.xPos;o&&(r=-(r+n)),this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:r,y:e.centerline-e.height/2,width:n,height:e.height,stroke:"pink",fill:i?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawRenderedElem=function(e,n){if(t.blockRendering.Debug.config.elems){var o=e.xPos;n&&(o=-(o+e.width)),n=e.centerline-e.height/2,this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:n,width:e.width,height:e.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),t.blockRendering.Types.isField(e)&&e.field instanceof t.FieldLabel&&this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:n+this.constants_.FIELD_TEXT_BASELINE,width:e.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}t.blockRendering.Types.isInput(e)&&t.blockRendering.Debug.config.connections&&this.drawConnection(e.connectionModel)},t.blockRendering.Debug.prototype.drawConnection=function(e){if(t.blockRendering.Debug.config.connections){if(e.type==t.connectionTypes.INPUT_VALUE)var n=4,o="magenta",i="none";else e.type==t.connectionTypes.OUTPUT_VALUE?(n=2,i=o="magenta"):e.type==t.connectionTypes.NEXT_STATEMENT?(n=4,o="goldenrod",i="none"):e.type==t.connectionTypes.PREVIOUS_STATEMENT&&(n=2,i=o="goldenrod");this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:e.offsetInBlock_.x,cy:e.offsetInBlock_.y,r:n,fill:i,stroke:o},this.svgRoot_))}},t.blockRendering.Debug.prototype.drawRenderedRow=function(e,n,o){t.blockRendering.Debug.config.rows&&(this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:o?-(e.xPos+e.width):e.xPos,y:e.yPos,width:e.width,height:e.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),t.blockRendering.Types.isTopOrBottomRow(e)||t.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:o?-(e.xPos+e.widthWithConnectedBlocks):e.xPos,y:e.yPos,width:e.widthWithConnectedBlocks,height:e.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},t.blockRendering.Debug.prototype.drawRowWithElements=function(e,n,o){for(var i=0,r=e.elements.length;i<r;i++){var s=e.elements[i];s?t.blockRendering.Types.isSpacer(s)?this.drawSpacerElem(s,e.height,o):this.drawRenderedElem(s,o):console.warn("A row has an undefined or null element.",e,s)}this.drawRenderedRow(e,n,o)},t.blockRendering.Debug.prototype.drawBoundingBox=function(e){if(t.blockRendering.Debug.config.blockBounds){var n=e.RTL?-e.width:0;this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:e.width,height:e.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),t.blockRendering.Debug.config.connectedBlockBounds&&(n=e.RTL?-e.widthWithChildren:0,this.debugElements_.push(t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blockRenderDebug",x:n,y:0,width:e.widthWithChildren,height:e.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}},t.blockRendering.Debug.prototype.drawDebug=function(e,n){this.clearElems(),this.svgRoot_=e.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var o,i=0,r=0;o=n.rows[r];r++)t.blockRendering.Types.isBetweenRowSpacer(o)?this.drawSpacerRow(o,i,n.RTL):this.drawRowWithElements(o,i,n.RTL),i+=o.height;e.previousConnection&&this.drawConnection(e.previousConnection),e.nextConnection&&this.drawConnection(e.nextConnection),e.outputConnection&&this.drawConnection(e.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(e.pathObject.svgPath)},t.blockRendering.Debug.prototype.drawRender=function(e){t.blockRendering.Debug.config.render&&(e.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout((function(){e.setAttribute("filter","")}),100))},t.blockRendering.Drawer=function(t,e){this.block_=t,this.info_=e,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=e.getRenderer().getConstants()},t.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},t.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},t.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var t,e=0;t=this.info_.hiddenIcons[e];e++)t.icon.iconGroup_.setAttribute("display","none")},t.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var e=this.info_.rows[t];e.hasJaggedEdge?this.drawJaggedEdge_(e):e.hasStatement?this.drawStatementInput_(e):e.hasExternalInput?this.drawValueInput_(e):this.drawRightSideRow_(e)}this.drawBottom_(),this.drawLeft_()},t.blockRendering.Drawer.prototype.drawTop_=function(){var e=this.info_.topRow,n=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var o,i=0;o=n[i];i++)t.blockRendering.Types.isLeftRoundedCorner(o)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:t.blockRendering.Types.isRightRoundedCorner(o)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:t.blockRendering.Types.isPreviousConnection(o)?this.outlinePath_+=o.shape.pathLeft:t.blockRendering.Types.isHat(o)?this.outlinePath_+=this.constants_.START_HAT.path:t.blockRendering.Types.isSpacer(o)&&(this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",o.width));this.outlinePath_+=t.utils.svgPaths.lineOnAxis("v",e.height)},t.blockRendering.Drawer.prototype.drawJaggedEdge_=function(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+t.utils.svgPaths.lineOnAxis("v",e.height-this.constants_.JAGGED_TEETH.height)},t.blockRendering.Drawer.prototype.drawValueInput_=function(e){var n=e.getLastInput();this.positionExternalValueConnection_(e);var o="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+o+t.utils.svgPaths.lineOnAxis("v",e.height-n.connectionHeight)},t.blockRendering.Drawer.prototype.drawStatementInput_=function(e){var n=e.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+t.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var i=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",o)+n+t.utils.svgPaths.lineOnAxis("v",i)+this.constants_.INSIDE_CORNERS.pathBottom+t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},t.blockRendering.Drawer.prototype.drawRightSideRow_=function(e){this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.blockRendering.Drawer.prototype.drawBottom_=function(){var e=this.info_.bottomRow,n=e.elements;this.positionNextConnection_();for(var o,i=0,r="",s=n.length-1;o=n[s];s--)t.blockRendering.Types.isNextConnection(o)?r+=o.shape.pathRight:t.blockRendering.Types.isLeftSquareCorner(o)?r+=t.utils.svgPaths.lineOnAxis("H",e.xPos):t.blockRendering.Types.isLeftRoundedCorner(o)?r+=this.constants_.OUTSIDE_CORNERS.bottomLeft:t.blockRendering.Types.isRightRoundedCorner(o)?(r+=this.constants_.OUTSIDE_CORNERS.bottomRight,i=this.constants_.OUTSIDE_CORNERS.rightHeight):t.blockRendering.Types.isSpacer(o)&&(r+=t.utils.svgPaths.lineOnAxis("h",-1*o.width));this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.baseline-i),this.outlinePath_+=r},t.blockRendering.Drawer.prototype.drawLeft_=function(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){var n=e.connectionOffsetY+e.height;e="function"==typeof e.shape.pathUp?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",n)+e}this.outlinePath_+="z"},t.blockRendering.Drawer.prototype.drawInternals_=function(){for(var e,n=0;e=this.info_.rows[n];n++)for(var o,i=0;o=e.elements[i];i++)t.blockRendering.Types.isInlineInput(o)?this.drawInlineInput_(o):(t.blockRendering.Types.isIcon(o)||t.blockRendering.Types.isField(o))&&this.layoutField_(o)},t.blockRendering.Drawer.prototype.layoutField_=function(e){if(t.blockRendering.Types.isField(e))var n=e.field.getSvgRoot();else t.blockRendering.Types.isIcon(e)&&(n=e.icon.iconGroup_);var o=e.centerline-e.height/2,i=e.xPos,r="";this.info_.RTL&&(i=-(i+e.width),e.flipRtl&&(i+=e.width,r="scale(-1 1)")),t.blockRendering.Types.isIcon(e)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+i+","+o+")"),e.icon.computeIconLocation()):n.setAttribute("transform","translate("+i+","+o+")"+r),this.info_.isInsertionMarker&&n.setAttribute("display","none")},t.blockRendering.Drawer.prototype.drawInlineInput_=function(e){var n=e.width,o=e.height,i=e.connectionOffsetY,r=e.connectionHeight+i;this.inlinePath_+=t.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-o/2)+t.utils.svgPaths.lineOnAxis("v",i)+e.shape.pathDown+t.utils.svgPaths.lineOnAxis("v",o-r)+t.utils.svgPaths.lineOnAxis("h",n-e.connectionWidth)+t.utils.svgPaths.lineOnAxis("v",-o)+"z",this.positionInlineInputConnection_(e)},t.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(t){var e=t.centerline-t.height/2;if(t.connectionModel){var n=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e+t.connectionOffsetY)}},t.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var n=t.xPos+t.statementEdge+e.notchOffset;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t.yPos)}},t.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var n=t.xPos+t.width;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t.yPos)}},t.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var e=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-e:e,0)}},t.blockRendering.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var e=t.connection,n=e.xPos;e.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,t.baseline)}},t.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}},t.Events.MarkerMove=function(e,n,o,i){var r=e?e.workspace.id:void 0;i&&i.getType()==t.ASTNode.types.WORKSPACE&&(r=i.getLocation().id),t.Events.MarkerMove.superClass_.constructor.call(this,r),this.blockId=e?e.id:null,this.oldNode=o,this.newNode=i,this.isCursor=n},t.utils.object.inherits(t.Events.MarkerMove,t.Events.UiBase),t.Events.MarkerMove.prototype.type=t.Events.MARKER_MOVE,t.Events.MarkerMove.prototype.toJson=function(){var e=t.Events.MarkerMove.superClass_.toJson.call(this);return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e},t.Events.MarkerMove.prototype.fromJson=function(e){t.Events.MarkerMove.superClass_.fromJson.call(this,e),this.isCursor=e.isCursor,this.blockId=e.blockId,this.oldNode=e.oldNode,this.newNode=e.newNode},t.registry.register(t.registry.Type.EVENT,t.Events.MARKER_MOVE,t.Events.MarkerMove),t.blockRendering.MarkerSvg=function(t,e,n){this.workspace_=t,this.marker_=n,this.parent_=null,this.constants_=e,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=n.colour||t},t.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",t.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",t.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,t.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},t.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},t.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},t.blockRendering.MarkerSvg.prototype.createDom=function(){var e=this.isCursor()?t.blockRendering.MarkerSvg.CURSOR_CLASS:t.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=t.utils.dom.createSvgElement(t.utils.Svg.G,{class:e},null),this.createDomInternal_(),this.svgGroup_},t.blockRendering.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},t.blockRendering.MarkerSvg.prototype.draw=function(t,e){if(e){this.constants_=this.workspace_.getRenderer().getConstants();var n=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||n,this.applyColour_(e),this.showAtLocation_(e),this.fireMarkerEvent_(t,e),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},t.blockRendering.MarkerSvg.prototype.showAtLocation_=function(e){var n=e.getLocation().type;e.getType()==t.ASTNode.types.BLOCK?this.showWithBlock_(e):e.getType()==t.ASTNode.types.OUTPUT?this.showWithOutput_(e):n==t.connectionTypes.INPUT_VALUE?this.showWithInput_(e):n==t.connectionTypes.NEXT_STATEMENT?this.showWithNext_(e):e.getType()==t.ASTNode.types.PREVIOUS?this.showWithPrevious_(e):e.getType()==t.ASTNode.types.FIELD?this.showWithField_(e):e.getType()==t.ASTNode.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()==t.ASTNode.types.STACK&&this.showWithStack_(e)},t.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(e){var n=(e=e.getSourceBlock()).width,o=e.height,i=o*t.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,r=this.constants_.CURSOR_BLOCK_PADDING;if(e.previousConnection){var s=this.constants_.shapeFor(e.previousConnection);this.positionPrevious_(n,r,i,s)}else e.outputConnection?(s=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(n,o,s)):this.positionBlock_(n,r,i);this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},t.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},t.blockRendering.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},t.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(t){var e=t.getWsCoordinate();t=e.x,e=e.y,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,e,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithField_=function(t){var e=(t=t.getLocation()).getSize().width,n=t.getSize().height;this.positionRect_(0,0,e,n),this.setParent_(t),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithInput_=function(t){var e=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(e),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithNext_=function(t){var e=t.getLocation();t=e.getSourceBlock();var n=0;e=e.getOffsetInBlock().y;var o=t.getHeightWidth().width;this.workspace_.RTL&&(n=-o),this.positionLine_(n,e,o),this.setParent_(t),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showWithStack_=function(t){var e=(t=t.getLocation()).getHeightWidth(),n=e.width+this.constants_.CURSOR_STACK_PADDING;e=e.height+this.constants_.CURSOR_STACK_PADDING;var o=-this.constants_.CURSOR_STACK_PADDING/2,i=-this.constants_.CURSOR_STACK_PADDING/2,r=o;this.workspace_.RTL&&(r=-(n+o)),this.positionRect_(r,i,n,e),this.setParent_(t),this.showCurrent_()},t.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},t.blockRendering.MarkerSvg.prototype.positionBlock_=function(e,n,o){e=t.utils.svgPaths.moveBy(-n,o)+t.utils.svgPaths.lineOnAxis("V",-n)+t.utils.svgPaths.lineOnAxis("H",e+2*n)+t.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionInput_=function(e){var n=e.getOffsetInBlock().x,o=e.getOffsetInBlock().y;e=t.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+n+","+o+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},t.blockRendering.MarkerSvg.prototype.positionLine_=function(t,e,n){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",e),this.markerSvgLine_.setAttribute("width",n),this.currentMarkerSvg=this.markerSvgLine_},t.blockRendering.MarkerSvg.prototype.positionOutput_=function(e,n,o){e=t.utils.svgPaths.moveBy(e,0)+t.utils.svgPaths.lineOnAxis("h",-(e-o.width))+t.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+o.pathDown+t.utils.svgPaths.lineOnAxis("V",n)+t.utils.svgPaths.lineOnAxis("H",e),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionPrevious_=function(e,n,o,i){e=t.utils.svgPaths.moveBy(-n,o)+t.utils.svgPaths.lineOnAxis("V",-n)+t.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+i.pathLeft+t.utils.svgPaths.lineOnAxis("H",e+2*n)+t.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},t.blockRendering.MarkerSvg.prototype.positionRect_=function(t,e,n,o){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",e),this.markerSvgRect_.setAttribute("width",n),this.markerSvgRect_.setAttribute("height",o),this.currentMarkerSvg=this.markerSvgRect_},t.blockRendering.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},t.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},t.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(e,n){var o=n.getSourceBlock();e=new(t.Events.get(t.Events.MARKER_MOVE))(o,this.isCursor(),e,n),t.Events.fire(e)},t.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},t.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=t.utils.dom.createSvgElement(t.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=t.utils.dom.createSvgElement(t.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var e=this.getBlinkProperties_();t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerSvgLine_),t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerInput_),e.attributeName="stroke",t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerBlock_)}return this.markerSvg_},t.blockRendering.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(t=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstChild.setAttribute("values",t),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},t.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&t.utils.dom.removeNode(this.svgGroup_)},t.blockRendering.PathObject=function(e,n,o){this.constants=o,this.svgRoot=e,this.svgPath=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},t.blockRendering.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},t.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},t.blockRendering.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},t.blockRendering.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},t.blockRendering.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},t.blockRendering.PathObject.prototype.setStyle=function(t){this.style=t},t.blockRendering.PathObject.prototype.setClass_=function(e,n){n?t.utils.dom.addClass(this.svgRoot,e):t.utils.dom.removeClass(this.svgRoot,e)},t.blockRendering.PathObject.prototype.updateHighlighted=function(t){t?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")},t.blockRendering.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},t.blockRendering.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},t.blockRendering.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},t.blockRendering.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},t.blockRendering.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},t.blockRendering.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},t.blockRendering.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},t.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(t,e){},t.IRegistrable=function(){},t.blockRendering.Renderer=function(t){this.name=t,this.overrides=this.constants_=null},t.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},t.blockRendering.Renderer.prototype.init=function(e,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,t.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(e),this.constants_.init()},t.blockRendering.Renderer.prototype.createDom=function(t,e){this.constants_.createDom(t,this.name+"-"+e.name,"."+this.getClassName()+"."+e.getClassName())},t.blockRendering.Renderer.prototype.refreshDom=function(e,n){var o=this.getConstants();o.dispose(),this.constants_=this.makeConstants_(),this.overrides&&t.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=o.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(e,n)},t.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},t.blockRendering.Renderer.prototype.makeConstants_=function(){return new t.blockRendering.ConstantProvider},t.blockRendering.Renderer.prototype.makeRenderInfo_=function(e){return new t.blockRendering.RenderInfo(this,e)},t.blockRendering.Renderer.prototype.makeDrawer_=function(e,n){return new t.blockRendering.Drawer(e,n)},t.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!t.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new t.blockRendering.Debug(this.getConstants())},t.blockRendering.Renderer.prototype.makeMarkerDrawer=function(e,n){return new t.blockRendering.MarkerSvg(e,this.getConstants(),n)},t.blockRendering.Renderer.prototype.makePathObject=function(e,n){return new t.blockRendering.PathObject(e,n,this.constants_)},t.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},t.blockRendering.Renderer.prototype.shouldHighlightConnection=function(t){return!0},t.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(e,n,o){return o==t.connectionTypes.OUTPUT_VALUE?(o=n.outputConnection,e=t.Connection.lastConnectionInRow(e,n)):(o=n.previousConnection,e=e.lastConnectionInStack()),!!e&&o.getConnectionChecker().canConnect(e,o,!1)},t.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(e,n,o){return n.type==t.connectionTypes.OUTPUT_VALUE||n.type==t.connectionTypes.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(o,e.targetBlock(),n.type)?t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:t.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},t.blockRendering.Renderer.prototype.render=function(e){t.blockRendering.useDebugger&&!e.renderingDebugger&&(e.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(e);n.measure(),this.makeDrawer_(e,n).draw()},t.geras={},t.geras.ConstantProvider=function(){t.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},t.utils.object.inherits(t.geras.ConstantProvider,t.blockRendering.ConstantProvider),t.geras.ConstantProvider.prototype.getCSS_=function(e){return t.geras.ConstantProvider.superClass_.getCSS_.call(this,e).concat([e+" .blocklyInsertionMarker>.blocklyPathLight,",e+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},t.geras.Highlighter=function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},t.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},t.geras.Highlighter.prototype.drawTopCorner=function(e){this.steps_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var n,o=0;n=e.elements[o];o++)t.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=this.highlightConstants_.START_POINT:t.blockRendering.Types.isLeftRoundedCorner(n)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):t.blockRendering.Types.isPreviousConnection(n)?this.steps_+=this.notchPaths_.pathLeft:t.blockRendering.Types.isHat(n)?this.steps_+=this.startPaths_.path(this.RTL_):t.blockRendering.Types.isSpacer(n)&&0!=n.width&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",n.xPos+n.width-this.highlightOffset_));this.steps_+=t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width-this.highlightOffset_)},t.geras.Highlighter.prototype.drawJaggedEdge_=function(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+t.utils.svgPaths.lineOnAxis("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},t.geras.Highlighter.prototype.drawValueInput=function(e){var n=e.getLastInput();if(this.RTL_){var o=e.height-n.connectionHeight;this.steps_+=t.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",o)}else this.steps_+=t.utils.svgPaths.moveTo(n.xPos+n.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},t.geras.Highlighter.prototype.drawStatementInput=function(e){var n=e.getLastInput();if(this.RTL_){var o=e.height-2*this.insideCornerPaths_.height;this.steps_+=t.utils.svgPaths.moveTo(n.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",o)+this.insideCornerPaths_.pathBottom(this.RTL_)+t.utils.svgPaths.lineTo(e.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=t.utils.svgPaths.moveTo(n.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+t.utils.svgPaths.lineTo(e.width-n.xPos-this.insideCornerPaths_.width,0)},t.geras.Highlighter.prototype.drawRightSideRow=function(e){var n=e.xPos+e.width-this.highlightOffset_;e.followsStatement&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=t.utils.svgPaths.lineOnAxis("H",n),e.height>this.highlightOffset_&&(this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height-this.highlightOffset_)))},t.geras.Highlighter.prototype.drawBottomRow=function(e){if(this.RTL_)this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];t.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=t.utils.svgPaths.moveTo(e.xPos+this.highlightOffset_,e.baseline-this.highlightOffset_):t.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=t.utils.svgPaths.moveTo(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},t.geras.Highlighter.prototype.drawLeft=function(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=t.utils.svgPaths.moveTo(this.info_.startX,e):(this.steps_+=t.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=t.utils.svgPaths.lineOnAxis("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,t.blockRendering.Types.isLeftRoundedCorner(e.elements[0])?this.steps_+=t.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=t.utils.svgPaths.lineOnAxis("V",e.capline+this.highlightOffset_))},t.geras.Highlighter.prototype.drawInlineInput=function(e){var n=this.highlightOffset_,o=e.xPos+e.connectionWidth,i=e.centerline-e.height/2,r=e.width-e.connectionWidth,s=i+n;this.RTL_?(i=e.connectionOffsetY-n,e=e.height-(e.connectionOffsetY+e.connectionHeight)+n,this.inlineSteps_+=t.utils.svgPaths.moveTo(o-n,s)+t.utils.svgPaths.lineOnAxis("v",i)+this.puzzleTabPaths_.pathDown(this.RTL_)+t.utils.svgPaths.lineOnAxis("v",e)+t.utils.svgPaths.lineOnAxis("h",r)):this.inlineSteps_+=t.utils.svgPaths.moveTo(e.xPos+e.width+n,s)+t.utils.svgPaths.lineOnAxis("v",e.height)+t.utils.svgPaths.lineOnAxis("h",-r)+t.utils.svgPaths.moveTo(o,i+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},t.geras.InlineInput=function(e,n){t.geras.InlineInput.superClass_.constructor.call(this,e,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},t.utils.object.inherits(t.geras.InlineInput,t.blockRendering.InlineInput),t.geras.StatementInput=function(e,n){t.geras.StatementInput.superClass_.constructor.call(this,e,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},t.utils.object.inherits(t.geras.StatementInput,t.blockRendering.StatementInput),t.geras.RenderInfo=function(e,n){t.geras.RenderInfo.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.geras.RenderInfo,t.blockRendering.RenderInfo),t.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.geras.RenderInfo.prototype.populateBottomRow_=function(){t.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==t.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},t.geras.RenderInfo.prototype.addInput_=function(e,n){this.isInline&&e.type==t.inputTypes.VALUE?(n.elements.push(new t.geras.InlineInput(this.constants_,e)),n.hasInlineInput=!0):e.type==t.inputTypes.STATEMENT?(n.elements.push(new t.geras.StatementInput(this.constants_,e)),n.hasStatement=!0):e.type==t.inputTypes.VALUE?(n.elements.push(new t.blockRendering.ExternalValueInput(this.constants_,e)),n.hasExternalInput=!0):e.type==t.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=e.align)},t.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var e,n=!1,o=0;e=this.rows[o];o++)e.hasExternalInput&&(n=!0);for(o=0;e=this.rows[o];o++){var i=e.elements;if(e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,i[0]))),i.length){for(var r=0;r<i.length-1;r++){e.elements.push(i[r]);var s=this.getInRowSpacing_(i[r],i[r+1]);e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,s))}e.elements.push(i[i.length-1]),e.endsWithElemSpacer()&&(s=this.getInRowSpacing_(i[i.length-1],null),n&&e.hasDummyInput&&(s+=this.constants_.TAB_WIDTH),e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,s)))}}},t.geras.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e)return n&&t.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&t.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!t.blockRendering.Types.isInput(e)&&(!n||t.blockRendering.Types.isStatementInput(n)))return t.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:t.blockRendering.Types.isIcon(e)?2*this.constants_.LARGE_PADDING+1:t.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:t.blockRendering.Types.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:t.blockRendering.Types.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:t.blockRendering.Types.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}if(!t.blockRendering.Types.isInput(e)&&n&&t.blockRendering.Types.isInput(n)){if(t.blockRendering.Types.isField(e)&&e.isEditable){if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(t.blockRendering.Types.isIcon(e)&&n&&!t.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInlineInput(e)&&n&&t.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isLeftSquareCorner(e)&&n){if(t.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(t.blockRendering.Types.isNextConnection(n))return e=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,n.notchOffset+e}if(t.blockRendering.Types.isLeftRoundedCorner(e)&&n){if(t.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(t.blockRendering.Types.isNextConnection(n))return e=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,n.notchOffset-this.constants_.CORNER_RADIUS+e}return t.blockRendering.Types.isField(e)&&n&&t.blockRendering.Types.isField(n)&&e.isEditable==n.isEditable||n&&t.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.geras.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){return t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:t.blockRendering.Types.isTopRow(e)||t.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||!e.hasStatement&&n.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.geras.RenderInfo.prototype.getElemCenterline_=function(e,n){if(t.blockRendering.Types.isSpacer(n))return e.yPos+n.height/2;if(t.blockRendering.Types.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2;if(t.blockRendering.Types.isTopRow(e))return t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;var o=e.yPos;return t.blockRendering.Types.isField(n)||t.blockRendering.Types.isIcon(n)?(o+=n.height/2,(e.hasInlineInput||e.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(o+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):o=t.blockRendering.Types.isInlineInput(n)?o+n.height/2:o+e.height/2,o},t.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var e,n=0,o=null,i=this.rows.length-1;e=this.rows[i];i--)e.nextRightEdge=n,t.blockRendering.Types.isInputRow(e)&&(e.hasStatement&&this.alignStatementRow_(e),o&&o.hasStatement&&e.width<o.width?e.nextRightEdge=o.width:n=e.width,o=e);for(i=n=0;e=this.rows[i];i++)e.hasStatement?n=this.getDesiredRowWidth_(e):t.blockRendering.Types.isSpacer(e)?e.width=Math.max(n,e.nextRightEdge):(0<(n=Math.max(n,e.nextRightEdge)-e.width)&&this.addAlignmentPadding_(e,n),n=e.width)}else t.geras.RenderInfo.superClass_.alignRowElements_.call(this)},t.geras.RenderInfo.prototype.getDesiredRowWidth_=function(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:t.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},t.geras.RenderInfo.prototype.finalize_=function(){for(var t,e=0,n=0,o=0;t=this.rows[o];o++){t.yPos=n,t.xPos=this.startX,n+=t.height,e=Math.max(e,t.widthWithConnectedBlocks);var i=n-this.topRow.ascenderHeight;t==this.bottomRow&&i<this.constants_.MIN_BLOCK_HEIGHT&&(i=this.constants_.MIN_BLOCK_HEIGHT-i,this.bottomRow.height+=i,n+=i),this.recordElemPositions_(t)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},t.geras.Drawer=function(e,n){t.geras.Drawer.superClass_.constructor.call(this,e,n),this.highlighter_=new t.geras.Highlighter(n)},t.utils.object.inherits(t.geras.Drawer,t.blockRendering.Drawer),t.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var e=this.block_.pathObject;e.setPath(this.outlinePath_+"\n"+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},t.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),t.geras.Drawer.superClass_.drawTop_.call(this)},t.geras.Drawer.prototype.drawJaggedEdge_=function(e){this.highlighter_.drawJaggedEdge_(e),t.geras.Drawer.superClass_.drawJaggedEdge_.call(this,e)},t.geras.Drawer.prototype.drawValueInput_=function(e){this.highlighter_.drawValueInput(e),t.geras.Drawer.superClass_.drawValueInput_.call(this,e)},t.geras.Drawer.prototype.drawStatementInput_=function(e){this.highlighter_.drawStatementInput(e),t.geras.Drawer.superClass_.drawStatementInput_.call(this,e)},t.geras.Drawer.prototype.drawRightSideRow_=function(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width)+t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),t.geras.Drawer.superClass_.drawBottom_.call(this)},t.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),t.geras.Drawer.superClass_.drawLeft_.call(this)},t.geras.Drawer.prototype.drawInlineInput_=function(e){this.highlighter_.drawInlineInput(e),t.geras.Drawer.superClass_.drawInlineInput_.call(this,e)},t.geras.Drawer.prototype.positionInlineInputConnection_=function(t){var e=t.centerline-t.height/2;if(t.connectionModel){var n=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},t.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var n=t.xPos+t.statementEdge+e.notchOffset;n=this.info_.RTL?-1*n:n+this.constants_.DARK_PATH_OFFSET,e.connectionModel.setOffsetInBlock(n,t.yPos+this.constants_.DARK_PATH_OFFSET)}},t.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var n=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t.yPos)}},t.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var e=t.connection,n=e.xPos;e.connectionModel.setOffsetInBlock((this.info_.RTL?-n:n)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}},t.geras.HighlightConstantProvider=function(e){this.constantProvider=e,this.OFFSET=.5,this.START_POINT=t.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},t.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},t.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(e+n)-n,i=t.utils.svgPaths.moveBy(o,o)+t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-o-n,e-o)),r=t.utils.svgPaths.arc("a","0 0,0",e+n,t.utils.svgPaths.point(e+n,e+n)),s=t.utils.svgPaths.moveBy(o,-o)+t.utils.svgPaths.arc("a","0 0,0",e+n,t.utils.svgPaths.point(e-o,o+n));return{width:e+n,height:e,pathTop:function(t){return t?i:""},pathBottom:function(t){return t?r:s}}},t.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(e-n)+n,i=t.utils.svgPaths.moveBy(o,o)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(e-o,-o+n)),r=t.utils.svgPaths.moveBy(n,e)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(e,-e+n)),s=-o,a=t.utils.svgPaths.moveBy(o,s)+t.utils.svgPaths.arc("a","0 0,1",e-n,t.utils.svgPaths.point(-o+n,-s-e));return{height:e,topLeft:function(t){return t?i:r},bottomLeft:function(){return a}}},t.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var e=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,o=t.utils.svgPaths.moveBy(-2,3.4-n)+t.utils.svgPaths.lineTo(-.45*e,-2.1),i=t.utils.svgPaths.lineOnAxis("v",2.5)+t.utils.svgPaths.moveBy(.97*-e,2.5)+t.utils.svgPaths.curve("q",[t.utils.svgPaths.point(.05*-e,10),t.utils.svgPaths.point(.3*e,9.5)])+t.utils.svgPaths.moveBy(.67*e,-1.9)+t.utils.svgPaths.lineOnAxis("v",2.5),r=t.utils.svgPaths.lineOnAxis("v",-1.5)+t.utils.svgPaths.moveBy(-.92*e,-.5)+t.utils.svgPaths.curve("q",[t.utils.svgPaths.point(-.19*e,-5.5),t.utils.svgPaths.point(0,-11)])+t.utils.svgPaths.moveBy(.92*e,1),s=t.utils.svgPaths.moveBy(-5,n-.7)+t.utils.svgPaths.lineTo(.46*e,-2.1);return{width:e,height:n,pathUp:function(t){return t?o:r},pathDown:function(t){return t?i:s}}},t.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:t.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},t.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:t.utils.svgPaths.lineTo(5.1,2.6)+t.utils.svgPaths.moveBy(-10.2,6.8)+t.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},t.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var e=this.constantProvider.START_HAT.height,n=t.utils.svgPaths.moveBy(25,-8.7)+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(29.7,-6.2),t.utils.svgPaths.point(57.2,-.5),t.utils.svgPaths.point(75,8.7)]),o=t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(17.8,-9.2),t.utils.svgPaths.point(45.3,-14.9),t.utils.svgPaths.point(75,-8.7)])+t.utils.svgPaths.moveTo(100.5,e+.5);return{path:function(t){return t?n:o}}},t.geras.PathObject=function(e,n,o){this.constants=o,this.svgRoot=e,this.svgPathDark=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},t.utils.object.inherits(t.geras.PathObject,t.blockRendering.PathObject),t.geras.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},t.geras.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},t.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},t.geras.PathObject.prototype.applyColour=function(e){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),t.geras.PathObject.superClass_.applyColour.call(this,e),this.svgPath.setAttribute("stroke","none")},t.geras.PathObject.prototype.setStyle=function(e){this.style=e,this.colourDark=t.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},t.geras.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},t.geras.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},t.geras.PathObject.prototype.updateDisabled_=function(e){t.geras.PathObject.superClass_.updateDisabled_.call(this,e),e&&this.svgPath.setAttribute("stroke","none")},t.geras.Renderer=function(e){t.geras.Renderer.superClass_.constructor.call(this,e),this.highlightConstants_=null},t.utils.object.inherits(t.geras.Renderer,t.blockRendering.Renderer),t.geras.Renderer.prototype.init=function(e,n){t.geras.Renderer.superClass_.init.call(this,e,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},t.geras.Renderer.prototype.refreshDom=function(e,n){t.geras.Renderer.superClass_.refreshDom.call(this,e,n),this.getHighlightConstants().init()},t.geras.Renderer.prototype.makeConstants_=function(){return new t.geras.ConstantProvider},t.geras.Renderer.prototype.makeRenderInfo_=function(e){return new t.geras.RenderInfo(this,e)},t.geras.Renderer.prototype.makeDrawer_=function(e,n){return new t.geras.Drawer(e,n)},t.geras.Renderer.prototype.makePathObject=function(e,n){return new t.geras.PathObject(e,n,this.getConstants())},t.geras.Renderer.prototype.makeHighlightConstants_=function(){return new t.geras.HighlightConstantProvider(this.getConstants())},t.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},t.blockRendering.register("geras",t.geras.Renderer),t.thrasos={},t.thrasos.RenderInfo=function(e,n){t.thrasos.RenderInfo.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.thrasos.RenderInfo,t.blockRendering.RenderInfo),t.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var e,n=!1,o=0;e=this.rows[o];o++)e.hasExternalInput&&(n=!0);for(o=0;e=this.rows[o];o++){var i=e.elements;e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,i[0])));for(var r=0;r<i.length-1;r++){e.elements.push(i[r]);var s=this.getInRowSpacing_(i[r],i[r+1]);e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,s))}e.elements.push(i[i.length-1]),e.endsWithElemSpacer()&&(s=this.getInRowSpacing_(i[i.length-1],null),n&&e.hasDummyInput&&(s+=this.constants_.TAB_WIDTH),e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,s)))}},t.thrasos.RenderInfo.prototype.getInRowSpacing_=function(e,n){if(!e)return n&&t.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&t.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!t.blockRendering.Types.isInput(e)&&!n)return t.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:t.blockRendering.Types.isIcon(e)?2*this.constants_.LARGE_PADDING+1:t.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:t.blockRendering.Types.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:t.blockRendering.Types.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:t.blockRendering.Types.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInput(e)&&!n){if(t.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}if(!t.blockRendering.Types.isInput(e)&&n&&t.blockRendering.Types.isInput(n)){if(t.blockRendering.Types.isField(e)&&e.isEditable){if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(t.blockRendering.Types.isInlineInput(n)||t.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(t.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(t.blockRendering.Types.isIcon(e)&&n&&!t.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isInlineInput(e)&&n&&t.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(t.blockRendering.Types.isLeftSquareCorner(e)&&n){if(t.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))return n.notchOffset}return t.blockRendering.Types.isLeftRoundedCorner(e)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:t.blockRendering.Types.isField(e)&&n&&t.blockRendering.Types.isField(n)&&e.isEditable==n.isEditable||n&&t.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){return t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:t.blockRendering.Types.isTopRow(e)||t.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||e.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},t.thrasos.RenderInfo.prototype.getElemCenterline_=function(e,n){if(t.blockRendering.Types.isSpacer(n))return e.yPos+n.height/2;if(t.blockRendering.Types.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,t.blockRendering.Types.isNextConnection(n)?e+n.height/2:e-n.height/2;if(t.blockRendering.Types.isTopRow(e))return t.blockRendering.Types.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;var o=e.yPos;return t.blockRendering.Types.isField(n)&&e.hasStatement?o+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):o+e.height/2},t.thrasos.RenderInfo.prototype.finalize_=function(){for(var t,e=0,n=0,o=0;t=this.rows[o];o++){t.yPos=n,t.xPos=this.startX,n+=t.height,e=Math.max(e,t.widthWithConnectedBlocks);var i=n-this.topRow.ascenderHeight;t==this.bottomRow&&i<this.constants_.MIN_BLOCK_HEIGHT&&(i=this.constants_.MIN_BLOCK_HEIGHT-i,this.bottomRow.height+=i,n+=i),this.recordElemPositions_(t)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline},t.thrasos.Renderer=function(e){t.thrasos.Renderer.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.thrasos.Renderer,t.blockRendering.Renderer),t.thrasos.Renderer.prototype.makeRenderInfo_=function(e){return new t.thrasos.RenderInfo(this,e)},t.blockRendering.register("thrasos",t.thrasos.Renderer),t.zelos={},t.zelos.ConstantProvider=function(){t.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},t.utils.object.inherits(t.zelos.ConstantProvider,t.blockRendering.ConstantProvider),t.zelos.ConstantProvider.prototype.setFontConstants_=function(e){t.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},t.zelos.ConstantProvider.prototype.init=function(){t.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},t.zelos.ConstantProvider.prototype.setDynamicProperties_=function(e){t.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE},t.zelos.ConstantProvider.prototype.dispose=function(){t.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&t.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&t.utils.dom.removeNode(this.replacementGlowFilter_)},t.zelos.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:e,width:n,path:t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(25,-e),t.utils.svgPaths.point(71,-e),t.utils.svgPaths.point(n,0)])}},t.zelos.ConstantProvider.prototype.makeHexagonal=function(){function e(e,o,i){var r=e/2;return r=r>n?n:r,i=i?-1:1,e=(o?-1:1)*e/2,t.utils.svgPaths.lineTo(-i*r,e)+t.utils.svgPaths.lineTo(i*r,e)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(t){return(t/=2)>n?n:t},height:function(t){return t},connectionOffsetY:function(t){return t/2},connectionOffsetX:function(t){return-t},pathDown:function(t){return e(t,!1,!1)},pathUp:function(t){return e(t,!0,!1)},pathRightDown:function(t){return e(t,!1,!0)},pathRightUp:function(t){return e(t,!1,!0)}}},t.zelos.ConstantProvider.prototype.makeRounded=function(){function e(e,n,i){var r=e>o?e-o:0;return e=(e>o?o:e)/2,t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point((n?-1:1)*e,(n?-1:1)*e))+t.utils.svgPaths.lineOnAxis("v",(i?1:-1)*r)+t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point((n?1:-1)*e,(n?-1:1)*e))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(t){return(t/=2)>n?n:t},height:function(t){return t},connectionOffsetY:function(t){return t/2},connectionOffsetX:function(t){return-t},pathDown:function(t){return e(t,!1,!1)},pathUp:function(t){return e(t,!0,!1)},pathRightDown:function(t){return e(t,!1,!0)},pathRightUp:function(t){return e(t,!1,!0)}}},t.zelos.ConstantProvider.prototype.makeSquared=function(){function e(e,o,i){return e-=2*n,t.utils.svgPaths.arc("a","0 0,1",n,t.utils.svgPaths.point((o?-1:1)*n,(o?-1:1)*n))+t.utils.svgPaths.lineOnAxis("v",(i?1:-1)*e)+t.utils.svgPaths.arc("a","0 0,1",n,t.utils.svgPaths.point((o?1:-1)*n,(o?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(t){return n},height:function(t){return t},connectionOffsetY:function(t){return t/2},connectionOffsetX:function(t){return-t},pathDown:function(t){return e(t,!1,!1)},pathUp:function(t){return e(t,!0,!1)},pathRightDown:function(t){return e(t,!1,!0)},pathRightUp:function(t){return e(t,!1,!0)}}},t.zelos.ConstantProvider.prototype.shapeFor=function(e){var n=e.getCheck();switch(!n&&e.targetConnection&&(n=e.targetConnection.getCheck()),e.type){case t.connectionTypes.INPUT_VALUE:case t.connectionTypes.OUTPUT_VALUE:if(null!=(e=e.getSourceBlock().getOutputShape()))switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case t.connectionTypes.PREVIOUS_STATEMENT:case t.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},t.zelos.ConstantProvider.prototype.makeNotch=function(){function e(e){return t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(e*r/2,0),t.utils.svgPaths.point(e*r*3/4,a/2),t.utils.svgPaths.point(e*r,a)])+t.utils.svgPaths.line([t.utils.svgPaths.point(e*r,s)])+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(e*r/4,a/2),t.utils.svgPaths.point(e*r/2,a),t.utils.svgPaths.point(e*r,a)])+t.utils.svgPaths.lineOnAxis("h",e*i)+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(e*r/2,0),t.utils.svgPaths.point(e*r*3/4,-a/2),t.utils.svgPaths.point(e*r,-a)])+t.utils.svgPaths.line([t.utils.svgPaths.point(e*r,-s)])+t.utils.svgPaths.curve("c",[t.utils.svgPaths.point(e*r/4,-a/2),t.utils.svgPaths.point(e*r/2,-a),t.utils.svgPaths.point(e*r,-a)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,i=n/3,r=i/3,s=o/2,a=s/2,l=e(1),c=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:l,pathRight:c}},t.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS,n=t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(-e,e)),o=t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(-e,e));return{width:e,height:e,pathTop:n,pathBottom:t.utils.svgPaths.arc("a","0 0,0",e,t.utils.svgPaths.point(e,e)),rightWidth:e,rightHeight:e,pathTopRight:o,pathBottomRight:t.utils.svgPaths.arc("a","0 0,1",e,t.utils.svgPaths.point(e,e))}},t.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(e){return t.utils.colour.blend("#000",e,.15)||e},t.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(e){return t.utils.colour.blend("#000",e,.25)||e},t.zelos.ConstantProvider.prototype.createDom=function(e,n,o){t.zelos.ConstantProvider.superClass_.createDom.call(this,e,n,o),e=t.utils.dom.createSvgElement(t.utils.Svg.DEFS,{},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),o=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},o),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,e=t.utils.dom.createSvgElement(t.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),n=t.utils.dom.createSvgElement(t.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),t.utils.dom.createSvgElement(t.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),t.utils.dom.createSvgElement(t.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),t.utils.dom.createSvgElement(t.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter_=e},t.zelos.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},t.zelos.TopRow=function(e){t.zelos.TopRow.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.TopRow,t.blockRendering.TopRow),t.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},t.zelos.TopRow.prototype.hasLeftSquareCorner=function(t){var e=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection;return!!t.outputConnection||e},t.zelos.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},t.zelos.BottomRow=function(e){t.zelos.BottomRow.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.BottomRow,t.blockRendering.BottomRow),t.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},t.zelos.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},t.zelos.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},t.zelos.RightConnectionShape=function(e){t.zelos.RightConnectionShape.superClass_.constructor.call(this,e),this.type|=t.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},t.utils.object.inherits(t.zelos.RightConnectionShape,t.blockRendering.Measurable),t.zelos.RenderInfo=function(e,n){t.zelos.RenderInfo.superClass_.constructor.call(this,e,n),this.topRow=new t.zelos.TopRow(this.constants_),this.bottomRow=new t.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new t.zelos.RightConnectionShape(this.constants_):null},t.utils.object.inherits(t.zelos.RenderInfo,t.blockRendering.RenderInfo),t.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},t.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},t.zelos.RenderInfo.prototype.shouldStartNewRow_=function(e,n){return!!n&&(e.type==t.inputTypes.STATEMENT||n.type==t.inputTypes.STATEMENT||(e.type==t.inputTypes.VALUE||e.type==t.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},t.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):t.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},t.zelos.RenderInfo.prototype.getInRowSpacing_=function(e,n){return e&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&n&&t.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&t.blockRendering.Types.isLeftRoundedCorner(e)&&n&&(t.blockRendering.Types.isPreviousConnection(n)||t.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:e&&t.blockRendering.Types.isLeftSquareCorner(e)&&n&&t.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},t.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(e,n){if(t.blockRendering.Types.isTopRow(e)&&t.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var o=t.blockRendering.Types.isInputRow(e)&&e.hasStatement,i=t.blockRendering.Types.isInputRow(n)&&n.hasStatement;return i||o?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),i&&o?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):t.blockRendering.Types.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):t.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},t.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(e,n){var o=this.width-this.startX;return t.blockRendering.Types.isInputRow(e)&&e.hasStatement||t.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(o,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):o},t.zelos.RenderInfo.prototype.getElemCenterline_=function(e,n){if(e.hasStatement&&!t.blockRendering.Types.isSpacer(n)&&!t.blockRendering.Types.isStatementInput(n))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(t.blockRendering.Types.isInlineInput(n)){var o=n.connectedBlock;if(o&&o.outputConnection&&o.nextConnection)return e.yPos+o.height/2}return t.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,e,n)},t.zelos.RenderInfo.prototype.addInput_=function(e,n){e.type==t.inputTypes.DUMMY&&n.hasDummyInput&&n.align==t.constants.ALIGN.LEFT&&e.align==t.constants.ALIGN.RIGHT&&(n.rightAlignedDummyInput=e),t.zelos.RenderInfo.superClass_.addInput_.call(this,e,n)},t.zelos.RenderInfo.prototype.addAlignmentPadding_=function(e,n){if(e.rightAlignedDummyInput){for(var o,i,r=0;(i=e.elements[r])&&(t.blockRendering.Types.isSpacer(i)&&(o=i),!t.blockRendering.Types.isField(i)||i.parentInput!=e.rightAlignedDummyInput);r++);if(o)return o.width+=n,void(e.width+=n)}t.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,e,n)},t.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=e,o=2;o<this.rows.length-1;o+=2){var i=this.rows[o-1],r=this.rows[o],s=this.rows[o+1];if(i=2==o?!!this.topRow.hasPreviousConnection:!!i.followsStatement,s=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!s.precedesStatement,t.blockRendering.Types.isInputRow(r)&&r.hasStatement)r.measure(),n=r.width-r.getLastInput().width+e;else if(i&&(2==o||s)&&t.blockRendering.Types.isInputRow(r)&&!r.hasStatement){s=r.xPos,i=null;for(var a,l=0;a=r.elements[l];l++)t.blockRendering.Types.isSpacer(a)&&(i=a),!(i&&(t.blockRendering.Types.isField(a)||t.blockRendering.Types.isInput(a))&&s<n)||t.blockRendering.Types.isField(a)&&(a.field instanceof t.FieldLabel||a.field instanceof t.FieldImage)||(i.width+=n-s),s+=a.width}}},t.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var t,e=0,n=0;t=this.rows[n];n++)t.yPos=e,e+=t.height;this.height=e,n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,e=this.outputConnection.shape.height(n),n=this.outputConnection.shape.width(n),this.outputConnection.height=e,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(e),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),t=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(t=n,this.rightSide.height=e,this.rightSide.width=t,this.rightSide.centerline=e/2,this.rightSide.xPos=this.width+t),this.startX=n,this.width+=n+t,this.widthWithChildren+=n+t}},t.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e,n=0,o=0;e=this.rows[o];o++)if(t.blockRendering.Types.isInputRow(e)){n=e.elements[e.elements.length-2];var i=this.getNegativeSpacing_(e.elements[1]),r=this.getNegativeSpacing_(n);n=i+r;var s=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-n<s&&(i=(n=this.width-s)/2,r=n/2),e.elements.unshift(new t.blockRendering.InRowSpacer(this.constants_,-i)),e.elements.push(new t.blockRendering.InRowSpacer(this.constants_,-r))}if(n)for(this.width-=n,this.widthWithChildren-=n,this.rightSide.xPos-=n,o=0;e=this.rows[o];o++)t.blockRendering.Types.isTopOrBottomRow(e)&&(e.elements[1].width-=n,e.elements[1].widthWithConnectedBlocks-=n),e.width-=n,e.widthWithConnectedBlocks-=n}},t.zelos.RenderInfo.prototype.getNegativeSpacing_=function(e){if(!e)return 0;var n=this.outputConnection.width,o=this.outputConnection.shape.type,i=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return o===i.SHAPES.ROUND?(o=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,n-(o=this.height/2>o?o:this.height/2)*(1-Math.sin(Math.acos((o-this.constants_.SMALL_PADDING)/o)))):0;if(t.blockRendering.Types.isInlineInput(e)){var r=e.connectedBlock;return e=r?r.pathObject.outputShapeType:e.shape.type,r&&r.outputConnection&&(r.statementInputCount||r.nextConnection)||o==i.SHAPES.HEXAGONAL&&o!=e?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][e]}return t.blockRendering.Types.isField(e)?o==i.SHAPES.ROUND&&e.field instanceof t.FieldTextInput?n-2.75*i.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][0]:t.blockRendering.Types.isIcon(e)?this.constants_.SMALL_PADDING:0},t.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var e=2;e<this.rows.length-1;e+=2){var n=this.rows[e-1],o=this.rows[e],i=this.rows[e+1],r=2==e,s=e+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!i.precedesStatement;if(r?this.topRow.hasPreviousConnection:n.followsStatement){var a=3==o.elements.length&&(o.elements[1].field instanceof t.FieldLabel||o.elements[1].field instanceof t.FieldImage);if(!r&&a)n.height-=this.constants_.SMALL_PADDING,i.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.MEDIUM_PADDING;else if(r||s){if(s){for(r=!1,s=0;a=o.elements[s];s++)if(t.blockRendering.Types.isInlineInput(a)&&a.connectedBlock&&!a.connectedBlock.isShadow()&&40<=a.connectedBlock.getHeightWidth().height){r=!0;break}r&&(n.height-=this.constants_.SMALL_PADDING,i.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},t.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),t.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},t.zelos.Drawer=function(e,n){t.zelos.Drawer.superClass_.constructor.call(this,e,n)},t.utils.object.inherits(t.zelos.Drawer,t.blockRendering.Drawer),t.zelos.Drawer.prototype.draw=function(){var e=this.block_.pathObject;e.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),e.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&e.flipRTL(),t.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()},t.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):t.zelos.Drawer.superClass_.drawOutline_.call(this)},t.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():t.zelos.Drawer.superClass_.drawLeft_.call(this)},t.zelos.Drawer.prototype.drawRightSideRow_=function(e){if(!(0>=e.height))if(e.precedesStatement||e.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;n=e.height-(e.precedesStatement?n:0),this.outlinePath_+=(e.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<n?t.utils.svgPaths.lineOnAxis("V",e.yPos+n):"")+(e.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},t.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},t.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},t.zelos.Drawer.prototype.drawFlatTop_=function(){var e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=t.utils.svgPaths.moveBy(e.xPos,this.info_.startY),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",e.width)},t.zelos.Drawer.prototype.drawFlatBottom_=function(){var e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("V",e.baseline),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("h",-e.width)},t.zelos.Drawer.prototype.drawInlineInput_=function(e){this.positionInlineInputConnection_(e);var n=e.input.name;if(!e.connectedBlock&&!this.info_.isInsertionMarker){var o=e.width-2*e.connectionWidth;e=t.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-e.height/2)+t.utils.svgPaths.lineOnAxis("h",o)+e.shape.pathRightDown(e.height)+t.utils.svgPaths.lineOnAxis("h",-o)+e.shape.pathUp(e.height)+"z",this.block_.pathObject.setOutlinePath(n,e)}},t.zelos.Drawer.prototype.drawStatementInput_=function(e){var n=e.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width,i=n.shape.pathRight+t.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,r=e.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+t.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=t.utils.svgPaths.lineOnAxis("H",o)+i+t.utils.svgPaths.lineOnAxis("v",r)+n+t.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},t.zelos.MarkerSvg=function(e,n,o){t.zelos.MarkerSvg.superClass_.constructor.call(this,e,n,o)},t.utils.object.inherits(t.zelos.MarkerSvg,t.blockRendering.MarkerSvg),t.zelos.MarkerSvg.prototype.showWithInputOutput_=function(t){var e=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(e),this.showCurrent_()},t.zelos.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},t.zelos.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},t.zelos.MarkerSvg.prototype.showWithBlock_=function(t){var e=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,e.width,e.height),this.setParent_(t),this.showCurrent_()},t.zelos.MarkerSvg.prototype.positionCircle_=function(t,e){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",e),this.currentMarkerSvg=this.markerCircle_},t.zelos.MarkerSvg.prototype.hide=function(){t.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},t.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(t.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=t.utils.dom.createSvgElement(t.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var e=this.getBlinkProperties_();t.utils.dom.createSvgElement(t.utils.Svg.ANIMATE,e,this.markerCircle_)}return this.markerSvg_},t.zelos.MarkerSvg.prototype.applyColour_=function(e){t.zelos.MarkerSvg.superClass_.applyColour_.call(this,e),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},t.zelos.PathObject=function(e,n,o){t.zelos.PathObject.superClass_.constructor.call(this,e,n,o),this.constants=o,this.svgPathSelected_=null,this.outlines_={},this.outputShapeType=this.remainingOutlines_=null},t.utils.object.inherits(t.zelos.PathObject,t.blockRendering.PathObject),t.zelos.PathObject.prototype.setPath=function(e){t.zelos.PathObject.superClass_.setPath.call(this,e),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",e)},t.zelos.PathObject.prototype.applyColour=function(e){t.zelos.PathObject.superClass_.applyColour.call(this,e),e.isShadow()&&e.getParent()&&this.svgPath.setAttribute("stroke",e.getParent().style.colourTertiary),e=0;for(var n,o=Object.keys(this.outlines_);n=o[e];e++)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},t.zelos.PathObject.prototype.flipRTL=function(){t.zelos.PathObject.superClass_.flipRTL.call(this);for(var e,n=0,o=Object.keys(this.outlines_);e=o[n];n++)this.outlines_[e].setAttribute("transform","scale(-1 1)")},t.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},t.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},t.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,e){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(e?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},t.zelos.PathObject.prototype.beginDrawing=function(){this.remainingOutlines_={};for(var t,e=0,n=Object.keys(this.outlines_);t=n[e];e++)this.remainingOutlines_[t]=1},t.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t,e=0,n=Object.keys(this.remainingOutlines_);t=n[e];e++)this.removeOutlinePath_(t);this.remainingOutlines_=null},t.zelos.PathObject.prototype.setOutlinePath=function(t,e){(t=this.getOutlinePath_(t)).setAttribute("d",e),t.setAttribute("fill",this.style.colourTertiary)},t.zelos.PathObject.prototype.getOutlinePath_=function(e){return this.outlines_[e]||(this.outlines_[e]=t.utils.dom.createSvgElement(t.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[e],this.outlines_[e]},t.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},t.zelos.Renderer=function(e){t.zelos.Renderer.superClass_.constructor.call(this,e)},t.utils.object.inherits(t.zelos.Renderer,t.blockRendering.Renderer),t.zelos.Renderer.prototype.makeConstants_=function(){return new t.zelos.ConstantProvider},t.zelos.Renderer.prototype.makeRenderInfo_=function(e){return new t.zelos.RenderInfo(this,e)},t.zelos.Renderer.prototype.makeDrawer_=function(e,n){return new t.zelos.Drawer(e,n)},t.zelos.Renderer.prototype.makeMarkerDrawer=function(e,n){return new t.zelos.MarkerSvg(e,this.getConstants(),n)},t.zelos.Renderer.prototype.makePathObject=function(e,n){return new t.zelos.PathObject(e,n,this.getConstants())},t.zelos.Renderer.prototype.shouldHighlightConnection=function(e){return e.type!=t.connectionTypes.INPUT_VALUE&&e.type!==t.connectionTypes.OUTPUT_VALUE},t.zelos.Renderer.prototype.getConnectionPreviewMethod=function(e,n,o){return n.type==t.connectionTypes.OUTPUT_VALUE?e.isConnected()?t.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:t.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:t.zelos.Renderer.superClass_.getConnectionPreviewMethod(e,n,o)},t.blockRendering.register("zelos",t.zelos.Renderer),t.Themes.Dark=t.Theme.defineTheme("dark",{base:t.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),t.Themes.Deuteranopia={},t.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},t.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},t.Themes.Deuteranopia=new t.Theme("deuteranopia",t.Themes.Deuteranopia.defaultBlockStyles,t.Themes.Deuteranopia.categoryStyles),t.Themes.HighContrast={},t.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},t.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},t.Themes.HighContrast=new t.Theme("highcontrast",t.Themes.HighContrast.defaultBlockStyles,t.Themes.HighContrast.categoryStyles),t.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),t.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),t.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),t.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),t.Themes.Tritanopia={},t.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},t.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},t.Themes.Tritanopia=new t.Theme("tritanopia",t.Themes.Tritanopia.defaultBlockStyles,t.Themes.Tritanopia.categoryStyles),t.requires={},t})?o.apply(e,i):o)||(t.exports=r)},3720:function(t,e,n){var o,i,r;i=[n(2657)],void 0===(r="function"===typeof(o=function(t){"use strict";return t.Blocks={},t.Blocks})?o.apply(e,i):o)||(t.exports=r)},2657:function(t,e,n){var o,i,r;i=[n(2363)],void 0===(r="function"===typeof(o=function(t){"use strict";return t.Blocks.colour={},t.Constants={},t.Constants.Colour={},t.Constants.Colour.HUE=20,t.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),t.Blocks.lists={},t.Constants.Lists={},t.Constants.Lists.HUE=260,t.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),t.Blocks.lists_create_with={init:function(){this.setHelpUrl(t.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.Mutator(["lists_create_with_item"])),this.setTooltip(t.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("items",this.itemCount_),e},domToMutation:function(t){this.itemCount_=parseInt(t.getAttribute("items"),10),this.updateShape_()},decompose:function(t){var e=t.newBlock("lists_create_with_container");e.initSvg();for(var n=e.getInput("STACK").connection,o=0;o<this.itemCount_;o++){var i=t.newBlock("lists_create_with_item");i.initSvg(),n.connect(i.previousConnection),n=i.nextConnection}return e},compose:function(e){var n=e.getInputTargetBlock("STACK");for(e=[];n&&!n.isInsertionMarker();)e.push(n.valueConnection_),n=n.nextConnection&&n.nextConnection.targetBlock();for(n=0;n<this.itemCount_;n++){var o=this.getInput("ADD"+n).connection.targetConnection;o&&-1==e.indexOf(o)&&o.disconnect()}for(this.itemCount_=e.length,this.updateShape_(),n=0;n<this.itemCount_;n++)t.Mutator.reconnect(e[n],this,"ADD"+n)},saveConnections:function(t){t=t.getInputTargetBlock("STACK");for(var e=0;t;){var n=this.getInput("ADD"+e);t.valueConnection_=n&&n.connection.targetConnection,e++,t=t.nextConnection&&t.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg.LISTS_CREATE_EMPTY_TITLE);for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){var n=this.appendValueInput("ADD"+e).setAlign(t.ALIGN_RIGHT);0==e&&n.appendField(t.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+e);)this.removeInput("ADD"+e),e++}},t.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_indexOf={init:function(){var e=[[t.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(t.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new t.FieldDropdown(e),"END"),this.setInputsInline(!0);var n=this;this.setTooltip((function(){return t.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")}))}},t.Blocks.lists_getIndex={init:function(){var e=[[t.Msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),e=new t.FieldDropdown(e,(function(t){t="REMOVE"==t,this.getSourceBlock().updateStatement_(t)})),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(e,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),t.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var n=this;this.setTooltip((function(){var e=n.getFieldValue("MODE"),o=n.getFieldValue("WHERE"),i="";switch(e+" "+o){case"GET FROM_START":case"GET FROM_END":i=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":i=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":i=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":i=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":i=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":i=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":i=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":i=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":i=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":i=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":i=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":i=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return"FROM_START"!=o&&"FROM_END"!=o||(i+="  "+("FROM_START"==o?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),i}))},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");e.setAttribute("statement",!this.outputConnection);var n=this.getInput("AT").type==t.INPUT_VALUE;return e.setAttribute("at",n),e},domToMutation:function(t){var e="true"==t.getAttribute("statement");this.updateStatement_(e),t="false"!=t.getAttribute("at"),this.updateAt_(t)},updateStatement_:function(t){t!=!this.outputConnection&&(this.unplug(!0,!0),t?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(e){this.removeInput("AT"),this.removeInput("ORDINAL",!0),e?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var n=new t.FieldDropdown(this.WHERE_OPTIONS,(function(t){var n="FROM_START"==t||"FROM_END"==t;if(n!=e){var o=this.getSourceBlock();return o.updateAt_(n),o.setFieldValue(t,"WHERE"),null}}));this.getInput("AT").appendField(n,"WHERE"),t.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_setIndex={init:function(){var e=[[t.Msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new t.FieldDropdown(e),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var n=this;this.setTooltip((function(){var e=n.getFieldValue("MODE"),o=n.getFieldValue("WHERE"),i="";switch(e+" "+o){case"SET FROM_START":case"SET FROM_END":i=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":i=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":i=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":i=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":i=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":i=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":i=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":i=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return"FROM_START"!=o&&"FROM_END"!=o||(i+="  "+t.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),i}))},mutationToDom:function(){var e=t.utils.xml.createElement("mutation"),n=this.getInput("AT").type==t.INPUT_VALUE;return e.setAttribute("at",n),e},domToMutation:function(t){t="false"!=t.getAttribute("at"),this.updateAt_(t)},updateAt_:function(e){this.removeInput("AT"),this.removeInput("ORDINAL",!0),e?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var n=new t.FieldDropdown(this.WHERE_OPTIONS,(function(t){var n="FROM_START"==t||"FROM_END"==t;if(n!=e){var o=this.getSourceBlock();return o.updateAt_(n),o.setFieldValue(t,"WHERE"),null}}));this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(n,"WHERE")}},t.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var e=t.utils.xml.createElement("mutation"),n=this.getInput("AT1").type==t.INPUT_VALUE;return e.setAttribute("at1",n),n=this.getInput("AT2").type==t.INPUT_VALUE,e.setAttribute("at2",n),e},domToMutation:function(t){var e="true"==t.getAttribute("at1");t="true"==t.getAttribute("at2"),this.updateAt_(1,e),this.updateAt_(2,t)},updateAt_:function(e,n){this.removeInput("AT"+e),this.removeInput("ORDINAL"+e,!0),n?(this.appendValueInput("AT"+e).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+e).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+e);var o=new t.FieldDropdown(this["WHERE_OPTIONS_"+e],(function(t){var o="FROM_START"==t||"FROM_END"==t;if(o!=n){var i=this.getSourceBlock();return i.updateAt_(e,o),i.setFieldValue(t,"WHERE"+e),null}}));this.getInput("AT"+e).appendField(o,"WHERE"+e),1==e&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_sort={init:function(){this.jsonInit({message0:t.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[t.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[t.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[t.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[t.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[t.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:t.Msg.LISTS_SORT_TOOLTIP,helpUrl:t.Msg.LISTS_SORT_HELPURL})}},t.Blocks.lists_split={init:function(){var e=this,n=new t.FieldDropdown([[t.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],(function(t){e.updateType_(t)}));this.setHelpUrl(t.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(n,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip((function(){var n=e.getFieldValue("MODE");if("SPLIT"==n)return t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==n)return t.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+n)}))},updateType_:function(t){if(this.getFieldValue("MODE")!=t){var e=this.getInput("INPUT").connection;e.setShadowDom(null);var n=e.targetBlock();n&&(e.disconnect(),n.isShadow()?n.dispose():this.bumpNeighbours())}"SPLIT"==t?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("mode",this.getFieldValue("MODE")),e},domToMutation:function(t){this.updateType_(t.getAttribute("mode"))}},t.Blocks.logic={},t.Constants.Logic={},t.Constants.Logic.HUE=210,t.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),t.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),t.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},t.Extensions.register("logic_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Logic.TOOLTIPS_BY_OP)),t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var e=t.utils.xml.createElement("mutation");return this.elseifCount_&&e.setAttribute("elseif",this.elseifCount_),this.elseCount_&&e.setAttribute("else",1),e},domToMutation:function(t){this.elseifCount_=parseInt(t.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(t.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(t){var e=t.newBlock("controls_if_if");e.initSvg();for(var n=e.nextConnection,o=1;o<=this.elseifCount_;o++){var i=t.newBlock("controls_if_elseif");i.initSvg(),n.connect(i.previousConnection),n=i.nextConnection}return this.elseCount_&&((t=t.newBlock("controls_if_else")).initSvg(),n.connect(t.previousConnection)),e},compose:function(t){t=t.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var e=[null],n=[null],o=null;t&&!t.isInsertionMarker();){switch(t.type){case"controls_if_elseif":this.elseifCount_++,e.push(t.valueConnection_),n.push(t.statementConnection_);break;case"controls_if_else":this.elseCount_++,o=t.statementConnection_;break;default:throw TypeError("Unknown block type: "+t.type)}t=t.nextConnection&&t.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(e,n,o)},saveConnections:function(t){t=t.nextConnection.targetBlock();for(var e=1;t;){switch(t.type){case"controls_if_elseif":var n=this.getInput("IF"+e),o=this.getInput("DO"+e);t.valueConnection_=n&&n.connection.targetConnection,t.statementConnection_=o&&o.connection.targetConnection,e++;break;case"controls_if_else":o=this.getInput("ELSE"),t.statementConnection_=o&&o.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+t.type)}t=t.nextConnection&&t.nextConnection.targetBlock()}},rebuildShape_:function(){var t=[null],e=[null],n=null;this.getInput("ELSE")&&(n=this.getInput("ELSE").connection.targetConnection);for(var o=1;this.getInput("IF"+o);){var i=this.getInput("IF"+o),r=this.getInput("DO"+o);t.push(i.connection.targetConnection),e.push(r.connection.targetConnection),o++}this.updateShape_(),this.reconnectChildBlocks_(t,e,n)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var e=1;this.getInput("IF"+e);)this.removeInput("IF"+e),this.removeInput("DO"+e),e++;for(e=1;e<=this.elseifCount_;e++)this.appendValueInput("IF"+e).setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+e).appendField(t.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(e,n,o){for(var i=1;i<=this.elseifCount_;i++)t.Mutator.reconnect(e[i],this,"IF"+i),t.Mutator.reconnect(n[i],this,"DO"+i);t.Mutator.reconnect(o,this,"ELSE")}},t.Extensions.registerMutator("controls_if_mutator",t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},t.Extensions.register("controls_if_tooltip",t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(e){this.prevBlocks_||(this.prevBlocks_=[null,null]);var n=this.getInputTargetBlock("A"),o=this.getInputTargetBlock("B");n&&o&&!this.workspace.connectionChecker.doTypeChecks(n.outputConnection,o.outputConnection)&&(t.Events.setGroup(e.group),(e=this.prevBlocks_[0])!==n&&(n.unplug(),!e||e.isDisposed()||e.isShadow()||this.getInput("A").connection.connect(e.outputConnection)),(n=this.prevBlocks_[1])!==o&&(o.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("B").connection.connect(n.outputConnection)),this.bumpNeighbours(),t.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},t.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},t.Extensions.register("logic_compare",t.Constants.Logic.LOGIC_COMPARE_EXTENSION),t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(e){var n=this.getInputTargetBlock("THEN"),o=this.getInputTargetBlock("ELSE"),i=this.outputConnection.targetConnection;if((n||o)&&i)for(var r=0;2>r;r++){var s=1==r?n:o;s&&!s.workspace.connectionChecker.doTypeChecks(s.outputConnection,i)&&(t.Events.setGroup(e.group),i===this.prevParentConnection_?(this.unplug(),i.getSourceBlock().bumpNeighbours()):(s.unplug(),s.bumpNeighbours()),t.Events.setGroup(!1))}this.prevParentConnection_=i}},t.Extensions.registerMixin("logic_ternary",t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),t.Blocks.loops={},t.Constants.Loops={},t.Constants.Loops.HUE=120,t.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),t.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},t.Extensions.register("controls_whileUntil_tooltip",t.Extensions.buildTooltipForDropdown("MODE",t.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},t.Extensions.register("controls_flow_tooltip",t.Extensions.buildTooltipForDropdown("FLOW",t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(e){if(!this.isInFlyout){var n=this.getField("VAR").getVariable(),o=n.name;if(!this.isCollapsed()&&null!=o){var i={enabled:!0};i.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",o),n=t.Variables.generateVariableFieldDom(n),(o=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),o.appendChild(n),i.callback=t.ContextMenu.callbackFactory(this,o),e.push(i)}}}},t.Extensions.registerMixin("contextMenu_newGetVariableBlock",t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),t.Extensions.register("controls_for_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.Extensions.register("controls_forEach_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(e){do{if(-1!=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(e.type))return e;e=e.getSurroundParent()}while(e);return null},onchange:function(e){if(this.workspace.isDragging&&!this.workspace.isDragging()&&e.type==t.Events.BLOCK_MOVE){var n=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(n?null:t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var o=t.Events.getGroup();t.Events.setGroup(e.group),this.setEnabled(n),t.Events.setGroup(o)}}}},t.Extensions.registerMixin("controls_flow_in_loop_check",t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),t.Blocks.math={},t.Constants.Math={},t.Constants.Math.HUE=230,t.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),t.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},t.Extensions.register("math_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Math.TOOLTIPS_BY_OP)),t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var e=t.utils.xml.createElement("mutation"),n="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return e.setAttribute("divisor_input",n),e},domToMutation:function(t){t="true"==t.getAttribute("divisor_input"),this.updateShape_(t)},updateShape_:function(t){var e=this.getInput("DIVISOR");t?e||this.appendValueInput("DIVISOR").setCheck("Number"):e&&this.removeInput("DIVISOR")}},t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator((function(t){t="DIVISIBLE_BY"==t,this.getSourceBlock().updateShape_(t)}))},t.Extensions.registerMutator("math_is_divisibleby_mutator",t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),t.Extensions.register("math_change_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),t.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(t){"MODE"==t?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("op",this.getFieldValue("OP")),e},domToMutation:function(t){this.updateType_(t.getAttribute("op"))}},t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(t){this.updateType_(t)}.bind(this))},t.Extensions.registerMutator("math_modes_of_list_mutator",t.Constants.Math.LIST_MODES_MUTATOR_MIXIN,t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),t.Blocks.procedures={},t.Blocks.procedures_defnoreturn={init:function(){var e=t.Procedures.findLegalName("",this);(e=new t.FieldTextInput(e,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(e){this.hasStatements_!==e&&(e?(this.appendStatementInput("STACK").appendField(t.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=e)},updateParams_:function(){var e="";this.arguments_.length&&(e=t.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.Events.disable();try{this.setFieldValue(e,"PARAMS")}finally{t.Events.enable()}},mutationToDom:function(e){var n=t.utils.xml.createElement("mutation");e&&n.setAttribute("name",this.getFieldValue("NAME"));for(var o=0;o<this.argumentVarModels_.length;o++){var i=t.utils.xml.createElement("arg"),r=this.argumentVarModels_[o];i.setAttribute("name",r.name),i.setAttribute("varid",r.getId()),e&&this.paramIds_&&i.setAttribute("paramId",this.paramIds_[o]),n.appendChild(i)}return this.hasStatements_||n.setAttribute("statements","false"),n},domToMutation:function(e){this.arguments_=[],this.argumentVarModels_=[];for(var n,o=0;n=e.childNodes[o];o++)if("arg"==n.nodeName.toLowerCase()){var i=n.getAttribute("name");n=n.getAttribute("varid")||n.getAttribute("varId"),this.arguments_.push(i),null!=(n=t.Variables.getOrCreateVariablePackage(this.workspace,n,i,""))?this.argumentVarModels_.push(n):console.log("Failed to create a variable with name "+i+", ignoring.")}this.updateParams_(),t.Procedures.mutateCallers(this),this.setStatements_("false"!==e.getAttribute("statements"))},decompose:function(e){var n=t.utils.xml.createElement("block");n.setAttribute("type","procedures_mutatorcontainer");var o=t.utils.xml.createElement("statement");o.setAttribute("name","STACK"),n.appendChild(o);for(var i=0;i<this.arguments_.length;i++){var r=t.utils.xml.createElement("block");r.setAttribute("type","procedures_mutatorarg");var s=t.utils.xml.createElement("field");s.setAttribute("name","NAME");var a=t.utils.xml.createTextNode(this.arguments_[i]);s.appendChild(a),r.appendChild(s),s=t.utils.xml.createElement("next"),r.appendChild(s),o.appendChild(r),o=s}return e=t.Xml.domToBlock(n,e),"procedures_defreturn"==this.type?e.setFieldValue(this.hasStatements_,"STATEMENTS"):e.removeInput("STATEMENT_INPUT"),t.Procedures.mutateCallers(this),e},compose:function(e){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var n=e.getInputTargetBlock("STACK");n&&!n.isInsertionMarker();){var o=n.getFieldValue("NAME");this.arguments_.push(o),o=this.workspace.getVariable(o,""),this.argumentVarModels_.push(o),this.paramIds_.push(n.id),n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateParams_(),t.Procedures.mutateCallers(this),null!==(e=e.getFieldValue("STATEMENTS"))&&(e="TRUE"==e,this.hasStatements_!=e)&&(e?(this.setStatements_(!0),t.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(e=this.getInput("STACK").connection,(this.statementConnection_=e.targetConnection)&&((e=e.targetBlock()).unplug(),e.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(e,n){var o=this.workspace.getVariableById(e);if(""==o.type){o=o.name,n=this.workspace.getVariableById(n);for(var i=!1,r=0;r<this.argumentVarModels_.length;r++)this.argumentVarModels_[r].getId()==e&&(this.arguments_[r]=n.name,this.argumentVarModels_[r]=n,i=!0);i&&(this.displayRenamedVar_(o,n.name),t.Procedures.mutateCallers(this))}},updateVarName:function(e){for(var n=e.name,o=!1,i=0;i<this.argumentVarModels_.length;i++)if(this.argumentVarModels_[i].getId()==e.getId()){var r=this.arguments_[i];this.arguments_[i]=n,o=!0}o&&(this.displayRenamedVar_(r,n),t.Procedures.mutateCallers(this))},displayRenamedVar_:function(e,n){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var o,i=this.mutator.workspace_.getAllBlocks(!1),r=0;o=i[r];r++)"procedures_mutatorarg"==o.type&&t.Names.equals(e,o.getFieldValue("NAME"))&&o.setFieldValue(n,"NAME")},customContextMenu:function(e){if(!this.isInFlyout){var n={enabled:!0},o=this.getFieldValue("NAME");n.text=t.Msg.PROCEDURES_CREATE_DO.replace("%1",o);var i=t.utils.xml.createElement("mutation");for(i.setAttribute("name",o),o=0;o<this.arguments_.length;o++){var r=t.utils.xml.createElement("arg");r.setAttribute("name",this.arguments_[o]),i.appendChild(r)}if((o=t.utils.xml.createElement("block")).setAttribute("type",this.callType_),o.appendChild(i),n.callback=t.ContextMenu.callbackFactory(this,o),e.push(n),!this.isCollapsed())for(o=0;o<this.argumentVarModels_.length;o++)n={enabled:!0},i=this.argumentVarModels_[o],n.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",i.name),i=t.Variables.generateVariableFieldDom(i),(r=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),r.appendChild(i),n.callback=t.ContextMenu.callbackFactory(this,r),e.push(n)}},callType_:"procedures_callnoreturn"},t.Blocks.procedures_defreturn={init:function(){var e=t.Procedures.findLegalName("",this);(e=new t.FieldTextInput(e,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.ALIGN_RIGHT).appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:t.Blocks.procedures_defnoreturn.setStatements_,updateParams_:t.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:t.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_defnoreturn.domToMutation,decompose:t.Blocks.procedures_defnoreturn.decompose,compose:t.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:t.Blocks.procedures_defnoreturn.getVars,getVarModels:t.Blocks.procedures_defnoreturn.getVarModels,renameVarById:t.Blocks.procedures_defnoreturn.renameVarById,updateVarName:t.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:t.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:t.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},t.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new t.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.procedures_mutatorarg={init:function(){var e=new t.FieldTextInput(t.Procedures.DEFAULT_ARG,this.validator_);e.oldShowEditorFn_=e.showEditor_,e.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(e,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,e.onFinishEditing_=this.deleteIntermediateVars_,e.createdVariables_=[],e.onFinishEditing_("x")},validator_:function(e){var n=this.getSourceBlock(),o=t.Mutator.findParentWs(n.workspace);if(!(e=e.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var i=(n.workspace.targetWorkspace||n.workspace).getAllBlocks(!1),r=e.toLowerCase(),s=0;s<i.length;s++)if(i[s].id!=this.getSourceBlock().id){var a=i[s].getFieldValue("NAME");if(a&&a.toLowerCase()==r)return null}return n.isInFlyout||((n=o.getVariable(e,""))&&n.name!=e&&o.renameVariableById(n.getId(),e),n||(n=o.createVariable(e,""))&&this.createdVariables_&&this.createdVariables_.push(n)),e},deleteIntermediateVars_:function(e){var n=t.Mutator.findParentWs(this.getSourceBlock().workspace);if(n)for(var o=0;o<this.createdVariables_.length;o++){var i=this.createdVariables_[o];i.name!=e&&n.deleteVariableById(i.getId())}}},t.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(e,n){t.Names.equals(e,this.getProcedureCall())&&(this.setFieldValue(n,"NAME"),this.setTooltip((this.outputConnection?t.Msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",n)))},setProcedureParameters_:function(e,n){var o=t.Procedures.getDefinition(this.getProcedureCall(),this.workspace),i=o&&o.mutator&&o.mutator.isVisible();if(i||(this.quarkConnections_={},this.quarkIds_=null),n)if(e.join("\n")==this.arguments_.join("\n"))this.quarkIds_=n;else{if(n.length!=e.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),o=this.rendered,this.rendered=!1;for(var r=0;r<this.arguments_.length;r++){var s=this.getInput("ARG"+r);s&&(s=s.connection.targetConnection,this.quarkConnections_[this.quarkIds_[r]]=s,i&&s&&-1==n.indexOf(this.quarkIds_[r])&&(s.disconnect(),s.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(e),this.argumentVarModels_=[],r=0;r<this.arguments_.length;r++)e=t.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[r],""),this.argumentVarModels_.push(e);if(this.updateShape_(),this.quarkIds_=n)for(r=0;r<this.arguments_.length;r++)(n=this.quarkIds_[r])in this.quarkConnections_&&(s=this.quarkConnections_[n],t.Mutator.reconnect(s,this,"ARG"+r)||delete this.quarkConnections_[n]);(this.rendered=o)&&this.render()}},updateShape_:function(){for(var e=0;e<this.arguments_.length;e++){var n=this.getField("ARGNAME"+e);if(n){t.Events.disable();try{n.setValue(this.arguments_[e])}finally{t.Events.enable()}}else n=new t.FieldLabel(this.arguments_[e]),this.appendValueInput("ARG"+e).setAlign(t.ALIGN_RIGHT).appendField(n,"ARGNAME"+e).init()}for(;this.getInput("ARG"+e);)this.removeInput("ARG"+e),e++;(e=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(e.appendField(t.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),e.init()):this.getField("WITH")&&e.removeField("WITH"))},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");e.setAttribute("name",this.getProcedureCall());for(var n=0;n<this.arguments_.length;n++){var o=t.utils.xml.createElement("arg");o.setAttribute("name",this.arguments_[n]),e.appendChild(o)}return e},domToMutation:function(t){var e=t.getAttribute("name");this.renameProcedure(this.getProcedureCall(),e),e=[];for(var n,o=[],i=0;n=t.childNodes[i];i++)"arg"==n.nodeName.toLowerCase()&&(e.push(n.getAttribute("name")),o.push(n.getAttribute("paramId")));this.setProcedureParameters_(e,o)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(e){if(this.workspace&&!this.workspace.isFlyout&&e.recordUndo)if(e.type==t.Events.BLOCK_CREATE&&-1!=e.ids.indexOf(this.id)){var n=this.getProcedureCall();if(!(n=t.Procedures.getDefinition(n,this.workspace))||n.type==this.defType_&&JSON.stringify(n.getVars())==JSON.stringify(this.arguments_)||(n=null),!n){t.Events.setGroup(e.group),e=t.utils.xml.createElement("xml"),(n=t.utils.xml.createElement("block")).setAttribute("type",this.defType_);var o=this.getRelativeToSurfaceXY(),i=o.y+2*t.SNAP_RADIUS;n.setAttribute("x",o.x+t.SNAP_RADIUS*(this.RTL?-1:1)),n.setAttribute("y",i),o=this.mutationToDom(),n.appendChild(o),(o=t.utils.xml.createElement("field")).setAttribute("name","NAME"),(i=this.getProcedureCall())||(i=t.Procedures.findLegalName("",this),this.renameProcedure("",i)),o.appendChild(t.utils.xml.createTextNode(i)),n.appendChild(o),e.appendChild(n),t.Xml.domToWorkspace(e,this.workspace),t.Events.setGroup(!1)}}else e.type==t.Events.BLOCK_DELETE?(n=this.getProcedureCall(),(n=t.Procedures.getDefinition(n,this.workspace))||(t.Events.setGroup(e.group),this.dispose(!0),t.Events.setGroup(!1))):e.type==t.Events.CHANGE&&"disabled"==e.element&&(n=this.getProcedureCall(),(n=t.Procedures.getDefinition(n,this.workspace))&&n.id==e.blockId&&((n=t.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),t.Events.setGroup(e.group),e.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.Events.setGroup(n)))},customContextMenu:function(e){if(this.workspace.isMovable()){var n={enabled:!0};n.text=t.Msg.PROCEDURES_HIGHLIGHT_DEF;var o=this.getProcedureCall(),i=this.workspace;n.callback=function(){var e=t.Procedures.getDefinition(o,i);e&&(i.centerOnBlock(e.id),e.select())},e.push(n)}},defType_:"procedures_defnoreturn"},t.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:t.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:t.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:t.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:t.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:t.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_callnoreturn.domToMutation,getVars:t.Blocks.procedures_callnoreturn.getVars,getVarModels:t.Blocks.procedures_callnoreturn.getVarModels,onchange:t.Blocks.procedures_callnoreturn.onchange,customContextMenu:t.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},t.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("value",Number(this.hasReturnValue_)),e},domToMutation:function(e){this.hasReturnValue_=1==e.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(e){if(this.workspace.isDragging&&!this.workspace.isDragging()){e=!1;var n=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(n.type)){e=!0;break}n=n.getSurroundParent()}while(n);e?("procedures_defnoreturn"==n.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=n.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(t.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},t.Blocks.texts={},t.Constants.Text={},t.Constants.Text.HUE=160,t.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),t.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var e=t.utils.xml.createElement("mutation"),n=this.getInput("AT1").type==t.INPUT_VALUE;return e.setAttribute("at1",n),n=this.getInput("AT2").type==t.INPUT_VALUE,e.setAttribute("at2",n),e},domToMutation:function(t){var e="true"==t.getAttribute("at1");t="true"==t.getAttribute("at2"),this.updateAt_(1,e),this.updateAt_(2,t)},updateAt_:function(e,n){this.removeInput("AT"+e),this.removeInput("ORDINAL"+e,!0),n?(this.appendValueInput("AT"+e).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+e).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+e),2==e&&t.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL));var o=new t.FieldDropdown(this["WHERE_OPTIONS_"+e],(function(t){var o="FROM_START"==t||"FROM_END"==t;if(o!=n){var i=this.getSourceBlock();return i.updateAt_(e,o),i.setFieldValue(t,"WHERE"+e),null}}));this.getInput("AT"+e).appendField(o,"WHERE"+e),1==e&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},t.Blocks.text_changeCase={init:function(){var e=[[t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(e),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_CHANGECASE_TOOLTIP)}},t.Blocks.text_trim={init:function(){var e=[[t.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(e),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_TRIM_TOOLTIP)}},t.Blocks.text_print={init:function(){this.jsonInit({message0:t.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg.TEXT_PRINT_HELPURL})}},t.Blocks.text_prompt_ext={init:function(){var e=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var n=this;e=new t.FieldDropdown(e,(function(t){n.updateType_(t)})),this.appendValueInput("TEXT").appendField(e,"TYPE"),this.setOutput(!0,"String"),this.setTooltip((function(){return"TEXT"==n.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER}))},updateType_:function(t){this.outputConnection.setCheck("NUMBER"==t?"Number":"String")},mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("type",this.getFieldValue("TYPE")),e},domToMutation:function(t){this.updateType_(t.getAttribute("type"))}},t.Blocks.text_prompt={init:function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN);var e=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],n=this;this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),e=new t.FieldDropdown(e,(function(t){n.updateType_(t)})),this.appendDummyInput().appendField(e,"TYPE").appendField(this.newQuote_(!0)).appendField(new t.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip((function(){return"TEXT"==n.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER}))},updateType_:t.Blocks.text_prompt_ext.updateType_,mutationToDom:t.Blocks.text_prompt_ext.mutationToDom,domToMutation:t.Blocks.text_prompt_ext.domToMutation},t.Blocks.text_count={init:function(){this.jsonInit({message0:t.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg.TEXT_COUNT_HELPURL})}},t.Blocks.text_replace={init:function(){this.jsonInit({message0:t.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg.TEXT_REPLACE_HELPURL})}},t.Blocks.text_reverse={init:function(){this.jsonInit({message0:t.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg.TEXT_REVERSE_HELPURL})}},t.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(t){for(var e,n=0;e=this.inputList[n];n++)for(var o,i=0;o=e.fieldRow[i];i++)if(t==o.name)return e.insertFieldAt(i,this.newQuote_(!0)),void e.insertFieldAt(i+2,this.newQuote_(!1));console.warn('field named "'+t+'" not found in '+this.toDevString())},newQuote_:function(e){return e=this.RTL?!e:e,new t.FieldImage(e?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,e?"\u201c":"\u201d")}},t.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("items",this.itemCount_),e},domToMutation:function(t){this.itemCount_=parseInt(t.getAttribute("items"),10),this.updateShape_()},decompose:function(t){var e=t.newBlock("text_create_join_container");e.initSvg();for(var n=e.getInput("STACK").connection,o=0;o<this.itemCount_;o++){var i=t.newBlock("text_create_join_item");i.initSvg(),n.connect(i.previousConnection),n=i.nextConnection}return e},compose:function(e){var n=e.getInputTargetBlock("STACK");for(e=[];n&&!n.isInsertionMarker();)e.push(n.valueConnection_),n=n.nextConnection&&n.nextConnection.targetBlock();for(n=0;n<this.itemCount_;n++){var o=this.getInput("ADD"+n).connection.targetConnection;o&&-1==e.indexOf(o)&&o.disconnect()}for(this.itemCount_=e.length,this.updateShape_(),n=0;n<this.itemCount_;n++)t.Mutator.reconnect(e[n],this,"ADD"+n)},saveConnections:function(t){t=t.getInputTargetBlock("STACK");for(var e=0;t;){var n=this.getInput("ADD"+e);t.valueConnection_=n&&n.connection.targetConnection,e++,t=t.nextConnection&&t.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){var n=this.appendValueInput("ADD"+e).setAlign(t.ALIGN_RIGHT);0==e&&n.appendField(t.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+e);)this.removeInput("ADD"+e),e++}},t.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.Mutator(["text_create_join_item"]))},t.Extensions.register("text_append_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var e=this;this.setTooltip((function(){return t.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",e.workspace.options.oneBasedIndex?"0":"-1")}))},t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var e=t.utils.xml.createElement("mutation");return e.setAttribute("at",!!this.isAt_),e},domToMutation:function(t){t="false"!=t.getAttribute("at"),this.updateAt_(t)},updateAt_:function(e){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),e&&(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)),t.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_CHARAT_TAIL)),this.isAt_=e}},t.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator((function(t){(t="FROM_START"==t||"FROM_END"==t)!=this.isAt_&&this.getSourceBlock().updateAt_(t)})),this.updateAt_(!0);var e=this;this.setTooltip((function(){var n=e.getFieldValue("WHERE"),o=t.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==n||"FROM_END"==n)&&(n="FROM_START"==n?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(o+="  "+n.replace("%1",e.workspace.options.oneBasedIndex?"#1":"#0")),o}))},t.Extensions.register("text_indexOf_tooltip",t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),t.Extensions.register("text_quotes",t.Constants.Text.TEXT_QUOTES_EXTENSION),t.Extensions.registerMutator("text_join_mutator",t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,t.Constants.Text.TEXT_JOIN_EXTENSION),t.Extensions.registerMutator("text_charAt_mutator",t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,t.Constants.Text.TEXT_CHARAT_EXTENSION),t.Blocks.variables={},t.Constants.Variables={},t.Constants.Variables.HUE=330,t.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(e){if(this.isInFlyout)"variables_get"!=this.type&&"variables_get_reporter"!=this.type||(n={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},r=this.getField("VAR").getText(),i={text:t.Msg.DELETE_VARIABLE.replace("%1",r),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},e.unshift(n),e.unshift(i));else{if("variables_get"==this.type)var n="variables_set",o=t.Msg.VARIABLES_GET_CREATE_SET;else n="variables_get",o=t.Msg.VARIABLES_SET_CREATE_GET;var i={enabled:0<this.workspace.remainingCapacity()},r=this.getField("VAR").getText();i.text=o.replace("%1",r),(o=t.utils.xml.createElement("field")).setAttribute("name","VAR"),o.appendChild(t.utils.xml.createTextNode(r)),(r=t.utils.xml.createElement("block")).setAttribute("type",n),r.appendChild(o),i.callback=t.ContextMenu.callbackFactory(this,r),e.push(i)}}},t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(e){return function(){var n=e.workspace,o=e.getField("VAR").getVariable();t.Variables.renameVariable(n,o)}},t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(t){return function(){var e=t.workspace,n=t.getField("VAR").getVariable();e.deleteVariableById(n.getId()),e.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableSetterGetter",t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Constants.VariablesDynamic={},t.Constants.VariablesDynamic.HUE=310,t.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(e){if(this.isInFlyout)"variables_get_dynamic"!=this.type&&"variables_get_reporter_dynamic"!=this.type||(n={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},s=this.getField("VAR").getText(),r={text:t.Msg.DELETE_VARIABLE.replace("%1",s),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},e.unshift(n),e.unshift(r));else{var n=this.getFieldValue("VAR"),o=this.workspace.getVariableById(n).type;if("variables_get_dynamic"==this.type){n="variables_set_dynamic";var i=t.Msg.VARIABLES_GET_CREATE_SET}else n="variables_get_dynamic",i=t.Msg.VARIABLES_SET_CREATE_GET;var r={enabled:0<this.workspace.remainingCapacity()},s=this.getField("VAR").getText();r.text=i.replace("%1",s),(i=t.utils.xml.createElement("field")).setAttribute("name","VAR"),i.setAttribute("variabletype",o),i.appendChild(t.utils.xml.createTextNode(s)),(s=t.utils.xml.createElement("block")).setAttribute("type",n),s.appendChild(i),r.callback=t.ContextMenu.callbackFactory(this,s),e.push(r)}},onchange:function(e){e=this.getFieldValue("VAR"),e=t.Variables.getVariable(this.workspace,e),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(e.type):this.getInput("VALUE").connection.setCheck(e.type)}},t.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(e){return function(){var n=e.workspace,o=e.getField("VAR").getVariable();t.Variables.renameVariable(n,o)}},t.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(t){return function(){var e=t.workspace,n=t.getField("VAR").getVariable();e.deleteVariableById(n.getId()),e.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Blocks})?o.apply(e,i):o)||(t.exports=r)},285:function(t,e,n){var o,i,r;i=[n(1030),n(9130),n(3720),n(2505)],void 0===(r="function"===typeof(o=function(t,e,n,o){"use strict";return t.setLocale(e),t.Blocks=t.Blocks||{},Object.keys(n).forEach((function(e){t.Blocks[e]=n[e]})),t.JavaScript=o,t})?o.apply(e,i):o)||(t.exports=r)},1030:function(t,e,n){var o,i,r;i=[n(478)],void 0===(r="function"===typeof(o=function(t){"use strict";return t.setLocale=function(e){t.Msg=t.Msg||{},Object.keys(e).forEach((function(n){t.Msg[n]=e[n]}))},t})?o.apply(e,i):o)||(t.exports=r)},9271:function(t,e,n){var o,i,r;i=[n(285)],void 0===(r="function"===typeof(o=function(t){"use strict";return t})?o.apply(e,i):o)||(t.exports=r)},2505:function(t,e,n){var o,i,r;i=[n(1030),n(6952)],void 0===(r="function"===typeof(o=function(t,e){"use strict";return t.JavaScript=e,e})?o.apply(e,i):o)||(t.exports=r)},6952:function(t,e,n){var o,i,r;i=[n(2363)],void 0===(r="function"===typeof(o=function(t){"use strict";return t.JavaScript=new t.Generator("JavaScript"),t.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(t.utils.global).join(",")),t.JavaScript.ORDER_ATOMIC=0,t.JavaScript.ORDER_NEW=1.1,t.JavaScript.ORDER_MEMBER=1.2,t.JavaScript.ORDER_FUNCTION_CALL=2,t.JavaScript.ORDER_INCREMENT=3,t.JavaScript.ORDER_DECREMENT=3,t.JavaScript.ORDER_BITWISE_NOT=4.1,t.JavaScript.ORDER_UNARY_PLUS=4.2,t.JavaScript.ORDER_UNARY_NEGATION=4.3,t.JavaScript.ORDER_LOGICAL_NOT=4.4,t.JavaScript.ORDER_TYPEOF=4.5,t.JavaScript.ORDER_VOID=4.6,t.JavaScript.ORDER_DELETE=4.7,t.JavaScript.ORDER_AWAIT=4.8,t.JavaScript.ORDER_EXPONENTIATION=5,t.JavaScript.ORDER_MULTIPLICATION=5.1,t.JavaScript.ORDER_DIVISION=5.2,t.JavaScript.ORDER_MODULUS=5.3,t.JavaScript.ORDER_SUBTRACTION=6.1,t.JavaScript.ORDER_ADDITION=6.2,t.JavaScript.ORDER_BITWISE_SHIFT=7,t.JavaScript.ORDER_RELATIONAL=8,t.JavaScript.ORDER_IN=8,t.JavaScript.ORDER_INSTANCEOF=8,t.JavaScript.ORDER_EQUALITY=9,t.JavaScript.ORDER_BITWISE_AND=10,t.JavaScript.ORDER_BITWISE_XOR=11,t.JavaScript.ORDER_BITWISE_OR=12,t.JavaScript.ORDER_LOGICAL_AND=13,t.JavaScript.ORDER_LOGICAL_OR=14,t.JavaScript.ORDER_CONDITIONAL=15,t.JavaScript.ORDER_ASSIGNMENT=16,t.JavaScript.ORDER_YIELD=17,t.JavaScript.ORDER_COMMA=18,t.JavaScript.ORDER_NONE=99,t.JavaScript.ORDER_OVERRIDES=[[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_LOGICAL_NOT,t.JavaScript.ORDER_LOGICAL_NOT],[t.JavaScript.ORDER_MULTIPLICATION,t.JavaScript.ORDER_MULTIPLICATION],[t.JavaScript.ORDER_ADDITION,t.JavaScript.ORDER_ADDITION],[t.JavaScript.ORDER_LOGICAL_AND,t.JavaScript.ORDER_LOGICAL_AND],[t.JavaScript.ORDER_LOGICAL_OR,t.JavaScript.ORDER_LOGICAL_OR]],t.JavaScript.isInitialized=!1,t.JavaScript.init=function(e){t.JavaScript.definitions_=Object.create(null),t.JavaScript.functionNames_=Object.create(null),t.JavaScript.variableDB_?t.JavaScript.variableDB_.reset():t.JavaScript.variableDB_=new t.Names(t.JavaScript.RESERVED_WORDS_),t.JavaScript.variableDB_.setVariableMap(e.getVariableMap());for(var n=[],o=t.Variables.allDeveloperVariables(e),i=0;i<o.length;i++)n.push(t.JavaScript.variableDB_.getName(o[i],t.Names.DEVELOPER_VARIABLE_TYPE));for(e=t.Variables.allUsedVarModels(e),i=0;i<e.length;i++)n.push(t.JavaScript.variableDB_.getName(e[i].getId(),t.VARIABLE_CATEGORY_NAME));n.length&&(t.JavaScript.definitions_.variables="var "+n.join(", ")+";"),this.isInitialized=!0},t.JavaScript.finish=function(e){var n,o=[];for(n in t.JavaScript.definitions_)o.push(t.JavaScript.definitions_[n]);return delete t.JavaScript.definitions_,delete t.JavaScript.functionNames_,t.JavaScript.variableDB_.reset(),o.join("\n\n")+"\n\n\n"+e},t.JavaScript.scrubNakedValue=function(t){return t+";\n"},t.JavaScript.quote_=function(t){return"'"+(t=t.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},t.JavaScript.multiline_quote_=function(e){return e.split(/\n/g).map(t.JavaScript.quote_).join(" + '\\n' +\n")},t.JavaScript.scrub_=function(e,n,o){var i="";if(!e.outputConnection||!e.outputConnection.targetConnection){var r=e.getCommentText();r&&(r=t.utils.string.wrap(r,t.JavaScript.COMMENT_WRAP-3),i+=t.JavaScript.prefixLines(r+"\n","// "));for(var s=0;s<e.inputList.length;s++)e.inputList[s].type==t.inputTypes.VALUE&&(r=e.inputList[s].connection.targetBlock())&&(r=t.JavaScript.allNestedComments(r))&&(i+=t.JavaScript.prefixLines(r,"// "))}return e=e.nextConnection&&e.nextConnection.targetBlock(),i+n+(o=o?"":t.JavaScript.blockToCode(e))},t.JavaScript.getAdjusted=function(e,n,o,i,r){o=o||0,r=r||t.JavaScript.ORDER_NONE,e.workspace.options.oneBasedIndex&&o--;var s=e.workspace.options.oneBasedIndex?"1":"0";if(e=0<o?t.JavaScript.valueToCode(e,n,t.JavaScript.ORDER_ADDITION)||s:0>o?t.JavaScript.valueToCode(e,n,t.JavaScript.ORDER_SUBTRACTION)||s:i?t.JavaScript.valueToCode(e,n,t.JavaScript.ORDER_UNARY_NEGATION)||s:t.JavaScript.valueToCode(e,n,r)||s,t.isNumber(e))e=Number(e)+o,i&&(e=-e);else{if(0<o){e=e+" + "+o;var a=t.JavaScript.ORDER_ADDITION}else 0>o&&(e=e+" - "+-o,a=t.JavaScript.ORDER_SUBTRACTION);i&&(e=o?"-("+e+")":"-"+e,a=t.JavaScript.ORDER_UNARY_NEGATION),a=Math.floor(a),r=Math.floor(r),a&&r>=a&&(e="("+e+")")}return e},t.JavaScript.colour={},t.JavaScript.colour_picker=function(e){return[t.JavaScript.quote_(e.getFieldValue("COLOUR")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.colour_random=function(e){return[t.JavaScript.provideFunction_("colourRandom",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_rgb=function(e){var n=t.JavaScript.valueToCode(e,"RED",t.JavaScript.ORDER_NONE)||0,o=t.JavaScript.valueToCode(e,"GREEN",t.JavaScript.ORDER_NONE)||0;return e=t.JavaScript.valueToCode(e,"BLUE",t.JavaScript.ORDER_NONE)||0,[t.JavaScript.provideFunction_("colourRgb",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+n+", "+o+", "+e+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_blend=function(e){var n=t.JavaScript.valueToCode(e,"COLOUR1",t.JavaScript.ORDER_NONE)||"'#000000'",o=t.JavaScript.valueToCode(e,"COLOUR2",t.JavaScript.ORDER_NONE)||"'#000000'";return e=t.JavaScript.valueToCode(e,"RATIO",t.JavaScript.ORDER_NONE)||.5,[t.JavaScript.provideFunction_("colourBlend",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+n+", "+o+", "+e+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists={},t.JavaScript.lists_create_empty=function(e){return["[]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_create_with=function(e){for(var n=Array(e.itemCount_),o=0;o<e.itemCount_;o++)n[o]=t.JavaScript.valueToCode(e,"ADD"+o,t.JavaScript.ORDER_NONE)||"null";return["["+n.join(", ")+"]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_repeat=function(e){return[t.JavaScript.provideFunction_("listsRepeat",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(t.JavaScript.valueToCode(e,"ITEM",t.JavaScript.ORDER_NONE)||"null")+", "+(e=t.JavaScript.valueToCode(e,"NUM",t.JavaScript.ORDER_NONE)||"0")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_length=function(e){return[(t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.lists_isEmpty=function(e){return["!"+(t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.lists_indexOf=function(e){var n="FIRST"==e.getFieldValue("END")?"indexOf":"lastIndexOf",o=t.JavaScript.valueToCode(e,"FIND",t.JavaScript.ORDER_NONE)||"''";return n=(t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+"."+n+"("+o+")",e.workspace.options.oneBasedIndex?[n+" + 1",t.JavaScript.ORDER_ADDITION]:[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_getIndex=function(e){var n=e.getFieldValue("MODE")||"GET",o=e.getFieldValue("WHERE")||"FROM_START",i=t.JavaScript.valueToCode(e,"VALUE","RANDOM"==o?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"[]";switch(o){case"FIRST":if("GET"==n)return[i+"[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==n)return[i+".shift()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==n)return i+".shift();\n";break;case"LAST":if("GET"==n)return[i+".slice(-1)[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==n)return[i+".pop()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==n)return i+".pop();\n";break;case"FROM_START":if(e=t.JavaScript.getAdjusted(e,"AT"),"GET"==n)return[i+"["+e+"]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==n)return[i+".splice("+e+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==n)return i+".splice("+e+", 1);\n";break;case"FROM_END":if(e=t.JavaScript.getAdjusted(e,"AT",1,!0),"GET"==n)return[i+".slice("+e+")[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==n)return[i+".splice("+e+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==n)return i+".splice("+e+", 1);";break;case"RANDOM":if(i=t.JavaScript.provideFunction_("listsGetRandomItem",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+i+", "+("GET"!=n)+")","GET"==n||"GET_REMOVE"==n)return[i,t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==n)return i+";\n"}throw Error("Unhandled combination (lists_getIndex).")},t.JavaScript.lists_setIndex=function(e){function n(){if(o.match(/^\w+$/))return"";var e=t.JavaScript.variableDB_.getDistinctName("tmpList",t.VARIABLE_CATEGORY_NAME),n="var "+e+" = "+o+";\n";return o=e,n}var o=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",i=e.getFieldValue("MODE")||"GET",r=e.getFieldValue("WHERE")||"FROM_START",s=t.JavaScript.valueToCode(e,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"null";switch(r){case"FIRST":if("SET"==i)return o+"[0] = "+s+";\n";if("INSERT"==i)return o+".unshift("+s+");\n";break;case"LAST":if("SET"==i)return(e=n())+(o+"[")+o+".length - 1] = "+s+";\n";if("INSERT"==i)return o+".push("+s+");\n";break;case"FROM_START":if(r=t.JavaScript.getAdjusted(e,"AT"),"SET"==i)return o+"["+r+"] = "+s+";\n";if("INSERT"==i)return o+".splice("+r+", 0, "+s+");\n";break;case"FROM_END":if(r=t.JavaScript.getAdjusted(e,"AT",1,!1,t.JavaScript.ORDER_SUBTRACTION),e=n(),"SET"==i)return e+(o+"[")+o+".length - "+r+"] = "+s+";\n";if("INSERT"==i)return e+(o+".splice(")+o+".length - "+r+", 0, "+s+");\n";break;case"RANDOM":if(e=n(),e+="var "+(r=t.JavaScript.variableDB_.getDistinctName("tmpX",t.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+o+".length);\n","SET"==i)return e+(o+"[")+r+"] = "+s+";\n";if("INSERT"==i)return e+(o+".splice(")+r+", 0, "+s+");\n"}throw Error("Unhandled combination (lists_setIndex).")},t.JavaScript.lists.getIndex_=function(t,e,n){return"FIRST"==e?"0":"FROM_END"==e?t+".length - 1 - "+n:"LAST"==e?t+".length - 1":n},t.JavaScript.lists_getSublist=function(e){var n=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",o=e.getFieldValue("WHERE1"),i=e.getFieldValue("WHERE2");if("FIRST"==o&&"LAST"==i)n+=".slice(0)";else if(n.match(/^\w+$/)||"FROM_END"!=o&&"FROM_START"==i){switch(o){case"FROM_START":var r=t.JavaScript.getAdjusted(e,"AT1");break;case"FROM_END":r=n+".length - "+(r=t.JavaScript.getAdjusted(e,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":r="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(i){case"FROM_START":e=t.JavaScript.getAdjusted(e,"AT2",1);break;case"FROM_END":e=n+".length - "+(e=t.JavaScript.getAdjusted(e,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":e=n+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}n=n+".slice("+r+", "+e+")"}else{r=t.JavaScript.getAdjusted(e,"AT1"),e=t.JavaScript.getAdjusted(e,"AT2");var s=t.JavaScript.lists.getIndex_,a={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};n=t.JavaScript.provideFunction_("subsequence"+a[o]+a[i],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==o||"FROM_START"==o?", at1":"")+("FROM_END"==i||"FROM_START"==i?", at2":"")+") {","  var start = "+s("sequence",o,"at1")+";","  var end = "+s("sequence",i,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+n+("FROM_END"==o||"FROM_START"==o?", "+r:"")+("FROM_END"==i||"FROM_START"==i?", "+e:"")+")"}return[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_sort=function(e){var n=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]",o="1"===e.getFieldValue("DIRECTION")?1:-1;return e=e.getFieldValue("TYPE"),[n+".slice().sort("+t.JavaScript.provideFunction_("listsGetSortCompare",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+e+'", '+o+"))",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_split=function(e){var n=t.JavaScript.valueToCode(e,"INPUT",t.JavaScript.ORDER_MEMBER),o=t.JavaScript.valueToCode(e,"DELIM",t.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(e=e.getFieldValue("MODE")))n||(n="''"),e="split";else{if("JOIN"!=e)throw Error("Unknown mode: "+e);n||(n="[]"),e="join"}return[n+"."+e+"("+o+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_reverse=function(e){return[(t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.logic={},t.JavaScript.controls_if=function(e){var n=0,o="";t.JavaScript.STATEMENT_PREFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,e));do{var i=t.JavaScript.valueToCode(e,"IF"+n,t.JavaScript.ORDER_NONE)||"false",r=t.JavaScript.statementToCode(e,"DO"+n);t.JavaScript.STATEMENT_SUFFIX&&(r=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,e),t.JavaScript.INDENT)+r),o+=(0<n?" else ":"")+"if ("+i+") {\n"+r+"}",++n}while(e.getInput("IF"+n));return(e.getInput("ELSE")||t.JavaScript.STATEMENT_SUFFIX)&&(r=t.JavaScript.statementToCode(e,"ELSE"),t.JavaScript.STATEMENT_SUFFIX&&(r=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,e),t.JavaScript.INDENT)+r),o+=" else {\n"+r+"}"),o+"\n"},t.JavaScript.controls_ifelse=t.JavaScript.controls_if,t.JavaScript.logic_compare=function(e){var n={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[e.getFieldValue("OP")],o="=="==n||"!="==n?t.JavaScript.ORDER_EQUALITY:t.JavaScript.ORDER_RELATIONAL;return[(t.JavaScript.valueToCode(e,"A",o)||"0")+" "+n+" "+(e=t.JavaScript.valueToCode(e,"B",o)||"0"),o]},t.JavaScript.logic_operation=function(e){var n="AND"==e.getFieldValue("OP")?"&&":"||",o="&&"==n?t.JavaScript.ORDER_LOGICAL_AND:t.JavaScript.ORDER_LOGICAL_OR,i=t.JavaScript.valueToCode(e,"A",o);if(e=t.JavaScript.valueToCode(e,"B",o),i||e){var r="&&"==n?"true":"false";i||(i=r),e||(e=r)}else e=i="false";return[i+" "+n+" "+e,o]},t.JavaScript.logic_negate=function(e){var n=t.JavaScript.ORDER_LOGICAL_NOT;return["!"+(t.JavaScript.valueToCode(e,"BOOL",n)||"true"),n]},t.JavaScript.logic_boolean=function(e){return["TRUE"==e.getFieldValue("BOOL")?"true":"false",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_null=function(e){return["null",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_ternary=function(e){return[(t.JavaScript.valueToCode(e,"IF",t.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(t.JavaScript.valueToCode(e,"THEN",t.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(e=t.JavaScript.valueToCode(e,"ELSE",t.JavaScript.ORDER_CONDITIONAL)||"null"),t.JavaScript.ORDER_CONDITIONAL]},t.JavaScript.loops={},t.JavaScript.controls_repeat_ext=function(e){var n=e.getField("TIMES")?String(Number(e.getFieldValue("TIMES"))):t.JavaScript.valueToCode(e,"TIMES",t.JavaScript.ORDER_ASSIGNMENT)||"0",o=t.JavaScript.statementToCode(e,"DO");o=t.JavaScript.addLoopTrap(o,e),e="";var i=t.JavaScript.variableDB_.getDistinctName("count",t.VARIABLE_CATEGORY_NAME),r=n;return n.match(/^\w+$/)||t.isNumber(n)||(e+="var "+(r=t.JavaScript.variableDB_.getDistinctName("repeat_end",t.VARIABLE_CATEGORY_NAME))+" = "+n+";\n"),e+"for (var "+i+" = 0; "+i+" < "+r+"; "+i+"++) {\n"+o+"}\n"},t.JavaScript.controls_repeat=t.JavaScript.controls_repeat_ext,t.JavaScript.controls_whileUntil=function(e){var n="UNTIL"==e.getFieldValue("MODE"),o=t.JavaScript.valueToCode(e,"BOOL",n?t.JavaScript.ORDER_LOGICAL_NOT:t.JavaScript.ORDER_NONE)||"false",i=t.JavaScript.statementToCode(e,"DO");return n&&(o="!"+o),"while ("+o+") {\n"+(i=t.JavaScript.addLoopTrap(i,e))+"}\n"},t.JavaScript.controls_for=function(e){var n=t.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),o=t.JavaScript.valueToCode(e,"FROM",t.JavaScript.ORDER_ASSIGNMENT)||"0",i=t.JavaScript.valueToCode(e,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"0",r=t.JavaScript.valueToCode(e,"BY",t.JavaScript.ORDER_ASSIGNMENT)||"1",s=t.JavaScript.statementToCode(e,"DO");if(s=t.JavaScript.addLoopTrap(s,e),t.isNumber(o)&&t.isNumber(i)&&t.isNumber(r)){var a=Number(o)<=Number(i);e="for ("+n+" = "+o+"; "+n+(a?" <= ":" >= ")+i+"; "+n,e=(1==(n=Math.abs(Number(r)))?e+(a?"++":"--"):e+(a?" += ":" -= ")+n)+") {\n"+s+"}\n"}else e="",a=o,o.match(/^\w+$/)||t.isNumber(o)||(e+="var "+(a=t.JavaScript.variableDB_.getDistinctName(n+"_start",t.VARIABLE_CATEGORY_NAME))+" = "+o+";\n"),o=i,i.match(/^\w+$/)||t.isNumber(i)||(e+="var "+(o=t.JavaScript.variableDB_.getDistinctName(n+"_end",t.VARIABLE_CATEGORY_NAME))+" = "+i+";\n"),e+="var "+(i=t.JavaScript.variableDB_.getDistinctName(n+"_inc",t.VARIABLE_CATEGORY_NAME))+" = ",e=(e=t.isNumber(r)?e+(Math.abs(r)+";\n"):e+"Math.abs("+r+");\n")+"if ("+a+" > "+o+") {\n"+(t.JavaScript.INDENT+i)+" = -"+i+";\n",e+="}\n",e+="for ("+n+" = "+a+"; "+i+" >= 0 ? "+n+" <= "+o+" : "+n+" >= "+o+"; "+n+" += "+i+") {\n"+s+"}\n";return e},t.JavaScript.controls_forEach=function(e){var n=t.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),o=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_ASSIGNMENT)||"[]",i=t.JavaScript.statementToCode(e,"DO");i=t.JavaScript.addLoopTrap(i,e),e="";var r=o;return o.match(/^\w+$/)||(e+="var "+(r=t.JavaScript.variableDB_.getDistinctName(n+"_list",t.VARIABLE_CATEGORY_NAME))+" = "+o+";\n"),e+"for (var "+(o=t.JavaScript.variableDB_.getDistinctName(n+"_index",t.VARIABLE_CATEGORY_NAME))+" in "+r+") {\n"+(i=t.JavaScript.INDENT+n+" = "+r+"["+o+"];\n"+i)+"}\n"},t.JavaScript.controls_flow_statements=function(e){var n="";if(t.JavaScript.STATEMENT_PREFIX&&(n+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,e)),t.JavaScript.STATEMENT_SUFFIX&&(n+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,e)),t.JavaScript.STATEMENT_PREFIX){var o=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(e);o&&!o.suppressPrefixSuffix&&(n+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,o))}switch(e.getFieldValue("FLOW")){case"BREAK":return n+"break;\n";case"CONTINUE":return n+"continue;\n"}throw Error("Unknown flow statement.")},t.JavaScript.math={},t.JavaScript.math_number=function(e){return[e=Number(e.getFieldValue("NUM")),0<=e?t.JavaScript.ORDER_ATOMIC:t.JavaScript.ORDER_UNARY_NEGATION]},t.JavaScript.math_arithmetic=function(e){var n={ADD:[" + ",t.JavaScript.ORDER_ADDITION],MINUS:[" - ",t.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",t.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",t.JavaScript.ORDER_DIVISION],POWER:[null,t.JavaScript.ORDER_NONE]}[e.getFieldValue("OP")],o=n[0];n=n[1];var i=t.JavaScript.valueToCode(e,"A",n)||"0";return e=t.JavaScript.valueToCode(e,"B",n)||"0",o?[i+o+e,n]:["Math.pow("+i+", "+e+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_single=function(e){var n=e.getFieldValue("OP");if("NEG"==n)return"-"==(e=t.JavaScript.valueToCode(e,"NUM",t.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(e=" "+e),["-"+e,t.JavaScript.ORDER_UNARY_NEGATION];switch(e="SIN"==n||"COS"==n||"TAN"==n?t.JavaScript.valueToCode(e,"NUM",t.JavaScript.ORDER_DIVISION)||"0":t.JavaScript.valueToCode(e,"NUM",t.JavaScript.ORDER_NONE)||"0",n){case"ABS":var o="Math.abs("+e+")";break;case"ROOT":o="Math.sqrt("+e+")";break;case"LN":o="Math.log("+e+")";break;case"EXP":o="Math.exp("+e+")";break;case"POW10":o="Math.pow(10,"+e+")";break;case"ROUND":o="Math.round("+e+")";break;case"ROUNDUP":o="Math.ceil("+e+")";break;case"ROUNDDOWN":o="Math.floor("+e+")";break;case"SIN":o="Math.sin("+e+" / 180 * Math.PI)";break;case"COS":o="Math.cos("+e+" / 180 * Math.PI)";break;case"TAN":o="Math.tan("+e+" / 180 * Math.PI)"}if(o)return[o,t.JavaScript.ORDER_FUNCTION_CALL];switch(n){case"LOG10":o="Math.log("+e+") / Math.log(10)";break;case"ASIN":o="Math.asin("+e+") / Math.PI * 180";break;case"ACOS":o="Math.acos("+e+") / Math.PI * 180";break;case"ATAN":o="Math.atan("+e+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+n)}return[o,t.JavaScript.ORDER_DIVISION]},t.JavaScript.math_constant=function(e){return{PI:["Math.PI",t.JavaScript.ORDER_MEMBER],E:["Math.E",t.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",t.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",t.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",t.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",t.JavaScript.ORDER_ATOMIC]}[e.getFieldValue("CONSTANT")]},t.JavaScript.math_number_property=function(e){var n=t.JavaScript.valueToCode(e,"NUMBER_TO_CHECK",t.JavaScript.ORDER_MODULUS)||"0",o=e.getFieldValue("PROPERTY");if("PRIME"==o)return[t.JavaScript.provideFunction_("mathIsPrime",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+n+")",t.JavaScript.ORDER_FUNCTION_CALL];switch(o){case"EVEN":var i=n+" % 2 == 0";break;case"ODD":i=n+" % 2 == 1";break;case"WHOLE":i=n+" % 1 == 0";break;case"POSITIVE":i=n+" > 0";break;case"NEGATIVE":i=n+" < 0";break;case"DIVISIBLE_BY":i=n+" % "+(e=t.JavaScript.valueToCode(e,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[i,t.JavaScript.ORDER_EQUALITY]},t.JavaScript.math_change=function(e){var n=t.JavaScript.valueToCode(e,"DELTA",t.JavaScript.ORDER_ADDITION)||"0";return(e=t.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME))+" = (typeof "+e+" == 'number' ? "+e+" : 0) + "+n+";\n"},t.JavaScript.math_round=t.JavaScript.math_single,t.JavaScript.math_trig=t.JavaScript.math_single,t.JavaScript.math_on_list=function(e){var n=e.getFieldValue("OP");switch(n){case"SUM":e=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",e+=".reduce(function(x, y) {return x + y;})";break;case"MIN":e="Math.min.apply(null, "+(e=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":e="Math.max.apply(null, "+(e=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":e=(n=t.JavaScript.provideFunction_("mathMean",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(e=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":e=(n=t.JavaScript.provideFunction_("mathMedian",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(e=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":e=(n=t.JavaScript.provideFunction_("mathModes",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(e=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":e=(n=t.JavaScript.provideFunction_("mathStandardDeviation",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(e=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":e=(n=t.JavaScript.provideFunction_("mathRandomList",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(e=t.JavaScript.valueToCode(e,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+n)}return[e,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_modulo=function(e){return[(t.JavaScript.valueToCode(e,"DIVIDEND",t.JavaScript.ORDER_MODULUS)||"0")+" % "+(e=t.JavaScript.valueToCode(e,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0"),t.JavaScript.ORDER_MODULUS]},t.JavaScript.math_constrain=function(e){return["Math.min(Math.max("+(t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_NONE)||"0")+", "+(t.JavaScript.valueToCode(e,"LOW",t.JavaScript.ORDER_NONE)||"0")+"), "+(e=t.JavaScript.valueToCode(e,"HIGH",t.JavaScript.ORDER_NONE)||"Infinity")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_int=function(e){var n=t.JavaScript.valueToCode(e,"FROM",t.JavaScript.ORDER_NONE)||"0";return e=t.JavaScript.valueToCode(e,"TO",t.JavaScript.ORDER_NONE)||"0",[t.JavaScript.provideFunction_("mathRandomInt",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+n+", "+e+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_float=function(e){return["Math.random()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_atan2=function(e){var n=t.JavaScript.valueToCode(e,"X",t.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(t.JavaScript.valueToCode(e,"Y",t.JavaScript.ORDER_NONE)||"0")+", "+n+") / Math.PI * 180",t.JavaScript.ORDER_DIVISION]},t.JavaScript.procedures={},t.JavaScript.procedures_defreturn=function(e){var n=t.JavaScript.variableDB_.getName(e.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),o="";t.JavaScript.STATEMENT_PREFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,e)),t.JavaScript.STATEMENT_SUFFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,e)),o&&(o=t.JavaScript.prefixLines(o,t.JavaScript.INDENT));var i="";t.JavaScript.INFINITE_LOOP_TRAP&&(i=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.INFINITE_LOOP_TRAP,e),t.JavaScript.INDENT));var r=t.JavaScript.statementToCode(e,"STACK"),s=t.JavaScript.valueToCode(e,"RETURN",t.JavaScript.ORDER_NONE)||"",a="";r&&s&&(a=o),s&&(s=t.JavaScript.INDENT+"return "+s+";\n");for(var l=[],c=e.getVars(),u=0;u<c.length;u++)l[u]=t.JavaScript.variableDB_.getName(c[u],t.VARIABLE_CATEGORY_NAME);return o="function "+n+"("+l.join(", ")+") {\n"+o+i+r+a+s+"}",o=t.JavaScript.scrub_(e,o),t.JavaScript.definitions_["%"+n]=o,null},t.JavaScript.procedures_defnoreturn=t.JavaScript.procedures_defreturn,t.JavaScript.procedures_callreturn=function(e){for(var n=t.JavaScript.variableDB_.getName(e.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),o=[],i=e.getVars(),r=0;r<i.length;r++)o[r]=t.JavaScript.valueToCode(e,"ARG"+r,t.JavaScript.ORDER_NONE)||"null";return[n+"("+o.join(", ")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.procedures_callnoreturn=function(e){return t.JavaScript.procedures_callreturn(e)[0]+";\n"},t.JavaScript.procedures_ifreturn=function(e){var n="if ("+(t.JavaScript.valueToCode(e,"CONDITION",t.JavaScript.ORDER_NONE)||"false")+") {\n";return t.JavaScript.STATEMENT_SUFFIX&&(n+=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,e),t.JavaScript.INDENT)),e.hasReturnValue_?(e=t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_NONE)||"null",n+=t.JavaScript.INDENT+"return "+e+";\n"):n+=t.JavaScript.INDENT+"return;\n",n+"}\n"},t.JavaScript.texts={},t.JavaScript.text=function(e){return[t.JavaScript.quote_(e.getFieldValue("TEXT")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.text_multiline=function(e){var n=-1!=(e=t.JavaScript.multiline_quote_(e.getFieldValue("TEXT"))).indexOf("+")?t.JavaScript.ORDER_ADDITION:t.JavaScript.ORDER_ATOMIC;return[e,n]},t.JavaScript.text.forceString_=function(e){return t.JavaScript.text.forceString_.strRegExp.test(e)?[e,t.JavaScript.ORDER_ATOMIC]:["String("+e+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,t.JavaScript.text_join=function(e){switch(e.itemCount_){case 0:return["''",t.JavaScript.ORDER_ATOMIC];case 1:return e=t.JavaScript.valueToCode(e,"ADD0",t.JavaScript.ORDER_NONE)||"''",t.JavaScript.text.forceString_(e);case 2:var n=t.JavaScript.valueToCode(e,"ADD0",t.JavaScript.ORDER_NONE)||"''";return e=t.JavaScript.valueToCode(e,"ADD1",t.JavaScript.ORDER_NONE)||"''",[e=t.JavaScript.text.forceString_(n)[0]+" + "+t.JavaScript.text.forceString_(e)[0],t.JavaScript.ORDER_ADDITION];default:n=Array(e.itemCount_);for(var o=0;o<e.itemCount_;o++)n[o]=t.JavaScript.valueToCode(e,"ADD"+o,t.JavaScript.ORDER_NONE)||"''";return[e="["+n.join(",")+"].join('')",t.JavaScript.ORDER_FUNCTION_CALL]}},t.JavaScript.text_append=function(e){var n=t.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME);return e=t.JavaScript.valueToCode(e,"TEXT",t.JavaScript.ORDER_NONE)||"''",n+" += "+t.JavaScript.text.forceString_(e)[0]+";\n"},t.JavaScript.text_length=function(e){return[(t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.text_isEmpty=function(e){return["!"+(t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.text_indexOf=function(e){var n="FIRST"==e.getFieldValue("END")?"indexOf":"lastIndexOf",o=t.JavaScript.valueToCode(e,"FIND",t.JavaScript.ORDER_NONE)||"''";return n=(t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+"."+n+"("+o+")",e.workspace.options.oneBasedIndex?[n+" + 1",t.JavaScript.ORDER_ADDITION]:[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_charAt=function(e){var n=e.getFieldValue("WHERE")||"FROM_START",o=t.JavaScript.valueToCode(e,"VALUE","RANDOM"==n?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"''";switch(n){case"FIRST":return[o+".charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[o+".slice(-1)",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[o+".charAt("+(e=t.JavaScript.getAdjusted(e,"AT"))+")",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[o+".slice("+(e=t.JavaScript.getAdjusted(e,"AT",1,!0))+").charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[t.JavaScript.provideFunction_("textRandomLetter",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+o+")",t.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},t.JavaScript.text.getIndex_=function(t,e,n){return"FIRST"==e?"0":"FROM_END"==e?t+".length - 1 - "+n:"LAST"==e?t+".length - 1":n},t.JavaScript.text_getSubstring=function(e){var n=e.getFieldValue("WHERE1"),o=e.getFieldValue("WHERE2"),i="FROM_END"!=n&&"LAST"!=n&&"FROM_END"!=o&&"LAST"!=o,r=t.JavaScript.valueToCode(e,"STRING",i?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''";if("FIRST"==n&&"LAST"==o)return[r,t.JavaScript.ORDER_NONE];if(r.match(/^'?\w+'?$/)||i){switch(n){case"FROM_START":i=t.JavaScript.getAdjusted(e,"AT1");break;case"FROM_END":i=r+".length - "+(i=t.JavaScript.getAdjusted(e,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":i="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(o){case"FROM_START":e=t.JavaScript.getAdjusted(e,"AT2",1);break;case"FROM_END":e=r+".length - "+(e=t.JavaScript.getAdjusted(e,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":e=r+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}n=r+".slice("+i+", "+e+")"}else{i=t.JavaScript.getAdjusted(e,"AT1"),e=t.JavaScript.getAdjusted(e,"AT2");var s=t.JavaScript.text.getIndex_,a={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};n=t.JavaScript.provideFunction_("subsequence"+a[n]+a[o],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==n||"FROM_START"==n?", at1":"")+("FROM_END"==o||"FROM_START"==o?", at2":"")+") {","  var start = "+s("sequence",n,"at1")+";","  var end = "+s("sequence",o,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+r+("FROM_END"==n||"FROM_START"==n?", "+i:"")+("FROM_END"==o||"FROM_START"==o?", "+e:"")+")"}return[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_changeCase=function(e){var n={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[e.getFieldValue("CASE")];return e=t.JavaScript.valueToCode(e,"TEXT",n?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''",[n?e+n:t.JavaScript.provideFunction_("textToTitleCase",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+e+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_trim=function(e){var n={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[e.getFieldValue("MODE")];return[(t.JavaScript.valueToCode(e,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_print=function(e){return"window.alert("+(t.JavaScript.valueToCode(e,"TEXT",t.JavaScript.ORDER_NONE)||"''")+");\n"},t.JavaScript.text_prompt_ext=function(e){var n="window.prompt("+(e.getField("TEXT")?t.JavaScript.quote_(e.getFieldValue("TEXT")):t.JavaScript.valueToCode(e,"TEXT",t.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==e.getFieldValue("TYPE")&&(n="Number("+n+")"),[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_prompt=t.JavaScript.text_prompt_ext,t.JavaScript.text_count=function(e){var n=t.JavaScript.valueToCode(e,"TEXT",t.JavaScript.ORDER_NONE)||"''";return e=t.JavaScript.valueToCode(e,"SUB",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textCount",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+n+", "+e+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_replace=function(e){var n=t.JavaScript.valueToCode(e,"TEXT",t.JavaScript.ORDER_NONE)||"''",o=t.JavaScript.valueToCode(e,"FROM",t.JavaScript.ORDER_NONE)||"''";return e=t.JavaScript.valueToCode(e,"TO",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textReplace",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+n+", "+o+", "+e+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_reverse=function(e){return[(t.JavaScript.valueToCode(e,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.variables={},t.JavaScript.variables_get=function(e){return[t.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.variables_set=function(e){var n=t.JavaScript.valueToCode(e,"VALUE",t.JavaScript.ORDER_ASSIGNMENT)||"0";return t.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME)+" = "+n+";\n"},t.JavaScript.variablesDynamic={},t.JavaScript.variables_get_dynamic=t.JavaScript.variables_get,t.JavaScript.variables_set_dynamic=t.JavaScript.variables_set,t.JavaScript})?o.apply(e,i):o)||(t.exports=r)},9130:function(t,e,n){var o,i,r;i=[n(1030)],void 0===(r="function"===typeof(o=function(t){return(t={Msg:{}}).Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.IOS_CANCEL="Cancel",t.Msg.IOS_ERROR="Error",t.Msg.IOS_OK="OK",t.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",t.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",t.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",t.Msg.IOS_PROCEDURES_INPUTS="INPUTS",t.Msg.IOS_VARIABLES_ADD_BUTTON="Add",t.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",t.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",t.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",t.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",t.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="\xf7",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg})?o.apply(e,i):o)||(t.exports=r)},2110:function(t,e,n){"use strict";var o=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(t){return o.isMemo(t)?s:a[t.$$typeof]||i}a[o.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[o.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,g=Object.prototype;t.exports=function t(e,n,o){if("string"!==typeof n){if(g){var i=d(n);i&&i!==g&&t(e,i,o)}var s=u(n);p&&(s=s.concat(p(n)));for(var a=l(e),_=l(n),f=0;f<s.length;++f){var v=s[f];if(!r[v]&&(!o||!o[v])&&(!_||!_[v])&&(!a||!a[v])){var m=h(n,v);try{c(e,v,m)}catch(T){}}}}return e}},746:function(t,e){"use strict";var n="function"===typeof Symbol&&Symbol.for,o=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,g=n?Symbol.for("react.suspense_list"):60120,_=n?Symbol.for("react.memo"):60115,f=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,m=n?Symbol.for("react.fundamental"):60117,T=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function E(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case o:switch(t=t.type){case u:case p:case r:case a:case s:case d:return t;default:switch(t=t&&t.$$typeof){case c:case h:case f:case _:case l:return t;default:return e}}case i:return e}}}function y(t){return E(t)===p}e.AsyncMode=u,e.ConcurrentMode=p,e.ContextConsumer=c,e.ContextProvider=l,e.Element=o,e.ForwardRef=h,e.Fragment=r,e.Lazy=f,e.Memo=_,e.Portal=i,e.Profiler=a,e.StrictMode=s,e.Suspense=d,e.isAsyncMode=function(t){return y(t)||E(t)===u},e.isConcurrentMode=y,e.isContextConsumer=function(t){return E(t)===c},e.isContextProvider=function(t){return E(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===o},e.isForwardRef=function(t){return E(t)===h},e.isFragment=function(t){return E(t)===r},e.isLazy=function(t){return E(t)===f},e.isMemo=function(t){return E(t)===_},e.isPortal=function(t){return E(t)===i},e.isProfiler=function(t){return E(t)===a},e.isStrictMode=function(t){return E(t)===s},e.isSuspense=function(t){return E(t)===d},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===r||t===p||t===a||t===s||t===d||t===g||"object"===typeof t&&null!==t&&(t.$$typeof===f||t.$$typeof===_||t.$$typeof===l||t.$$typeof===c||t.$$typeof===h||t.$$typeof===m||t.$$typeof===T||t.$$typeof===b||t.$$typeof===v)},e.typeOf=E},8309:function(t,e,n){"use strict";t.exports=n(746)},888:function(t,e,n){"use strict";var o=n(9047);function i(){}function r(){}r.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,r,s){if(s!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:r,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(t,e,n){t.exports=n(888)()},9047:function(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3513:function(t,e,n){"use strict";var o,i,r,s,a,l,c,u,p,h,d,g,_,f,v,m,T,b,E,y,S,C,k,R,I,O,w,A,D,N,x,M,L,P,B,F,U,H,G,V,W,j,X,z,Y,J,K,q,$,Z,Q,tt,et,nt,ot,it,rt=n(7424).default,st=n(8416).default,at=n(9400).default,lt=n(861).default;var ct=n(2791),ut=n(6444);function pt(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var ht,dt=function(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}(ct),gt=pt(ct),_t=pt(ut);function ft(t,e){return t[e]}function vt(t,e){return e.split(".").reduce((function(t,e){var n=e.match(/[^\]\\[.]+/g);if(n&&n.length>1)for(var o=0;o<n.length;o++)return t[n[o]][n[o+1]];return t[e]}),t)}function mt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return[].concat(lt(t.slice(0,n)),[e],lt(t.slice(n)))}function Tt(){var t=arguments.length>1?arguments[1]:void 0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).slice(),o=ft(t,e);return o?n.splice(n.findIndex((function(t){return ft(t,e)===o})),1):n.splice(n.findIndex((function(e){return e===t})),1),n}function bt(t){return t.map((function(t,e){var n=Object.assign(Object.assign({},t),{sortable:t.sortable||!!t.sortFunction||void 0});return t.id||(n.id=e+1),n}))}function Et(t,e){return Math.ceil(t/e)}function yt(t,e){return Math.min(t,e)}!function(t){t.ASC="asc",t.DESC="desc"}(ht||(ht={}));var St=function(){return null};function Ct(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={},o=lt(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]);return e.length&&e.forEach((function(e){if(!e.when||"function"!=typeof e.when)throw new Error('"when" must be defined in the conditional style object and must be function');e.when(t)&&(n=e.style||{},e.classNames&&(o=[].concat(lt(o),lt(e.classNames))),"function"==typeof e.style&&(n=e.style(t)||{}))})),{style:n,classNames:o.join(" ")}}function kt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",o=ft(t,n);return o?e.some((function(t){return ft(t,n)===o})):e.some((function(e){return e===t}))}function Rt(t,e){return e?t.findIndex((function(t){return It(t.id,e)})):-1}function It(t,e){return t==e}function Ot(t,e){var n=!t.toggleOnSelectedRowsChange;switch(e.type){case"SELECT_ALL_ROWS":var o=e.keyField,i=e.rows,r=e.rowCount,s=e.mergeSelections,a=!t.allSelected,l=!t.toggleOnSelectedRowsChange;if(s){var c=a?[].concat(lt(t.selectedRows),lt(i.filter((function(e){return!kt(e,t.selectedRows,o)})))):t.selectedRows.filter((function(t){return!kt(t,i,o)}));return Object.assign(Object.assign({},t),{allSelected:a,selectedCount:c.length,selectedRows:c,toggleOnSelectedRowsChange:l})}return Object.assign(Object.assign({},t),{allSelected:a,selectedCount:a?r:0,selectedRows:a?i:[],toggleOnSelectedRowsChange:l});case"SELECT_SINGLE_ROW":var u=e.keyField,p=e.row,h=e.isSelected,d=e.rowCount;return e.singleSelect?h?Object.assign(Object.assign({},t),{selectedCount:0,allSelected:!1,selectedRows:[],toggleOnSelectedRowsChange:n}):Object.assign(Object.assign({},t),{selectedCount:1,allSelected:!1,selectedRows:[p],toggleOnSelectedRowsChange:n}):h?Object.assign(Object.assign({},t),{selectedCount:t.selectedRows.length>0?t.selectedRows.length-1:0,allSelected:!1,selectedRows:Tt(t.selectedRows,p,u),toggleOnSelectedRowsChange:n}):Object.assign(Object.assign({},t),{selectedCount:t.selectedRows.length+1,allSelected:t.selectedRows.length+1===d,selectedRows:mt(t.selectedRows,p),toggleOnSelectedRowsChange:n});case"SELECT_MULTIPLE_ROWS":var g=e.keyField,_=e.selectedRows,f=e.totalRows;if(e.mergeSelections){var v=[].concat(lt(t.selectedRows),lt(_.filter((function(e){return!kt(e,t.selectedRows,g)}))));return Object.assign(Object.assign({},t),{selectedCount:v.length,allSelected:!1,selectedRows:v,toggleOnSelectedRowsChange:n})}return Object.assign(Object.assign({},t),{selectedCount:_.length,allSelected:_.length===f,selectedRows:_,toggleOnSelectedRowsChange:n});case"CLEAR_SELECTED_ROWS":var m=e.selectedRowsFlag;return Object.assign(Object.assign({},t),{allSelected:!1,selectedCount:0,selectedRows:[],selectedRowsFlag:m});case"SORT_CHANGE":var T=e.sortDirection,b=e.selectedColumn,E=e.clearSelectedOnSort;return Object.assign(Object.assign(Object.assign({},t),{selectedColumn:b,sortDirection:T,currentPage:1}),E&&{allSelected:!1,selectedCount:0,selectedRows:[],toggleOnSelectedRowsChange:n});case"CHANGE_PAGE":var y=e.page,S=e.paginationServer,C=e.visibleOnly,k=e.persistSelectedOnPageChange,R=S&&k,I=S&&!k||C;return Object.assign(Object.assign(Object.assign(Object.assign({},t),{currentPage:y}),R&&{allSelected:!1}),I&&{allSelected:!1,selectedCount:0,selectedRows:[],toggleOnSelectedRowsChange:n});case"CHANGE_ROWS_PER_PAGE":var O=e.rowsPerPage,w=e.page;return Object.assign(Object.assign({},t),{currentPage:w,rowsPerPage:O})}}var wt=ut.css(o||(o=at(["\n\tpointer-events: none;\n\topacity: 0.4;\n"]))),At=_t.default.div(i||(i=at(["\n\tposition: relative;\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\tflex-direction: column;\n\twidth: 100%;\n\theight: 100%;\n\tmax-width: 100%;\n\t",";\n\t",";\n"])),(function(t){return t.disabled&&wt}),(function(t){return t.theme.table.style})),Dt=ut.css(r||(r=at(["\n\tposition: sticky;\n\tposition: -webkit-sticky; /* Safari */\n\ttop: 0;\n\tz-index: 1;\n"]))),Nt=_t.default.div(s||(s=at(["\n\tdisplay: flex;\n\twidth: 100%;\n\t",";\n\t",";\n"])),(function(t){return t.fixedHeader&&Dt}),(function(t){return t.theme.head.style})),xt=_t.default.div(a||(a=at(["\n\tdisplay: flex;\n\talign-items: stretch;\n\twidth: 100%;\n\t",";\n\t",";\n"])),(function(t){return t.theme.headRow.style}),(function(t){var e=t.dense,n=t.theme;return e&&n.headRow.denseStyle})),Mt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return ut.css(l||(l=at(["\n\t\t@media screen and (max-width: ","px) {\n\t\t\t","\n\t\t}\n\t"])),599,ut.css.apply(ut,[t].concat(n)))},Lt=_t.default.div(h||(h=at(["\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\tbox-sizing: border-box;\n\tline-height: normal;\n\t",";\n\t",";\n"])),(function(t){return t.theme[t.headCell?"headCells":"cells"].style}),(function(t){return t.noPadding&&"padding: 0"})),Pt=_t.default(Lt)(d||(d=at(["\n\tflex-grow: ",";\n\tflex-shrink: 0;\n\tflex-basis: 0;\n\tmax-width: ",";\n\tmin-width: ",";\n\t",";\n\t",";\n\t",";\n\t",";\n\n\t/* handle hiding cells */\n\t",";\n\t",";\n\t",";\n\t",";\n"])),(function(t){var e=t.button,n=t.grow;return 0===n||e?0:n||1}),(function(t){return t.maxWidth||"100%"}),(function(t){return t.minWidth||"100px"}),(function(t){var e=t.width;return e&&ut.css(g||(g=at(["\n\t\t\tmin-width: ",";\n\t\t\tmax-width: ",";\n\t\t"])),e,e)}),(function(t){return t.right&&"justify-content: flex-end"}),(function(t){var e=t.button;return(t.center||e)&&"justify-content: center"}),(function(t){var e=t.compact,n=t.button;return(e||n)&&"padding: 0"}),(function(t){var e=t.hide;return e&&"sm"===e&&Mt(_||(_=at(["\n    display: none;\n  "])))}),(function(t){var e=t.hide;return e&&"md"===e&&function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return ut.css(c||(c=at(["\n\t\t@media screen and (max-width: ","px) {\n\t\t\t","\n\t\t}\n\t"])),959,ut.css.apply(ut,[t].concat(n)))}(f||(f=at(["\n    display: none;\n  "])))}),(function(t){var e=t.hide;return e&&"lg"===e&&function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return ut.css(u||(u=at(["\n\t\t@media screen and (max-width: ","px) {\n\t\t\t","\n\t\t}\n\t"])),1280,ut.css.apply(ut,[t].concat(n)))}(v||(v=at(["\n    display: none;\n  "])))}),(function(t){var e=t.hide;return e&&Number.isInteger(e)&&function(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return ut.css(p||(p=at(["\n\t\t\t\t@media screen and (max-width: ","px) {\n\t\t\t\t\t","\n\t\t\t\t}\n\t\t\t"])),t,ut.css.apply(ut,[e].concat(o)))}}(e)(m||(m=at(["\n    display: none;\n  "])))})),Bt=ut.css(T||(T=at(["\n\tdiv:first-child {\n\t\twhite-space: ",";\n\t\toverflow: ",";\n\t\ttext-overflow: ellipsis;\n\t}\n"])),(function(t){return t.wrapCell?"normal":"nowrap"}),(function(t){return t.allowOverflow?"visible":"hidden"})),Ft=_t.default(Pt).attrs((function(t){return{style:t.style}}))(b||(b=at(["\n\t",";\n\t",";\n\t",";\n"])),(function(t){return!t.renderAsCell&&Bt}),(function(t){var e=t.theme;return t.isDragging&&e.cells.draggingStyle}),(function(t){return t.cellStyle})),Ut=dt.memo((function(t){var e=t.id,n=t.column,o=t.row,i=t.rowIndex,r=t.dataTag,s=t.isDragging,a=t.onDragStart,l=t.onDragOver,c=t.onDragEnd,u=t.onDragEnter,p=t.onDragLeave,h=Ct(o,n.conditionalCellStyles,["rdt_TableCell"]),d=h.style,g=h.classNames;return dt.createElement(Ft,{id:e,"data-column-id":n.id,role:"cell",className:g,"data-tag":r,cellStyle:n.style,renderAsCell:!!n.cell,allowOverflow:n.allowOverflow,button:n.button,center:n.center,compact:n.compact,grow:n.grow,hide:n.hide,maxWidth:n.maxWidth,minWidth:n.minWidth,right:n.right,width:n.width,wrapCell:n.wrap,style:d,isDragging:s,onDragStart:a,onDragOver:l,onDragEnd:c,onDragEnter:u,onDragLeave:p},!n.cell&&dt.createElement("div",{"data-tag":r},function(t,e,n,o){if(!e)return null;if("string"!=typeof e&&"function"!=typeof e)throw new Error("selector must be a . delimited string eg (my.property) or function (e.g. row => row.field");return n&&"function"==typeof n?n(t,o):e&&"function"==typeof e?e(t,o):vt(t,e)}(o,n.selector,n.format,i)),n.cell&&n.cell(o,i,n,e))})),Ht=dt.memo((function(t){var e=t.name,n=t.component,o=void 0===n?"input":n,i=t.componentOptions,r=void 0===i?{style:{}}:i,s=t.indeterminate,a=void 0!==s&&s,l=t.checked,c=void 0!==l&&l,u=t.disabled,p=void 0!==u&&u,h=t.onClick,d=void 0===h?St:h,g=o,_="input"!==g?r.style:function(t){return Object.assign(Object.assign({fontSize:"18px"},!t&&{cursor:"pointer"}),{padding:0,marginTop:"1px",verticalAlign:"middle",position:"relative"})}(p),f=dt.useMemo((function(){return function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];var i;return Object.keys(t).map((function(e){return t[e]})).forEach((function(e,o){var r=t;"function"==typeof e&&(i=Object.assign(Object.assign({},r),st({},Object.keys(t)[o],e.apply(void 0,n))))})),i||t}(r,a)}),[r,a]);return dt.createElement(g,Object.assign({type:"checkbox",ref:function(t){t&&(t.indeterminate=a)},style:_,onClick:p?St:d,name:e,"aria-label":e,checked:c,disabled:p},f,{onChange:St}))})),Gt=_t.default(Lt)(E||(E=at(["\n\tflex: 0 0 48px;\n\tmin-width: 48px;\n\tjustify-content: center;\n\talign-items: center;\n\tuser-select: none;\n\twhite-space: nowrap;\n"])));function Vt(t){var e=t.name,n=t.keyField,o=t.row,i=t.rowCount,r=t.selected,s=t.selectableRowsComponent,a=t.selectableRowsComponentProps,l=t.selectableRowsSingle,c=t.selectableRowDisabled,u=t.onSelectedRow,p=!(!c||!c(o));return dt.createElement(Gt,{onClick:function(t){return t.stopPropagation()},className:"rdt_TableCell",noPadding:!0},dt.createElement(Ht,{name:e,component:s,componentOptions:a,checked:r,"aria-checked":r,onClick:function(){u({type:"SELECT_SINGLE_ROW",row:o,isSelected:r,keyField:n,rowCount:i,singleSelect:l})},disabled:p}))}var Wt=_t.default.button(y||(y=at(["\n\tdisplay: inline-flex;\n\talign-items: center;\n\tuser-select: none;\n\twhite-space: nowrap;\n\tborder: none;\n\tbackground-color: transparent;\n\t",";\n"])),(function(t){return t.theme.expanderButton.style}));function jt(t){var e=t.disabled,n=void 0!==e&&e,o=t.expanded,i=void 0!==o&&o,r=t.expandableIcon,s=t.id,a=t.row,l=t.onToggled,c=i?r.expanded:r.collapsed;return dt.createElement(Wt,{"aria-disabled":n,onClick:function(){return l&&l(a)},"data-testid":"expander-button-".concat(s),disabled:n,"aria-label":i?"Collapse Row":"Expand Row",role:"button",type:"button"},c)}var Xt=_t.default(Lt)(S||(S=at(["\n\twhite-space: nowrap;\n\tfont-weight: 400;\n\tmin-width: 48px;\n\t",";\n"])),(function(t){return t.theme.expanderCell.style}));function zt(t){var e=t.row,n=t.expanded,o=void 0!==n&&n,i=t.expandableIcon,r=t.id,s=t.onToggled,a=t.disabled,l=void 0!==a&&a;return dt.createElement(Xt,{onClick:function(t){return t.stopPropagation()},noPadding:!0},dt.createElement(jt,{id:r,row:e,expanded:o,expandableIcon:i,disabled:l,onToggled:s}))}var Yt,Jt,Kt,qt=_t.default.div(C||(C=at(["\n\twidth: 100%;\n\tbox-sizing: border-box;\n\t",";\n\t",";\n"])),(function(t){return t.theme.expanderRow.style}),(function(t){return t.extendedRowStyle})),$t=dt.memo((function(t){var e=t.data,n=t.ExpanderComponent,o=t.expanderComponentProps,i=t.extendedRowStyle,r=t.extendedClassNames,s=["rdt_ExpanderRow"].concat(lt(r.split(" ").filter((function(t){return"rdt_TableRow"!==t})))).join(" ");return dt.createElement(qt,{className:s,extendedRowStyle:i},dt.createElement(n,Object.assign({data:e},o)))}));e.Nm=void 0,(Yt=e.Nm||(e.Nm={})).LTR="ltr",Yt.RTL="rtl",Yt.AUTO="auto",e.v2=void 0,(Jt=e.v2||(e.v2={})).LEFT="left",Jt.RIGHT="right",Jt.CENTER="center",e.pU=void 0,(Kt=e.pU||(e.pU={})).SM="sm",Kt.MD="md",Kt.LG="lg";var Zt=ut.css(k||(k=at(["\n\t&:hover {\n\t\t",";\n\t}\n"])),(function(t){var e=t.highlightOnHover,n=t.theme;return e&&n.rows.highlightOnHoverStyle})),Qt=ut.css(R||(R=at(["\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n"]))),te=_t.default.div.attrs((function(t){return{style:t.style}}))(I||(I=at(["\n\tdisplay: flex;\n\talign-items: stretch;\n\talign-content: stretch;\n\twidth: 100%;\n\tbox-sizing: border-box;\n\t",";\n\t",";\n\t",";\n\t",";\n\t",";\n\t",";\n"])),(function(t){return t.theme.rows.style}),(function(t){var e=t.dense,n=t.theme;return e&&n.rows.denseStyle}),(function(t){var e=t.striped,n=t.theme;return e&&n.rows.stripedStyle}),(function(t){return t.highlightOnHover&&Zt}),(function(t){return t.pointerOnHover&&Qt}),(function(t){var e=t.selected,n=t.theme;return e&&n.rows.selectedHighlightStyle}));function ee(t){var e=t.columns,n=void 0===e?[]:e,o=t.conditionalRowStyles,i=void 0===o?[]:o,r=t.defaultExpanded,s=void 0!==r&&r,a=t.defaultExpanderDisabled,l=void 0!==a&&a,c=t.dense,u=void 0!==c&&c,p=t.expandableIcon,h=t.expandableRows,d=void 0!==h&&h,g=t.expandableRowsComponent,_=t.expandableRowsComponentProps,f=t.expandableRowsHideExpander,v=t.expandOnRowClicked,m=void 0!==v&&v,T=t.expandOnRowDoubleClicked,b=void 0!==T&&T,E=t.highlightOnHover,y=void 0!==E&&E,S=t.id,C=t.expandableInheritConditionalStyles,k=t.keyField,R=t.onRowClicked,I=void 0===R?St:R,O=t.onRowDoubleClicked,w=void 0===O?St:O,A=t.onRowMouseEnter,D=void 0===A?St:A,N=t.onRowMouseLeave,x=void 0===N?St:N,M=t.onRowExpandToggled,L=void 0===M?St:M,P=t.onSelectedRow,B=void 0===P?St:P,F=t.pointerOnHover,U=void 0!==F&&F,H=t.row,G=t.rowCount,V=t.rowIndex,W=t.selectableRowDisabled,j=void 0===W?null:W,X=t.selectableRows,z=void 0!==X&&X,Y=t.selectableRowsComponent,J=t.selectableRowsComponentProps,K=t.selectableRowsHighlight,q=void 0!==K&&K,$=t.selectableRowsSingle,Z=void 0!==$&&$,Q=t.selected,tt=t.striped,et=void 0!==tt&&tt,nt=t.draggingColumnId,ot=t.onDragStart,it=t.onDragOver,st=t.onDragEnd,at=t.onDragEnter,lt=t.onDragLeave,ct=dt.useState(s),ut=rt(ct,2),pt=ut[0],ht=ut[1];dt.useEffect((function(){ht(s)}),[s]);var gt=dt.useCallback((function(){ht(!pt),L(!pt,H)}),[pt,L,H]),_t=U||d&&(m||b),vt=dt.useCallback((function(t){t.target&&"allowRowEvents"===t.target.getAttribute("data-tag")&&(I(H,t),!l&&d&&m&&gt())}),[l,m,d,gt,I,H]),mt=dt.useCallback((function(t){t.target&&"allowRowEvents"===t.target.getAttribute("data-tag")&&(w(H,t),!l&&d&&b&&gt())}),[l,b,d,gt,w,H]),Tt=dt.useCallback((function(t){D(H,t)}),[D,H]),bt=dt.useCallback((function(t){x(H,t)}),[x,H]),Et=ft(H,k),yt=Ct(H,i,["rdt_TableRow"]),kt=yt.style,Rt=yt.classNames,Ot=q&&Q,wt=C?kt:{},At=et&&V%2==0;return dt.createElement(dt.Fragment,null,dt.createElement(te,{id:"row-".concat(S),role:"row",striped:At,highlightOnHover:y,pointerOnHover:!l&&_t,dense:u,onClick:vt,onDoubleClick:mt,onMouseEnter:Tt,onMouseLeave:bt,className:Rt,selected:Ot,style:kt},z&&dt.createElement(Vt,{name:"select-row-".concat(Et),keyField:k,row:H,rowCount:G,selected:Q,selectableRowsComponent:Y,selectableRowsComponentProps:J,selectableRowDisabled:j,selectableRowsSingle:Z,onSelectedRow:B}),d&&!f&&dt.createElement(zt,{id:Et,expandableIcon:p,expanded:pt,row:H,onToggled:gt,disabled:l}),n.map((function(t){return t.omit?null:dt.createElement(Ut,{id:"cell-".concat(t.id,"-").concat(Et),key:"cell-".concat(t.id,"-").concat(Et),dataTag:t.ignoreRowClick||t.button?null:"allowRowEvents",column:t,row:H,rowIndex:V,isDragging:It(nt,t.id),onDragStart:ot,onDragOver:it,onDragEnd:st,onDragEnter:at,onDragLeave:lt})}))),d&&pt&&dt.createElement($t,{key:"expander-".concat(Et),data:H,extendedRowStyle:wt,extendedClassNames:Rt,ExpanderComponent:g,expanderComponentProps:_}))}var ne=_t.default.span(O||(O=at(["\n\tpadding: 2px;\n\tcolor: inherit;\n\tflex-grow: 0;\n\tflex-shrink: 0;\n\t",";\n\t",";\n"])),(function(t){return t.sortActive?"opacity: 1":"opacity: 0"}),(function(t){return"desc"===t.sortDirection&&"transform: rotate(180deg)"})),oe=function(t){var e=t.sortActive,n=t.sortDirection;return gt.default.createElement(ne,{sortActive:e,sortDirection:n},"\u25b2")},ie=_t.default(Pt)(w||(w=at(["\n\t",";\n\t",";\n"])),(function(t){return t.button&&"text-align: center"}),(function(t){var e=t.theme;return t.isDragging&&e.headCells.draggingStyle})),re=ut.css(A||(A=at(["\n\tcursor: pointer;\n\tspan.__rdt_custom_sort_icon__ {\n\t\ti,\n\t\tsvg {\n\t\t\ttransform: 'translate3d(0, 0, 0)';\n\t\t\t",";\n\t\t\tcolor: inherit;\n\t\t\tfont-size: 18px;\n\t\t\theight: 18px;\n\t\t\twidth: 18px;\n\t\t\tbackface-visibility: hidden;\n\t\t\ttransform-style: preserve-3d;\n\t\t\ttransition-duration: 95ms;\n\t\t\ttransition-property: transform;\n\t\t}\n\n\t\t&.asc i,\n\t\t&.asc svg {\n\t\t\ttransform: rotate(180deg);\n\t\t}\n\t}\n\n\t",";\n"])),(function(t){return t.sortActive?"opacity: 1":"opacity: 0"}),(function(t){return!t.sortActive&&ut.css(D||(D=at(["\n\t\t\t&:hover,\n\t\t\t&:focus {\n\t\t\t\topacity: 0.7;\n\n\t\t\t\tspan,\n\t\t\t\tspan.__rdt_custom_sort_icon__ * {\n\t\t\t\t\topacity: 0.7;\n\t\t\t\t}\n\t\t\t}\n\t\t"])))})),se=_t.default.div(N||(N=at(["\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: inherit;\n\theight: 100%;\n\twidth: 100%;\n\toutline: none;\n\tuser-select: none;\n\toverflow: hidden;\n\t",";\n"])),(function(t){return!t.disabled&&re})),ae=_t.default.div(x||(x=at(["\n\toverflow: hidden;\n\twhite-space: nowrap;\n\ttext-overflow: ellipsis;\n"]))),le=dt.memo((function(t){var e=t.column,n=t.disabled,o=t.draggingColumnId,i=t.selectedColumn,r=void 0===i?{}:i,s=t.sortDirection,a=t.sortIcon,l=t.sortServer,c=t.pagination,u=t.paginationServer,p=t.persistSelectedOnSort,h=t.selectableRowsVisibleOnly,d=t.onSort,g=t.onDragStart,_=t.onDragOver,f=t.onDragEnd,v=t.onDragEnter,m=t.onDragLeave;dt.useEffect((function(){"string"==typeof e.selector&&console.error("Warning: ".concat(e.selector," is a string based column selector which has been deprecated as of v7 and will be removed in v8. Instead, use a selector function e.g. row => row[field]..."))}),[]);var T=dt.useState(!1),b=rt(T,2),E=b[0],y=b[1],S=dt.useRef(null);if(dt.useEffect((function(){S.current&&y(S.current.scrollWidth>S.current.clientWidth)}),[E]),e.omit)return null;var C=function(){if(e.sortable||e.selector){var t=s;It(r.id,e.id)&&(t=s===ht.ASC?ht.DESC:ht.ASC),d({type:"SORT_CHANGE",sortDirection:t,selectedColumn:e,clearSelectedOnSort:c&&u&&!p||l||h})}},k=function(t){return dt.createElement(oe,{sortActive:t,sortDirection:s})},R=function(){return dt.createElement("span",{className:[s,"__rdt_custom_sort_icon__"].join(" ")},a)},I=!(!e.sortable||!It(r.id,e.id)),O=!e.sortable||n,w=e.sortable&&!a&&!e.right,A=e.sortable&&!a&&e.right,D=e.sortable&&a&&!e.right,N=e.sortable&&a&&e.right;return dt.createElement(ie,{"data-column-id":e.id,className:"rdt_TableCol",headCell:!0,allowOverflow:e.allowOverflow,button:e.button,compact:e.compact,grow:e.grow,hide:e.hide,maxWidth:e.maxWidth,minWidth:e.minWidth,right:e.right,center:e.center,width:e.width,draggable:e.reorder,isDragging:It(e.id,o),onDragStart:g,onDragOver:_,onDragEnd:f,onDragEnter:v,onDragLeave:m},e.name&&dt.createElement(se,{"data-column-id":e.id,"data-sort-id":e.id,role:"columnheader",tabIndex:0,className:"rdt_TableCol_Sortable",onClick:O?void 0:C,onKeyPress:O?void 0:function(t){"Enter"===t.key&&C()},sortActive:!O&&I,disabled:O},!O&&N&&R(),!O&&A&&k(I),"string"==typeof e.name?dt.createElement(ae,{title:E?e.name:void 0,ref:S,"data-column-id":e.id},e.name):e.name,!O&&D&&R(),!O&&w&&k(I)))})),ce=_t.default(Lt)(M||(M=at(["\n\tflex: 0 0 48px;\n\tjustify-content: center;\n\talign-items: center;\n\tuser-select: none;\n\twhite-space: nowrap;\n\tfont-size: unset;\n"])));function ue(t){var e=t.headCell,n=void 0===e||e,o=t.rowData,i=t.keyField,r=t.allSelected,s=t.mergeSelections,a=t.selectedRows,l=t.selectableRowsComponent,c=t.selectableRowsComponentProps,u=t.selectableRowDisabled,p=t.onSelectAllRows,h=a.length>0&&!r,d=u?o.filter((function(t){return!u(t)})):o,g=0===d.length,_=Math.min(o.length,d.length);return dt.createElement(ce,{className:"rdt_TableCol",headCell:n,noPadding:!0},dt.createElement(Ht,{name:"select-all-rows",component:l,componentOptions:c,onClick:function(){p({type:"SELECT_ALL_ROWS",rows:d,rowCount:_,mergeSelections:s,keyField:i})},checked:r,indeterminate:h,disabled:g}))}function pe(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.Nm.AUTO,n="object"==typeof window,o=dt.useState(!1),i=rt(o,2),r=i[0],s=i[1];return dt.useEffect((function(){if(n)if("auto"!==t)s("rtl"===t);else{var e=!(!window.document||!window.document.createElement),o=document.getElementsByTagName("BODY")[0],i=document.getElementsByTagName("HTML")[0],r="rtl"===o.dir||"rtl"===i.dir;s(e&&r)}}),[t,n]),r}var he=_t.default.div(L||(L=at(["\n\tdisplay: flex;\n\talign-items: center;\n\tflex: 1 0 auto;\n\theight: 100%;\n\tcolor: ",";\n\tfont-size: ",";\n\tfont-weight: 400;\n"])),(function(t){return t.theme.contextMenu.fontColor}),(function(t){return t.theme.contextMenu.fontSize})),de=_t.default.div(P||(P=at(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-end;\n\tflex-wrap: wrap;\n"]))),ge=_t.default.div(B||(B=at(["\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbox-sizing: inherit;\n\tz-index: 1;\n\talign-items: center;\n\tjustify-content: space-between;\n\tdisplay: flex;\n\t",";\n\t",";\n\t",";\n"])),(function(t){return t.rtl&&"direction: rtl"}),(function(t){return t.theme.contextMenu.style}),(function(t){var e=t.theme;return t.visible&&e.contextMenu.activeStyle}));function _e(t){var e=t.contextMessage,n=t.contextActions,o=t.contextComponent,i=t.selectedCount,r=pe(t.direction),s=i>0;return o?dt.createElement(ge,{visible:s},dt.cloneElement(o,{selectedCount:i})):dt.createElement(ge,{visible:s,rtl:r},dt.createElement(he,null,function(t,e,n){if(0===e)return null;var o=1===e?t.singular:t.plural;return n?"".concat(e," ").concat(t.message||""," ").concat(o):"".concat(e," ").concat(o," ").concat(t.message||"")}(e,i,r)),dt.createElement(de,null,n))}var fe=_t.default.div(F||(F=at(["\n\tposition: relative;\n\tbox-sizing: border-box;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex: 1 1 auto;\n\talign-items: center;\n\tjustify-content: space-between;\n\twidth: 100%;\n\tflex-wrap: wrap;\n\t","\n"])),(function(t){return t.theme.header.style})),ve=_t.default.div(U||(U=at(["\n\tflex: 1 0 auto;\n\tcolor: ",";\n\tfont-size: ",";\n\tfont-weight: 400;\n"])),(function(t){return t.theme.header.fontColor}),(function(t){return t.theme.header.fontSize})),me=_t.default.div(H||(H=at(["\n\tflex: 1 0 auto;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-end;\n\n\t> * {\n\t\tmargin-left: 5px;\n\t}\n"]))),Te=function(t){var e=t.title,n=t.actions,o=void 0===n?null:n,i=t.contextMessage,r=t.contextActions,s=t.contextComponent,a=t.selectedCount,l=t.direction,c=t.showMenu,u=void 0===c||c;return dt.createElement(fe,{className:"rdt_TableHeader",role:"heading","aria-level":1},dt.createElement(ve,null,e),o&&dt.createElement(me,null,o),u&&dt.createElement(_e,{contextMessage:i,contextActions:r,contextComponent:s,direction:l,selectedCount:a}))};function be(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n}var Ee={left:"flex-start",right:"flex-end",center:"center"},ye=_t.default.header(G||(G=at(["\n\tposition: relative;\n\tdisplay: flex;\n\tflex: 1 1 auto;\n\tbox-sizing: border-box;\n\talign-items: center;\n\tpadding: 4px 16px 4px 24px;\n\twidth: 100%;\n\tjustify-content: ",";\n\tflex-wrap: ",";\n\t","\n"])),(function(t){var e=t.align;return Ee[e]}),(function(t){return t.wrapContent?"wrap":"nowrap"}),(function(t){return t.theme.subHeader.style})),Se=function(t){var e=t.align,n=void 0===e?"right":e,o=t.wrapContent,i=void 0===o||o,r=be(t,["align","wrapContent"]);return dt.createElement(ye,Object.assign({align:n,wrapContent:i},r))},Ce=_t.default.div(V||(V=at(["\n\tdisplay: flex;\n\tflex-direction: column;\n"]))),ke=_t.default.div(W||(W=at(["\n\tposition: relative;\n\twidth: 100%;\n\tborder-radius: inherit;\n\t",";\n\n\t",";\n\n\t",";\n"])),(function(t){var e=t.responsive,n=t.fixedHeader;return e&&ut.css(j||(j=at(["\n\t\t\toverflow-x: auto;\n\n\t\t\t// hidden prevents vertical scrolling in firefox when fixedHeader is disabled\n\t\t\toverflow-y: ",";\n\t\t\tmin-height: 0;\n\t\t"])),n?"auto":"hidden")}),(function(t){var e=t.fixedHeader,n=void 0!==e&&e,o=t.fixedHeaderScrollHeight,i=void 0===o?"100vh":o;return n&&ut.css(X||(X=at(["\n\t\t\tmax-height: ",";\n\t\t\t-webkit-overflow-scrolling: touch;\n\t\t"])),i)}),(function(t){return t.theme.responsiveWrapper.style})),Re=_t.default.div(z||(z=at(["\n\tposition: relative;\n\tbox-sizing: border-box;\n\twidth: 100%;\n\theight: 100%;\n\t",";\n"])),(function(t){return t.theme.progress.style})),Ie=_t.default.div(Y||(Y=at(["\n\tposition: relative;\n\twidth: 100%;\n\t",";\n"])),(function(t){return t.theme.tableWrapper.style})),Oe=_t.default(Lt)(J||(J=at(["\n\twhite-space: nowrap;\n\t",";\n"])),(function(t){return t.theme.expanderCell.style})),we=_t.default.div(K||(K=at(["\n\tbox-sizing: border-box;\n\twidth: 100%;\n\theight: 100%;\n\t",";\n"])),(function(t){return t.theme.noData.style})),Ae=function(){return gt.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},gt.default.createElement("path",{d:"M7 10l5 5 5-5z"}),gt.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},De=_t.default.select(q||(q=at(["\n\tcursor: pointer;\n\theight: 24px;\n\tmax-width: 100%;\n\tuser-select: none;\n\tpadding-left: 8px;\n\tpadding-right: 24px;\n\tbox-sizing: content-box;\n\tfont-size: inherit;\n\tcolor: inherit;\n\tborder: none;\n\tbackground-color: transparent;\n\tappearance: none;\n\tdirection: ltr;\n\tflex-shrink: 0;\n\n\t&::-ms-expand {\n\t\tdisplay: none;\n\t}\n\n\t&:disabled::-ms-expand {\n\t\tbackground: #f60;\n\t}\n\n\toption {\n\t\tcolor: initial;\n\t}\n"]))),Ne=_t.default.div($||($=at(["\n\tposition: relative;\n\tflex-shrink: 0;\n\tfont-size: inherit;\n\tcolor: inherit;\n\tmargin-top: 1px;\n\n\tsvg {\n\t\ttop: 0;\n\t\tright: 0;\n\t\tcolor: inherit;\n\t\tposition: absolute;\n\t\tfill: currentColor;\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tdisplay: inline-block;\n\t\tuser-select: none;\n\t\tpointer-events: none;\n\t}\n"]))),xe=function(t){var e=t.defaultValue,n=t.onChange,o=be(t,["defaultValue","onChange"]);return dt.createElement(Ne,null,dt.createElement(De,Object.assign({onChange:n,defaultValue:e},o)),dt.createElement(Ae,null))},Me={columns:[],data:[],title:"",keyField:"id",selectableRows:!1,selectableRowsHighlight:!1,selectableRowsNoSelectAll:!1,selectableRowSelected:null,selectableRowDisabled:null,selectableRowsComponent:"input",selectableRowsComponentProps:{},selectableRowsVisibleOnly:!1,selectableRowsSingle:!1,clearSelectedRows:!1,expandableRows:!1,expandableRowDisabled:null,expandableRowExpanded:null,expandOnRowClicked:!1,expandableRowsHideExpander:!1,expandOnRowDoubleClicked:!1,expandableInheritConditionalStyles:!1,expandableRowsComponent:function(){return gt.default.createElement("div",null,"To add an expander pass in a component instance via ",gt.default.createElement("strong",null,"expandableRowsComponent"),". You can then access props.data from this component.")},expandableIcon:{collapsed:gt.default.createElement((function(){return gt.default.createElement("svg",{fill:"currentColor",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},gt.default.createElement("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),gt.default.createElement("path",{d:"M0-.25h24v24H0z",fill:"none"}))}),null),expanded:gt.default.createElement((function(){return gt.default.createElement("svg",{fill:"currentColor",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},gt.default.createElement("path",{d:"M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z"}),gt.default.createElement("path",{d:"M0-.75h24v24H0z",fill:"none"}))}),null)},expandableRowsComponentProps:{},progressPending:!1,progressComponent:gt.default.createElement("div",{style:{fontSize:"24px",fontWeight:700,padding:"24px"}},"Loading..."),persistTableHead:!1,sortIcon:null,sortFunction:null,sortServer:!1,striped:!1,highlightOnHover:!1,pointerOnHover:!1,noContextMenu:!1,contextMessage:{singular:"item",plural:"items",message:"selected"},actions:null,contextActions:null,contextComponent:null,defaultSortFieldId:null,defaultSortAsc:!0,responsive:!0,noDataComponent:gt.default.createElement("div",{style:{padding:"24px"}},"There are no records to display"),disabled:!1,noTableHead:!1,noHeader:!1,subHeader:!1,subHeaderAlign:e.v2.RIGHT,subHeaderWrap:!0,subHeaderComponent:null,fixedHeader:!1,fixedHeaderScrollHeight:"100vh",pagination:!1,paginationServer:!1,paginationServerOptions:{persistSelectedOnSort:!1,persistSelectedOnPageChange:!1},paginationDefaultPage:1,paginationResetDefaultPage:!1,paginationTotalRows:0,paginationPerPage:10,paginationRowsPerPageOptions:[10,15,20,25,30],paginationComponent:null,paginationComponentOptions:{},paginationIconFirstPage:gt.default.createElement((function(){return gt.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},gt.default.createElement("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),gt.default.createElement("path",{fill:"none",d:"M24 24H0V0h24v24z"}))}),null),paginationIconLastPage:gt.default.createElement((function(){return gt.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},gt.default.createElement("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),gt.default.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))}),null),paginationIconNext:gt.default.createElement((function(){return gt.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},gt.default.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),gt.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}),null),paginationIconPrevious:gt.default.createElement((function(){return gt.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},gt.default.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),gt.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}),null),dense:!1,conditionalRowStyles:[],theme:"default",customStyles:{},direction:e.Nm.AUTO,onChangePage:St,onChangeRowsPerPage:St,onRowClicked:St,onRowDoubleClicked:St,onRowMouseEnter:St,onRowMouseLeave:St,onRowExpandToggled:St,onSelectedRowsChange:St,onSort:St,onColumnOrderChange:St},Le={rowsPerPageText:"Rows per page:",rangeSeparatorText:"of",noRowsPerPage:!1,selectAllRowsItem:!1,selectAllRowsItemText:"All"},Pe=_t.default.nav(Z||(Z=at(["\n\tdisplay: flex;\n\tflex: 1 1 auto;\n\tjustify-content: flex-end;\n\talign-items: center;\n\tbox-sizing: border-box;\n\tpadding-right: 8px;\n\tpadding-left: 8px;\n\twidth: 100%;\n\t",";\n"])),(function(t){return t.theme.pagination.style})),Be=_t.default.button(Q||(Q=at(["\n\tposition: relative;\n\tdisplay: block;\n\tuser-select: none;\n\tborder: none;\n\t",";\n\t",";\n"])),(function(t){return t.theme.pagination.pageButtonsStyle}),(function(t){return t.isRTL&&"transform: scale(-1, -1)"})),Fe=_t.default.div(tt||(tt=at(["\n\tdisplay: flex;\n\talign-items: center;\n\tborder-radius: 4px;\n\twhite-space: nowrap;\n\t",";\n"])),Mt(et||(et=at(["\n    width: 100%;\n    justify-content: space-around;\n  "])))),Ue=_t.default.span(nt||(nt=at(["\n\tflex-shrink: 1;\n\tuser-select: none;\n"]))),He=_t.default(Ue)(ot||(ot=at(["\n\tmargin: 0 24px;\n"]))),Ge=_t.default(Ue)(it||(it=at(["\n\tmargin: 0 4px;\n"]))),Ve=dt.memo((function(t){var e=t.rowsPerPage,n=t.rowCount,o=t.currentPage,i=t.direction,r=void 0===i?Me.direction:i,s=t.paginationRowsPerPageOptions,a=void 0===s?Me.paginationRowsPerPageOptions:s,l=t.paginationIconLastPage,c=void 0===l?Me.paginationIconLastPage:l,u=t.paginationIconFirstPage,p=void 0===u?Me.paginationIconFirstPage:u,h=t.paginationIconNext,d=void 0===h?Me.paginationIconNext:h,g=t.paginationIconPrevious,_=void 0===g?Me.paginationIconPrevious:g,f=t.paginationComponentOptions,v=void 0===f?Me.paginationComponentOptions:f,m=t.onChangeRowsPerPage,T=void 0===m?Me.onChangeRowsPerPage:m,b=t.onChangePage,E=void 0===b?Me.onChangePage:b,y=function(){var t="object"==typeof window;function e(){return{width:t?window.innerWidth:void 0,height:t?window.innerHeight:void 0}}var n=dt.useState(e),o=rt(n,2),i=o[0],r=o[1];return dt.useEffect((function(){if(!t)return function(){return null};function n(){r(e())}return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[]),i}(),S=pe(r),C=y.width&&y.width>599,k=Et(n,e),R=o*e,I=R-e+1,O=1===o,w=o===k,A=Object.assign(Object.assign({},Le),v),D=o===k?"".concat(I,"-").concat(n," ").concat(A.rangeSeparatorText," ").concat(n):"".concat(I,"-").concat(R," ").concat(A.rangeSeparatorText," ").concat(n),N=dt.useCallback((function(){return E(o-1)}),[o,E]),x=dt.useCallback((function(){return E(o+1)}),[o,E]),M=dt.useCallback((function(){return E(1)}),[E]),L=dt.useCallback((function(){return E(Et(n,e))}),[E,n,e]),P=dt.useCallback((function(t){return T(Number(t.target.value),o)}),[o,T]),B=a.map((function(t){return dt.createElement("option",{key:t,value:t},t)}));A.selectAllRowsItem&&B.push(dt.createElement("option",{key:-1,value:n},A.selectAllRowsItemText));var F=dt.createElement(xe,{onChange:P,defaultValue:e,"aria-label":A.rowsPerPageText},B);return dt.createElement(Pe,{className:"rdt_Pagination"},!A.noRowsPerPage&&C&&dt.createElement(dt.Fragment,null,dt.createElement(Ge,null,A.rowsPerPageText),F),C&&dt.createElement(He,null,D),dt.createElement(Fe,null,dt.createElement(Be,{id:"pagination-first-page",type:"button","aria-label":"First Page","aria-disabled":O,onClick:M,disabled:O,isRTL:S},p),dt.createElement(Be,{id:"pagination-previous-page",type:"button","aria-label":"Previous Page","aria-disabled":O,onClick:N,disabled:O,isRTL:S},_),!C&&F,dt.createElement(Be,{id:"pagination-next-page",type:"button","aria-label":"Next Page","aria-disabled":w,onClick:x,disabled:w,isRTL:S},d),dt.createElement(Be,{id:"pagination-last-page",type:"button","aria-label":"Last Page","aria-disabled":w,onClick:L,disabled:w,isRTL:S},c)))})),We=function(t,e){var n=dt.useRef(!0);dt.useEffect((function(){n.current?n.current=!1:t()}),e)},je=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===Xe}(t)}(t)},Xe="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function ze(t,e){return!1!==e.clone&&e.isMergeableObject(t)?qe((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function Ye(t,e,n){return t.concat(e).map((function(t){return ze(t,n)}))}function Je(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function Ke(t,e){try{return e in t}catch(t){return!1}}function qe(t,e,n){(n=n||{}).arrayMerge=n.arrayMerge||Ye,n.isMergeableObject=n.isMergeableObject||je,n.cloneUnlessOtherwiseSpecified=ze;var o=Array.isArray(e);return o===Array.isArray(t)?o?n.arrayMerge(t,e,n):function(t,e,n){var o={};return n.isMergeableObject(t)&&Je(t).forEach((function(e){o[e]=ze(t[e],n)})),Je(e).forEach((function(i){(function(t,e){return Ke(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,i)||(Ke(t,i)&&n.isMergeableObject(e[i])?o[i]=function(t,e){if(!e.customMerge)return qe;var n=e.customMerge(t);return"function"==typeof n?n:qe}(i,n)(t[i],e[i],n):o[i]=ze(e[i],n))})),o}(t,e,n):ze(e,n)}qe.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return qe(t,n,e)}),{})};var $e=qe,Ze={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)"},background:{default:"#FFFFFF"},context:{background:"#e3f2fd",text:"rgba(0, 0, 0, 0.87)"},divider:{default:"rgba(0,0,0,.12)"},button:{default:"rgba(0,0,0,.54)",focus:"rgba(0,0,0,.12)",hover:"rgba(0,0,0,.12)",disabled:"rgba(0, 0, 0, .18)"},selected:{default:"#e3f2fd",text:"rgba(0, 0, 0, 0.87)"},highlightOnHover:{default:"#EEEEEE",text:"rgba(0, 0, 0, 0.87)"},striped:{default:"#FAFAFA",text:"rgba(0, 0, 0, 0.87)"}},Qe={default:Ze,light:Ze,dark:{text:{primary:"#FFFFFF",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(0,0,0,.12)"},background:{default:"#424242"},context:{background:"#E91E63",text:"#FFFFFF"},divider:{default:"rgba(81, 81, 81, 1)"},button:{default:"#FFFFFF",focus:"rgba(255, 255, 255, .54)",hover:"rgba(255, 255, 255, .12)",disabled:"rgba(255, 255, 255, .18)"},selected:{default:"rgba(0, 0, 0, .7)",text:"#FFFFFF"},highlightOnHover:{default:"rgba(0, 0, 0, .7)",text:"#FFFFFF"},striped:{default:"rgba(0, 0, 0, .87)",text:"#FFFFFF"}}};function tn(t,e,n,o){var i=dt.useState((function(){return bt(t)})),r=rt(i,2),s=r[0],a=r[1],l=dt.useState(""),c=rt(l,2),u=c[0],p=c[1],h=dt.useRef("");We((function(){a(bt(t))}),[t]);var d=dt.useCallback((function(t){var e,n,o,i=null===(e=t.target.attributes.getNamedItem("data-column-id"))||void 0===e?void 0:e.value;i&&(h.current=(null===(o=null===(n=s[Rt(s,i)])||void 0===n?void 0:n.id)||void 0===o?void 0:o.toString())||"",p(h.current))}),[s]),g=dt.useCallback((function(t){var n,o=null===(n=t.target.attributes.getNamedItem("data-column-id"))||void 0===n?void 0:n.value;if(o&&h.current&&o!==h.current){var i=Rt(s,h.current),r=Rt(s,o),l=lt(s);l[i]=s[r],l[r]=s[i],a(l),e(l)}}),[e,s]),_=dt.useCallback((function(t){t.preventDefault()}),[]),f=dt.useCallback((function(t){t.preventDefault()}),[]),v=dt.useCallback((function(t){t.preventDefault(),h.current="",p("")}),[]),m=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?ht.ASC:ht.DESC}(o),T=dt.useMemo((function(){return s[Rt(s,null==n?void 0:n.toString())]||{}}),[n,s]);return{tableColumns:s,draggingColumnId:u,handleDragStart:d,handleDragEnter:g,handleDragOver:_,handleDragLeave:f,handleDragEnd:v,defaultSortDirection:m,defaultSortColumn:T}}var en=dt.memo((function(t){var e=t.data,n=void 0===e?Me.data:e,o=t.columns,i=void 0===o?Me.columns:o,r=t.title,s=void 0===r?Me.title:r,a=t.actions,l=void 0===a?Me.actions:a,c=t.keyField,u=void 0===c?Me.keyField:c,p=t.striped,h=void 0===p?Me.striped:p,d=t.highlightOnHover,g=void 0===d?Me.highlightOnHover:d,_=t.pointerOnHover,f=void 0===_?Me.pointerOnHover:_,v=t.dense,m=void 0===v?Me.dense:v,T=t.selectableRows,b=void 0===T?Me.selectableRows:T,E=t.selectableRowsSingle,y=void 0===E?Me.selectableRowsSingle:E,S=t.selectableRowsHighlight,C=void 0===S?Me.selectableRowsHighlight:S,k=t.selectableRowsNoSelectAll,R=void 0===k?Me.selectableRowsNoSelectAll:k,I=t.selectableRowsVisibleOnly,O=void 0===I?Me.selectableRowsVisibleOnly:I,w=t.selectableRowSelected,A=void 0===w?Me.selectableRowSelected:w,D=t.selectableRowDisabled,N=void 0===D?Me.selectableRowDisabled:D,x=t.selectableRowsComponent,M=void 0===x?Me.selectableRowsComponent:x,L=t.selectableRowsComponentProps,P=void 0===L?Me.selectableRowsComponentProps:L,B=t.onRowExpandToggled,F=void 0===B?Me.onRowExpandToggled:B,U=t.onSelectedRowsChange,H=void 0===U?Me.onSelectedRowsChange:U,G=t.expandableIcon,V=void 0===G?Me.expandableIcon:G,W=t.onChangeRowsPerPage,j=void 0===W?Me.onChangeRowsPerPage:W,X=t.onChangePage,z=void 0===X?Me.onChangePage:X,Y=t.paginationServer,J=void 0===Y?Me.paginationServer:Y,K=t.paginationServerOptions,q=void 0===K?Me.paginationServerOptions:K,$=t.paginationTotalRows,Z=void 0===$?Me.paginationTotalRows:$,Q=t.paginationDefaultPage,tt=void 0===Q?Me.paginationDefaultPage:Q,et=t.paginationResetDefaultPage,nt=void 0===et?Me.paginationResetDefaultPage:et,ot=t.paginationPerPage,it=void 0===ot?Me.paginationPerPage:ot,st=t.paginationRowsPerPageOptions,at=void 0===st?Me.paginationRowsPerPageOptions:st,ct=t.paginationIconLastPage,pt=void 0===ct?Me.paginationIconLastPage:ct,gt=t.paginationIconFirstPage,_t=void 0===gt?Me.paginationIconFirstPage:gt,mt=t.paginationIconNext,Tt=void 0===mt?Me.paginationIconNext:mt,bt=t.paginationIconPrevious,St=void 0===bt?Me.paginationIconPrevious:bt,Ct=t.paginationComponent,Rt=void 0===Ct?Me.paginationComponent:Ct,It=t.paginationComponentOptions,wt=void 0===It?Me.paginationComponentOptions:It,Dt=t.responsive,Mt=void 0===Dt?Me.responsive:Dt,Pt=t.progressPending,Bt=void 0===Pt?Me.progressPending:Pt,Ft=t.progressComponent,Ut=void 0===Ft?Me.progressComponent:Ft,Ht=t.persistTableHead,Gt=void 0===Ht?Me.persistTableHead:Ht,Vt=t.noDataComponent,Wt=void 0===Vt?Me.noDataComponent:Vt,jt=t.disabled,Xt=void 0===jt?Me.disabled:jt,zt=t.noTableHead,Yt=void 0===zt?Me.noTableHead:zt,Jt=t.noHeader,Kt=void 0===Jt?Me.noHeader:Jt,qt=t.fixedHeader,$t=void 0===qt?Me.fixedHeader:qt,Zt=t.fixedHeaderScrollHeight,Qt=void 0===Zt?Me.fixedHeaderScrollHeight:Zt,te=t.pagination,ne=void 0===te?Me.pagination:te,oe=t.subHeader,ie=void 0===oe?Me.subHeader:oe,re=t.subHeaderAlign,se=void 0===re?Me.subHeaderAlign:re,ae=t.subHeaderWrap,ce=void 0===ae?Me.subHeaderWrap:ae,pe=t.subHeaderComponent,he=void 0===pe?Me.subHeaderComponent:pe,de=t.noContextMenu,ge=void 0===de?Me.noContextMenu:de,_e=t.contextMessage,fe=void 0===_e?Me.contextMessage:_e,ve=t.contextActions,me=void 0===ve?Me.contextActions:ve,be=t.contextComponent,Ee=void 0===be?Me.contextComponent:be,ye=t.expandableRows,Ae=void 0===ye?Me.expandableRows:ye,De=t.onRowClicked,Ne=void 0===De?Me.onRowClicked:De,xe=t.onRowDoubleClicked,Le=void 0===xe?Me.onRowDoubleClicked:xe,Pe=t.onRowMouseEnter,Be=void 0===Pe?Me.onRowMouseEnter:Pe,Fe=t.onRowMouseLeave,Ue=void 0===Fe?Me.onRowMouseLeave:Fe,He=t.sortIcon,Ge=void 0===He?Me.sortIcon:He,je=t.onSort,Xe=void 0===je?Me.onSort:je,ze=t.sortFunction,Ye=void 0===ze?Me.sortFunction:ze,Je=t.sortServer,Ke=void 0===Je?Me.sortServer:Je,qe=t.expandableRowsComponent,Ze=void 0===qe?Me.expandableRowsComponent:qe,en=t.expandableRowsComponentProps,nn=void 0===en?Me.expandableRowsComponentProps:en,on=t.expandableRowDisabled,rn=void 0===on?Me.expandableRowDisabled:on,sn=t.expandableRowsHideExpander,an=void 0===sn?Me.expandableRowsHideExpander:sn,ln=t.expandOnRowClicked,cn=void 0===ln?Me.expandOnRowClicked:ln,un=t.expandOnRowDoubleClicked,pn=void 0===un?Me.expandOnRowDoubleClicked:un,hn=t.expandableRowExpanded,dn=void 0===hn?Me.expandableRowExpanded:hn,gn=t.expandableInheritConditionalStyles,_n=void 0===gn?Me.expandableInheritConditionalStyles:gn,fn=t.defaultSortFieldId,vn=void 0===fn?Me.defaultSortFieldId:fn,mn=t.defaultSortAsc,Tn=void 0===mn?Me.defaultSortAsc:mn,bn=t.clearSelectedRows,En=void 0===bn?Me.clearSelectedRows:bn,yn=t.conditionalRowStyles,Sn=void 0===yn?Me.conditionalRowStyles:yn,Cn=t.theme,kn=void 0===Cn?Me.theme:Cn,Rn=t.customStyles,In=void 0===Rn?Me.customStyles:Rn,On=t.direction,wn=void 0===On?Me.direction:On,An=t.onColumnOrderChange,Dn=void 0===An?Me.onColumnOrderChange:An,Nn=t.className,xn=tn(i,Dn,vn,Tn),Mn=xn.tableColumns,Ln=xn.draggingColumnId,Pn=xn.handleDragStart,Bn=xn.handleDragEnter,Fn=xn.handleDragOver,Un=xn.handleDragLeave,Hn=xn.handleDragEnd,Gn=xn.defaultSortDirection,Vn=xn.defaultSortColumn,Wn=dt.useReducer(Ot,{allSelected:!1,selectedCount:0,selectedRows:[],selectedColumn:Vn,toggleOnSelectedRowsChange:!1,sortDirection:Gn,currentPage:tt,rowsPerPage:it,selectedRowsFlag:!1,contextMessage:Me.contextMessage}),jn=rt(Wn,2),Xn=jn[0],zn=Xn.rowsPerPage,Yn=Xn.currentPage,Jn=Xn.selectedRows,Kn=Xn.allSelected,qn=Xn.selectedCount,$n=Xn.selectedColumn,Zn=Xn.sortDirection,Qn=Xn.toggleOnSelectedRowsChange,to=jn[1],eo=q.persistSelectedOnSort,no=void 0!==eo&&eo,oo=q.persistSelectedOnPageChange,io=void 0!==oo&&oo,ro=!(!J||!io&&!no),so=ne&&!Bt&&n.length>0,ao=Rt||Ve,lo=dt.useMemo((function(){return function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",i=Qe[n]?n:o;return $e({table:{style:{color:(t=Qe[i]).text.primary,backgroundColor:t.background.default}},tableWrapper:{style:{display:"table"}},responsiveWrapper:{style:{}},header:{style:{fontSize:"22px",color:t.text.primary,backgroundColor:t.background.default,minHeight:"56px",paddingLeft:"16px",paddingRight:"8px"}},subHeader:{style:{backgroundColor:t.background.default,minHeight:"52px"}},head:{style:{color:t.text.primary,fontSize:"12px",fontWeight:500}},headRow:{style:{backgroundColor:t.background.default,minHeight:"52px",borderBottomWidth:"1px",borderBottomColor:t.divider.default,borderBottomStyle:"solid"},denseStyle:{minHeight:"32px"}},headCells:{style:{paddingLeft:"16px",paddingRight:"16px"},draggingStyle:{cursor:"move"}},contextMenu:{style:{backgroundColor:t.context.background,fontSize:"18px",fontWeight:400,color:t.context.text,paddingLeft:"16px",paddingRight:"8px",transform:"translate3d(0, -100%, 0)",transitionDuration:"125ms",transitionTimingFunction:"cubic-bezier(0, 0, 0.2, 1)",willChange:"transform"},activeStyle:{transform:"translate3d(0, 0, 0)"}},cells:{style:{paddingLeft:"16px",paddingRight:"16px",wordBreak:"break-word"},draggingStyle:{}},rows:{style:{fontSize:"13px",fontWeight:400,color:t.text.primary,backgroundColor:t.background.default,minHeight:"48px","&:not(:last-of-type)":{borderBottomStyle:"solid",borderBottomWidth:"1px",borderBottomColor:t.divider.default}},denseStyle:{minHeight:"32px"},selectedHighlightStyle:{"&:nth-of-type(n)":{color:t.selected.text,backgroundColor:t.selected.default,borderBottomColor:t.background.default}},highlightOnHoverStyle:{color:t.highlightOnHover.text,backgroundColor:t.highlightOnHover.default,transitionDuration:"0.15s",transitionProperty:"background-color",borderBottomColor:t.background.default,outlineStyle:"solid",outlineWidth:"1px",outlineColor:t.background.default},stripedStyle:{color:t.striped.text,backgroundColor:t.striped.default}},expanderRow:{style:{color:t.text.primary,backgroundColor:t.background.default}},expanderCell:{style:{flex:"0 0 48px"}},expanderButton:{style:{color:t.button.default,fill:t.button.default,backgroundColor:"transparent",borderRadius:"2px",transition:"0.25s",height:"100%",width:"100%","&:hover:enabled":{cursor:"pointer"},"&:disabled":{color:t.button.disabled},"&:hover:not(:disabled)":{cursor:"pointer",backgroundColor:t.button.hover},"&:focus":{outline:"none",backgroundColor:t.button.focus},svg:{margin:"auto"}}},pagination:{style:{color:t.text.secondary,fontSize:"13px",minHeight:"56px",backgroundColor:t.background.default,borderTopStyle:"solid",borderTopWidth:"1px",borderTopColor:t.divider.default},pageButtonsStyle:{borderRadius:"50%",height:"40px",width:"40px",padding:"8px",margin:"px",cursor:"pointer",transition:"0.4s",color:t.button.default,fill:t.button.default,backgroundColor:"transparent","&:disabled":{cursor:"unset",color:t.button.disabled,fill:t.button.disabled},"&:hover:not(:disabled)":{backgroundColor:t.button.hover},"&:focus":{outline:"none",backgroundColor:t.button.focus}}},noData:{style:{display:"flex",alignItems:"center",justifyContent:"center",color:t.text.primary,backgroundColor:t.background.default}},progress:{style:{display:"flex",alignItems:"center",justifyContent:"center",color:t.text.primary,backgroundColor:t.background.default}}},e)}(In,kn)}),[In,kn]),co=dt.useMemo((function(){return Object.assign({},"auto"!==wn&&{dir:wn})}),[wn]),uo=dt.useMemo((function(){if(Ke)return n;if((null==$n?void 0:$n.sortFunction)&&"function"==typeof $n.sortFunction){var t=$n.sortFunction,e=Zn===ht.ASC?t:function(e,n){return-1*t(e,n)};return lt(n).sort(e)}return function(t,e,n,o){return e?o&&"function"==typeof o?o(t.slice(0),e,n):t.slice(0).sort((function(t,o){var i,r;if("string"==typeof e?(i=vt(t,e),r=vt(o,e)):(i=e(t),r=e(o)),"asc"===n){if(i<r)return-1;if(i>r)return 1}if("desc"===n){if(i>r)return-1;if(i<r)return 1}return 0})):t}(n,null==$n?void 0:$n.selector,Zn,Ye)}),[Ke,$n,Zn,n,Ye]),po=dt.useMemo((function(){if(ne&&!J){var t=Yn*zn,e=t-zn;return uo.slice(e,t)}return uo}),[Yn,ne,J,zn,uo]),ho=dt.useCallback((function(t){to(t)}),[]),go=dt.useCallback((function(t){to(t)}),[]),_o=dt.useCallback((function(t){to(t)}),[]),fo=dt.useCallback((function(t,e){return Ne(t,e)}),[Ne]),vo=dt.useCallback((function(t,e){return Le(t,e)}),[Le]),mo=dt.useCallback((function(t,e){return Be(t,e)}),[Be]),To=dt.useCallback((function(t,e){return Ue(t,e)}),[Ue]),bo=dt.useCallback((function(t){return to({type:"CHANGE_PAGE",page:t,paginationServer:J,visibleOnly:O,persistSelectedOnPageChange:io})}),[J,io,O]),Eo=dt.useCallback((function(t){var e=Et(Z||po.length,t),n=yt(Yn,e);J||bo(n),to({type:"CHANGE_ROWS_PER_PAGE",page:n,rowsPerPage:t})}),[Yn,bo,J,Z,po.length]);if(ne&&!J&&uo.length>0&&0===po.length){var yo=Et(uo.length,zn),So=yt(Yn,yo);bo(So)}We((function(){H({allSelected:Kn,selectedCount:qn,selectedRows:Jn.slice(0)})}),[Qn]),We((function(){Xe($n,Zn,uo.slice(0))}),[$n,Zn]),We((function(){z(Yn,Z||uo.length)}),[Yn]),We((function(){j(zn,Yn)}),[zn]),We((function(){bo(tt)}),[tt,nt]),We((function(){if(ne&&J&&Z>0){var t=Et(Z,zn),e=yt(Yn,t);Yn!==e&&bo(e)}}),[Z]),dt.useEffect((function(){to({type:"CLEAR_SELECTED_ROWS",selectedRowsFlag:En})}),[y,En]),dt.useEffect((function(){if(A){var t=uo.filter((function(t){return A(t)})),e=y?t.slice(0,1):t;to({type:"SELECT_MULTIPLE_ROWS",keyField:u,selectedRows:e,totalRows:uo.length,mergeSelections:ro})}}),[n,A]);var Co=O?po:uo,ko=io||y||R;return dt.createElement(ut.ThemeProvider,{theme:lo},!Kt&&(!!s||!!l)&&dt.createElement(Te,{title:s,actions:l,showMenu:!ge,selectedCount:qn,direction:wn,contextActions:me,contextComponent:Ee,contextMessage:fe}),ie&&dt.createElement(Se,{align:se,wrapContent:ce},he),dt.createElement(ke,Object.assign({responsive:Mt,fixedHeader:$t,fixedHeaderScrollHeight:Qt,className:Nn},co),dt.createElement(Ie,null,Bt&&!Gt&&dt.createElement(Re,null,Ut),dt.createElement(At,{disabled:Xt,className:"rdt_Table",role:"table"},!Yt&&(!!Gt||uo.length>0&&!Bt)&&dt.createElement(Nt,{className:"rdt_TableHead",role:"rowgroup",fixedHeader:$t},dt.createElement(xt,{className:"rdt_TableHeadRow",role:"row",dense:m},b&&(ko?dt.createElement(Lt,{style:{flex:"0 0 48px"}}):dt.createElement(ue,{allSelected:Kn,selectedRows:Jn,selectableRowsComponent:M,selectableRowsComponentProps:P,selectableRowDisabled:N,rowData:Co,keyField:u,mergeSelections:ro,onSelectAllRows:go})),Ae&&!an&&dt.createElement(Oe,null),Mn.map((function(t){return dt.createElement(le,{key:t.id,column:t,selectedColumn:$n,disabled:Bt||0===uo.length,pagination:ne,paginationServer:J,persistSelectedOnSort:no,selectableRowsVisibleOnly:O,sortDirection:Zn,sortIcon:Ge,sortServer:Ke,onSort:ho,onDragStart:Pn,onDragOver:Fn,onDragEnd:Hn,onDragEnter:Bn,onDragLeave:Un,draggingColumnId:Ln})})))),!uo.length&&!Bt&&dt.createElement(we,null,Wt),Bt&&Gt&&dt.createElement(Re,null,Ut),!Bt&&uo.length>0&&dt.createElement(Ce,{className:"rdt_TableBody",role:"rowgroup"},po.map((function(t,e){var n=ft(t,u),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"number"!=typeof t&&(!t||0===t.length)}(n)?e:n,i=kt(t,Jn,u),r=!!(Ae&&dn&&dn(t)),s=!!(Ae&&rn&&rn(t));return dt.createElement(ee,{id:o,key:o,keyField:u,"data-row-id":o,columns:Mn,row:t,rowCount:uo.length,rowIndex:e,selectableRows:b,expandableRows:Ae,expandableIcon:V,highlightOnHover:g,pointerOnHover:f,dense:m,expandOnRowClicked:cn,expandOnRowDoubleClicked:pn,expandableRowsComponent:Ze,expandableRowsComponentProps:nn,expandableRowsHideExpander:an,defaultExpanderDisabled:s,defaultExpanded:r,expandableInheritConditionalStyles:_n,conditionalRowStyles:Sn,selected:i,selectableRowsHighlight:C,selectableRowsComponent:M,selectableRowsComponentProps:P,selectableRowDisabled:N,selectableRowsSingle:y,striped:h,onRowExpandToggled:F,onRowClicked:fo,onRowDoubleClicked:vo,onRowMouseEnter:mo,onRowMouseLeave:To,onSelectedRow:_o,draggingColumnId:Ln,onDragStart:Pn,onDragOver:Fn,onDragEnd:Hn,onDragEnter:Bn,onDragLeave:Un})})))))),so&&dt.createElement("div",null,dt.createElement(ao,{onChangePage:bo,onChangeRowsPerPage:Eo,rowCount:Z||uo.length,currentPage:Yn,rowsPerPage:zn,direction:wn,paginationRowsPerPageOptions:at,paginationIconLastPage:pt,paginationIconFirstPage:_t,paginationIconNext:Tt,paginationIconPrevious:St,paginationComponentOptions:wt})))}));e.ZP=en},4463:function(t,e,n){"use strict";var o=n(2791),i=n(5296);function r(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(a[t]=e,t=0;t<e.length;t++)s.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),p=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},g={};function _(t,e,n,o,i,r,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=o,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=s}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){f[t]=new _(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];f[e]=new _(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){f[t]=new _(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){f[t]=new _(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){f[t]=new _(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){f[t]=new _(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){f[t]=new _(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){f[t]=new _(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){f[t]=new _(t,5,!1,t.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function m(t){return t[1].toUpperCase()}function T(t,e,n,o){var i=f.hasOwnProperty(e)?f[e]:null;(null!==i?0!==i.type:o||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,o){if(null===e||"undefined"===typeof e||function(t,e,n,o){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!o&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,o))return!0;if(o)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,o)&&(n=null),o||null===i?function(t){return!!p.call(g,t)||!p.call(d,t)&&(h.test(t)?g[t]=!0:(d[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,o=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,o?t.setAttributeNS(o,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(v,m);f[e]=new _(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(v,m);f[e]=new _(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(v,m);f[e]=new _(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){f[t]=new _(t,1,!1,t.toLowerCase(),null,!1,!1)})),f.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){f[t]=new _(t,1,!1,t.toLowerCase(),null,!0,!0)}));var b=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),y=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),I=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var x=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function L(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=M&&t[M]||t["@@iterator"])?t:null}var P,B=Object.assign;function F(t){if(void 0===P)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);P=e&&e[1]||""}return"\n"+P+t}var U=!1;function H(t,e){if(!t||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var o=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){o=c}t.call(e.prototype)}else{try{throw Error()}catch(c){o=c}t()}}catch(c){if(c&&o&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),r=o.stack.split("\n"),s=i.length-1,a=r.length-1;1<=s&&0<=a&&i[s]!==r[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==r[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==r[a]){var l="\n"+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=s&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?F(t):""}function G(t){switch(t.tag){case 5:return F(t.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return t=H(t.type,!1);case 11:return t=H(t.type.render,!1);case 1:return t=H(t.type,!0);default:return""}}function V(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case y:return"Portal";case k:return"Profiler";case C:return"StrictMode";case w:return"Suspense";case A:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case I:return(t.displayName||"Context")+".Consumer";case R:return(t._context.displayName||"Context")+".Provider";case O:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case D:return null!==(e=t.displayName||null)?e:V(t.type)||"Memo";case N:e=t._payload,t=t._init;try{return V(t(e))}catch(n){}}return null}function W(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(e);case 8:return e===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function j(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function X(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function z(t){t._valueTracker||(t._valueTracker=function(t){var e=X(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),o=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){o=""+t,r.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(t){o=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Y(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),o="";return t&&(o=X(t)?t.checked?"true":"false":t.value),(t=o)!==n&&(e.setValue(t),!0)}function J(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function K(t,e){var n=e.checked;return B({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function q(t,e){var n=null==e.defaultValue?"":e.defaultValue,o=null!=e.checked?e.checked:e.defaultChecked;n=j(null!=e.value?e.value:n),t._wrapperState={initialChecked:o,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function $(t,e){null!=(e=e.checked)&&T(t,"checked",e,!1)}function Z(t,e){$(t,e);var n=j(e.value),o=e.type;if(null!=n)"number"===o?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===o||"reset"===o)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,j(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Q(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!("submit"!==o&&"reset"!==o||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&J(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,o){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&o&&(t[n].defaultSelected=!0)}else{for(n=""+j(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(o&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function ot(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(r(91));return B({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(r(92));if(et(n)){if(1<n.length)throw Error(r(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:j(n)}}function rt(t,e){var n=j(e.value),o=j(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=o&&(t.defaultValue=""+o)}function st(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,pt=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,o){MSApp.execUnsafeLocalFunction((function(){return ut(t,e)}))}:ut);function ht(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gt=["Webkit","ms","Moz","O"];function _t(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||dt.hasOwnProperty(t)&&dt[t]?(""+e).trim():e+"px"}function ft(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var o=0===n.indexOf("--"),i=_t(n,e[n],o);"float"===n&&(n="cssFloat"),o?t.setProperty(n,i):t[n]=i}}Object.keys(dt).forEach((function(t){gt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),dt[e]=dt[t]}))}));var vt=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mt(t,e){if(e){if(vt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(r(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(r(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(r(62))}}function Tt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function Et(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var yt=null,St=null,Ct=null;function kt(t){if(t=bi(t)){if("function"!==typeof yt)throw Error(r(280));var e=t.stateNode;e&&(e=yi(e),yt(t.stateNode,t.type,e))}}function Rt(t){St?Ct?Ct.push(t):Ct=[t]:St=t}function It(){if(St){var t=St,e=Ct;if(Ct=St=null,kt(t),e)for(t=0;t<e.length;t++)kt(e[t])}}function Ot(t,e){return t(e)}function wt(){}var At=!1;function Dt(t,e,n){if(At)return t(e,n);At=!0;try{return Ot(t,e,n)}finally{At=!1,(null!==St||null!==Ct)&&(wt(),It())}}function Nt(t,e){var n=t.stateNode;if(null===n)return null;var o=yi(n);if(null===o)return null;n=o[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(o=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!o;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(r(231,e,typeof n));return n}var xt=!1;if(u)try{var Mt={};Object.defineProperty(Mt,"passive",{get:function(){xt=!0}}),window.addEventListener("test",Mt,Mt),window.removeEventListener("test",Mt,Mt)}catch(ut){xt=!1}function Lt(t,e,n,o,i,r,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Pt=!1,Bt=null,Ft=!1,Ut=null,Ht={onError:function(t){Pt=!0,Bt=t}};function Gt(t,e,n,o,i,r,s,a,l){Pt=!1,Bt=null,Lt.apply(Ht,arguments)}function Vt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Wt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function jt(t){if(Vt(t)!==t)throw Error(r(188))}function Xt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Vt(t)))throw Error(r(188));return e!==t?null:t}for(var n=t,o=e;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(o=i.return)){n=o;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return jt(i),t;if(s===o)return jt(i),e;s=s.sibling}throw Error(r(188))}if(n.return!==o.return)n=i,o=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,o=s;break}if(l===o){a=!0,o=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,o=i;break}if(l===o){a=!0,o=s,n=i;break}l=l.sibling}if(!a)throw Error(r(189))}}if(n.alternate!==o)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?t:e}(t))?zt(t):null}function zt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=zt(t);if(null!==e)return e;t=t.sibling}return null}var Yt=i.unstable_scheduleCallback,Jt=i.unstable_cancelCallback,Kt=i.unstable_shouldYield,qt=i.unstable_requestPaint,$t=i.unstable_now,Zt=i.unstable_getCurrentPriorityLevel,Qt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,oe=i.unstable_IdlePriority,ie=null,re=null;var se=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2;var ce=64,ue=4194304;function pe(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function he(t,e){var n=t.pendingLanes;if(0===n)return 0;var o=0,i=t.suspendedLanes,r=t.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?o=pe(a):0!==(r&=s)&&(o=pe(r))}else 0!==(s=n&~i)?o=pe(s):0!==r&&(o=pe(r));if(0===o)return 0;if(0!==e&&e!==o&&0===(e&i)&&((i=o&-o)>=(r=e&-e)||16===i&&0!==(4194240&r)))return e;if(0!==(4&o)&&(o|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=o;0<e;)i=1<<(n=31-se(e)),o|=t[n],e&=~i;return o}function de(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function ge(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function _e(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function fe(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ve(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-se(e)]=n}function me(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var o=31-se(n),i=1<<o;i&e|t[o]&e&&(t[o]|=e),n&=~i}}var Te=0;function be(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var Ee,ye,Se,Ce,ke,Re=!1,Ie=[],Oe=null,we=null,Ae=null,De=new Map,Ne=new Map,xe=[],Me="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Le(t,e){switch(t){case"focusin":case"focusout":Oe=null;break;case"dragenter":case"dragleave":we=null;break;case"mouseover":case"mouseout":Ae=null;break;case"pointerover":case"pointerout":De.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ne.delete(e.pointerId)}}function Pe(t,e,n,o,i,r){return null===t||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:o,nativeEvent:r,targetContainers:[i]},null!==e&&(null!==(e=bi(e))&&ye(e)),t):(t.eventSystemFlags|=o,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Be(t){var e=Ti(t.target);if(null!==e){var n=Vt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Wt(n)))return t.blockedOn=e,void ke(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Fe(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ke(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=bi(n))&&ye(e),t.blockedOn=n,!1;var o=new(n=t.nativeEvent).constructor(n.type,n);bt=o,n.target.dispatchEvent(o),bt=null,e.shift()}return!0}function Ue(t,e,n){Fe(t)&&n.delete(e)}function He(){Re=!1,null!==Oe&&Fe(Oe)&&(Oe=null),null!==we&&Fe(we)&&(we=null),null!==Ae&&Fe(Ae)&&(Ae=null),De.forEach(Ue),Ne.forEach(Ue)}function Ge(t,e){t.blockedOn===e&&(t.blockedOn=null,Re||(Re=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,He)))}function Ve(t){function e(e){return Ge(e,t)}if(0<Ie.length){Ge(Ie[0],t);for(var n=1;n<Ie.length;n++){var o=Ie[n];o.blockedOn===t&&(o.blockedOn=null)}}for(null!==Oe&&Ge(Oe,t),null!==we&&Ge(we,t),null!==Ae&&Ge(Ae,t),De.forEach(e),Ne.forEach(e),n=0;n<xe.length;n++)(o=xe[n]).blockedOn===t&&(o.blockedOn=null);for(;0<xe.length&&null===(n=xe[0]).blockedOn;)Be(n),null===n.blockedOn&&xe.shift()}var We=b.ReactCurrentBatchConfig,je=!0;function Xe(t,e,n,o){var i=Te,r=We.transition;We.transition=null;try{Te=1,Ye(t,e,n,o)}finally{Te=i,We.transition=r}}function ze(t,e,n,o){var i=Te,r=We.transition;We.transition=null;try{Te=4,Ye(t,e,n,o)}finally{Te=i,We.transition=r}}function Ye(t,e,n,o){if(je){var i=Ke(t,e,n,o);if(null===i)Xo(t,e,o,Je,n),Le(t,o);else if(function(t,e,n,o,i){switch(e){case"focusin":return Oe=Pe(Oe,t,e,n,o,i),!0;case"dragenter":return we=Pe(we,t,e,n,o,i),!0;case"mouseover":return Ae=Pe(Ae,t,e,n,o,i),!0;case"pointerover":var r=i.pointerId;return De.set(r,Pe(De.get(r)||null,t,e,n,o,i)),!0;case"gotpointercapture":return r=i.pointerId,Ne.set(r,Pe(Ne.get(r)||null,t,e,n,o,i)),!0}return!1}(i,t,e,n,o))o.stopPropagation();else if(Le(t,o),4&e&&-1<Me.indexOf(t)){for(;null!==i;){var r=bi(i);if(null!==r&&Ee(r),null===(r=Ke(t,e,n,o))&&Xo(t,e,o,Je,n),r===i)break;i=r}null!==i&&o.stopPropagation()}else Xo(t,e,o,null,n)}}var Je=null;function Ke(t,e,n,o){if(Je=null,null!==(t=Ti(t=Et(o))))if(null===(e=Vt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Wt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Je=t,null}function qe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zt()){case Qt:return 1;case te:return 4;case ee:case ne:return 16;case oe:return 536870912;default:return 16}default:return 16}}var $e=null,Ze=null,Qe=null;function tn(){if(Qe)return Qe;var t,e,n=Ze,o=n.length,i="value"in $e?$e.value:$e.textContent,r=i.length;for(t=0;t<o&&n[t]===i[t];t++);var s=o-t;for(e=1;e<=s&&n[o-e]===i[r-e];e++);return Qe=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function on(){return!1}function rn(t){function e(e,n,o,i,r){for(var s in this._reactName=e,this._targetInst=o,this.type=n,this.nativeEvent=i,this.target=r,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:on,this.isPropagationStopped=on,this}return B(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=rn(cn),pn=B({},cn,{view:0,detail:0}),hn=rn(pn),dn=B({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(sn=t.screenX-ln.screenX,an=t.screenY-ln.screenY):an=sn=0,ln=t),sn)},movementY:function(t){return"movementY"in t?t.movementY:an}}),gn=rn(dn),_n=rn(B({},dn,{dataTransfer:0})),fn=rn(B({},pn,{relatedTarget:0})),vn=rn(B({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=B({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tn=rn(mn),bn=rn(B({},cn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function kn(){return Cn}var Rn=B({},pn,{key:function(t){if(t.key){var e=En[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?yn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),In=rn(Rn),On=rn(B({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wn=rn(B({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),An=rn(B({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=B({},dn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=rn(Dn),xn=[9,13,27,32],Mn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Pn=u&&"TextEvent"in window&&!Ln,Bn=u&&(!Mn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Un=!1;function Hn(t,e){switch(t){case"keyup":return-1!==xn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Vn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Wn[t.type]:"textarea"===e}function Xn(t,e,n,o){Rt(o),0<(e=Yo(e,"onChange")).length&&(n=new un("onChange","change",null,n,o),t.push({event:n,listeners:e}))}var zn=null,Yn=null;function Jn(t){Uo(t,0)}function Kn(t){if(Y(Ei(t)))return t}function qn(t,e){if("change"===t)return e}var $n=!1;if(u){var Zn;if(u){var Qn="oninput"in document;if(!Qn){var to=document.createElement("div");to.setAttribute("oninput","return;"),Qn="function"===typeof to.oninput}Zn=Qn}else Zn=!1;$n=Zn&&(!document.documentMode||9<document.documentMode)}function eo(){zn&&(zn.detachEvent("onpropertychange",no),Yn=zn=null)}function no(t){if("value"===t.propertyName&&Kn(Yn)){var e=[];Xn(e,Yn,t,Et(t)),Dt(Jn,e)}}function oo(t,e,n){"focusin"===t?(eo(),Yn=n,(zn=e).attachEvent("onpropertychange",no)):"focusout"===t&&eo()}function io(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Kn(Yn)}function ro(t,e){if("click"===t)return Kn(e)}function so(t,e){if("input"===t||"change"===t)return Kn(e)}var ao="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function lo(t,e){if(ao(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var i=n[o];if(!p.call(e,i)||!ao(t[i],e[i]))return!1}return!0}function co(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function uo(t,e){var n,o=co(t);for(t=0;o;){if(3===o.nodeType){if(n=t+o.textContent.length,t<=e&&n>=e)return{node:o,offset:e-t};t=n}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=co(o)}}function po(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?po(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function ho(){for(var t=window,e=J();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(o){n=!1}if(!n)break;e=J((t=e.contentWindow).document)}return e}function go(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function _o(t){var e=ho(),n=t.focusedElem,o=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&po(n.ownerDocument.documentElement,n)){if(null!==o&&go(n))if(e=o.start,void 0===(t=o.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,r=Math.min(o.start,i);o=void 0===o.end?r:Math.min(o.end,i),!t.extend&&r>o&&(i=o,o=r,r=i),i=uo(n,r);var s=uo(n,o);i&&s&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),r>o?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fo=u&&"documentMode"in document&&11>=document.documentMode,vo=null,mo=null,To=null,bo=!1;function Eo(t,e,n){var o=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bo||null==vo||vo!==J(o)||("selectionStart"in(o=vo)&&go(o)?o={start:o.selectionStart,end:o.selectionEnd}:o={anchorNode:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset},To&&lo(To,o)||(To=o,0<(o=Yo(mo,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:o}),e.target=vo)))}function yo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var So={animationend:yo("Animation","AnimationEnd"),animationiteration:yo("Animation","AnimationIteration"),animationstart:yo("Animation","AnimationStart"),transitionend:yo("Transition","TransitionEnd")},Co={},ko={};function Ro(t){if(Co[t])return Co[t];if(!So[t])return t;var e,n=So[t];for(e in n)if(n.hasOwnProperty(e)&&e in ko)return Co[t]=n[e];return t}u&&(ko=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);var Io=Ro("animationend"),Oo=Ro("animationiteration"),wo=Ro("animationstart"),Ao=Ro("transitionend"),Do=new Map,No="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xo(t,e){Do.set(t,e),l(e,[t])}for(var Mo=0;Mo<No.length;Mo++){var Lo=No[Mo];xo(Lo.toLowerCase(),"on"+(Lo[0].toUpperCase()+Lo.slice(1)))}xo(Io,"onAnimationEnd"),xo(Oo,"onAnimationIteration"),xo(wo,"onAnimationStart"),xo("dblclick","onDoubleClick"),xo("focusin","onFocus"),xo("focusout","onBlur"),xo(Ao,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bo=new Set("cancel close invalid load scroll toggle".split(" ").concat(Po));function Fo(t,e,n){var o=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,o,i,s,a,l,c){if(Gt.apply(this,arguments),Pt){if(!Pt)throw Error(r(198));var u=Bt;Pt=!1,Bt=null,Ft||(Ft=!0,Ut=u)}}(o,e,void 0,t),t.currentTarget=null}function Uo(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var o=t[n],i=o.event;o=o.listeners;t:{var r=void 0;if(e)for(var s=o.length-1;0<=s;s--){var a=o[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&i.isPropagationStopped())break t;Fo(i,a,c),r=l}else for(s=0;s<o.length;s++){if(l=(a=o[s]).instance,c=a.currentTarget,a=a.listener,l!==r&&i.isPropagationStopped())break t;Fo(i,a,c),r=l}}}if(Ft)throw t=Ut,Ft=!1,Ut=null,t}function Ho(t,e){var n=e[fi];void 0===n&&(n=e[fi]=new Set);var o=t+"__bubble";n.has(o)||(jo(e,t,2,!1),n.add(o))}function Go(t,e,n){var o=0;e&&(o|=4),jo(n,t,o,e)}var Vo="_reactListening"+Math.random().toString(36).slice(2);function Wo(t){if(!t[Vo]){t[Vo]=!0,s.forEach((function(e){"selectionchange"!==e&&(Bo.has(e)||Go(e,!1,t),Go(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Vo]||(e[Vo]=!0,Go("selectionchange",!1,e))}}function jo(t,e,n,o){switch(qe(e)){case 1:var i=Xe;break;case 4:i=ze;break;default:i=Ye}n=i.bind(null,e,n,t),i=void 0,!xt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),o?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Xo(t,e,n,o,i){var r=o;if(0===(1&e)&&0===(2&e)&&null!==o)t:for(;;){if(null===o)return;var s=o.tag;if(3===s||4===s){var a=o.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=o.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=Ti(a)))return;if(5===(l=s.tag)||6===l){o=r=s;continue t}a=a.parentNode}}o=o.return}Dt((function(){var o=r,i=Et(n),s=[];t:{var a=Do.get(t);if(void 0!==a){var l=un,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=fn;break;case"focusout":c="blur",l=fn;break;case"beforeblur":case"afterblur":l=fn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=_n;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=wn;break;case Io:case Oo:case wo:l=vn;break;case Ao:l=An;break;case"scroll":l=hn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=Tn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=On}var u=0!==(4&e),p=!u&&"scroll"===t,h=u?null!==a?a+"Capture":null:a;u=[];for(var d,g=o;null!==g;){var _=(d=g).stateNode;if(5===d.tag&&null!==_&&(d=_,null!==h&&(null!=(_=Nt(g,h))&&u.push(zo(g,_,d)))),p)break;g=g.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===bt||!(c=n.relatedTarget||n.fromElement)||!Ti(c)&&!c[_i])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=o,null!==(c=(c=n.relatedTarget||n.toElement)?Ti(c):null)&&(c!==(p=Vt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=o),l!==c)){if(u=gn,_="onMouseLeave",h="onMouseEnter",g="mouse","pointerout"!==t&&"pointerover"!==t||(u=On,_="onPointerLeave",h="onPointerEnter",g="pointer"),p=null==l?a:Ei(l),d=null==c?a:Ei(c),(a=new u(_,g+"leave",l,n,i)).target=p,a.relatedTarget=d,_=null,Ti(i)===o&&((u=new u(h,g+"enter",c,n,i)).target=d,u.relatedTarget=p,_=u),p=_,l&&c)t:{for(h=c,g=0,d=u=l;d;d=Jo(d))g++;for(d=0,_=h;_;_=Jo(_))d++;for(;0<g-d;)u=Jo(u),g--;for(;0<d-g;)h=Jo(h),d--;for(;g--;){if(u===h||null!==h&&u===h.alternate)break t;u=Jo(u),h=Jo(h)}u=null}else u=null;null!==l&&Ko(s,a,l,u,!1),null!==c&&null!==p&&Ko(s,p,c,u,!0)}if("select"===(l=(a=o?Ei(o):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var f=qn;else if(jn(a))if($n)f=so;else{f=io;var v=oo}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(f=ro);switch(f&&(f=f(t,o))?Xn(s,f,n,i):(v&&v(t,a,o),"focusout"===t&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&tt(a,"number",a.value)),v=o?Ei(o):window,t){case"focusin":(jn(v)||"true"===v.contentEditable)&&(vo=v,mo=o,To=null);break;case"focusout":To=mo=vo=null;break;case"mousedown":bo=!0;break;case"contextmenu":case"mouseup":case"dragend":bo=!1,Eo(s,n,i);break;case"selectionchange":if(fo)break;case"keydown":case"keyup":Eo(s,n,i)}var m;if(Mn)t:{switch(t){case"compositionstart":var T="onCompositionStart";break t;case"compositionend":T="onCompositionEnd";break t;case"compositionupdate":T="onCompositionUpdate";break t}T=void 0}else Vn?Hn(t,n)&&(T="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(T="onCompositionStart");T&&(Bn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==T?"onCompositionEnd"===T&&Vn&&(m=tn()):(Ze="value"in($e=i)?$e.value:$e.textContent,Vn=!0)),0<(v=Yo(o,T)).length&&(T=new bn(T,t,null,n,i),s.push({event:T,listeners:v}),m?T.data=m:null!==(m=Gn(n))&&(T.data=m))),(m=Pn?function(t,e){switch(t){case"compositionend":return Gn(e);case"keypress":return 32!==e.which?null:(Un=!0,Fn);case"textInput":return(t=e.data)===Fn&&Un?null:t;default:return null}}(t,n):function(t,e){if(Vn)return"compositionend"===t||!Mn&&Hn(t,e)?(t=tn(),Qe=Ze=$e=null,Vn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(o=Yo(o,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:o}),i.data=m))}Uo(s,e)}))}function zo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yo(t,e){for(var n=e+"Capture",o=[];null!==t;){var i=t,r=i.stateNode;5===i.tag&&null!==r&&(i=r,null!=(r=Nt(t,n))&&o.unshift(zo(t,r,i)),null!=(r=Nt(t,e))&&o.push(zo(t,r,i))),t=t.return}return o}function Jo(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Ko(t,e,n,o,i){for(var r=e._reactName,s=[];null!==n&&n!==o;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===o)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Nt(n,r))&&s.unshift(zo(n,l,a)):i||null!=(l=Nt(n,r))&&s.push(zo(n,l,a))),n=n.return}0!==s.length&&t.push({event:e,listeners:s})}var qo=/\r\n?/g,$o=/\u0000|\uFFFD/g;function Zo(t){return("string"===typeof t?t:""+t).replace(qo,"\n").replace($o,"")}function Qo(t,e,n){if(e=Zo(e),Zo(t)!==e&&n)throw Error(r(425))}function ti(){}var ei=null,ni=null;function oi(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ii="function"===typeof setTimeout?setTimeout:void 0,ri="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(t){return si.resolve(null).then(t).catch(li)}:ii;function li(t){setTimeout((function(){throw t}))}function ci(t,e){var n=e,o=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===o)return t.removeChild(i),void Ve(e);o--}else"$"!==n&&"$?"!==n&&"$!"!==n||o++;n=i}while(n);Ve(e)}function ui(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function pi(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,gi="__reactProps$"+hi,_i="__reactContainer$"+hi,fi="__reactEvents$"+hi,vi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function Ti(t){var e=t[di];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_i]||n[di]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=pi(t);null!==t;){if(n=t[di])return n;t=pi(t)}return e}n=(t=n).parentNode}return null}function bi(t){return!(t=t[di]||t[_i])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function Ei(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(r(33))}function yi(t){return t[gi]||null}var Si=[],Ci=-1;function ki(t){return{current:t}}function Ri(t){0>Ci||(t.current=Si[Ci],Si[Ci]=null,Ci--)}function Ii(t,e){Ci++,Si[Ci]=t.current,t.current=e}var Oi={},wi=ki(Oi),Ai=ki(!1),Di=Oi;function Ni(t,e){var n=t.type.contextTypes;if(!n)return Oi;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var i,r={};for(i in n)r[i]=e[i];return o&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function xi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Mi(){Ri(Ai),Ri(wi)}function Li(t,e,n){if(wi.current!==Oi)throw Error(r(168));Ii(wi,e),Ii(Ai,n)}function Pi(t,e,n){var o=t.stateNode;if(e=e.childContextTypes,"function"!==typeof o.getChildContext)return n;for(var i in o=o.getChildContext())if(!(i in e))throw Error(r(108,W(t)||"Unknown",i));return B({},n,o)}function Bi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Oi,Di=wi.current,Ii(wi,t),Ii(Ai,Ai.current),!0}function Fi(t,e,n){var o=t.stateNode;if(!o)throw Error(r(169));n?(t=Pi(t,e,Di),o.__reactInternalMemoizedMergedChildContext=t,Ri(Ai),Ri(wi),Ii(wi,t)):Ri(Ai),Ii(Ai,n)}var Ui=null,Hi=!1,Gi=!1;function Vi(t){null===Ui?Ui=[t]:Ui.push(t)}function Wi(){if(!Gi&&null!==Ui){Gi=!0;var t=0,e=Te;try{var n=Ui;for(Te=1;t<n.length;t++){var o=n[t];do{o=o(!0)}while(null!==o)}Ui=null,Hi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(t+1)),Yt(Qt,Wi),i}finally{Te=e,Gi=!1}}return null}var ji=[],Xi=0,zi=null,Yi=0,Ji=[],Ki=0,qi=null,$i=1,Zi="";function Qi(t,e){ji[Xi++]=Yi,ji[Xi++]=zi,zi=t,Yi=e}function tr(t,e,n){Ji[Ki++]=$i,Ji[Ki++]=Zi,Ji[Ki++]=qi,qi=t;var o=$i;t=Zi;var i=32-se(o)-1;o&=~(1<<i),n+=1;var r=32-se(e)+i;if(30<r){var s=i-i%5;r=(o&(1<<s)-1).toString(32),o>>=s,i-=s,$i=1<<32-se(e)+i|n<<i|o,Zi=r+t}else $i=1<<r|n<<i|o,Zi=t}function er(t){null!==t.return&&(Qi(t,1),tr(t,1,0))}function nr(t){for(;t===zi;)zi=ji[--Xi],ji[Xi]=null,Yi=ji[--Xi],ji[Xi]=null;for(;t===qi;)qi=Ji[--Ki],Ji[Ki]=null,Zi=Ji[--Ki],Ji[Ki]=null,$i=Ji[--Ki],Ji[Ki]=null}var or=null,ir=null,rr=!1,sr=null;function ar(t,e){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function lr(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,or=t,ir=ui(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,or=t,ir=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==qi?{id:$i,overflow:Zi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=e,n.return=t,t.child=n,or=t,ir=null,!0);default:return!1}}function cr(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function ur(t){if(rr){var e=ir;if(e){var n=e;if(!lr(t,e)){if(cr(t))throw Error(r(418));e=ui(n.nextSibling);var o=or;e&&lr(t,e)?ar(o,n):(t.flags=-4097&t.flags|2,rr=!1,or=t)}}else{if(cr(t))throw Error(r(418));t.flags=-4097&t.flags|2,rr=!1,or=t}}}function pr(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;or=t}function hr(t){if(t!==or)return!1;if(!rr)return pr(t),rr=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!oi(t.type,t.memoizedProps)),e&&(e=ir)){if(cr(t))throw dr(),Error(r(418));for(;e;)ar(t,e),e=ui(e.nextSibling)}if(pr(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(r(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ir=ui(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ir=null}}else ir=or?ui(t.stateNode.nextSibling):null;return!0}function dr(){for(var t=ir;t;)t=ui(t.nextSibling)}function gr(){ir=or=null,rr=!1}function _r(t){null===sr?sr=[t]:sr.push(t)}var fr=b.ReactCurrentBatchConfig;function vr(t,e){if(t&&t.defaultProps){for(var n in e=B({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var mr=ki(null),Tr=null,br=null,Er=null;function yr(){Er=br=Tr=null}function Sr(t){var e=mr.current;Ri(mr),t._currentValue=e}function Cr(t,e,n){for(;null!==t;){var o=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==o&&(o.childLanes|=e)):null!==o&&(o.childLanes&e)!==e&&(o.childLanes|=e),t===n)break;t=t.return}}function kr(t,e){Tr=t,Er=br=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(ba=!0),t.firstContext=null)}function Rr(t){var e=t._currentValue;if(Er!==t)if(t={context:t,memoizedValue:e,next:null},null===br){if(null===Tr)throw Error(r(308));br=t,Tr.dependencies={lanes:0,firstContext:t}}else br=br.next=t;return e}var Ir=null;function Or(t){null===Ir?Ir=[t]:Ir.push(t)}function wr(t,e,n,o){var i=e.interleaved;return null===i?(n.next=n,Or(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ar(t,o)}function Ar(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Dr=!1;function Nr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xr(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var o=t.updateQueue;if(null===o)return null;if(o=o.shared,0!==(2&wl)){var i=o.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),o.pending=e,Ar(t,n)}return null===(i=o.interleaved)?(e.next=e,Or(o)):(e.next=i.next,i.next=e),o.interleaved=e,Ar(t,n)}function Pr(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var o=e.lanes;n|=o&=t.pendingLanes,e.lanes=n,me(t,n)}}function Br(t,e){var n=t.updateQueue,o=t.alternate;if(null!==o&&n===(o=o.updateQueue)){var i=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?i=r=s:r=r.next=s,n=n.next}while(null!==n);null===r?i=r=e:r=r.next=e}else i=r=e;return n={baseState:o.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:o.shared,effects:o.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fr(t,e,n,o){var i=t.updateQueue;Dr=!1;var r=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?r=c:s.next=c,s=l;var u=t.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==r){var p=i.baseState;for(s=0,u=c=l=null,a=r;;){var h=a.lane,d=a.eventTime;if((o&h)===h){null!==u&&(u=u.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var g=t,_=a;switch(h=e,d=n,_.tag){case 1:if("function"===typeof(g=_.payload)){p=g.call(d,p,h);break t}p=g;break t;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(h="function"===typeof(g=_.payload)?g.call(d,p,h):g)||void 0===h)break t;p=B({},p,h);break t;case 2:Dr=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else d={eventTime:d,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=d,l=p):u=u.next=d,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(e=i.shared.interleaved)){i=e;do{s|=i.lane,i=i.next}while(i!==e)}else null===r&&(i.shared.lanes=0);Bl|=s,t.lanes=s,t.memoizedState=p}}function Ur(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var o=t[e],i=o.callback;if(null!==i){if(o.callback=null,o=n,"function"!==typeof i)throw Error(r(191,i));i.call(o)}}}var Hr=(new o.Component).refs;function Gr(t,e,n,o){n=null===(n=n(o,e=t.memoizedState))||void 0===n?e:B({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Vr={isMounted:function(t){return!!(t=t._reactInternals)&&Vt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var o=ec(),i=nc(t),r=Mr(o,i);r.payload=e,void 0!==n&&null!==n&&(r.callback=n),null!==(e=Lr(t,r,i))&&(oc(e,t,i,o),Pr(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var o=ec(),i=nc(t),r=Mr(o,i);r.tag=1,r.payload=e,void 0!==n&&null!==n&&(r.callback=n),null!==(e=Lr(t,r,i))&&(oc(e,t,i,o),Pr(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ec(),o=nc(t),i=Mr(n,o);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=Lr(t,i,o))&&(oc(e,t,o,n),Pr(e,t,o))}};function Wr(t,e,n,o,i,r,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(o,r,s):!e.prototype||!e.prototype.isPureReactComponent||(!lo(n,o)||!lo(i,r))}function jr(t,e,n){var o=!1,i=Oi,r=e.contextType;return"object"===typeof r&&null!==r?r=Rr(r):(i=xi(e)?Di:wi.current,r=(o=null!==(o=e.contextTypes)&&void 0!==o)?Ni(t,i):Oi),e=new e(n,r),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Vr,t.stateNode=e,e._reactInternals=t,o&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=r),e}function Xr(t,e,n,o){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,o),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,o),e.state!==t&&Vr.enqueueReplaceState(e,e.state,null)}function zr(t,e,n,o){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Hr,Nr(t);var r=e.contextType;"object"===typeof r&&null!==r?i.context=Rr(r):(r=xi(e)?Di:wi.current,i.context=Ni(t,r)),i.state=t.memoizedState,"function"===typeof(r=e.getDerivedStateFromProps)&&(Gr(t,e,r,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Vr.enqueueReplaceState(i,i.state,null),Fr(t,n,i,o),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function Yr(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var o=n.stateNode}if(!o)throw Error(r(147,t));var i=o,s=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===s?e.ref:(e=function(t){var e=i.refs;e===Hr&&(e=i.refs={}),null===t?delete e[s]:e[s]=t},e._stringRef=s,e)}if("string"!==typeof t)throw Error(r(284));if(!n._owner)throw Error(r(290,t))}return t}function Jr(t,e){throw t=Object.prototype.toString.call(e),Error(r(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Kr(t){return(0,t._init)(t._payload)}function qr(t){function e(e,n){if(t){var o=e.deletions;null===o?(e.deletions=[n],e.flags|=16):o.push(n)}}function n(n,o){if(!t)return null;for(;null!==o;)e(n,o),o=o.sibling;return null}function o(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Mc(t,e)).index=0,t.sibling=null,t}function s(e,n,o){return e.index=o,t?null!==(o=e.alternate)?(o=o.index)<n?(e.flags|=2,n):o:(e.flags|=2,n):(e.flags|=1048576,n)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,o){return null===e||6!==e.tag?((e=Fc(n,t.mode,o)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,o){var r=n.type;return r===S?p(t,e,n.props.children,o,n.key):null!==e&&(e.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===N&&Kr(r)===e.type)?((o=i(e,n.props)).ref=Yr(t,e,n),o.return=t,o):((o=Lc(n.type,n.key,n.props,null,t.mode,o)).ref=Yr(t,e,n),o.return=t,o)}function u(t,e,n,o){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Uc(n,t.mode,o)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function p(t,e,n,o,r){return null===e||7!==e.tag?((e=Pc(n,t.mode,o,r)).return=t,e):((e=i(e,n)).return=t,e)}function h(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Fc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case E:return(n=Lc(e.type,e.key,e.props,null,t.mode,n)).ref=Yr(t,null,e),n.return=t,n;case y:return(e=Uc(e,t.mode,n)).return=t,e;case N:return h(t,(0,e._init)(e._payload),n)}if(et(e)||L(e))return(e=Pc(e,t.mode,n,null)).return=t,e;Jr(t,e)}return null}function d(t,e,n,o){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(t,e,""+n,o);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?c(t,e,n,o):null;case y:return n.key===i?u(t,e,n,o):null;case N:return d(t,e,(i=n._init)(n._payload),o)}if(et(n)||L(n))return null!==i?null:p(t,e,n,o,null);Jr(t,n)}return null}function g(t,e,n,o,i){if("string"===typeof o&&""!==o||"number"===typeof o)return l(e,t=t.get(n)||null,""+o,i);if("object"===typeof o&&null!==o){switch(o.$$typeof){case E:return c(e,t=t.get(null===o.key?n:o.key)||null,o,i);case y:return u(e,t=t.get(null===o.key?n:o.key)||null,o,i);case N:return g(t,e,n,(0,o._init)(o._payload),i)}if(et(o)||L(o))return p(e,t=t.get(n)||null,o,i,null);Jr(e,o)}return null}function _(i,r,a,l){for(var c=null,u=null,p=r,_=r=0,f=null;null!==p&&_<a.length;_++){p.index>_?(f=p,p=null):f=p.sibling;var v=d(i,p,a[_],l);if(null===v){null===p&&(p=f);break}t&&p&&null===v.alternate&&e(i,p),r=s(v,r,_),null===u?c=v:u.sibling=v,u=v,p=f}if(_===a.length)return n(i,p),rr&&Qi(i,_),c;if(null===p){for(;_<a.length;_++)null!==(p=h(i,a[_],l))&&(r=s(p,r,_),null===u?c=p:u.sibling=p,u=p);return rr&&Qi(i,_),c}for(p=o(i,p);_<a.length;_++)null!==(f=g(p,i,_,a[_],l))&&(t&&null!==f.alternate&&p.delete(null===f.key?_:f.key),r=s(f,r,_),null===u?c=f:u.sibling=f,u=f);return t&&p.forEach((function(t){return e(i,t)})),rr&&Qi(i,_),c}function f(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(r(150));if(null==(l=u.call(l)))throw Error(r(151));for(var p=u=null,_=a,f=a=0,v=null,m=l.next();null!==_&&!m.done;f++,m=l.next()){_.index>f?(v=_,_=null):v=_.sibling;var T=d(i,_,m.value,c);if(null===T){null===_&&(_=v);break}t&&_&&null===T.alternate&&e(i,_),a=s(T,a,f),null===p?u=T:p.sibling=T,p=T,_=v}if(m.done)return n(i,_),rr&&Qi(i,f),u;if(null===_){for(;!m.done;f++,m=l.next())null!==(m=h(i,m.value,c))&&(a=s(m,a,f),null===p?u=m:p.sibling=m,p=m);return rr&&Qi(i,f),u}for(_=o(i,_);!m.done;f++,m=l.next())null!==(m=g(_,i,f,m.value,c))&&(t&&null!==m.alternate&&_.delete(null===m.key?f:m.key),a=s(m,a,f),null===p?u=m:p.sibling=m,p=m);return t&&_.forEach((function(t){return e(i,t)})),rr&&Qi(i,f),u}return function t(o,r,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case E:t:{for(var c=s.key,u=r;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(o,u.sibling),(r=i(u,s.props.children)).return=o,o=r;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===N&&Kr(c)===u.type){n(o,u.sibling),(r=i(u,s.props)).ref=Yr(o,u,s),r.return=o,o=r;break t}n(o,u);break}e(o,u),u=u.sibling}s.type===S?((r=Pc(s.props.children,o.mode,l,s.key)).return=o,o=r):((l=Lc(s.type,s.key,s.props,null,o.mode,l)).ref=Yr(o,r,s),l.return=o,o=l)}return a(o);case y:t:{for(u=s.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(o,r.sibling),(r=i(r,s.children||[])).return=o,o=r;break t}n(o,r);break}e(o,r),r=r.sibling}(r=Uc(s,o.mode,l)).return=o,o=r}return a(o);case N:return t(o,r,(u=s._init)(s._payload),l)}if(et(s))return _(o,r,s,l);if(L(s))return f(o,r,s,l);Jr(o,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==r&&6===r.tag?(n(o,r.sibling),(r=i(r,s)).return=o,o=r):(n(o,r),(r=Fc(s,o.mode,l)).return=o,o=r),a(o)):n(o,r)}}var $r=qr(!0),Zr=qr(!1),Qr={},ts=ki(Qr),es=ki(Qr),ns=ki(Qr);function os(t){if(t===Qr)throw Error(r(174));return t}function is(t,e){switch(Ii(ns,e),Ii(es,t),Ii(ts,Qr),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ri(ts),Ii(ts,e)}function rs(){Ri(ts),Ri(es),Ri(ns)}function ss(t){os(ns.current);var e=os(ts.current),n=lt(e,t.type);e!==n&&(Ii(es,t),Ii(ts,n))}function as(t){es.current===t&&(Ri(ts),Ri(es))}var ls=ki(0);function cs(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var us=[];function ps(){for(var t=0;t<us.length;t++)us[t]._workInProgressVersionPrimary=null;us.length=0}var hs=b.ReactCurrentDispatcher,ds=b.ReactCurrentBatchConfig,gs=0,_s=null,fs=null,vs=null,ms=!1,Ts=!1,bs=0,Es=0;function ys(){throw Error(r(321))}function Ss(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ao(t[n],e[n]))return!1;return!0}function Cs(t,e,n,o,i,s){if(gs=s,_s=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hs.current=null===t||null===t.memoizedState?aa:la,t=n(o,i),Ts){s=0;do{if(Ts=!1,bs=0,25<=s)throw Error(r(301));s+=1,vs=fs=null,e.updateQueue=null,hs.current=ca,t=n(o,i)}while(Ts)}if(hs.current=sa,e=null!==fs&&null!==fs.next,gs=0,vs=fs=_s=null,ms=!1,e)throw Error(r(300));return t}function ks(){var t=0!==bs;return bs=0,t}function Rs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vs?_s.memoizedState=vs=t:vs=vs.next=t,vs}function Is(){if(null===fs){var t=_s.alternate;t=null!==t?t.memoizedState:null}else t=fs.next;var e=null===vs?_s.memoizedState:vs.next;if(null!==e)vs=e,fs=t;else{if(null===t)throw Error(r(310));t={memoizedState:(fs=t).memoizedState,baseState:fs.baseState,baseQueue:fs.baseQueue,queue:fs.queue,next:null},null===vs?_s.memoizedState=vs=t:vs=vs.next=t}return vs}function Os(t,e){return"function"===typeof e?e(t):e}function ws(t){var e=Is(),n=e.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=t;var o=fs,i=o.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}o.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,o=o.baseState;var l=a=null,c=null,u=s;do{var p=u.lane;if((gs&p)===p)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),o=u.hasEagerState?u.eagerState:t(o,u.action);else{var h={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=o):c=c.next=h,_s.lanes|=p,Bl|=p}u=u.next}while(null!==u&&u!==s);null===c?a=o:c.next=l,ao(o,e.memoizedState)||(ba=!0),e.memoizedState=o,e.baseState=a,e.baseQueue=c,n.lastRenderedState=o}if(null!==(t=n.interleaved)){i=t;do{s=i.lane,_s.lanes|=s,Bl|=s,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function As(t){var e=Is(),n=e.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=t;var o=n.dispatch,i=n.pending,s=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=t(s,a.action),a=a.next}while(a!==i);ao(s,e.memoizedState)||(ba=!0),e.memoizedState=s,null===e.baseQueue&&(e.baseState=s),n.lastRenderedState=s}return[s,o]}function Ds(){}function Ns(t,e){var n=_s,o=Is(),i=e(),s=!ao(o.memoizedState,i);if(s&&(o.memoizedState=i,ba=!0),o=o.queue,js(Ls.bind(null,n,o,t),[t]),o.getSnapshot!==e||s||null!==vs&&1&vs.memoizedState.tag){if(n.flags|=2048,Us(9,Ms.bind(null,n,o,i,e),void 0,null),null===Al)throw Error(r(349));0!==(30&gs)||xs(n,e,i)}return i}function xs(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=_s.updateQueue)?(e={lastEffect:null,stores:null},_s.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ms(t,e,n,o){e.value=n,e.getSnapshot=o,Ps(e)&&Bs(t)}function Ls(t,e,n){return n((function(){Ps(e)&&Bs(t)}))}function Ps(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ao(t,n)}catch(o){return!0}}function Bs(t){var e=Ar(t,1);null!==e&&oc(e,t,1,-1)}function Fs(t){var e=Rs();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:t},e.queue=t,t=t.dispatch=na.bind(null,_s,t),[e.memoizedState,t]}function Us(t,e,n,o){return t={tag:t,create:e,destroy:n,deps:o,next:null},null===(e=_s.updateQueue)?(e={lastEffect:null,stores:null},_s.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(o=n.next,n.next=t,t.next=o,e.lastEffect=t),t}function Hs(){return Is().memoizedState}function Gs(t,e,n,o){var i=Rs();_s.flags|=t,i.memoizedState=Us(1|e,n,void 0,void 0===o?null:o)}function Vs(t,e,n,o){var i=Is();o=void 0===o?null:o;var r=void 0;if(null!==fs){var s=fs.memoizedState;if(r=s.destroy,null!==o&&Ss(o,s.deps))return void(i.memoizedState=Us(e,n,r,o))}_s.flags|=t,i.memoizedState=Us(1|e,n,r,o)}function Ws(t,e){return Gs(8390656,8,t,e)}function js(t,e){return Vs(2048,8,t,e)}function Xs(t,e){return Vs(4,2,t,e)}function zs(t,e){return Vs(4,4,t,e)}function Ys(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Js(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Vs(4,4,Ys.bind(null,e,t),n)}function Ks(){}function qs(t,e){var n=Is();e=void 0===e?null:e;var o=n.memoizedState;return null!==o&&null!==e&&Ss(e,o[1])?o[0]:(n.memoizedState=[t,e],t)}function $s(t,e){var n=Is();e=void 0===e?null:e;var o=n.memoizedState;return null!==o&&null!==e&&Ss(e,o[1])?o[0]:(t=t(),n.memoizedState=[t,e],t)}function Zs(t,e,n){return 0===(21&gs)?(t.baseState&&(t.baseState=!1,ba=!0),t.memoizedState=n):(ao(n,e)||(n=_e(),_s.lanes|=n,Bl|=n,t.baseState=!0),e)}function Qs(t,e){var n=Te;Te=0!==n&&4>n?n:4,t(!0);var o=ds.transition;ds.transition={};try{t(!1),e()}finally{Te=n,ds.transition=o}}function ta(){return Is().memoizedState}function ea(t,e,n){var o=nc(t);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},oa(t))ia(e,n);else if(null!==(n=wr(t,e,n,o))){oc(n,t,o,ec()),ra(n,e,o)}}function na(t,e,n){var o=nc(t),i={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(oa(t))ia(e,i);else{var r=t.alternate;if(0===t.lanes&&(null===r||0===r.lanes)&&null!==(r=e.lastRenderedReducer))try{var s=e.lastRenderedState,a=r(s,n);if(i.hasEagerState=!0,i.eagerState=a,ao(a,s)){var l=e.interleaved;return null===l?(i.next=i,Or(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(c){}null!==(n=wr(t,e,i,o))&&(oc(n,t,o,i=ec()),ra(n,e,o))}}function oa(t){var e=t.alternate;return t===_s||null!==e&&e===_s}function ia(t,e){Ts=ms=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ra(t,e,n){if(0!==(4194240&n)){var o=e.lanes;n|=o&=t.pendingLanes,e.lanes=n,me(t,n)}}var sa={readContext:Rr,useCallback:ys,useContext:ys,useEffect:ys,useImperativeHandle:ys,useInsertionEffect:ys,useLayoutEffect:ys,useMemo:ys,useReducer:ys,useRef:ys,useState:ys,useDebugValue:ys,useDeferredValue:ys,useTransition:ys,useMutableSource:ys,useSyncExternalStore:ys,useId:ys,unstable_isNewReconciler:!1},aa={readContext:Rr,useCallback:function(t,e){return Rs().memoizedState=[t,void 0===e?null:e],t},useContext:Rr,useEffect:Ws,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Gs(4194308,4,Ys.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Gs(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gs(4,2,t,e)},useMemo:function(t,e){var n=Rs();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var o=Rs();return e=void 0!==n?n(e):e,o.memoizedState=o.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},o.queue=t,t=t.dispatch=ea.bind(null,_s,t),[o.memoizedState,t]},useRef:function(t){return t={current:t},Rs().memoizedState=t},useState:Fs,useDebugValue:Ks,useDeferredValue:function(t){return Rs().memoizedState=t},useTransition:function(){var t=Fs(!1),e=t[0];return t=Qs.bind(null,t[1]),Rs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var o=_s,i=Rs();if(rr){if(void 0===n)throw Error(r(407));n=n()}else{if(n=e(),null===Al)throw Error(r(349));0!==(30&gs)||xs(o,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ws(Ls.bind(null,o,s,t),[t]),o.flags|=2048,Us(9,Ms.bind(null,o,s,n,e),void 0,null),n},useId:function(){var t=Rs(),e=Al.identifierPrefix;if(rr){var n=Zi;e=":"+e+"R"+(n=($i&~(1<<32-se($i)-1)).toString(32)+n),0<(n=bs++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=Es++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},la={readContext:Rr,useCallback:qs,useContext:Rr,useEffect:js,useImperativeHandle:Js,useInsertionEffect:Xs,useLayoutEffect:zs,useMemo:$s,useReducer:ws,useRef:Hs,useState:function(){return ws(Os)},useDebugValue:Ks,useDeferredValue:function(t){return Zs(Is(),fs.memoizedState,t)},useTransition:function(){return[ws(Os)[0],Is().memoizedState]},useMutableSource:Ds,useSyncExternalStore:Ns,useId:ta,unstable_isNewReconciler:!1},ca={readContext:Rr,useCallback:qs,useContext:Rr,useEffect:js,useImperativeHandle:Js,useInsertionEffect:Xs,useLayoutEffect:zs,useMemo:$s,useReducer:As,useRef:Hs,useState:function(){return As(Os)},useDebugValue:Ks,useDeferredValue:function(t){var e=Is();return null===fs?e.memoizedState=t:Zs(e,fs.memoizedState,t)},useTransition:function(){return[As(Os)[0],Is().memoizedState]},useMutableSource:Ds,useSyncExternalStore:Ns,useId:ta,unstable_isNewReconciler:!1};function ua(t,e){try{var n="",o=e;do{n+=G(o),o=o.return}while(o);var i=n}catch(r){i="\nError generating stack: "+r.message+"\n"+r.stack}return{value:t,source:e,stack:i,digest:null}}function pa(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function ha(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function ga(t,e,n){(n=Mr(-1,n)).tag=3,n.payload={element:null};var o=e.value;return n.callback=function(){Xl||(Xl=!0,zl=o),ha(0,e)},n}function _a(t,e,n){(n=Mr(-1,n)).tag=3;var o=t.type.getDerivedStateFromError;if("function"===typeof o){var i=e.value;n.payload=function(){return o(i)},n.callback=function(){ha(0,e)}}var r=t.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){ha(0,e),"function"!==typeof o&&(null===Yl?Yl=new Set([this]):Yl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function fa(t,e,n){var o=t.pingCache;if(null===o){o=t.pingCache=new da;var i=new Set;o.set(e,i)}else void 0===(i=o.get(e))&&(i=new Set,o.set(e,i));i.has(n)||(i.add(n),t=Rc.bind(null,t,e,n),e.then(t,t))}function va(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ma(t,e,n,o,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Mr(-1,1)).tag=2,Lr(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var Ta=b.ReactCurrentOwner,ba=!1;function Ea(t,e,n,o){e.child=null===t?Zr(e,null,n,o):$r(e,t.child,n,o)}function ya(t,e,n,o,i){n=n.render;var r=e.ref;return kr(e,i),o=Cs(t,e,n,o,r,i),n=ks(),null===t||ba?(rr&&n&&er(e),e.flags|=1,Ea(t,e,o,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xa(t,e,i))}function Sa(t,e,n,o,i){if(null===t){var r=n.type;return"function"!==typeof r||xc(r)||void 0!==r.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Lc(n.type,null,o,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=r,Ca(t,e,r,o,i))}if(r=t.child,0===(t.lanes&i)){var s=r.memoizedProps;if((n=null!==(n=n.compare)?n:lo)(s,o)&&t.ref===e.ref)return Xa(t,e,i)}return e.flags|=1,(t=Mc(r,o)).ref=e.ref,t.return=e,e.child=t}function Ca(t,e,n,o,i){if(null!==t){var r=t.memoizedProps;if(lo(r,o)&&t.ref===e.ref){if(ba=!1,e.pendingProps=o=r,0===(t.lanes&i))return e.lanes=t.lanes,Xa(t,e,i);0!==(131072&t.flags)&&(ba=!0)}}return Ia(t,e,n,o,i)}function ka(t,e,n){var o=e.pendingProps,i=o.children,r=null!==t?t.memoizedState:null;if("hidden"===o.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Ml,xl),xl|=n;else{if(0===(1073741824&n))return t=null!==r?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ii(Ml,xl),xl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=null!==r?r.baseLanes:n,Ii(Ml,xl),xl|=o}else null!==r?(o=r.baseLanes|n,e.memoizedState=null):o=n,Ii(Ml,xl),xl|=o;return Ea(t,e,i,n),e.child}function Ra(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ia(t,e,n,o,i){var r=xi(n)?Di:wi.current;return r=Ni(e,r),kr(e,i),n=Cs(t,e,n,o,r,i),o=ks(),null===t||ba?(rr&&o&&er(e),e.flags|=1,Ea(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xa(t,e,i))}function Oa(t,e,n,o,i){if(xi(n)){var r=!0;Bi(e)}else r=!1;if(kr(e,i),null===e.stateNode)ja(t,e),jr(e,n,o),zr(e,n,o,i),o=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Rr(c):c=Ni(e,c=xi(n)?Di:wi.current);var u=n.getDerivedStateFromProps,p="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;p||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==o||l!==c)&&Xr(e,s,o,c),Dr=!1;var h=e.memoizedState;s.state=h,Fr(e,o,s,i),l=e.memoizedState,a!==o||h!==l||Ai.current||Dr?("function"===typeof u&&(Gr(e,n,u,o),l=e.memoizedState),(a=Dr||Wr(e,n,a,o,h,l,c))?(p||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4194308)):("function"===typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=l),s.props=o,s.state=l,s.context=c,o=a):("function"===typeof s.componentDidMount&&(e.flags|=4194308),o=!1)}else{s=e.stateNode,xr(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:vr(e.type,a),s.props=c,p=e.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Rr(l):l=Ni(e,l=xi(n)?Di:wi.current);var d=n.getDerivedStateFromProps;(u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==p||h!==l)&&Xr(e,s,o,l),Dr=!1,h=e.memoizedState,s.state=h,Fr(e,o,s,i);var g=e.memoizedState;a!==p||h!==g||Ai.current||Dr?("function"===typeof d&&(Gr(e,n,d,o),g=e.memoizedState),(c=Dr||Wr(e,n,c,o,h,g,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(o,g,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(o,g,l)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=g),s.props=o,s.state=g,s.context=l,o=c):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),o=!1)}return wa(t,e,n,o,r,i)}function wa(t,e,n,o,i,r){Ra(t,e);var s=0!==(128&e.flags);if(!o&&!s)return i&&Fi(e,n,!1),Xa(t,e,r);o=e.stateNode,Ta.current=e;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:o.render();return e.flags|=1,null!==t&&s?(e.child=$r(e,t.child,null,r),e.child=$r(e,null,a,r)):Ea(t,e,a,r),e.memoizedState=o.state,i&&Fi(e,n,!0),e.child}function Aa(t){var e=t.stateNode;e.pendingContext?Li(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Li(0,e.context,!1),is(t,e.containerInfo)}function Da(t,e,n,o,i){return gr(),_r(i),e.flags|=256,Ea(t,e,n,o),e.child}var Na,xa,Ma,La,Pa={dehydrated:null,treeContext:null,retryLane:0};function Ba(t){return{baseLanes:t,cachePool:null,transitions:null}}function Fa(t,e,n){var o,i=e.pendingProps,s=ls.current,a=!1,l=0!==(128&e.flags);if((o=l)||(o=(null===t||null!==t.memoizedState)&&0!==(2&s)),o?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(s|=1),Ii(ls,1&s),null===t)return ur(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,a?(i=e.mode,a=e.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Bc(l,i,0,null),t=Pc(t,i,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Ba(n),e.memoizedState=Pa,t):Ua(e,l));if(null!==(s=t.memoizedState)&&null!==(o=s.dehydrated))return function(t,e,n,o,i,s,a){if(n)return 256&e.flags?(e.flags&=-257,Ha(t,e,a,o=pa(Error(r(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(s=o.fallback,i=e.mode,o=Bc({mode:"visible",children:o.children},i,0,null),(s=Pc(s,i,a,null)).flags|=2,o.return=e,s.return=e,o.sibling=s,e.child=o,0!==(1&e.mode)&&$r(e,t.child,null,a),e.child.memoizedState=Ba(a),e.memoizedState=Pa,s);if(0===(1&e.mode))return Ha(t,e,a,null);if("$!"===i.data){if(o=i.nextSibling&&i.nextSibling.dataset)var l=o.dgst;return o=l,Ha(t,e,a,o=pa(s=Error(r(419)),o,void 0))}if(l=0!==(a&t.childLanes),ba||l){if(null!==(o=Al)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(o.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Ar(t,i),oc(o,t,i,-1))}return fc(),Ha(t,e,a,o=pa(Error(r(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Oc.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ir=ui(i.nextSibling),or=e,rr=!0,sr=null,null!==t&&(Ji[Ki++]=$i,Ji[Ki++]=Zi,Ji[Ki++]=qi,$i=t.id,Zi=t.overflow,qi=e),e=Ua(e,o.children),e.flags|=4096,e)}(t,e,l,i,o,s,n);if(a){a=i.fallback,l=e.mode,o=(s=t.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&e.child!==s?((i=e.child).childLanes=0,i.pendingProps=c,e.deletions=null):(i=Mc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==o?a=Mc(o,a):(a=Pc(a,l,n,null)).flags|=2,a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,l=null===(l=t.child.memoizedState)?Ba(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=Pa,i}return t=(a=t.child).sibling,i=Mc(a,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ua(t,e){return(e=Bc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Ha(t,e,n,o){return null!==o&&_r(o),$r(e,t.child,null,n),(t=Ua(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Ga(t,e,n){t.lanes|=e;var o=t.alternate;null!==o&&(o.lanes|=e),Cr(t.return,e,n)}function Va(t,e,n,o,i){var r=t.memoizedState;null===r?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=o,r.tail=n,r.tailMode=i)}function Wa(t,e,n){var o=e.pendingProps,i=o.revealOrder,r=o.tail;if(Ea(t,e,o.children,n),0!==(2&(o=ls.current)))o=1&o|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ga(t,n,e);else if(19===t.tag)Ga(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(Ii(ls,o),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===cs(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Va(e,!1,i,n,r);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===cs(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Va(e,!0,n,null,r);break;case"together":Va(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ja(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xa(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Bl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(r(153));if(null!==e.child){for(n=Mc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Mc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function za(t,e){if(!rr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var o=null;null!==n;)null!==n.alternate&&(o=n),n=n.sibling;null===o?e||null===t.tail?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Ya(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,o=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,o|=14680064&i.subtreeFlags,o|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,o|=i.subtreeFlags,o|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=o,t.childLanes=n,e}function Ja(t,e,n){var o=e.pendingProps;switch(nr(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(e),null;case 1:case 17:return xi(e.type)&&Mi(),Ya(e),null;case 3:return o=e.stateNode,rs(),Ri(Ai),Ri(wi),ps(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),null!==t&&null!==t.child||(hr(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==sr&&(ac(sr),sr=null))),xa(t,e),Ya(e),null;case 5:as(e);var i=os(ns.current);if(n=e.type,null!==t&&null!=e.stateNode)Ma(t,e,n,o,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!o){if(null===e.stateNode)throw Error(r(166));return Ya(e),null}if(t=os(ts.current),hr(e)){o=e.stateNode,n=e.type;var s=e.memoizedProps;switch(o[di]=e,o[gi]=s,t=0!==(1&e.mode),n){case"dialog":Ho("cancel",o),Ho("close",o);break;case"iframe":case"object":case"embed":Ho("load",o);break;case"video":case"audio":for(i=0;i<Po.length;i++)Ho(Po[i],o);break;case"source":Ho("error",o);break;case"img":case"image":case"link":Ho("error",o),Ho("load",o);break;case"details":Ho("toggle",o);break;case"input":q(o,s),Ho("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!s.multiple},Ho("invalid",o);break;case"textarea":it(o,s),Ho("invalid",o)}for(var l in mt(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?o.textContent!==c&&(!0!==s.suppressHydrationWarning&&Qo(o.textContent,c,t),i=["children",c]):"number"===typeof c&&o.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Qo(o.textContent,c,t),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ho("scroll",o)}switch(n){case"input":z(o),Q(o,s,!0);break;case"textarea":z(o),st(o);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(o.onclick=ti)}o=i,e.updateQueue=o,null!==o&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof o.is?t=l.createElement(n,{is:o.is}):(t=l.createElement(n),"select"===n&&(l=t,o.multiple?l.multiple=!0:o.size&&(l.size=o.size))):t=l.createElementNS(t,n),t[di]=e,t[gi]=o,Na(t,e,!1,!1),e.stateNode=t;t:{switch(l=Tt(n,o),n){case"dialog":Ho("cancel",t),Ho("close",t),i=o;break;case"iframe":case"object":case"embed":Ho("load",t),i=o;break;case"video":case"audio":for(i=0;i<Po.length;i++)Ho(Po[i],t);i=o;break;case"source":Ho("error",t),i=o;break;case"img":case"image":case"link":Ho("error",t),Ho("load",t),i=o;break;case"details":Ho("toggle",t),i=o;break;case"input":q(t,o),i=K(t,o),Ho("invalid",t);break;case"option":default:i=o;break;case"select":t._wrapperState={wasMultiple:!!o.multiple},i=B({},o,{value:void 0}),Ho("invalid",t);break;case"textarea":it(t,o),i=ot(t,o),Ho("invalid",t)}for(s in mt(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ft(t,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&pt(t,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&ht(t,u):"number"===typeof u&&ht(t,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Ho("scroll",t):null!=u&&T(t,s,u,l))}switch(n){case"input":z(t),Q(t,o,!1);break;case"textarea":z(t),st(t);break;case"option":null!=o.value&&t.setAttribute("value",""+j(o.value));break;case"select":t.multiple=!!o.multiple,null!=(s=o.value)?nt(t,!!o.multiple,s,!1):null!=o.defaultValue&&nt(t,!!o.multiple,o.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=ti)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}}o&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Ya(e),null;case 6:if(t&&null!=e.stateNode)La(t,e,t.memoizedProps,o);else{if("string"!==typeof o&&null===e.stateNode)throw Error(r(166));if(n=os(ns.current),os(ts.current),hr(e)){if(o=e.stateNode,n=e.memoizedProps,o[di]=e,(s=o.nodeValue!==n)&&null!==(t=or))switch(t.tag){case 3:Qo(o.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Qo(o.nodeValue,n,0!==(1&t.mode))}s&&(e.flags|=4)}else(o=(9===n.nodeType?n:n.ownerDocument).createTextNode(o))[di]=e,e.stateNode=o}return Ya(e),null;case 13:if(Ri(ls),o=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(rr&&null!==ir&&0!==(1&e.mode)&&0===(128&e.flags))dr(),gr(),e.flags|=98560,s=!1;else if(s=hr(e),null!==o&&null!==o.dehydrated){if(null===t){if(!s)throw Error(r(318));if(!(s=null!==(s=e.memoizedState)?s.dehydrated:null))throw Error(r(317));s[di]=e}else gr(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Ya(e),s=!1}else null!==sr&&(ac(sr),sr=null),s=!0;if(!s)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((o=null!==o)!==(null!==t&&null!==t.memoizedState)&&o&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ls.current)?0===Ll&&(Ll=3):fc())),null!==e.updateQueue&&(e.flags|=4),Ya(e),null);case 4:return rs(),xa(t,e),null===t&&Wo(e.stateNode.containerInfo),Ya(e),null;case 10:return Sr(e.type._context),Ya(e),null;case 19:if(Ri(ls),null===(s=e.memoizedState))return Ya(e),null;if(o=0!==(128&e.flags),null===(l=s.rendering))if(o)za(s,!1);else{if(0!==Ll||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=cs(t))){for(e.flags|=128,za(s,!1),null!==(o=l.updateQueue)&&(e.updateQueue=o,e.flags|=4),e.subtreeFlags=0,o=n,n=e.child;null!==n;)t=o,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ii(ls,1&ls.current|2),e.child}t=t.sibling}null!==s.tail&&$t()>Wl&&(e.flags|=128,o=!0,za(s,!1),e.lanes=4194304)}else{if(!o)if(null!==(t=cs(l))){if(e.flags|=128,o=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),za(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!rr)return Ya(e),null}else 2*$t()-s.renderingStartTime>Wl&&1073741824!==n&&(e.flags|=128,o=!0,za(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=s.last)?n.sibling=l:e.child=l,s.last=l)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$t(),e.sibling=null,n=ls.current,Ii(ls,o?1&n|2:1&n),e):(Ya(e),null);case 22:case 23:return hc(),o=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==o&&(e.flags|=8192),o&&0!==(1&e.mode)?0!==(1073741824&xl)&&(Ya(e),6&e.subtreeFlags&&(e.flags|=8192)):Ya(e),null;case 24:case 25:return null}throw Error(r(156,e.tag))}function Ka(t,e){switch(nr(e),e.tag){case 1:return xi(e.type)&&Mi(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return rs(),Ri(Ai),Ri(wi),ps(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return as(e),null;case 13:if(Ri(ls),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(r(340));gr()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ri(ls),null;case 4:return rs(),null;case 10:return Sr(e.type._context),null;case 22:case 23:return hc(),null;default:return null}}Na=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},xa=function(){},Ma=function(t,e,n,o){var i=t.memoizedProps;if(i!==o){t=e.stateNode,os(ts.current);var r,s=null;switch(n){case"input":i=K(t,i),o=K(t,o),s=[];break;case"select":i=B({},i,{value:void 0}),o=B({},o,{value:void 0}),s=[];break;case"textarea":i=ot(t,i),o=ot(t,o),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof o.onClick&&(t.onclick=ti)}for(u in mt(n,o),n=null,i)if(!o.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(r in l)l.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in o){var c=o[u];if(l=null!=i?i[u]:void 0,o.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(r in l)!l.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in c)c.hasOwnProperty(r)&&l[r]!==c[r]&&(n||(n={}),n[r]=c[r])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ho("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}},La=function(t,e,n,o){n!==o&&(e.flags|=4)};var qa=!1,$a=!1,Za="function"===typeof WeakSet?WeakSet:Set,Qa=null;function tl(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(o){kc(t,e,o)}else n.current=null}function el(t,e,n){try{n()}catch(o){kc(t,e,o)}}var nl=!1;function ol(t,e,n){var o=e.updateQueue;if(null!==(o=null!==o?o.lastEffect:null)){var i=o=o.next;do{if((i.tag&t)===t){var r=i.destroy;i.destroy=void 0,void 0!==r&&el(e,n,r)}i=i.next}while(i!==o)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var o=n.create;n.destroy=o()}n=n.next}while(n!==e)}}function rl(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function sl(t){var e=t.alternate;null!==e&&(t.alternate=null,sl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[di],delete e[gi],delete e[fi],delete e[vi],delete e[mi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function cl(t,e,n){var o=t.tag;if(5===o||6===o)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=ti));else if(4!==o&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}function ul(t,e,n){var o=t.tag;if(5===o||6===o)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==o&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}var pl=null,hl=!1;function dl(t,e,n){for(n=n.child;null!==n;)gl(t,e,n),n=n.sibling}function gl(t,e,n){if(re&&"function"===typeof re.onCommitFiberUnmount)try{re.onCommitFiberUnmount(ie,n)}catch(a){}switch(n.tag){case 5:$a||tl(n,e);case 6:var o=pl,i=hl;pl=null,dl(t,e,n),hl=i,null!==(pl=o)&&(hl?(t=pl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):pl.removeChild(n.stateNode));break;case 18:null!==pl&&(hl?(t=pl,n=n.stateNode,8===t.nodeType?ci(t.parentNode,n):1===t.nodeType&&ci(t,n),Ve(t)):ci(pl,n.stateNode));break;case 4:o=pl,i=hl,pl=n.stateNode.containerInfo,hl=!0,dl(t,e,n),pl=o,hl=i;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(o=n.updateQueue)&&null!==(o=o.lastEffect))){i=o=o.next;do{var r=i,s=r.destroy;r=r.tag,void 0!==s&&(0!==(2&r)||0!==(4&r))&&el(n,e,s),i=i.next}while(i!==o)}dl(t,e,n);break;case 1:if(!$a&&(tl(n,e),"function"===typeof(o=n.stateNode).componentWillUnmount))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(a){kc(n,e,a)}dl(t,e,n);break;case 21:dl(t,e,n);break;case 22:1&n.mode?($a=(o=$a)||null!==n.memoizedState,dl(t,e,n),$a=o):dl(t,e,n);break;default:dl(t,e,n)}}function _l(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Za),e.forEach((function(e){var o=wc.bind(null,t,e);n.has(e)||(n.add(e),e.then(o,o))}))}}function fl(t,e){var n=e.deletions;if(null!==n)for(var o=0;o<n.length;o++){var i=n[o];try{var s=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:pl=l.stateNode,hl=!1;break t;case 3:case 4:pl=l.stateNode.containerInfo,hl=!0;break t}l=l.return}if(null===pl)throw Error(r(160));gl(s,a,i),pl=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){kc(i,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)vl(e,t),e=e.sibling}function vl(t,e){var n=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fl(e,t),ml(t),4&o){try{ol(3,t,t.return),il(3,t)}catch(f){kc(t,t.return,f)}try{ol(5,t,t.return)}catch(f){kc(t,t.return,f)}}break;case 1:fl(e,t),ml(t),512&o&&null!==n&&tl(n,n.return);break;case 5:if(fl(e,t),ml(t),512&o&&null!==n&&tl(n,n.return),32&t.flags){var i=t.stateNode;try{ht(i,"")}catch(f){kc(t,t.return,f)}}if(4&o&&null!=(i=t.stateNode)){var s=t.memoizedProps,a=null!==n?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&$(i,s),Tt(l,a);var u=Tt(l,s);for(a=0;a<c.length;a+=2){var p=c[a],h=c[a+1];"style"===p?ft(i,h):"dangerouslySetInnerHTML"===p?pt(i,h):"children"===p?ht(i,h):T(i,p,h,u)}switch(l){case"input":Z(i,s);break;case"textarea":rt(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;null!=g?nt(i,!!s.multiple,g,!1):d!==!!s.multiple&&(null!=s.defaultValue?nt(i,!!s.multiple,s.defaultValue,!0):nt(i,!!s.multiple,s.multiple?[]:"",!1))}i[gi]=s}catch(f){kc(t,t.return,f)}}break;case 6:if(fl(e,t),ml(t),4&o){if(null===t.stateNode)throw Error(r(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(f){kc(t,t.return,f)}}break;case 3:if(fl(e,t),ml(t),4&o&&null!==n&&n.memoizedState.isDehydrated)try{Ve(e.containerInfo)}catch(f){kc(t,t.return,f)}break;case 4:default:fl(e,t),ml(t);break;case 13:fl(e,t),ml(t),8192&(i=t.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=$t())),4&o&&_l(t);break;case 22:if(p=null!==n&&null!==n.memoizedState,1&t.mode?($a=(u=$a)||p,fl(e,t),$a=u):fl(e,t),ml(t),8192&o){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!p&&0!==(1&t.mode))for(Qa=t,p=t.child;null!==p;){for(h=Qa=p;null!==Qa;){switch(g=(d=Qa).child,d.tag){case 0:case 11:case 14:case 15:ol(4,d,d.return);break;case 1:tl(d,d.return);var _=d.stateNode;if("function"===typeof _.componentWillUnmount){o=d,n=d.return;try{e=o,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(f){kc(o,n,f)}}break;case 5:tl(d,d.return);break;case 22:if(null!==d.memoizedState){yl(h);continue}}null!==g?(g.return=d,Qa=g):yl(h)}p=p.sibling}t:for(p=null,h=t;;){if(5===h.tag){if(null===p){p=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=_t("display",a))}catch(f){kc(t,t.return,f)}}}else if(6===h.tag){if(null===p)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(f){kc(t,t.return,f)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===t)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===t)break t;for(;null===h.sibling;){if(null===h.return||h.return===t)break t;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(e,t),ml(t),4&o&&_l(t);case 21:}}function ml(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(al(n)){var o=n;break t}n=n.return}throw Error(r(160))}switch(o.tag){case 5:var i=o.stateNode;32&o.flags&&(ht(i,""),o.flags&=-33),ul(t,ll(t),i);break;case 3:case 4:var s=o.stateNode.containerInfo;cl(t,ll(t),s);break;default:throw Error(r(161))}}catch(a){kc(t,t.return,a)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function Tl(t,e,n){Qa=t,bl(t,e,n)}function bl(t,e,n){for(var o=0!==(1&t.mode);null!==Qa;){var i=Qa,r=i.child;if(22===i.tag&&o){var s=null!==i.memoizedState||qa;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||$a;a=qa;var c=$a;if(qa=s,($a=l)&&!c)for(Qa=i;null!==Qa;)l=(s=Qa).child,22===s.tag&&null!==s.memoizedState?Sl(i):null!==l?(l.return=s,Qa=l):Sl(i);for(;null!==r;)Qa=r,bl(r,e,n),r=r.sibling;Qa=i,qa=a,$a=c}El(t)}else 0!==(8772&i.subtreeFlags)&&null!==r?(r.return=i,Qa=r):El(t)}}function El(t){for(;null!==Qa;){var e=Qa;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:$a||il(5,e);break;case 1:var o=e.stateNode;if(4&e.flags&&!$a)if(null===n)o.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vr(e.type,n.memoizedProps);o.componentDidUpdate(i,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;null!==s&&Ur(e,s,o);break;case 3:var a=e.updateQueue;if(null!==a){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Ur(e,a,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var p=u.memoizedState;if(null!==p){var h=p.dehydrated;null!==h&&Ve(h)}}}break;default:throw Error(r(163))}$a||512&e.flags&&rl(e)}catch(d){kc(e,e.return,d)}}if(e===t){Qa=null;break}if(null!==(n=e.sibling)){n.return=e.return,Qa=n;break}Qa=e.return}}function yl(t){for(;null!==Qa;){var e=Qa;if(e===t){Qa=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Qa=n;break}Qa=e.return}}function Sl(t){for(;null!==Qa;){var e=Qa;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(l){kc(e,n,l)}break;case 1:var o=e.stateNode;if("function"===typeof o.componentDidMount){var i=e.return;try{o.componentDidMount()}catch(l){kc(e,i,l)}}var r=e.return;try{rl(e)}catch(l){kc(e,r,l)}break;case 5:var s=e.return;try{rl(e)}catch(l){kc(e,s,l)}}}catch(l){kc(e,e.return,l)}if(e===t){Qa=null;break}var a=e.sibling;if(null!==a){a.return=e.return,Qa=a;break}Qa=e.return}}var Cl,kl=Math.ceil,Rl=b.ReactCurrentDispatcher,Il=b.ReactCurrentOwner,Ol=b.ReactCurrentBatchConfig,wl=0,Al=null,Dl=null,Nl=0,xl=0,Ml=ki(0),Ll=0,Pl=null,Bl=0,Fl=0,Ul=0,Hl=null,Gl=null,Vl=0,Wl=1/0,jl=null,Xl=!1,zl=null,Yl=null,Jl=!1,Kl=null,ql=0,$l=0,Zl=null,Ql=-1,tc=0;function ec(){return 0!==(6&wl)?$t():-1!==Ql?Ql:Ql=$t()}function nc(t){return 0===(1&t.mode)?1:0!==(2&wl)&&0!==Nl?Nl&-Nl:null!==fr.transition?(0===tc&&(tc=_e()),tc):0!==(t=Te)?t:t=void 0===(t=window.event)?16:qe(t.type)}function oc(t,e,n,o){if(50<$l)throw $l=0,Zl=null,Error(r(185));ve(t,n,o),0!==(2&wl)&&t===Al||(t===Al&&(0===(2&wl)&&(Fl|=n),4===Ll&&lc(t,Nl)),ic(t,o),1===n&&0===wl&&0===(1&e.mode)&&(Wl=$t()+500,Hi&&Wi()))}function ic(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,o=t.pingedLanes,i=t.expirationTimes,r=t.pendingLanes;0<r;){var s=31-se(r),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&o)||(i[s]=de(a,e)):l<=e&&(t.expiredLanes|=a),r&=~a}}(t,e);var o=he(t,t===Al?Nl:0);if(0===o)null!==n&&Jt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=o&-o,t.callbackPriority!==e){if(null!=n&&Jt(n),1===e)0===t.tag?function(t){Hi=!0,Vi(t)}(cc.bind(null,t)):Vi(cc.bind(null,t)),ai((function(){0===(6&wl)&&Wi()})),n=null;else{switch(be(o)){case 1:n=Qt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=oe}n=Ac(n,rc.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rc(t,e){if(Ql=-1,tc=0,0!==(6&wl))throw Error(r(327));var n=t.callbackNode;if(Sc()&&t.callbackNode!==n)return null;var o=he(t,t===Al?Nl:0);if(0===o)return null;if(0!==(30&o)||0!==(o&t.expiredLanes)||e)e=vc(t,o);else{e=o;var i=wl;wl|=2;var s=_c();for(Al===t&&Nl===e||(jl=null,Wl=$t()+500,dc(t,e));;)try{Tc();break}catch(l){gc(t,l)}yr(),Rl.current=s,wl=i,null!==Dl?e=0:(Al=null,Nl=0,e=Ll)}if(0!==e){if(2===e&&(0!==(i=ge(t))&&(o=i,e=sc(t,i))),1===e)throw n=Pl,dc(t,0),lc(t,o),ic(t,$t()),n;if(6===e)lc(t,o);else{if(i=t.current.alternate,0===(30&o)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var o=0;o<n.length;o++){var i=n[o],r=i.getSnapshot;i=i.value;try{if(!ao(r(),i))return!1}catch(a){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=vc(t,o))&&(0!==(s=ge(t))&&(o=s,e=sc(t,s))),1===e))throw n=Pl,dc(t,0),lc(t,o),ic(t,$t()),n;switch(t.finishedWork=i,t.finishedLanes=o,e){case 0:case 1:throw Error(r(345));case 2:case 5:yc(t,Gl,jl);break;case 3:if(lc(t,o),(130023424&o)===o&&10<(e=Vl+500-$t())){if(0!==he(t,0))break;if(((i=t.suspendedLanes)&o)!==o){ec(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ii(yc.bind(null,t,Gl,jl),e);break}yc(t,Gl,jl);break;case 4:if(lc(t,o),(4194240&o)===o)break;for(e=t.eventTimes,i=-1;0<o;){var a=31-se(o);s=1<<a,(a=e[a])>i&&(i=a),o&=~s}if(o=i,10<(o=(120>(o=$t()-o)?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*kl(o/1960))-o)){t.timeoutHandle=ii(yc.bind(null,t,Gl,jl),o);break}yc(t,Gl,jl);break;default:throw Error(r(329))}}}return ic(t,$t()),t.callbackNode===n?rc.bind(null,t):null}function sc(t,e){var n=Hl;return t.current.memoizedState.isDehydrated&&(dc(t,e).flags|=256),2!==(t=vc(t,e))&&(e=Gl,Gl=n,null!==e&&ac(e)),t}function ac(t){null===Gl?Gl=t:Gl.push.apply(Gl,t)}function lc(t,e){for(e&=~Ul,e&=~Fl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-se(e),o=1<<n;t[n]=-1,e&=~o}}function cc(t){if(0!==(6&wl))throw Error(r(327));Sc();var e=he(t,0);if(0===(1&e))return ic(t,$t()),null;var n=vc(t,e);if(0!==t.tag&&2===n){var o=ge(t);0!==o&&(e=o,n=sc(t,o))}if(1===n)throw n=Pl,dc(t,0),lc(t,e),ic(t,$t()),n;if(6===n)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yc(t,Gl,jl),ic(t,$t()),null}function uc(t,e){var n=wl;wl|=1;try{return t(e)}finally{0===(wl=n)&&(Wl=$t()+500,Hi&&Wi())}}function pc(t){null!==Kl&&0===Kl.tag&&0===(6&wl)&&Sc();var e=wl;wl|=1;var n=Ol.transition,o=Te;try{if(Ol.transition=null,Te=1,t)return t()}finally{Te=o,Ol.transition=n,0===(6&(wl=e))&&Wi()}}function hc(){xl=Ml.current,Ri(Ml)}function dc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ri(n)),null!==Dl)for(n=Dl.return;null!==n;){var o=n;switch(nr(o),o.tag){case 1:null!==(o=o.type.childContextTypes)&&void 0!==o&&Mi();break;case 3:rs(),Ri(Ai),Ri(wi),ps();break;case 5:as(o);break;case 4:rs();break;case 13:case 19:Ri(ls);break;case 10:Sr(o.type._context);break;case 22:case 23:hc()}n=n.return}if(Al=t,Dl=t=Mc(t.current,null),Nl=xl=e,Ll=0,Pl=null,Ul=Fl=Bl=0,Gl=Hl=null,null!==Ir){for(e=0;e<Ir.length;e++)if(null!==(o=(n=Ir[e]).interleaved)){n.interleaved=null;var i=o.next,r=n.pending;if(null!==r){var s=r.next;r.next=i,o.next=s}n.pending=o}Ir=null}return t}function gc(t,e){for(;;){var n=Dl;try{if(yr(),hs.current=sa,ms){for(var o=_s.memoizedState;null!==o;){var i=o.queue;null!==i&&(i.pending=null),o=o.next}ms=!1}if(gs=0,vs=fs=_s=null,Ts=!1,bs=0,Il.current=null,null===n||null===n.return){Ll=1,Pl=e,Dl=null;break}t:{var s=t,a=n.return,l=n,c=e;if(e=Nl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,p=l,h=p.tag;if(0===(1&p.mode)&&(0===h||11===h||15===h)){var d=p.alternate;d?(p.updateQueue=d.updateQueue,p.memoizedState=d.memoizedState,p.lanes=d.lanes):(p.updateQueue=null,p.memoizedState=null)}var g=va(a);if(null!==g){g.flags&=-257,ma(g,a,l,0,e),1&g.mode&&fa(s,u,e),c=u;var _=(e=g).updateQueue;if(null===_){var f=new Set;f.add(c),e.updateQueue=f}else _.add(c);break t}if(0===(1&e)){fa(s,u,e),fc();break t}c=Error(r(426))}else if(rr&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ma(v,a,l,0,e),_r(ua(c,l));break t}}s=c=ua(c,l),4!==Ll&&(Ll=2),null===Hl?Hl=[s]:Hl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e,Br(s,ga(0,c,e));break t;case 1:l=c;var m=s.type,T=s.stateNode;if(0===(128&s.flags)&&("function"===typeof m.getDerivedStateFromError||null!==T&&"function"===typeof T.componentDidCatch&&(null===Yl||!Yl.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e,Br(s,_a(s,l,e));break t}}s=s.return}while(null!==s)}Ec(n)}catch(b){e=b,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function _c(){var t=Rl.current;return Rl.current=sa,null===t?sa:t}function fc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Al||0===(268435455&Bl)&&0===(268435455&Fl)||lc(Al,Nl)}function vc(t,e){var n=wl;wl|=2;var o=_c();for(Al===t&&Nl===e||(jl=null,dc(t,e));;)try{mc();break}catch(i){gc(t,i)}if(yr(),wl=n,Rl.current=o,null!==Dl)throw Error(r(261));return Al=null,Nl=0,Ll}function mc(){for(;null!==Dl;)bc(Dl)}function Tc(){for(;null!==Dl&&!Kt();)bc(Dl)}function bc(t){var e=Cl(t.alternate,t,xl);t.memoizedProps=t.pendingProps,null===e?Ec(t):Dl=e,Il.current=null}function Ec(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Ja(n,e,xl)))return void(Dl=n)}else{if(null!==(n=Ka(n,e)))return n.flags&=32767,void(Dl=n);if(null===t)return Ll=6,void(Dl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Dl=e);Dl=e=t}while(null!==e);0===Ll&&(Ll=5)}function yc(t,e,n){var o=Te,i=Ol.transition;try{Ol.transition=null,Te=1,function(t,e,n,o){do{Sc()}while(null!==Kl);if(0!==(6&wl))throw Error(r(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var o=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-se(n),r=1<<i;e[i]=0,o[i]=-1,t[i]=-1,n&=~r}}(t,s),t===Al&&(Dl=Al=null,Nl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Jl||(Jl=!0,Ac(ee,(function(){return Sc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Ol.transition,Ol.transition=null;var a=Te;Te=1;var l=wl;wl|=4,Il.current=null,function(t,e){if(ei=je,go(t=ho())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var o=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(o&&0!==o.rangeCount){n=o.anchorNode;var i=o.anchorOffset,s=o.focusNode;o=o.focusOffset;try{n.nodeType,s.nodeType}catch(E){n=null;break t}var a=0,l=-1,c=-1,u=0,p=0,h=t,d=null;e:for(;;){for(var g;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==o&&3!==h.nodeType||(c=a+o),3===h.nodeType&&(a+=h.nodeValue.length),null!==(g=h.firstChild);)d=h,h=g;for(;;){if(h===t)break e;if(d===n&&++u===i&&(l=a),d===s&&++p===o&&(c=a),null!==(g=h.nextSibling))break;d=(h=d).parentNode}h=g}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ni={focusedElem:t,selectionRange:n},je=!1,Qa=e;null!==Qa;)if(t=(e=Qa).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Qa=t;else for(;null!==Qa;){e=Qa;try{var _=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==_){var f=_.memoizedProps,v=_.memoizedState,m=e.stateNode,T=m.getSnapshotBeforeUpdate(e.elementType===e.type?f:vr(e.type,f),v);m.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var b=e.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(r(163))}}catch(E){kc(e,e.return,E)}if(null!==(t=e.sibling)){t.return=e.return,Qa=t;break}Qa=e.return}_=nl,nl=!1}(t,n),vl(n,t),_o(ni),je=!!ei,ni=ei=null,t.current=n,Tl(n,t,i),qt(),wl=l,Te=a,Ol.transition=s}else t.current=n;if(Jl&&(Jl=!1,Kl=t,ql=i),s=t.pendingLanes,0===s&&(Yl=null),function(t){if(re&&"function"===typeof re.onCommitFiberRoot)try{re.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),ic(t,$t()),null!==e)for(o=t.onRecoverableError,n=0;n<e.length;n++)o((i=e[n]).value,{componentStack:i.stack,digest:i.digest});if(Xl)throw Xl=!1,t=zl,zl=null,t;0!==(1&ql)&&0!==t.tag&&Sc(),s=t.pendingLanes,0!==(1&s)?t===Zl?$l++:($l=0,Zl=t):$l=0,Wi()}(t,e,n,o)}finally{Ol.transition=i,Te=o}return null}function Sc(){if(null!==Kl){var t=be(ql),e=Ol.transition,n=Te;try{if(Ol.transition=null,Te=16>t?16:t,null===Kl)var o=!1;else{if(t=Kl,Kl=null,ql=0,0!==(6&wl))throw Error(r(331));var i=wl;for(wl|=4,Qa=t.current;null!==Qa;){var s=Qa,a=s.child;if(0!==(16&Qa.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qa=u;null!==Qa;){var p=Qa;switch(p.tag){case 0:case 11:case 15:ol(8,p,s)}var h=p.child;if(null!==h)h.return=p,Qa=h;else for(;null!==Qa;){var d=(p=Qa).sibling,g=p.return;if(sl(p),p===u){Qa=null;break}if(null!==d){d.return=g,Qa=d;break}Qa=g}}}var _=s.alternate;if(null!==_){var f=_.child;if(null!==f){_.child=null;do{var v=f.sibling;f.sibling=null,f=v}while(null!==f)}}Qa=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Qa=a;else t:for(;null!==Qa;){if(0!==(2048&(s=Qa).flags))switch(s.tag){case 0:case 11:case 15:ol(9,s,s.return)}var m=s.sibling;if(null!==m){m.return=s.return,Qa=m;break t}Qa=s.return}}var T=t.current;for(Qa=T;null!==Qa;){var b=(a=Qa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Qa=b;else t:for(a=T;null!==Qa;){if(0!==(2048&(l=Qa).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(y){kc(l,l.return,y)}if(l===a){Qa=null;break t}var E=l.sibling;if(null!==E){E.return=l.return,Qa=E;break t}Qa=l.return}}if(wl=i,Wi(),re&&"function"===typeof re.onPostCommitFiberRoot)try{re.onPostCommitFiberRoot(ie,t)}catch(y){}o=!0}return o}finally{Te=n,Ol.transition=e}}return!1}function Cc(t,e,n){t=Lr(t,e=ga(0,e=ua(n,e),1),1),e=ec(),null!==t&&(ve(t,1,e),ic(t,e))}function kc(t,e,n){if(3===t.tag)Cc(t,t,n);else for(;null!==e;){if(3===e.tag){Cc(e,t,n);break}if(1===e.tag){var o=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof o.componentDidCatch&&(null===Yl||!Yl.has(o))){e=Lr(e,t=_a(e,t=ua(n,t),1),1),t=ec(),null!==e&&(ve(e,1,t),ic(e,t));break}}e=e.return}}function Rc(t,e,n){var o=t.pingCache;null!==o&&o.delete(e),e=ec(),t.pingedLanes|=t.suspendedLanes&n,Al===t&&(Nl&n)===n&&(4===Ll||3===Ll&&(130023424&Nl)===Nl&&500>$t()-Vl?dc(t,0):Ul|=n),ic(t,e)}function Ic(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=ec();null!==(t=Ar(t,e))&&(ve(t,e,n),ic(t,n))}function Oc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Ic(t,n)}function wc(t,e){var n=0;switch(t.tag){case 13:var o=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:o=t.stateNode;break;default:throw Error(r(314))}null!==o&&o.delete(e),Ic(t,n)}function Ac(t,e){return Yt(t,e)}function Dc(t,e,n,o){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(t,e,n,o){return new Dc(t,e,n,o)}function xc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Mc(t,e){var n=t.alternate;return null===n?((n=Nc(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lc(t,e,n,o,i,s){var a=2;if(o=t,"function"===typeof t)xc(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case S:return Pc(n.children,i,s,e);case C:a=8,i|=8;break;case k:return(t=Nc(12,n,e,2|i)).elementType=k,t.lanes=s,t;case w:return(t=Nc(13,n,e,i)).elementType=w,t.lanes=s,t;case A:return(t=Nc(19,n,e,i)).elementType=A,t.lanes=s,t;case x:return Bc(n,i,s,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case R:a=10;break t;case I:a=9;break t;case O:a=11;break t;case D:a=14;break t;case N:a=16,o=null;break t}throw Error(r(130,null==t?t:typeof t,""))}return(e=Nc(a,n,e,i)).elementType=t,e.type=o,e.lanes=s,e}function Pc(t,e,n,o){return(t=Nc(7,t,o,e)).lanes=n,t}function Bc(t,e,n,o){return(t=Nc(22,t,o,e)).elementType=x,t.lanes=n,t.stateNode={isHidden:!1},t}function Fc(t,e,n){return(t=Nc(6,t,null,e)).lanes=n,t}function Uc(t,e,n){return(e=Nc(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Hc(t,e,n,o,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fe(0),this.expirationTimes=fe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fe(0),this.identifierPrefix=o,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gc(t,e,n,o,i,r,s,a,l){return t=new Hc(t,e,n,a,l),1===e?(e=1,!0===r&&(e|=8)):e=0,r=Nc(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nr(r),t}function Vc(t){if(!t)return Oi;t:{if(Vt(t=t._reactInternals)!==t||1!==t.tag)throw Error(r(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(xi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(r(171))}if(1===t.tag){var n=t.type;if(xi(n))return Pi(t,n,e)}return e}function Wc(t,e,n,o,i,r,s,a,l){return(t=Gc(n,o,!0,t,0,r,0,a,l)).context=Vc(null),n=t.current,(r=Mr(o=ec(),i=nc(n))).callback=void 0!==e&&null!==e?e:null,Lr(n,r,i),t.current.lanes=i,ve(t,i,o),ic(t,o),t}function jc(t,e,n,o){var i=e.current,r=ec(),s=nc(i);return n=Vc(n),null===e.context?e.context=n:e.pendingContext=n,(e=Mr(r,s)).payload={element:t},null!==(o=void 0===o?null:o)&&(e.callback=o),null!==(t=Lr(i,e,s))&&(oc(t,i,s,r),Pr(t,i,s)),s}function Xc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function zc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Yc(t,e){zc(t,e),(t=t.alternate)&&zc(t,e)}Cl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ai.current)ba=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return ba=!1,function(t,e,n){switch(e.tag){case 3:Aa(e),gr();break;case 5:ss(e);break;case 1:xi(e.type)&&Bi(e);break;case 4:is(e,e.stateNode.containerInfo);break;case 10:var o=e.type._context,i=e.memoizedProps.value;Ii(mr,o._currentValue),o._currentValue=i;break;case 13:if(null!==(o=e.memoizedState))return null!==o.dehydrated?(Ii(ls,1&ls.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Fa(t,e,n):(Ii(ls,1&ls.current),null!==(t=Xa(t,e,n))?t.sibling:null);Ii(ls,1&ls.current);break;case 19:if(o=0!==(n&e.childLanes),0!==(128&t.flags)){if(o)return Wa(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(ls,ls.current),o)break;return null;case 22:case 23:return e.lanes=0,ka(t,e,n)}return Xa(t,e,n)}(t,e,n);ba=0!==(131072&t.flags)}else ba=!1,rr&&0!==(1048576&e.flags)&&tr(e,Yi,e.index);switch(e.lanes=0,e.tag){case 2:var o=e.type;ja(t,e),t=e.pendingProps;var i=Ni(e,wi.current);kr(e,n),i=Cs(null,e,o,t,i,n);var s=ks();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xi(o)?(s=!0,Bi(e)):s=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Nr(e),i.updater=Vr,e.stateNode=i,i._reactInternals=e,zr(e,o,t,n),e=wa(null,e,o,!0,s,n)):(e.tag=0,rr&&s&&er(e),Ea(null,e,i,n),e=e.child),e;case 16:o=e.elementType;t:{switch(ja(t,e),t=e.pendingProps,o=(i=o._init)(o._payload),e.type=o,i=e.tag=function(t){if("function"===typeof t)return xc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===O)return 11;if(t===D)return 14}return 2}(o),t=vr(o,t),i){case 0:e=Ia(null,e,o,t,n);break t;case 1:e=Oa(null,e,o,t,n);break t;case 11:e=ya(null,e,o,t,n);break t;case 14:e=Sa(null,e,o,vr(o.type,t),n);break t}throw Error(r(306,o,""))}return e;case 0:return o=e.type,i=e.pendingProps,Ia(t,e,o,i=e.elementType===o?i:vr(o,i),n);case 1:return o=e.type,i=e.pendingProps,Oa(t,e,o,i=e.elementType===o?i:vr(o,i),n);case 3:t:{if(Aa(e),null===t)throw Error(r(387));o=e.pendingProps,i=(s=e.memoizedState).element,xr(t,e),Fr(e,o,null,n);var a=e.memoizedState;if(o=a.element,s.isDehydrated){if(s={element:o,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,256&e.flags){e=Da(t,e,o,n,i=ua(Error(r(423)),e));break t}if(o!==i){e=Da(t,e,o,n,i=ua(Error(r(424)),e));break t}for(ir=ui(e.stateNode.containerInfo.firstChild),or=e,rr=!0,sr=null,n=Zr(e,null,o,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(gr(),o===i){e=Xa(t,e,n);break t}Ea(t,e,o,n)}e=e.child}return e;case 5:return ss(e),null===t&&ur(e),o=e.type,i=e.pendingProps,s=null!==t?t.memoizedProps:null,a=i.children,oi(o,i)?a=null:null!==s&&oi(o,s)&&(e.flags|=32),Ra(t,e),Ea(t,e,a,n),e.child;case 6:return null===t&&ur(e),null;case 13:return Fa(t,e,n);case 4:return is(e,e.stateNode.containerInfo),o=e.pendingProps,null===t?e.child=$r(e,null,o,n):Ea(t,e,o,n),e.child;case 11:return o=e.type,i=e.pendingProps,ya(t,e,o,i=e.elementType===o?i:vr(o,i),n);case 7:return Ea(t,e,e.pendingProps,n),e.child;case 8:case 12:return Ea(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(o=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ii(mr,o._currentValue),o._currentValue=a,null!==s)if(ao(s.value,a)){if(s.children===i.children&&!Ai.current){e=Xa(t,e,n);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===o){if(1===s.tag){(c=Mr(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var p=(u=u.shared).pending;null===p?c.next=c:(c.next=p.next,p.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Cr(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===e.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(r(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Cr(a,n,e),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}Ea(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,o=e.pendingProps.children,kr(e,n),o=o(i=Rr(i)),e.flags|=1,Ea(t,e,o,n),e.child;case 14:return i=vr(o=e.type,e.pendingProps),Sa(t,e,o,i=vr(o.type,i),n);case 15:return Ca(t,e,e.type,e.pendingProps,n);case 17:return o=e.type,i=e.pendingProps,i=e.elementType===o?i:vr(o,i),ja(t,e),e.tag=1,xi(o)?(t=!0,Bi(e)):t=!1,kr(e,n),jr(e,o,i),zr(e,o,i,n),wa(null,e,o,!0,t,n);case 19:return Wa(t,e,n);case 22:return ka(t,e,n)}throw Error(r(156,e.tag))};var Jc="function"===typeof reportError?reportError:function(t){console.error(t)};function Kc(t){this._internalRoot=t}function qc(t){this._internalRoot=t}function $c(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Zc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Qc(){}function tu(t,e,n,o,i){var r=n._reactRootContainer;if(r){var s=r;if("function"===typeof i){var a=i;i=function(){var t=Xc(s);a.call(t)}}jc(e,s,t,i)}else s=function(t,e,n,o,i){if(i){if("function"===typeof o){var r=o;o=function(){var t=Xc(s);r.call(t)}}var s=Wc(e,o,t,0,null,!1,0,"",Qc);return t._reactRootContainer=s,t[_i]=s.current,Wo(8===t.nodeType?t.parentNode:t),pc(),s}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof o){var a=o;o=function(){var t=Xc(l);a.call(t)}}var l=Gc(t,0,!1,null,0,!1,0,"",Qc);return t._reactRootContainer=l,t[_i]=l.current,Wo(8===t.nodeType?t.parentNode:t),pc((function(){jc(e,l,n,o)})),l}(n,e,t,i,o);return Xc(s)}qc.prototype.render=Kc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(r(409));jc(t,e,null,null)},qc.prototype.unmount=Kc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;pc((function(){jc(null,t,null,null)})),e[_i]=null}},qc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ce();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xe.length&&0!==e&&e<xe[n].priority;n++);xe.splice(n,0,t),0===n&&Be(t)}},Ee=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=pe(e.pendingLanes);0!==n&&(me(e,1|n),ic(e,$t()),0===(6&wl)&&(Wl=$t()+500,Wi()))}break;case 13:pc((function(){var e=Ar(t,1);if(null!==e){var n=ec();oc(e,t,1,n)}})),Yc(t,1)}},ye=function(t){if(13===t.tag){var e=Ar(t,134217728);if(null!==e)oc(e,t,134217728,ec());Yc(t,134217728)}},Se=function(t){if(13===t.tag){var e=nc(t),n=Ar(t,e);if(null!==n)oc(n,t,e,ec());Yc(t,e)}},Ce=function(){return Te},ke=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}},yt=function(t,e,n){switch(e){case"input":if(Z(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var o=n[e];if(o!==t&&o.form===t.form){var i=yi(o);if(!i)throw Error(r(90));Y(o),Z(o,i)}}}break;case"textarea":rt(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Ot=uc,wt=pc;var eu={usingClientEntryPoint:!1,Events:[bi,Ei,yi,Rt,It,uc]},nu={findFiberByHostInstance:Ti,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ou={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Xt(t))?null:t.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{ie=iu.inject(ou),re=iu}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(e))throw Error(r(200));return function(t,e,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:y,key:null==o?null:""+o,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!$c(t))throw Error(r(299));var n=!1,o="",i=Jc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(o=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Gc(t,1,!1,null,0,n,0,o,i),t[_i]=e.current,Wo(8===t.nodeType?t.parentNode:t),new Kc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(r(188));throw t=Object.keys(t).join(","),Error(r(268,t))}return t=null===(t=Xt(e))?null:t.stateNode},e.flushSync=function(t){return pc(t)},e.hydrate=function(t,e,n){if(!Zc(e))throw Error(r(200));return tu(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!$c(t))throw Error(r(405));var o=null!=n&&n.hydratedSources||null,i=!1,s="",a=Jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),e=Wc(e,null,t,1,null!=n?n:null,i,0,s,a),t[_i]=e.current,Wo(t),o)for(t=0;t<o.length;t++)i=(i=(n=o[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new qc(e)},e.render=function(t,e,n){if(!Zc(e))throw Error(r(200));return tu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Zc(t))throw Error(r(40));return!!t._reactRootContainer&&(pc((function(){tu(null,null,t,!1,(function(){t._reactRootContainer=null,t[_i]=null}))})),!0)},e.unstable_batchedUpdates=uc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,o){if(!Zc(n))throw Error(r(200));if(null==t||void 0===t._reactInternals)throw Error(r(38));return tu(t,e,n,!1,o)},e.version="18.2.0-next-9e3b772b8-20220608"},1250:function(t,e,n){"use strict";var o=n(4164);e.createRoot=o.createRoot,e.hydrateRoot=o.hydrateRoot},4164:function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(4463)},1372:function(t,e){"use strict";var n=60103,o=60106,i=60107,r=60108,s=60114,a=60109,l=60110,c=60112,u=60113,p=60120,h=60115,d=60116,g=60121,_=60122,f=60117,v=60129,m=60131;if("function"===typeof Symbol&&Symbol.for){var T=Symbol.for;n=T("react.element"),o=T("react.portal"),i=T("react.fragment"),r=T("react.strict_mode"),s=T("react.profiler"),a=T("react.provider"),l=T("react.context"),c=T("react.forward_ref"),u=T("react.suspense"),p=T("react.suspense_list"),h=T("react.memo"),d=T("react.lazy"),g=T("react.block"),_=T("react.server.block"),f=T("react.fundamental"),v=T("react.debug_trace_mode"),m=T("react.legacy_hidden")}function b(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case n:switch(t=t.type){case i:case s:case r:case u:case p:return t;default:switch(t=t&&t.$$typeof){case l:case c:case d:case h:case a:return t;default:return e}}case o:return e}}}e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===i||t===s||t===v||t===r||t===u||t===p||t===m||"object"===typeof t&&null!==t&&(t.$$typeof===d||t.$$typeof===h||t.$$typeof===a||t.$$typeof===l||t.$$typeof===c||t.$$typeof===f||t.$$typeof===g||t[0]===_)},e.typeOf=b},7441:function(t,e,n){"use strict";t.exports=n(1372)},6044:function(t,e,n){"use strict";var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=n(2791),s=l(r),a=l(n(2007));function l(t){return t&&t.__esModule?t:{default:t}}var c={overflow:"hidden",position:"relative"},u={position:"relative",overflow:"hidden",cursor:"pointer",display:"block",float:"left"},p=function(t,e){return"\n    .react-stars-"+e+":before {\n      position: absolute;\n      overflow: hidden;\n      display: block;\n      z-index: 1;\n      top: 0; left: 0;\n      width: 50%;\n      content: attr(data-forhalf);\n      color: "+t+";\n  }"},h=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return t=o({},t),n.state={uniqueness:(Math.random()+"").replace(".",""),value:t.value||0,stars:[],halfStar:{at:Math.floor(t.value),hidden:t.half&&t.value%1<.5}},n.state.config={count:t.count,size:t.size,char:t.char,color1:t.color1,color2:t.color2,half:t.half,edit:t.edit},n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){this.setState({stars:this.getStars(this.state.value)})}},{key:"componentWillReceiveProps",value:function(t){this.setState({stars:this.getStars(t.value),value:t.value,halfStar:{at:Math.floor(t.value),hidden:this.state.config.half&&t.value%1<.5}})}},{key:"isDecimal",value:function(t){return t%1!==0}},{key:"getRate",value:function(){return this.state.config.half?Math.floor(this.state.value):Math.round(this.state.value)}},{key:"getStars",value:function(t){"undefined"===typeof t&&(t=this.getRate());for(var e=[],n=0;n<this.state.config.count;n++)e.push({active:n<=t-1});return e}},{key:"mouseOver",value:function(t){var e=this.state,n=e.config,o=e.halfStar;if(n.edit){var i=Number(t.target.getAttribute("data-index"));if(n.half){var r=this.moreThanHalf(t,n.size);o.hidden=r,r&&(i+=1),o.at=i}else i+=1;this.setState({stars:this.getStars(i)})}}},{key:"moreThanHalf",value:function(t,e){var n=t.target,o=t.clientX-n.getBoundingClientRect().left;return(o=Math.round(Math.abs(o)))>e/2}},{key:"mouseLeave",value:function(){var t=this.state,e=t.value,n=t.halfStar,o=t.config;o.edit&&(o.half&&(n.hidden=!this.isDecimal(e),n.at=Math.floor(this.state.value)),this.setState({stars:this.getStars()}))}},{key:"clicked",value:function(t){var e=this.state,n=e.config,o=e.halfStar;if(n.edit){var i=Number(t.target.getAttribute("data-index")),r=void 0;if(n.half){var s=this.moreThanHalf(t,n.size);o.hidden=s,s&&(i+=1),r=s?i:i+.5,o.at=i}else r=i+=1;this.setState({value:r,stars:this.getStars(i)}),this.props.onChange(r)}}},{key:"renderHalfStarStyleElement",value:function(){var t=this.state,e=t.config,n=t.uniqueness;return s.default.createElement("style",{dangerouslySetInnerHTML:{__html:p(e.color2,n)}})}},{key:"renderStars",value:function(){var t=this,e=this.state,n=e.halfStar,i=e.stars,r=e.uniqueness,a=e.config,l=a.color1,c=a.color2,p=a.size,h=a.char,d=a.half,g=a.edit;return i.map((function(e,i){var a="";d&&!n.hidden&&n.at===i&&(a="react-stars-"+r);var _=o({},u,{color:e.active?c:l,cursor:g?"pointer":"default",fontSize:p+"px"});return s.default.createElement("span",{className:a,style:_,key:i,"data-index":i,"data-forhalf":h,onMouseOver:t.mouseOver.bind(t),onMouseMove:t.mouseOver.bind(t),onMouseLeave:t.mouseLeave.bind(t),onClick:t.clicked.bind(t)},h)}))}},{key:"render",value:function(){var t=this.props.className;return s.default.createElement("div",{className:t,style:c},this.state.config.half?this.renderHalfStarStyleElement():"",this.renderStars())}}]),e}(r.Component);h.propTypes={className:a.default.string,edit:a.default.bool,half:a.default.bool,value:a.default.number,count:a.default.number,char:a.default.string,size:a.default.number,color1:a.default.string,color2:a.default.string},h.defaultProps={edit:!0,half:!0,value:0,count:5,char:"\u2605",size:15,color1:"gray",color2:"#ffd700",onChange:function(){}},e.Z=h},6374:function(t,e,n){"use strict";var o=n(2791),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var o,r={},c=null,u=null;for(o in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)s.call(e,o)&&!l.hasOwnProperty(o)&&(r[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps)void 0===r[o]&&(r[o]=e[o]);return{$$typeof:i,type:t,key:c,ref:u,props:r,_owner:a.current}}e.Fragment=r,e.jsx=c,e.jsxs=c},9117:function(t,e){"use strict";var n=Symbol.for("react.element"),o=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,f={};function v(t,e,n){this.props=t,this.context=e,this.refs=f,this.updater=n||g}function m(){}function T(t,e,n){this.props=t,this.context=e,this.refs=f,this.updater=n||g}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},m.prototype=v.prototype;var b=T.prototype=new m;b.constructor=T,_(b,v.prototype),b.isPureReactComponent=!0;var E=Array.isArray,y=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function k(t,e,o){var i,r={},s=null,a=null;if(null!=e)for(i in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)y.call(e,i)&&!C.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(1===l)r.children=o;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===r[i]&&(r[i]=l[i]);return{$$typeof:n,type:t,key:s,ref:a,props:r,_owner:S.current}}function R(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var I=/\/+/g;function O(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function w(t,e,i,r,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case o:l=!0}}if(l)return s=s(l=t),t=""===r?"."+O(l,0):r,E(s)?(i="",null!=t&&(i=t.replace(I,"$&/")+"/"),w(s,e,i,"",(function(t){return t}))):null!=s&&(R(s)&&(s=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(I,"$&/")+"/")+t)),e.push(s)),1;if(l=0,r=""===r?".":r+":",E(t))for(var c=0;c<t.length;c++){var u=r+O(a=t[c],c);l+=w(a,e,i,u,s)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=d&&t[d]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(a=t.next()).done;)l+=w(a=a.value,e,i,u=r+O(a,c++),s);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function A(t,e,n){if(null==t)return t;var o=[],i=0;return w(t,o,"","",(function(t){return e.call(n,t,i++)})),o}function D(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var N={current:null},x={transition:null},M={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:x,ReactCurrentOwner:S};e.Children={map:A,forEach:function(t,e,n){A(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return A(t,(function(){e++})),e},toArray:function(t){return A(t,(function(t){return t}))||[]},only:function(t){if(!R(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=v,e.Fragment=i,e.Profiler=s,e.PureComponent=T,e.StrictMode=r,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,e.cloneElement=function(t,e,o){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=_({},t.props),r=t.key,s=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,a=S.current),void 0!==e.key&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)y.call(e,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=o;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:t.type,key:r,ref:s,props:i,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=k,e.createFactory=function(t){var e=k.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=R,e.lazy=function(t){return{$$typeof:h,_payload:{_status:-1,_result:t},_init:D}},e.memo=function(t,e){return{$$typeof:p,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=x.transition;x.transition={};try{t()}finally{x.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return N.current.useCallback(t,e)},e.useContext=function(t){return N.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return N.current.useDeferredValue(t)},e.useEffect=function(t,e){return N.current.useEffect(t,e)},e.useId=function(){return N.current.useId()},e.useImperativeHandle=function(t,e,n){return N.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return N.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return N.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return N.current.useMemo(t,e)},e.useReducer=function(t,e,n){return N.current.useReducer(t,e,n)},e.useRef=function(t){return N.current.useRef(t)},e.useState=function(t){return N.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return N.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return N.current.useTransition()},e.version="18.2.0"},2791:function(t,e,n){"use strict";t.exports=n(9117)},184:function(t,e,n){"use strict";t.exports=n(6374)},4765:function(t){"use strict";var e,n="";t.exports=function(t,o){if("string"!==typeof t)throw new TypeError("expected a string");if(1===o)return t;if(2===o)return t+t;var i=t.length*o;if(e!==t||"undefined"===typeof e)e=t,n="";else if(n.length>=i)return n.substr(0,i);for(;i>n.length&&o>1;)1&o&&(n+=t),o>>=1,t+=t;return n=(n+=t).substr(0,i)}},6813:function(t,e){"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var o=n-1>>>1,i=t[o];if(!(0<r(i,e)))break t;t[o]=e,t[n]=i,n=o}}function o(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var o=0,i=t.length,s=i>>>1;o<s;){var a=2*(o+1)-1,l=t[a],c=a+1,u=t[c];if(0>r(l,n))c<i&&0>r(u,l)?(t[o]=u,t[c]=n,o=c):(t[o]=l,t[a]=n,o=a);else{if(!(c<i&&0>r(u,n)))break t;t[o]=u,t[c]=n,o=c}}}return e}function r(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],p=1,h=null,d=3,g=!1,_=!1,f=!1,v="function"===typeof setTimeout?setTimeout:null,m="function"===typeof clearTimeout?clearTimeout:null,T="undefined"!==typeof setImmediate?setImmediate:null;function b(t){for(var e=o(u);null!==e;){if(null===e.callback)i(u);else{if(!(e.startTime<=t))break;i(u),e.sortIndex=e.expirationTime,n(c,e)}e=o(u)}}function E(t){if(f=!1,b(t),!_)if(null!==o(c))_=!0,x(y);else{var e=o(u);null!==e&&M(E,e.startTime-t)}}function y(t,n){_=!1,f&&(f=!1,m(R),R=-1),g=!0;var r=d;try{for(b(n),h=o(c);null!==h&&(!(h.expirationTime>n)||t&&!w());){var s=h.callback;if("function"===typeof s){h.callback=null,d=h.priorityLevel;var a=s(h.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?h.callback=a:h===o(c)&&i(c),b(n)}else i(c);h=o(c)}if(null!==h)var l=!0;else{var p=o(u);null!==p&&M(E,p.startTime-n),l=!1}return l}finally{h=null,d=r,g=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,k=null,R=-1,I=5,O=-1;function w(){return!(e.unstable_now()-O<I)}function A(){if(null!==k){var t=e.unstable_now();O=t;var n=!0;try{n=k(!0,t)}finally{n?S():(C=!1,k=null)}}else C=!1}if("function"===typeof T)S=function(){T(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,N=D.port2;D.port1.onmessage=A,S=function(){N.postMessage(null)}}else S=function(){v(A,0)};function x(t){k=t,C||(C=!0,S())}function M(t,n){R=v((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){_||g||(_=!0,x(y))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return o(c)},e.unstable_next=function(t){switch(d){case 1:case 2:case 3:var e=3;break;default:e=d}var n=d;d=e;try{return t()}finally{d=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=d;d=t;try{return e()}finally{d=n}},e.unstable_scheduleCallback=function(t,i,r){var s=e.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?s+r:s:r=s,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:p++,callback:i,priorityLevel:t,startTime:r,expirationTime:a=r+a,sortIndex:-1},r>s?(t.sortIndex=r,n(u,t),null===o(c)&&t===o(u)&&(f?(m(R),R=-1):f=!0,M(E,r-s))):(t.sortIndex=a,n(c,t),_||g||(_=!0,x(y))),t},e.unstable_shouldYield=w,e.unstable_wrapCallback=function(t){var e=d;return function(){var n=d;d=e;try{return t.apply(this,arguments)}finally{d=n}}}},5296:function(t,e,n){"use strict";t.exports=n(6813)},9613:function(t){t.exports=function(t,e,n,o){var i=n?n.call(o,t,e):void 0;if(void 0!==i)return!!i;if(t===e)return!0;if("object"!==typeof t||!t||"object"!==typeof e||!e)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(e),l=0;l<r.length;l++){var c=r[l];if(!a(c))return!1;var u=t[c],p=e[c];if(!1===(i=n?n.call(o,u,p,c):void 0)||void 0===i&&u!==p)return!1}return!0}},6444:function(t,e,n){"use strict";n.r(e),n.d(e,{ServerStyleSheet:function(){return Ht},StyleSheetConsumer:function(){return it},StyleSheetContext:function(){return ot},StyleSheetManager:function(){return ut},ThemeConsumer:function(){return Nt},ThemeContext:function(){return Dt},ThemeProvider:function(){return xt},__PRIVATE__:function(){return Wt},createGlobalStyle:function(){return Ft},css:function(){return bt},default:function(){return jt},isStyledComponent:function(){return b},keyframes:function(){return Ut},useTheme:function(){return Vt},version:function(){return y},withTheme:function(){return Gt}});var o=n(7441),i=n(2791),r=n(9613),s=n.n(r);var a=function(t){function e(t,o,l,c,h){for(var d,g,_,f,b,y=0,S=0,C=0,k=0,R=0,N=0,M=_=d=0,P=0,B=0,F=0,U=0,H=l.length,G=H-1,V="",W="",j="",X="";P<H;){if(g=l.charCodeAt(P),P===G&&0!==S+k+C+y&&(0!==S&&(g=47===S?10:47),k=C=y=0,H++,G++),0===S+k+C+y){if(P===G&&(0<B&&(V=V.replace(p,"")),0<V.trim().length)){switch(g){case 32:case 9:case 59:case 13:case 10:break;default:V+=l.charAt(P)}g=59}switch(g){case 123:for(d=(V=V.trim()).charCodeAt(0),_=1,U=++P;P<H;){switch(g=l.charCodeAt(P)){case 123:_++;break;case 125:_--;break;case 47:switch(g=l.charCodeAt(P+1)){case 42:case 47:t:{for(M=P+1;M<G;++M)switch(l.charCodeAt(M)){case 47:if(42===g&&42===l.charCodeAt(M-1)&&P+2!==M){P=M+1;break t}break;case 10:if(47===g){P=M+1;break t}}P=M}}break;case 91:g++;case 40:g++;case 34:case 39:for(;P++<G&&l.charCodeAt(P)!==g;);}if(0===_)break;P++}if(_=l.substring(U,P),0===d&&(d=(V=V.replace(u,"").trim()).charCodeAt(0)),64===d){switch(0<B&&(V=V.replace(p,"")),g=V.charCodeAt(1)){case 100:case 109:case 115:case 45:B=o;break;default:B=D}if(U=(_=e(o,B,_,g,h+1)).length,0<x&&(b=a(3,_,B=n(D,V,F),o,O,I,U,g,h,c),V=B.join(""),void 0!==b&&0===(U=(_=b.trim()).length)&&(g=0,_="")),0<U)switch(g){case 115:V=V.replace(E,s);case 100:case 109:case 45:_=V+"{"+_+"}";break;case 107:_=(V=V.replace(v,"$1 $2"))+"{"+_+"}",_=1===A||2===A&&r("@"+_,3)?"@-webkit-"+_+"@"+_:"@"+_;break;default:_=V+_,112===c&&(W+=_,_="")}else _=""}else _=e(o,n(o,V,F),_,c,h+1);j+=_,_=F=B=M=d=0,V="",g=l.charCodeAt(++P);break;case 125:case 59:if(1<(U=(V=(0<B?V.replace(p,""):V).trim()).length))switch(0===M&&(d=V.charCodeAt(0),45===d||96<d&&123>d)&&(U=(V=V.replace(" ",":")).length),0<x&&void 0!==(b=a(1,V,o,t,O,I,W.length,c,h,c))&&0===(U=(V=b.trim()).length)&&(V="\0\0"),d=V.charCodeAt(0),g=V.charCodeAt(1),d){case 0:break;case 64:if(105===g||99===g){X+=V+l.charAt(P);break}default:58!==V.charCodeAt(U-1)&&(W+=i(V,d,g,V.charCodeAt(2)))}F=B=M=d=0,V="",g=l.charCodeAt(++P)}}switch(g){case 13:case 10:47===S?S=0:0===1+d&&107!==c&&0<V.length&&(B=1,V+="\0"),0<x*L&&a(0,V,o,t,O,I,W.length,c,h,c),I=1,O++;break;case 59:case 125:if(0===S+k+C+y){I++;break}default:switch(I++,f=l.charAt(P),g){case 9:case 32:if(0===k+y+S)switch(R){case 44:case 58:case 9:case 32:f="";break;default:32!==g&&(f=" ")}break;case 0:f="\\0";break;case 12:f="\\f";break;case 11:f="\\v";break;case 38:0===k+S+y&&(B=F=1,f="\f"+f);break;case 108:if(0===k+S+y+w&&0<M)switch(P-M){case 2:112===R&&58===l.charCodeAt(P-3)&&(w=R);case 8:111===N&&(w=N)}break;case 58:0===k+S+y&&(M=P);break;case 44:0===S+C+k+y&&(B=1,f+="\r");break;case 34:case 39:0===S&&(k=k===g?0:0===k?g:k);break;case 91:0===k+S+C&&y++;break;case 93:0===k+S+C&&y--;break;case 41:0===k+S+y&&C--;break;case 40:if(0===k+S+y){if(0===d)if(2*R+3*N===533);else d=1;C++}break;case 64:0===S+C+k+y+M+_&&(_=1);break;case 42:case 47:if(!(0<k+y+C))switch(S){case 0:switch(2*g+3*l.charCodeAt(P+1)){case 235:S=47;break;case 220:U=P,S=42}break;case 42:47===g&&42===R&&U+2!==P&&(33===l.charCodeAt(U+2)&&(W+=l.substring(U,P+1)),f="",S=0)}}0===S&&(V+=f)}N=R,R=g,P++}if(0<(U=W.length)){if(B=o,0<x&&(void 0!==(b=a(2,W,B,t,O,I,U,c,h,c))&&0===(W=b).length))return X+W+j;if(W=B.join(",")+"{"+W+"}",0!==A*w){switch(2!==A||r(W,2)||(w=0),w){case 111:W=W.replace(T,":-moz-$1")+W;break;case 112:W=W.replace(m,"::-webkit-input-$1")+W.replace(m,"::-moz-$1")+W.replace(m,":-ms-input-$1")+W}w=0}}return X+W+j}function n(t,e,n){var i=e.trim().split(_);e=i;var r=i.length,s=t.length;switch(s){case 0:case 1:var a=0;for(t=0===s?"":t[0]+" ";a<r;++a)e[a]=o(t,e[a],n).trim();break;default:var l=a=0;for(e=[];a<r;++a)for(var c=0;c<s;++c)e[l++]=o(t[c]+" ",i[a],n).trim()}return e}function o(t,e,n){var o=e.charCodeAt(0);switch(33>o&&(o=(e=e.trim()).charCodeAt(0)),o){case 38:return e.replace(f,"$1"+t.trim());case 58:return t.trim()+e.replace(f,"$1"+t.trim());default:if(0<1*n&&0<e.indexOf("\f"))return e.replace(f,(58===t.charCodeAt(0)?"":"$1")+t.trim())}return t+e}function i(t,e,n,o){var s=t+";",a=2*e+3*n+4*o;if(944===a){t=s.indexOf(":",9)+1;var l=s.substring(t,s.length-1).trim();return l=s.substring(0,t).trim()+l+";",1===A||2===A&&r(l,1)?"-webkit-"+l+l:l}if(0===A||2===A&&!r(s,1))return s;switch(a){case 1015:return 97===s.charCodeAt(10)?"-webkit-"+s+s:s;case 951:return 116===s.charCodeAt(3)?"-webkit-"+s+s:s;case 963:return 110===s.charCodeAt(5)?"-webkit-"+s+s:s;case 1009:if(100!==s.charCodeAt(4))break;case 969:case 942:return"-webkit-"+s+s;case 978:return"-webkit-"+s+"-moz-"+s+s;case 1019:case 983:return"-webkit-"+s+"-moz-"+s+"-ms-"+s+s;case 883:if(45===s.charCodeAt(8))return"-webkit-"+s+s;if(0<s.indexOf("image-set(",11))return s.replace(R,"$1-webkit-$2")+s;break;case 932:if(45===s.charCodeAt(4))switch(s.charCodeAt(5)){case 103:return"-webkit-box-"+s.replace("-grow","")+"-webkit-"+s+"-ms-"+s.replace("grow","positive")+s;case 115:return"-webkit-"+s+"-ms-"+s.replace("shrink","negative")+s;case 98:return"-webkit-"+s+"-ms-"+s.replace("basis","preferred-size")+s}return"-webkit-"+s+"-ms-"+s+s;case 964:return"-webkit-"+s+"-ms-flex-"+s+s;case 1023:if(99!==s.charCodeAt(8))break;return"-webkit-box-pack"+(l=s.substring(s.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+s+"-ms-flex-pack"+l+s;case 1005:return d.test(s)?s.replace(h,":-webkit-")+s.replace(h,":-moz-")+s:s;case 1e3:switch(e=(l=s.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(e)){case 226:l=s.replace(b,"tb");break;case 232:l=s.replace(b,"tb-rl");break;case 220:l=s.replace(b,"lr");break;default:return s}return"-webkit-"+s+"-ms-"+l+s;case 1017:if(-1===s.indexOf("sticky",9))break;case 975:switch(e=(s=t).length-10,a=(l=(33===s.charCodeAt(e)?s.substring(0,e):s).substring(t.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:s=s.replace(l,"-webkit-"+l)+";"+s;break;case 207:case 102:s=s.replace(l,"-webkit-"+(102<a?"inline-":"")+"box")+";"+s.replace(l,"-webkit-"+l)+";"+s.replace(l,"-ms-"+l+"box")+";"+s}return s+";";case 938:if(45===s.charCodeAt(5))switch(s.charCodeAt(6)){case 105:return l=s.replace("-items",""),"-webkit-"+s+"-webkit-box-"+l+"-ms-flex-"+l+s;case 115:return"-webkit-"+s+"-ms-flex-item-"+s.replace(S,"")+s;default:return"-webkit-"+s+"-ms-flex-line-pack"+s.replace("align-content","").replace(S,"")+s}break;case 973:case 989:if(45!==s.charCodeAt(3)||122===s.charCodeAt(4))break;case 931:case 953:if(!0===k.test(t))return 115===(l=t.substring(t.indexOf(":")+1)).charCodeAt(0)?i(t.replace("stretch","fill-available"),e,n,o).replace(":fill-available",":stretch"):s.replace(l,"-webkit-"+l)+s.replace(l,"-moz-"+l.replace("fill-",""))+s;break;case 962:if(s="-webkit-"+s+(102===s.charCodeAt(5)?"-ms-"+s:"")+s,211===n+o&&105===s.charCodeAt(13)&&0<s.indexOf("transform",10))return s.substring(0,s.indexOf(";",27)+1).replace(g,"$1-webkit-$2")+s}return s}function r(t,e){var n=t.indexOf(1===e?":":"{"),o=t.substring(0,3!==e?n:10);return n=t.substring(n+1,t.length-1),M(2!==e?o:o.replace(C,"$1"),n,e)}function s(t,e){var n=i(e,e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2));return n!==e+";"?n.replace(y," or ($1)").substring(4):"("+e+")"}function a(t,e,n,o,i,r,s,a,l,u){for(var p,h=0,d=e;h<x;++h)switch(p=N[h].call(c,t,d,n,o,i,r,s,a,l,u)){case void 0:case!1:case!0:case null:break;default:d=p}if(d!==e)return d}function l(t){return void 0!==(t=t.prefix)&&(M=null,t?"function"!==typeof t?A=1:(A=2,M=t):A=0),l}function c(t,n){var o=t;if(33>o.charCodeAt(0)&&(o=o.trim()),o=[o],0<x){var i=a(-1,n,o,o,O,I,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var r=e(D,o,n,0,0);return 0<x&&(void 0!==(i=a(-2,r,o,o,O,I,r.length,0,0,0))&&(r=i)),"",w=0,I=O=1,r}var u=/^\0+/g,p=/[\0\r\f]/g,h=/: */g,d=/zoo|gra/,g=/([,: ])(transform)/g,_=/,\r+?/g,f=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,m=/::(place)/g,T=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,E=/\(\s*(.*)\s*\)/g,y=/([\s\S]*?);/g,S=/-self|flex-/g,C=/[^]*?(:[rp][el]a[\w-]+)[^]*/,k=/stretch|:\s*\w+\-(?:conte|avail)/,R=/([^-])(image-set\()/,I=1,O=1,w=0,A=1,D=[],N=[],x=0,M=null,L=0;return c.use=function t(e){switch(e){case void 0:case null:x=N.length=0;break;default:if("function"===typeof e)N[x++]=e;else if("object"===typeof e)for(var n=0,o=e.length;n<o;++n)t(e[n]);else L=0|!!e}return t},c.set=l,void 0!==t&&l(t),c},l={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var c=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,u=function(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}((function(t){return c.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),p=n(2110),h=n.n(p);function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}var g=function(t,e){for(var n=[t[0]],o=0,i=e.length;o<i;o+=1)n.push(e[o],t[o+1]);return n},_=function(t){return null!==t&&"object"==typeof t&&"[object Object]"===(t.toString?t.toString():Object.prototype.toString.call(t))&&!(0,o.typeOf)(t)},f=Object.freeze([]),v=Object.freeze({});function m(t){return"function"==typeof t}function T(t){return t.displayName||t.name||"Component"}function b(t){return t&&"string"==typeof t.styledComponentId}var E="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",y="5.3.9",S="undefined"!=typeof window&&"HTMLElement"in window,C=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY))),k={};function R(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];throw new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var I=function(){function t(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}var e=t.prototype;return e.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},e.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,o=n.length,i=o;t>=i;)(i<<=1)<0&&R(16,""+t);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var r=o;r<i;r++)this.groupSizes[r]=0}for(var s=this.indexOfGroup(t+1),a=0,l=e.length;a<l;a++)this.tag.insertRule(s,e[a])&&(this.groupSizes[t]++,s++)},e.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),o=n+e;this.groupSizes[t]=0;for(var i=n;i<o;i++)this.tag.deleteRule(n)}},e.getGroup=function(t){var e="";if(t>=this.length||0===this.groupSizes[t])return e;for(var n=this.groupSizes[t],o=this.indexOfGroup(t),i=o+n,r=o;r<i;r++)e+=this.tag.getRule(r)+"/*!sc*/\n";return e},t}(),O=new Map,w=new Map,A=1,D=function(t){if(O.has(t))return O.get(t);for(;w.has(A);)A++;var e=A++;return O.set(t,e),w.set(e,t),e},N=function(t){return w.get(t)},x=function(t,e){e>=A&&(A=e+1),O.set(t,e),w.set(e,t)},M="style["+E+'][data-styled-version="5.3.9"]',L=new RegExp("^"+E+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),P=function(t,e,n){for(var o,i=n.split(","),r=0,s=i.length;r<s;r++)(o=i[r])&&t.registerName(e,o)},B=function(t,e){for(var n=(e.textContent||"").split("/*!sc*/\n"),o=[],i=0,r=n.length;i<r;i++){var s=n[i].trim();if(s){var a=s.match(L);if(a){var l=0|parseInt(a[1],10),c=a[2];0!==l&&(x(c,l),P(t,c,a[3]),t.getTag().insertRules(l,o)),o.length=0}else o.push(s)}}},F=function(){return n.nc},U=function(t){var e=document.head,n=t||e,o=document.createElement("style"),i=function(t){for(var e=t.childNodes,n=e.length;n>=0;n--){var o=e[n];if(o&&1===o.nodeType&&o.hasAttribute(E))return o}}(n),r=void 0!==i?i.nextSibling:null;o.setAttribute(E,"active"),o.setAttribute("data-styled-version","5.3.9");var s=F();return s&&o.setAttribute("nonce",s),n.insertBefore(o,r),o},H=function(){function t(t){var e=this.element=U(t);e.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var e=document.styleSheets,n=0,o=e.length;n<o;n++){var i=e[n];if(i.ownerNode===t)return i}R(17)}(e),this.length=0}var e=t.prototype;return e.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch(t){return!1}},e.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.getRule=function(t){var e=this.sheet.cssRules[t];return void 0!==e&&"string"==typeof e.cssText?e.cssText:""},t}(),G=function(){function t(t){var e=this.element=U(t);this.nodes=e.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e),o=this.nodes[t];return this.element.insertBefore(n,o||null),this.length++,!0}return!1},e.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},t}(),V=function(){function t(t){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},e.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.getRule=function(t){return t<this.length?this.rules[t]:""},t}(),W=S,j={isServer:!S,useCSSOMInjection:!C},X=function(){function t(t,e,n){void 0===t&&(t=v),void 0===e&&(e={}),this.options=d({},j,{},t),this.gs=e,this.names=new Map(n),this.server=!!t.isServer,!this.server&&S&&W&&(W=!1,function(t){for(var e=document.querySelectorAll(M),n=0,o=e.length;n<o;n++){var i=e[n];i&&"active"!==i.getAttribute(E)&&(B(t,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}t.registerId=function(t){return D(t)};var e=t.prototype;return e.reconstructWithOptions=function(e,n){return void 0===n&&(n=!0),new t(d({},this.options,{},e),this.gs,n&&this.names||void 0)},e.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.getTag=function(){return this.tag||(this.tag=(n=(e=this.options).isServer,o=e.useCSSOMInjection,i=e.target,t=n?new V(i):o?new H(i):new G(i),new I(t)));var t,e,n,o,i},e.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},e.registerName=function(t,e){if(D(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},e.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(D(t),n)},e.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.clearRules=function(t){this.getTag().clearGroup(D(t)),this.clearNames(t)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(t){for(var e=t.getTag(),n=e.length,o="",i=0;i<n;i++){var r=N(i);if(void 0!==r){var s=t.names.get(r),a=e.getGroup(i);if(s&&a&&s.size){var l=E+".g"+i+'[id="'+r+'"]',c="";void 0!==s&&s.forEach((function(t){t.length>0&&(c+=t+",")})),o+=""+a+l+'{content:"'+c+'"}/*!sc*/\n'}}}return o}(this)},t}(),z=/(a)(d)/gi,Y=function(t){return String.fromCharCode(t+(t>25?39:97))};function J(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=Y(e%52)+n;return(Y(e%52)+n).replace(z,"$1-$2")}var K=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},q=function(t){return K(5381,t)};function $(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(m(n)&&!b(n))return!1}return!0}var Z=q("5.3.9"),Q=function(){function t(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&$(t),this.componentId=e,this.baseHash=K(Z,e),this.baseStyle=n,X.registerId(e)}return t.prototype.generateAndInjectStyles=function(t,e,n){var o=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(t,e,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(o,this.staticRulesId))i.push(this.staticRulesId);else{var r=mt(this.rules,t,e,n).join(""),s=J(K(this.baseHash,r)>>>0);if(!e.hasNameForId(o,s)){var a=n(r,"."+s,void 0,o);e.insertRules(o,s,a)}i.push(s),this.staticRulesId=s}else{for(var l=this.rules.length,c=K(this.baseHash,n.hash),u="",p=0;p<l;p++){var h=this.rules[p];if("string"==typeof h)u+=h;else if(h){var d=mt(h,t,e,n),g=Array.isArray(d)?d.join(""):d;c=K(c,g+p),u+=g}}if(u){var _=J(c>>>0);if(!e.hasNameForId(o,_)){var f=n(u,"."+_,void 0,o);e.insertRules(o,_,f)}i.push(_)}}return i.join(" ")},t}(),tt=/^\s*\/\/.*$/gm,et=[":","[",".","#"];function nt(t){var e,n,o,i,r=void 0===t?v:t,s=r.options,l=void 0===s?v:s,c=r.plugins,u=void 0===c?f:c,p=new a(l),h=[],d=function(t){function e(e){if(e)try{t(e+"}")}catch(t){}}return function(n,o,i,r,s,a,l,c,u,p){switch(n){case 1:if(0===u&&64===o.charCodeAt(0))return t(o+";"),"";break;case 2:if(0===c)return o+"/*|*/";break;case 3:switch(c){case 102:case 112:return t(i[0]+o),"";default:return o+(0===p?"/*|*/":"")}case-2:o.split("/*|*/}").forEach(e)}}}((function(t){h.push(t)})),g=function(t,o,r){return 0===o&&-1!==et.indexOf(r[n.length])||r.match(i)?t:"."+e};function _(t,r,s,a){void 0===a&&(a="&");var l=t.replace(tt,""),c=r&&s?s+" "+r+" { "+l+" }":l;return e=a,n=r,o=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),p(s||!r?"":r,c)}return p.use([].concat(u,[function(t,e,i){2===t&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(o,g))},d,function(t){if(-2===t){var e=h;return h=[],e}}])),_.hash=u.length?u.reduce((function(t,e){return e.name||R(15),K(t,e.name)}),5381).toString():"",_}var ot=i.createContext(),it=ot.Consumer,rt=i.createContext(),st=(rt.Consumer,new X),at=nt();function lt(){return(0,i.useContext)(ot)||st}function ct(){return(0,i.useContext)(rt)||at}function ut(t){var e=(0,i.useState)(t.stylisPlugins),n=e[0],o=e[1],r=lt(),a=(0,i.useMemo)((function(){var e=r;return t.sheet?e=t.sheet:t.target&&(e=e.reconstructWithOptions({target:t.target},!1)),t.disableCSSOMInjection&&(e=e.reconstructWithOptions({useCSSOMInjection:!1})),e}),[t.disableCSSOMInjection,t.sheet,t.target]),l=(0,i.useMemo)((function(){return nt({options:{prefix:!t.disableVendorPrefixes},plugins:n})}),[t.disableVendorPrefixes,n]);return(0,i.useEffect)((function(){s()(n,t.stylisPlugins)||o(t.stylisPlugins)}),[t.stylisPlugins]),i.createElement(ot.Provider,{value:a},i.createElement(rt.Provider,{value:l},t.children))}var pt=function(){function t(t,e){var n=this;this.inject=function(t,e){void 0===e&&(e=at);var o=n.name+e.hash;t.hasNameForId(n.id,o)||t.insertRules(n.id,o,e(n.rules,o,"@keyframes"))},this.toString=function(){return R(12,String(n.name))},this.name=t,this.id="sc-keyframes-"+t,this.rules=e}return t.prototype.getName=function(t){return void 0===t&&(t=at),this.name+t.hash},t}(),ht=/([A-Z])/,dt=/([A-Z])/g,gt=/^ms-/,_t=function(t){return"-"+t.toLowerCase()};function ft(t){return ht.test(t)?t.replace(dt,_t).replace(gt,"-ms-"):t}var vt=function(t){return null==t||!1===t||""===t};function mt(t,e,n,o){if(Array.isArray(t)){for(var i,r=[],s=0,a=t.length;s<a;s+=1)""!==(i=mt(t[s],e,n,o))&&(Array.isArray(i)?r.push.apply(r,i):r.push(i));return r}return vt(t)?"":b(t)?"."+t.styledComponentId:m(t)?"function"!=typeof(c=t)||c.prototype&&c.prototype.isReactComponent||!e?t:mt(t(e),e,n,o):t instanceof pt?n?(t.inject(n,o),t.getName(o)):t:_(t)?function t(e,n){var o,i,r=[];for(var s in e)e.hasOwnProperty(s)&&!vt(e[s])&&(Array.isArray(e[s])&&e[s].isCss||m(e[s])?r.push(ft(s)+":",e[s],";"):_(e[s])?r.push.apply(r,t(e[s],s)):r.push(ft(s)+": "+(o=s,(null==(i=e[s])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||o in l?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(r,["}"]):r}(t):t.toString();var c}var Tt=function(t){return Array.isArray(t)&&(t.isCss=!0),t};function bt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return m(t)||_(t)?Tt(mt(g(f,[t].concat(n)))):0===n.length&&1===t.length&&"string"==typeof t[0]?t:Tt(mt(g(t,n)))}new Set;var Et=function(t,e,n){return void 0===n&&(n=v),t.theme!==n.theme&&t.theme||e||n.theme},yt=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,St=/(^-|-$)/g;function Ct(t){return t.replace(yt,"-").replace(St,"")}var kt=function(t){return J(q(t)>>>0)};function Rt(t){return"string"==typeof t&&!0}var It=function(t){return"function"==typeof t||"object"==typeof t&&null!==t&&!Array.isArray(t)},Ot=function(t){return"__proto__"!==t&&"constructor"!==t&&"prototype"!==t};function wt(t,e,n){var o=t[n];It(e)&&It(o)?At(o,e):t[n]=e}function At(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];for(var i=0,r=n;i<r.length;i++){var s=r[i];if(It(s))for(var a in s)Ot(a)&&wt(t,s[a],a)}return t}var Dt=i.createContext(),Nt=Dt.Consumer;function xt(t){var e=(0,i.useContext)(Dt),n=(0,i.useMemo)((function(){return function(t,e){return t?m(t)?t(e):Array.isArray(t)||"object"!=typeof t?R(8):e?d({},e,{},t):t:R(14)}(t.theme,e)}),[t.theme,e]);return t.children?i.createElement(Dt.Provider,{value:n},t.children):null}var Mt={};function Lt(t,e,n){var o=b(t),r=!Rt(t),s=e.attrs,a=void 0===s?f:s,l=e.componentId,c=void 0===l?function(t,e){var n="string"!=typeof t?"sc":Ct(t);Mt[n]=(Mt[n]||0)+1;var o=n+"-"+kt("5.3.9"+n+Mt[n]);return e?e+"-"+o:o}(e.displayName,e.parentComponentId):l,p=e.displayName,g=void 0===p?function(t){return Rt(t)?"styled."+t:"Styled("+T(t)+")"}(t):p,_=e.displayName&&e.componentId?Ct(e.displayName)+"-"+e.componentId:e.componentId||c,E=o&&t.attrs?Array.prototype.concat(t.attrs,a).filter(Boolean):a,y=e.shouldForwardProp;o&&t.shouldForwardProp&&(y=e.shouldForwardProp?function(n,o,i){return t.shouldForwardProp(n,o,i)&&e.shouldForwardProp(n,o,i)}:t.shouldForwardProp);var S,C=new Q(n,_,o?t.componentStyle:void 0),k=C.isStatic&&0===a.length,R=function(t,e){return function(t,e,n,o){var r=t.attrs,s=t.componentStyle,a=t.defaultProps,l=t.foldedComponentIds,c=t.shouldForwardProp,p=t.styledComponentId,h=t.target,g=function(t,e,n){void 0===t&&(t=v);var o=d({},e,{theme:t}),i={};return n.forEach((function(t){var e,n,r,s=t;for(e in m(s)&&(s=s(o)),s)o[e]=i[e]="className"===e?(n=i[e],r=s[e],n&&r?n+" "+r:n||r):s[e]})),[o,i]}(Et(e,(0,i.useContext)(Dt),a)||v,e,r),_=g[0],f=g[1],T=function(t,e,n,o){var i=lt(),r=ct();return e?t.generateAndInjectStyles(v,i,r):t.generateAndInjectStyles(n,i,r)}(s,o,_),b=n,E=f.$as||e.$as||f.as||e.as||h,y=Rt(E),S=f!==e?d({},e,{},f):e,C={};for(var k in S)"$"!==k[0]&&"as"!==k&&("forwardedAs"===k?C.as=S[k]:(c?c(k,u,E):!y||u(k))&&(C[k]=S[k]));return e.style&&f.style!==e.style&&(C.style=d({},e.style,{},f.style)),C.className=Array.prototype.concat(l,p,T!==p?T:null,e.className,f.className).filter(Boolean).join(" "),C.ref=b,(0,i.createElement)(E,C)}(S,t,e,k)};return R.displayName=g,(S=i.forwardRef(R)).attrs=E,S.componentStyle=C,S.displayName=g,S.shouldForwardProp=y,S.foldedComponentIds=o?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):f,S.styledComponentId=_,S.target=o?t.target:t,S.withComponent=function(t){var o=e.componentId,i=function(t,e){if(null==t)return{};var n,o,i={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(i[n]=t[n]);return i}(e,["componentId"]),r=o&&o+"-"+(Rt(t)?t:Ct(T(t)));return Lt(t,d({},i,{attrs:E,componentId:r}),n)},Object.defineProperty(S,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=o?At({},t.defaultProps,e):e}}),Object.defineProperty(S,"toString",{value:function(){return"."+S.styledComponentId}}),r&&h()(S,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),S}var Pt=function(t){return function t(e,n,i){if(void 0===i&&(i=v),!(0,o.isValidElementType)(n))return R(1,String(n));var r=function(){return e(n,i,bt.apply(void 0,arguments))};return r.withConfig=function(o){return t(e,n,d({},i,{},o))},r.attrs=function(o){return t(e,n,d({},i,{attrs:Array.prototype.concat(i.attrs,o).filter(Boolean)}))},r}(Lt,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(t){Pt[t]=Pt(t)}));var Bt=function(){function t(t,e){this.rules=t,this.componentId=e,this.isStatic=$(t),X.registerId(this.componentId+1)}var e=t.prototype;return e.createStyles=function(t,e,n,o){var i=o(mt(this.rules,e,n,o).join(""),""),r=this.componentId+t;n.insertRules(r,r,i)},e.removeStyles=function(t,e){e.clearRules(this.componentId+t)},e.renderStyles=function(t,e,n,o){t>2&&X.registerId(this.componentId+t),this.removeStyles(t,n),this.createStyles(t,e,n,o)},t}();function Ft(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];var r=bt.apply(void 0,[t].concat(n)),s="sc-global-"+kt(JSON.stringify(r)),a=new Bt(r,s);function l(t){var e=lt(),n=ct(),o=(0,i.useContext)(Dt),r=(0,i.useRef)(e.allocateGSInstance(s)).current;return e.server&&c(r,t,e,o,n),(0,i.useLayoutEffect)((function(){if(!e.server)return c(r,t,e,o,n),function(){return a.removeStyles(r,e)}}),[r,t,e,o,n]),null}function c(t,e,n,o,i){if(a.isStatic)a.renderStyles(t,k,n,i);else{var r=d({},e,{theme:Et(e,o,l.defaultProps)});a.renderStyles(t,r,n,i)}}return i.memo(l)}function Ut(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];var i=bt.apply(void 0,[t].concat(n)).join(""),r=kt(i);return new pt(r,i)}var Ht=function(){function t(){var t=this;this._emitSheetCSS=function(){var e=t.instance.toString();if(!e)return"";var n=F();return"<style "+[n&&'nonce="'+n+'"',E+'="true"','data-styled-version="5.3.9"'].filter(Boolean).join(" ")+">"+e+"</style>"},this.getStyleTags=function(){return t.sealed?R(2):t._emitSheetCSS()},this.getStyleElement=function(){var e;if(t.sealed)return R(2);var n=((e={})[E]="",e["data-styled-version"]="5.3.9",e.dangerouslySetInnerHTML={__html:t.instance.toString()},e),o=F();return o&&(n.nonce=o),[i.createElement("style",d({},n,{key:"sc-0-0"}))]},this.seal=function(){t.sealed=!0},this.instance=new X({isServer:!0}),this.sealed=!1}var e=t.prototype;return e.collectStyles=function(t){return this.sealed?R(2):i.createElement(ut,{sheet:this.instance},t)},e.interleaveWithNodeStream=function(t){return R(3)},t}(),Gt=function(t){var e=i.forwardRef((function(e,n){var o=(0,i.useContext)(Dt),r=t.defaultProps,s=Et(e,o,r);return i.createElement(t,d({},e,{theme:s,ref:n}))}));return h()(e,t),e.displayName="WithTheme("+T(t)+")",e},Vt=function(){return(0,i.useContext)(Dt)},Wt={StyleSheet:X,masterSheet:st},jt=Pt},500:function(t,e,n){"use strict";var o=n(4765),i=function(t){return/<\/+[^>]+>/.test(t)};t.exports=function(t,e){var n=0;e=e||"    ";var r,s=!1,a=[];return(r=t,r.split(/(<\/?[^>]+>)/g).filter((function(t){return""!==t.trim()}))).map((function(t){if(t.trim().startsWith("<![CDATA[")&&(s=!0),t.trim().endsWith("]]>")){s=!1,a.push(t);var r=a.join("");return a=[],r}if(s)return a.push(t),null;t=t.replace(/^\s+|\s+$/g,""),i(t)&&n--;var l=o(e,n)+t;return function(t){return function(t){return/<[^>!]+>/.test(t)}(t)&&!i(t)&&!function(t){return/<[^>]+\/>/.test(t)}(t)&&!function(t){return/<\?[^?>]+\?>/.test(t)}(t)}(t)&&n++,l})).filter((function(t){return t})).join("\n")}},3897:function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o},t.exports.__esModule=!0,t.exports.default=t.exports},5372:function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},3405:function(t,e,n){var o=n(3897);t.exports=function(t){if(Array.isArray(t))return o(t)},t.exports.__esModule=!0,t.exports.default=t.exports},8416:function(t){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},9498:function(t){t.exports=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},8872:function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,r=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(o=n.next()).done)&&(r.push(o.value),!e||r.length!==e);s=!0);}catch(l){a=!0,i=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return r}},t.exports.__esModule=!0,t.exports.default=t.exports},2218:function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},2281:function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},7424:function(t,e,n){var o=n(5372),i=n(8872),r=n(6116),s=n(2218);t.exports=function(t,e){return o(t)||i(t,e)||r(t,e)||s()},t.exports.__esModule=!0,t.exports.default=t.exports},9400:function(t){t.exports=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))},t.exports.__esModule=!0,t.exports.default=t.exports},861:function(t,e,n){var o=n(3405),i=n(9498),r=n(6116),s=n(2281);t.exports=function(t){return o(t)||i(t)||r(t)||s()},t.exports.__esModule=!0,t.exports.default=t.exports},6116:function(t,e,n){var o=n(3897);t.exports=function(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,n),r.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/",n.nc=void 0,function(){"use strict";var t,e=n(2791),o=n(1250);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function r(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,r=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(o=n.next()).done)&&(r.push(o.value),!e||r.length!==e);s=!0);}catch(l){a=!0,i=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return r}}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(){return a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},a.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(t||(t={}));var l=function(t){return t};var c="beforeunload",u="popstate";function p(t){t.preventDefault(),t.returnValue=""}function h(){var t=[];return{get length(){return t.length},push:function(e){return t.push(e),function(){t=t.filter((function(t){return t!==e}))}},call:function(e){t.forEach((function(t){return t&&t(e)}))}}}function d(){return Math.random().toString(36).substr(2,8)}function g(t){var e=t.pathname,n=void 0===e?"/":e,o=t.search,i=void 0===o?"":o,r=t.hash,s=void 0===r?"":r;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),s&&"#"!==s&&(n+="#"===s.charAt(0)?s:"#"+s),n}function _(t){var e={};if(t){var n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));var o=t.indexOf("?");o>=0&&(e.search=t.substr(o),t=t.substr(0,o)),t&&(e.pathname=t)}return e}var f=(0,e.createContext)(null);var v=(0,e.createContext)(null);var m=(0,e.createContext)({outlet:null,matches:[]});function T(t,e){if(!t)throw new Error(e)}function b(t,e,n){void 0===n&&(n="/");var o=x(("string"===typeof e?_(e):e).pathname||"/",n);if(null==o)return null;var i=E(t);!function(t){t.sort((function(t,e){return t.score!==e.score?e.score-t.score:function(t,e){var n=t.length===e.length&&t.slice(0,-1).every((function(t,n){return t===e[n]}));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((function(t){return t.childrenIndex})),e.routesMeta.map((function(t){return t.childrenIndex})))}))}(i);for(var r=null,s=0;null==r&&s<i.length;++s)r=A(i[s],o);return r}function E(t,e,n,o){return void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===o&&(o=""),t.forEach((function(t,i){var r={relativePath:t.path||"",caseSensitive:!0===t.caseSensitive,childrenIndex:i,route:t};r.relativePath.startsWith("/")&&(r.relativePath.startsWith(o)||T(!1),r.relativePath=r.relativePath.slice(o.length));var s=M([o,r.relativePath]),a=n.concat(r);t.children&&t.children.length>0&&(!0===t.index&&T(!1),E(t.children,e,a,s)),(null!=t.path||t.index)&&e.push({path:s,score:w(s,t.index),routesMeta:a})})),e}var y=/^:\w+$/,S=3,C=2,k=1,R=10,I=-2,O=function(t){return"*"===t};function w(t,e){var n=t.split("/"),o=n.length;return n.some(O)&&(o+=I),e&&(o+=C),n.filter((function(t){return!O(t)})).reduce((function(t,e){return t+(y.test(e)?S:""===e?k:R)}),o)}function A(t,e){for(var n=t.routesMeta,o={},i="/",r=[],s=0;s<n.length;++s){var a=n[s],l=s===n.length-1,c="/"===i?e:e.slice(i.length)||"/",u=D({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(o,u.params);var p=a.route;r.push({params:o,pathname:M([i,u.pathname]),pathnameBase:L(M([i,u.pathnameBase])),route:p}),"/"!==u.pathnameBase&&(i=M([i,u.pathnameBase]))}return r}function D(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});var n=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);var o=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(t,e){return o.push(e),"([^\\/]+)"}));t.endsWith("*")?(o.push("*"),i+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";var r=new RegExp(i,e?void 0:"i");return[r,o]}(t.path,t.caseSensitive,t.end),o=s(n,2),i=o[0],r=o[1],a=e.match(i);if(!a)return null;var l=a[0],c=l.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:r.reduce((function(t,e,n){if("*"===e){var o=u[n]||"";c=l.slice(0,l.length-o.length).replace(/(.)\/+$/,"$1")}return t[e]=function(t,e){try{return decodeURIComponent(t)}catch(n){return t}}(u[n]||""),t}),{}),pathname:l,pathnameBase:c,pattern:t}}function N(t,e,n){var o,i="string"===typeof t?_(t):t,r=""===t||""===i.pathname?"/":i.pathname;if(null==r)o=n;else{var s=e.length-1;if(r.startsWith("..")){for(var a=r.split("/");".."===a[0];)a.shift(),s-=1;i.pathname=a.join("/")}o=s>=0?e[s]:"/"}var l=function(t,e){void 0===e&&(e="/");var n="string"===typeof t?_(t):t,o=n.pathname,i=n.search,r=void 0===i?"":i,s=n.hash,a=void 0===s?"":s,l=o?o.startsWith("/")?o:function(t,e){var n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((function(t){".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(o,e):e;return{pathname:l,search:P(r),hash:B(a)}}(i,o);return r&&"/"!==r&&r.endsWith("/")&&!l.pathname.endsWith("/")&&(l.pathname+="/"),l}function x(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;var n=t.charAt(e.length);return n&&"/"!==n?null:t.slice(e.length)||"/"}var M=function(t){return t.join("/").replace(/\/\/+/g,"/")},L=function(t){return t.replace(/\/+$/,"").replace(/^\/*/,"/")},P=function(t){return t&&"?"!==t?t.startsWith("?")?t:"?"+t:""},B=function(t){return t&&"#"!==t?t.startsWith("#")?t:"#"+t:""};function F(t){U()||T(!1);var n=(0,e.useContext)(f),o=n.basename,i=n.navigator,r=W(t),s=r.hash,a=r.pathname,l=r.search,c=a;if("/"!==o){var u=function(t){return""===t||""===t.pathname?"/":"string"===typeof t?_(t).pathname:t.pathname}(t),p=null!=u&&u.endsWith("/");c="/"===a?o+(p?"/":""):M([o,a])}return i.createHref({pathname:c,search:l,hash:s})}function U(){return null!=(0,e.useContext)(v)}function H(){return U()||T(!1),(0,e.useContext)(v).location}function G(){U()||T(!1);var t=(0,e.useContext)(f),n=t.basename,o=t.navigator,i=(0,e.useContext)(m).matches,r=H().pathname,s=JSON.stringify(i.map((function(t){return t.pathnameBase}))),a=(0,e.useRef)(!1);return(0,e.useEffect)((function(){a.current=!0})),(0,e.useCallback)((function(t,e){if(void 0===e&&(e={}),a.current)if("number"!==typeof t){var i=N(t,JSON.parse(s),r);"/"!==n&&(i.pathname=M([n,i.pathname])),(e.replace?o.replace:o.push)(i,e.state)}else o.go(t)}),[n,o,s,r])}function V(){var t=(0,e.useContext)(m).matches,n=t[t.length-1];return n?n.params:{}}function W(t){var n=(0,e.useContext)(m).matches,o=H().pathname,i=JSON.stringify(n.map((function(t){return t.pathnameBase})));return(0,e.useMemo)((function(){return N(t,JSON.parse(i),o)}),[t,i,o])}function j(t,n){return void 0===n&&(n=[]),null==t?null:t.reduceRight((function(o,i,r){return(0,e.createElement)(m.Provider,{children:void 0!==i.route.element?i.route.element:o,value:{outlet:o,matches:n.concat(t.slice(0,r+1))}})}),null)}function X(t){T(!1)}function z(n){var o=n.basename,i=void 0===o?"/":o,r=n.children,s=void 0===r?null:r,a=n.location,l=n.navigationType,c=void 0===l?t.Pop:l,u=n.navigator,p=n.static,h=void 0!==p&&p;U()&&T(!1);var d=L(i),g=(0,e.useMemo)((function(){return{basename:d,navigator:u,static:h}}),[d,u,h]);"string"===typeof a&&(a=_(a));var m=a,b=m.pathname,E=void 0===b?"/":b,y=m.search,S=void 0===y?"":y,C=m.hash,k=void 0===C?"":C,R=m.state,I=void 0===R?null:R,O=m.key,w=void 0===O?"default":O,A=(0,e.useMemo)((function(){var t=x(E,d);return null==t?null:{pathname:t,search:S,hash:k,state:I,key:w}}),[d,E,S,k,I,w]);return null==A?null:(0,e.createElement)(f.Provider,{value:g},(0,e.createElement)(v.Provider,{children:s,value:{location:A,navigationType:c}}))}function Y(t){var n=t.children,o=t.location;return function(t,n){U()||T(!1);var o,i=(0,e.useContext)(m).matches,r=i[i.length-1],s=r?r.params:{},a=(r&&r.pathname,r?r.pathnameBase:"/"),l=(r&&r.route,H());if(n){var c,u="string"===typeof n?_(n):n;"/"===a||(null==(c=u.pathname)?void 0:c.startsWith(a))||T(!1),o=u}else o=l;var p=o.pathname||"/",h=b(t,{pathname:"/"===a?p:p.slice(a.length)||"/"});return j(h&&h.map((function(t){return Object.assign({},t,{params:Object.assign({},s,t.params),pathname:M([a,t.pathname]),pathnameBase:"/"===t.pathnameBase?a:M([a,t.pathnameBase])})})),i)}(J(n),o)}function J(t){var n=[];return e.Children.forEach(t,(function(t){if((0,e.isValidElement)(t))if(t.type!==e.Fragment){t.type!==X&&T(!1);var o={caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path};t.props.children&&(o.children=J(t.props.children)),n.push(o)}else n.push.apply(n,J(t.props.children))})),n}function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function q(){q=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",r=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function a(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(R){a=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,r=Object.create(i.prototype),s=new S(o||[]);return r._invoke=function(t,e,n){var o="suspendedStart";return function(i,r){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw r;return k()}for(n.method=i,n.arg=r;;){var s=n.delegate;if(s){var a=b(s,n);if(a){if(a===u)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var l=c(t,e,n);if("normal"===l.type){if(o=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o="completed",n.method="throw",n.arg=l.arg)}}}(t,n,s),r}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(R){return{type:"throw",arg:R}}}t.wrap=l;var u={};function p(){}function h(){}function d(){}var g={};a(g,i,(function(){return this}));var _=Object.getPrototypeOf,f=_&&_(_(C([])));f&&f!==e&&n.call(f,i)&&(g=f);var v=d.prototype=p.prototype=Object.create(g);function m(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function o(i,r,s,a){var l=c(t[i],t,r);if("throw"!==l.type){var u=l.arg,p=u.value;return p&&"object"==K(p)&&n.call(p,"__await")?e.resolve(p.__await).then((function(t){o("next",t,s,a)}),(function(t){o("throw",t,s,a)})):e.resolve(p).then((function(t){u.value=t,s(u)}),(function(t){return o("throw",t,s,a)}))}a(l.arg)}var i;this._invoke=function(t,n){function r(){return new e((function(e,i){o(t,n,e,i)}))}return i=i?i.then(r,r):r()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var o=c(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,u;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function y(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=d,a(v,"constructor",d),a(d,"constructor",h),h.displayName=a(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(T.prototype),a(T.prototype,r,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,o,i,r){void 0===r&&(r=Promise);var s=new T(l(e,n,o,i),r);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},m(v),a(v,s,"Generator"),a(v,i,(function(){return this})),a(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var o=e.pop();if(o in t)return n.value=o,n.done=!1,n}return n.done=!0,n}},t.values=C,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(y),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return s.type="throw",s.arg=t,e.next=n,o&&(e.method="next",e.arg=void 0),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],s=r.completion;if("root"===r.tryLoc)return o("end");if(r.tryLoc<=this.prev){var a=n.call(r,"catchLoc"),l=n.call(r,"finallyLoc");if(a&&l){if(this.prev<r.catchLoc)return o(r.catchLoc,!0);if(this.prev<r.finallyLoc)return o(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return o(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return o(r.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=t,s.arg=e,r?(this.method="next",this.next=r.finallyLoc,u):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),y(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var i=o.arg;y(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function $(t,e,n,o,i,r,s){try{var a=t[r](s),l=a.value}catch(c){return void n(c)}a.done?e(l):Promise.resolve(l).then(o,i)}function Z(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function s(t){$(r,o,i,s,a,"next",t)}function a(t){$(r,o,i,s,a,"throw",t)}s(void 0)}))}}var Q=n(9271),tt=n.n(Q);function et(t,e){tt().Blocks[t]={init:function(){this.appendValueInput("attribute").setCheck(null).appendField(t),this.appendStatementInput("Content").setCheck(null),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(e)}}}function nt(t,e){tt().JavaScript[t]=function(t){var n=tt().JavaScript.statementToCode(t,"Content"),o=t.getInputTargetBlock("attribute"),i=tt().JavaScript.blockToCode(o);return i?"<".concat(e).concat(i,"> ").concat(n," </").concat(e,">"):"\n      <".concat(e,">\n       ").concat(n," \n      </").concat(e,">")}}function ot(t,e,n,o){tt().Blocks[t]={init:function(){this.appendDummyInput().appendField("".concat(e," =")).appendField(new(tt().FieldTextInput)("scrie aici"),"value"),this.setNextStatement(!0,null),this.setPreviousStatement(!0,null),this.setColour("".concat(n)),this.setTooltip("".concat(o))}}}function it(t,e){tt().JavaScript[t]=function(t){var n=t.getFieldValue("value");return"".concat(e,' = "').concat(n,'" ')}}function rt(t,e,n){tt().Blocks[t]={init:function(){this.appendDummyInput().appendField("".concat(t,": ")).appendField(new(tt().FieldTextInput)("scrie aici"),"value"),this.setNextStatement(!0,null),this.setPreviousStatement(!0,null),this.setColour("".concat(n)),this.setTooltip("".concat(e))}}}function st(t){tt().JavaScript[t]=function(e){var n=e.getFieldValue("value");return"".concat(t,": ").concat(n,"; ")}}function at(t,e,n){tt().Blocks["".concat(t)]={init:function(){this.appendDummyInput().appendField("".concat(t," =")).appendField(new(tt().FieldDropdown)(e),"option"),this.setColour("".concat(n)),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}}}function lt(t){tt().JavaScript["".concat(t)]=function(e){var n=e.getFieldValue("option");return"".concat(t,": ").concat(n,"; ")}}function ct(t,e,n,o){tt().Blocks["".concat(t)]={init:function(){this.appendDummyInput().appendField(new(tt().FieldDropdown)(e),"leftOption").appendField(new(tt().FieldDropdown)(n),"option"),this.setColour("".concat(o)),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}}}function ut(t){tt().JavaScript["".concat(t)]=function(t){var e=t.getFieldValue("leftOption"),n=t.getFieldValue("option");return"".concat(e,": ").concat(n,"; ")}}function pt(t,e,n){tt().Blocks["".concat(t)]={init:function(){this.appendDummyInput().appendField(new(tt().FieldDropdown)(e),"option").appendField(new(tt().FieldTextInput)("scrie aici"),"value"),this.setColour("".concat(n)),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}}}function ht(t){tt().JavaScript["".concat(t)]=function(t){var e=t.getFieldValue("option"),n=t.getFieldValue("value");return"".concat(e,": ").concat(n,"; ")}}var dt="#84a671";tt().Blocks.attributes={init:function(){this.appendDummyInput().appendField("attributes"),this.appendStatementInput("Content").setCheck(null),this.setOutput(!0),this.setColour(dt)}},tt().JavaScript.attributes=function(t){var e=tt().JavaScript.statementToCode(t,"Content");return"".concat(e)},tt().Blocks.style={init:function(){this.appendDummyInput().appendField("style"),this.appendStatementInput("Content").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(dt),this.setInputsInline(!1)}},tt().JavaScript.style=function(t){var e=tt().JavaScript.statementToCode(t,"Content");return'style="'.concat(e.trim(),'" ')},at("type",[["text","text"],["checkbox","checkbox"],["date","date"],["password","password"],["email","email"],["image","image"],["submit","submit"],["hidden","hidden"],["radio","radio"],["reset","reset"],["url","url"]],dt),lt("type"),ot("id","id","#4fc0c4",""),it("id","id"),ot("heightAttr","height",dt,""),it("heightAttr","height"),ot("src","src",dt,""),it("src","src"),ot("alt","alt",dt,""),it("alt","alt"),tt().Blocks.parameter={init:function(){this.appendDummyInput().appendField(new(tt().FieldTextInput)("scrie aici"),"value"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(dt)}},tt().JavaScript.parameter=function(t){var e=t.getFieldValue("value");return"".concat(e," ")},tt().Blocks.document={init:function(){this.appendDummyInput().appendField("document"),this.appendStatementInput("Content").setCheck(null),this.setInputsInline(!0),this.setColour("#f22010"),this.setTooltip(""),this.setHelpUrl("")}},tt().JavaScript.document=function(t){var e=tt().JavaScript.statementToCode(t,"Content");return"<! DOCTYPE HTML > \n  <html>\n   ".concat(e," \n  </html>")},et("body","#f22010"),nt("body","body"),et("footer","#f22010"),nt("footer","footer"),et("head","#f22010"),nt("head","head"),et("title","#f22010"),nt("title","title");var gt="#f26110";et("paragraph",gt),nt("paragraph","p"),et("br",gt),nt("br","br"),et("strong",gt),nt("strong","strong"),et("u",gt),nt("u","u"),et("div",gt),nt("div","div"),tt().Blocks.regexInput={init:function(){this.appendDummyInput().appendField("text:").appendField(new(tt().FieldTextInput)("default"),"regex"),this.setColour(gt),this.setNextStatement(!0,null),this.setPreviousStatement(!0,null)}},tt().JavaScript.regexInput=function(t){return t.getFieldValue("regex")},tt().Blocks.h={init:function(){this.appendValueInput("style").setCheck(null).appendField(new(tt().FieldDropdown)([["h1","h1"],["h2","h2"],["h3","h3"],["h4","h4"],["h5","h5"],["h6","h6"]]),"optionH"),this.appendStatementInput("Content").setCheck(null),this.setNextStatement(!0,null),this.setPreviousStatement(!0,null),this.setColour(gt)}},tt().JavaScript.h=function(t){var e=t.getFieldValue("optionH"),n=tt().JavaScript.statementToCode(t,"Content"),o=t.getInputTargetBlock("style"),i=tt().JavaScript.blockToCode(o);return i?"<".concat(e," style=").concat(i,"> ").concat(n," </").concat(e,">"):"<".concat(e,"> ").concat(n," </").concat(e,">")},tt().Blocks.br={init:function(){this.appendDummyInput().appendField("br"),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(gt)}},tt().JavaScript.br=function(t){return"\n  <br />"};var _t="#dedb2c";function ft(t){tt().Blocks[t]={init:function(){this.appendValueInput("style").setCheck(null).appendField(t),this.appendStatementInput("Content").setCheck(null),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#4fc488")}}}function vt(t,e){tt().JavaScript[t]=function(t){var n=tt().JavaScript.statementToCode(t,"Content"),o=t.getInputTargetBlock("style"),i=tt().JavaScript.blockToCode(o);return i?"<".concat(e," style=").concat(i,"> ").concat(n," </").concat(e,">"):"<".concat(e,"> ").concat(n," </").concat(e,">")}}et("form",_t),nt("form","form"),et("label",_t),nt("label","label"),tt().JavaScript.type=function(t){var e=t.getFieldValue("option");return'type= "'.concat(e,'" ')},tt().Blocks.input={init:function(){this.appendValueInput("attribute").setCheck(null).appendField("input"),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(_t)}},tt().JavaScript.input=function(t){var e=t.getInputTargetBlock("attribute"),n=tt().JavaScript.blockToCode(e);return n?"<input ".concat(n," />"):"<input />"},ft("ul"),vt("ul","ul"),ft("ol"),vt("ol","ol"),ft("li"),vt("li","li"),ft("dl"),vt("dl","dl"),ft("dt"),vt("dt","dt"),ft("dd"),vt("dd","dd"),et("table","#4fc0c4"),nt("table","table"),et("td","#4fc0c4"),nt("td","td"),et("th","#4fc0c4"),nt("th","th"),et("thead","#4fc0c4"),nt("thead","thead"),et("tbody","#4fc0c4"),nt("tbody","tbody"),et("tr","#4fc0c4"),nt("tr","tr"),et("caption","#4fc0c4"),nt("caption","caption");var mt,Tt="face ceva",bt="#e32db6";!function(t,e,n){tt().Blocks[t]={init:function(){this.appendDummyInput().appendField(new(tt().FieldTextInput)("scrie aici"),"leftValue").appendField(new(tt().FieldTextInput)("scrie aici"),"rightValue"),this.setNextStatement(!0,null),this.setPreviousStatement(!0,null),this.setColour("".concat(n)),this.setTooltip("".concat(e))}}}("any",Tt,"#040806"),mt="any",tt().JavaScript[mt]=function(t){var e=t.getFieldValue("leftValue"),n=t.getFieldValue("rightValue");return"".concat(e,": ").concat(n,"; ")},rt("color",Tt,bt),st("color"),rt("background-color",Tt,bt),st("background-color"),rt("font-size",Tt,bt),st("font-size"),rt("height",Tt,bt),st("height"),rt("width",Tt,bt),st("width"),rt("z-index",Tt,bt),st("z-index"),rt("border",Tt,bt),st("border"),rt("gap",Tt,bt),st("gap");at("display",[["inline","inline"],["flex","flex"],["grid","grid"],["block","block"],["none","none"]],bt),lt("display");pt("margin",[["margin","margin"],["margin-top","margin-top"],["margin-left","margin-left"],["margin-right","margin-right"]],bt),ht("margin"),pt("padding",[["padding","padding"],["padding-top","padding-top"],["padding-left","padding-left"],["padding-right","padding-right"]],bt),ht("padding");var Et=[["auto","auto"],["normal","normal"],["start","start"],["end","end"],["center","center"],["stretch","stretch"],["baseline","baseline"]];at("justify-self",Et,bt),lt("justify-self"),at("align-self",Et,bt),lt("align-self");var yt=[["baseline","baseline"],["space-between","space-between"],["space-around","space-around"],["auto","auto"],["normal","normal"],["start","start"],["end","end"],["center","center"],["stretch","stretch"]];at("justify-content",yt,bt),lt("justify-content"),at("align-content",yt,bt),lt("align-content");var St="#4fc0c4",Ct=[["row","row"],["row-reverse","row-reverse"],["column","column"],["column-reverse","column-reverse"],["initial","initial"],["inherit","inherit"]];at("flex-direction",Ct,St),lt("flex-direction"),at("flex-flow",Ct,St),lt("flex-flow");at("flex-wrap",[["nowrap","nowrap"],["wrap","wrap"],["wrap-reverse","wrap-reverse"],["initial","initial"],["inherit","inherit"]],St),lt("flex-wrap");var kt="#d266ed",Rt="ceva";rt("border-color",Rt,kt),st("border-color"),rt("border-radius",Rt,kt),st("border-radius");ct("borderStyle",[["border-style","border-style"],["border-left-style","border-left-style"],["border-right-style","border-right-style"],["border-top-style","border-top-style"],["border-bottom-style","border-bottom-style"]],[["none","none"],["hidden","hidden"],["dotted","dotted"],["dashed","dashed"],["solid","solid"],["double","double"],["groove","groove"],["ridge","ridge"],["inset","inset"],["outset","outset"],["initial","initial"],["inherit","inherit"]],kt),ut("borderStyle"),ct("borderWidth",[["border-width","border-width"],["border-left-width","border-left-width"],["border-right-width","border-right-width"],["border-top-width","border-top-width"],["border-bottom-width","border-bottom-width"]],[["medium","medium"],["thin","thin"],["thick","thick"]],kt),ut("borderWidth");var It="#66eda1",Ot="lalal";pt("grid-gap",[["grid-row-gap","grid-row-gap"],["grid-column-gap","grid-column-gap"],["grid-gap","grid-gap"]],It),ht("grid-gap"),rt("grid-auto-rows",Ot,It),st("grid-auto-rows"),rt("grid-auto-flow",Ot,It),st("grid-auto-flow"),rt("grid-template-rows",Ot,It),st("grid-template-rows"),rt("grid-template-columns",Ot,It),st("grid-template-columns"),rt("grid-area",Ot,It),st("grid-area"),rt("grid-row",Ot,It),st("grid-row"),rt("grid-column",Ot,It),st("grid-column");pt("grid-position",[["grid-row-start","grid-row-start"],["grid-row-end","grid-row-end"],["grid-column-start","grid-column-start"],["grid-column-end","grid-column-end"]],It),ht("grid-position");var wt="#4fc0c4";tt().Blocks.script={init:function(){this.appendDummyInput().appendField("script"),this.appendStatementInput("Content").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(wt)}},tt().JavaScript.script=function(t){var e=tt().JavaScript.statementToCode(t,"Content");return"<script> ".concat(e," <\/script>")},tt().Blocks.GetElementById={init:function(){this.appendDummyInput().appendField("Get Document By ").appendField(new(tt().FieldTextInput)("id"),"id"),this.appendStatementInput("Content").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(wt)}},tt().JavaScript.GetElementById=function(t){var e=tt().JavaScript.statementToCode(t,"Content"),n=t.getFieldValue("id");return"\n    document.getElementById('".concat(n,"')").concat(e.trim())},tt().Blocks.OnClick={init:function(){this.appendDummyInput().appendField("onclick alert"),this.setPreviousStatement(!0,null),this.setPreviousStatement(!0,null),this.setColour(wt)}},tt().JavaScript.OnClick=function(t){tt().JavaScript.statementToCode(t,"Content");return".onclick = function(){alert('test')}"};var At=function(){return At=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},At.apply(this,arguments)};var Dt=function(t){var n=t.ref,o=t.initialXml,i=t.toolboxConfiguration,r=t.workspaceConfiguration,s=t.onWorkspaceChange,a=t.onImportXmlError,l=t.onInject,c=t.onDispose,u=e.useState(null),p=u[0],h=u[1],d=e.useState(o),g=d[0],_=d[1],f=e.useState(!1),v=f[0],m=f[1],T=e.useState(!1),b=T[0],E=T[1],y=e.useRef(r);e.useEffect((function(){y.current=r}),[r]);var S=e.useRef(i);e.useEffect((function(){S.current=i,i&&p&&p.updateToolbox(i)}),[i,p]);var C=e.useRef(l),k=e.useRef(c);e.useEffect((function(){C.current=l}),[l]),e.useEffect((function(){k.current=c}),[c]);var R=e.useCallback((function(t){s&&s(t)}),[s]);return e.useEffect((function(){if(n.current){var t=tt().inject(n.current,At(At({},y.current),{toolbox:S.current}));h(t),m(!1),E(!1),C.current&&C.current(t);var e=k.current;return function(){t.dispose(),e&&e(t)}}}),[n]),e.useEffect((function(){p&&!b&&R(p)}),[R,b,p]),e.useEffect((function(){if(null!=p){var t=function(){R(p)};return p.addChangeListener(t),function(){p.removeChangeListener(t)}}}),[p,R]),e.useEffect((function(){if(null!=p){var t=function(t,e){var n=null,o=null;return[function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];o=function(){n=null,t.apply(void 0,i)},clearTimeout(n),n=setTimeout(o,e)},function(){null!==n&&(clearTimeout(n),o())}]}((function(){var t=tt().Xml.domToText(tt().Xml.workspaceToDom(p));t!==g&&_(t)}),200),e=t[0],n=t[1];return p.addChangeListener(e),function(){p.removeChangeListener(e),n()}}}),[p,g]),e.useEffect((function(){if(g&&p&&!v){var t=function(t,e,n){try{return tt().Xml.domToWorkspace(tt().Xml.textToDom(t),e),!0}catch(o){return n&&n(o),!1}}(g,p,a);t||_(null),m(!0)}}),[g,p,v,a]),{workspace:p,xml:g}},Nt=n(184),xt=n(2007),Mt=n.n(xt),Lt={initialXml:Mt().string,toolboxConfiguration:Mt().object,workspaceConfiguration:Mt().object,className:Mt().string,onWorkspaceChange:Mt().func,onImportXmlError:Mt().func,onXmlChange:Mt().func,onInject:Mt().func,onDispose:Mt().func};function Pt(t){var n=t.initialXml,o=t.toolboxConfiguration,i=t.workspaceConfiguration,r=t.className,s=t.onWorkspaceChange,a=t.onXmlChange,l=t.onImportXmlError,c=t.onInject,u=t.onDispose,p=e.useRef(null),h=Dt({ref:p,initialXml:n,toolboxConfiguration:o,workspaceConfiguration:i,onWorkspaceChange:s,onImportXmlError:l,onInject:c,onDispose:u}).xml,d=e.useRef(a);return e.useEffect((function(){d.current=a}),[a]),e.useEffect((function(){d.current&&h&&d.current(h)}),[h]),(0,Nt.jsx)("div",{className:r,ref:p},void 0)}Pt.propTypes=Lt,Pt.defaultProps={initialXml:null,toolboxConfiguration:null,workspaceConfiguration:null,className:null,onWorkspaceChange:null,onImportXmlError:null,onXmlChange:null,onInject:null,onDispose:null};var Bt={kind:"sep",gap:"100"},Ft={kind:"categoryToolbox",contents:[{kind:"category",name:"HTML",expanded:"true",contents:[{kind:"category",name:"Structura",colour:"#f22010",expanded:"true",contents:[{kind:"block",type:"document"},{kind:"block",type:"head"},{kind:"block",type:"body"},{kind:"block",type:"footer"},{kind:"block",type:"title"}]},{kind:"category",name:"Atribute",colour:"#84a671",expanded:"true",contents:[{kind:"block",type:"attributes"},{kind:"block",type:"style"},{kind:"block",type:"id"},{kind:"block",type:"type"},{kind:"block",type:"heightAttr"},{kind:"block",type:"src"},{kind:"block",type:"alt"},{kind:"block",type:"parameter"}]},{kind:"category",name:"Formatare text",colour:"#f26110",expanded:"true",contents:[{kind:"block",type:"div"},{kind:"block",type:"regexInput"},{kind:"block",type:"h"},{kind:"block",type:"paragraph"},{kind:"block",type:"br"},{kind:"block",type:"strong"},{kind:"block",type:"u"}]},{kind:"category",name:"Liste",colour:"#4fc488",expanded:"true",contents:[{kind:"block",type:"ul"},{kind:"block",type:"ol"},{kind:"block",type:"li"},{kind:"sep",gap:"10"},{kind:"block",type:"dd"},{kind:"block",type:"dt"},{kind:"block",type:"dl"}]},{kind:"category",name:"Formulare",colour:"#dedb2c",expanded:"true",contents:[{kind:"block",type:"form"},{kind:"block",type:"input"},{kind:"block",type:"label"}]},{kind:"category",name:"Tabele",colour:"#4fc0c4",expanded:"true",contents:[{kind:"block",type:"table"},{kind:"block",type:"td"},{kind:"block",type:"tr"},{kind:"block",type:"th"},{kind:"block",type:"thead"},{kind:"block",type:"tbody"},{kind:"block",type:"caption"}]}]},Bt,{kind:"category",name:"CSS",expanded:"true",contents:[{kind:"category",name:"De baza",colour:"#e32db6",expanded:"true",contents:[{kind:"block",type:"any"},{kind:"block",type:"color"},{kind:"block",type:"background-color"},{kind:"block",type:"font-size"},{kind:"block",type:"display"},{kind:"block",type:"gap"},{kind:"block",type:"margin"},{kind:"block",type:"padding"},{kind:"block",type:"height"},{kind:"block",type:"width"},{kind:"block",type:"z-index"},{kind:"block",type:"border"},{kind:"block",type:"justify-self"},{kind:"block",type:"align-self"},{kind:"block",type:"justify-content"},{kind:"block",type:"align-content"}]},{kind:"category",name:"Grid",colour:"#66eda1",expanded:"true",contents:[{kind:"block",type:"display"},{kind:"block",type:"gap"},{kind:"block",type:"grid-gap"},{kind:"block",type:"grid-template-rows"},{kind:"block",type:"grid-template-columns"},{kind:"block",type:"grid-auto-rows"},{kind:"block",type:"grid-auto-flow"},{kind:"label",text:"Pozitionare"},{kind:"block",type:"grid-area"},{kind:"block",type:"grid-row"},{kind:"block",type:"grid-column"},{kind:"block",type:"grid-position"}]},{kind:"category",name:"Flex",colour:"#4fc0c4",expanded:"true",contents:[{kind:"block",type:"display"},{kind:"block",type:"gap"},{kind:"block",type:"flex-direction"},{kind:"block",type:"flex-flow"},{kind:"block",type:"flex-wrap"}]},{kind:"category",name:"Border",colour:"#d266ed",expanded:"true",contents:[{kind:"block",type:"border"},{kind:"block",type:"border-color"},{kind:"block",type:"border-radius"},{kind:"block",type:"borderStyle"},{kind:"block",type:"borderWidth"}]}]},Bt,{kind:"category",name:"JS",expanded:"true",contents:[{kind:"category",name:"De baza",colour:"`#4fc0c4",expanded:"true",contents:[{kind:"block",type:"script"},{kind:"block",type:"GetElementById"},{kind:"block",type:"OnClick"}]}]}]};function Ut(t){var n=t.setHtml,o=t.xmlFromDb,i=t.setXml,r=(0,e.useRef)(null),a=s((0,e.useState)(""),2),l=(a[0],a[1]);var c=Dt({ref:r,toolboxConfiguration:Ft,initialXml:null!==o&&void 0!==o?o:'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>',workspaceConfiguration:{grid:{spacing:20,length:3,colour:"#ccc",snap:!0}},onWorkspaceChange:function(t){var e=tt().JavaScript.workspaceToCode(t);t.getAllBlocks(!0).length>0?t.scrollbar.setContainerVisible(!0):t.scrollbar.setContainerVisible(!1),l(e),n(e);var o=tt().Xml.workspaceToDom(t),r=tt().Xml.domToText(o);i(r)},onImportXmlError:function(){return console.log("eroare xml import")},onInject:function(){return console.log("creating workspace")},onDispose:function(){return console.log("deleting workspace")}}),u=c.workspace;return(0,e.useEffect)((function(){u&&u.scrollbar.setContainerVisible(!1)}),[u]),(0,Nt.jsx)(Nt.Fragment,{children:(0,Nt.jsx)("div",{className:"fill-height",ref:r})})}var Ht=function(){return(0,Nt.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,Nt.jsx)("div",{className:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full text-blue-600",role:"status",children:(0,Nt.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,Nt.jsx)("div",{className:"\r spinner-border\r animate-spin\r inline-block\r w-8\r h-8\r border-4\r rounded-full\r text-purple-500\r ",role:"status",children:(0,Nt.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,Nt.jsx)("div",{className:"\r spinner-border\r animate-spin\r inline-block\r w-8\r h-8\r border-4\r rounded-full\r text-green-500\r ",role:"status",children:(0,Nt.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,Nt.jsx)("div",{className:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full text-red-500",role:"status",children:(0,Nt.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,Nt.jsx)("div",{className:"\r spinner-border\r animate-spin\r inline-block\r w-8\r h-8\r border-4\r rounded-full\r text-yellow-500\r ",role:"status",children:(0,Nt.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,Nt.jsx)("div",{className:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full text-blue-300",role:"status",children:(0,Nt.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,Nt.jsx)("div",{className:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full text-gray-300",role:"status",children:(0,Nt.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})};var Gt=function(t){var n=t.text,o=t.handleTextChange,i=t.handleFinishedEdit,r=t.isVisibleForShare,a=s((0,e.useState)(!1),2),l=a[0],c=a[1],u=s((0,e.useState)(!1),2),p=u[0],h=u[1],d=function(){h(!1),c(!1),p&&i&&i()};return(0,Nt.jsx)(Nt.Fragment,{children:p?(0,Nt.jsx)("input",{type:"text",value:n,onChange:o,onKeyDown:function(t){"Enter"===t.key&&(h(!1),i&&i())},onBlur:d,className:"p-1"}):(0,Nt.jsxs)("div",{className:"flex gap-4 cursor-pointer ",onMouseOver:function(){c(!0)},onMouseLeave:d,onClick:function(){h(!0)},children:[(0,Nt.jsx)("div",{children:n}),l&&r&&(0,Nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})})]})})},Vt=(Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",maximumFractionDigits:0}),{baseApiUrl:"/api"}),Wt=n(4569),jt=n.n(Wt);function Xt(t){var e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return e?e[2]:null}var zt=function(){var t=Z(q().mark((function t(e,n){var o,i,r;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Xt("token"),t.prev=1,t.next=4,jt().get(e,{headers:{Authorization:"Bearer ".concat(o)},params:{isTeacher:n}});case 4:return i=t.sent,t.abrupt("return",i.data);case 8:if(t.prev=8,t.t0=t.catch(1),!jt().isAxiosError(t.t0)){t.next=12;break}return t.abrupt("return",null===(r=t.t0.response)||void 0===r?void 0:r.data);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}(),Yt=function(){var t=Z(q().mark((function t(e){var n,o;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,jt().get(e,{headers:{Authorization:"Bearer ".concat(Xt("token"))}});case 3:return n=t.sent,t.abrupt("return",n.data);case 7:if(t.prev=7,t.t0=t.catch(0),!jt().isAxiosError(t.t0)){t.next=11;break}return t.abrupt("return",null===(o=t.t0.response)||void 0===o?void 0:o.data);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),Jt=function(){var t=Z(q().mark((function t(e,n,o,i){var r,s;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,jt().post(e,n,{headers:{Authorization:"Bearer ".concat(Xt("token"))},params:{isTeacher:o,ownerId:i}});case 3:return r=t.sent,t.abrupt("return",r.data);case 7:if(t.prev=7,t.t0=t.catch(0),!jt().isAxiosError(t.t0)){t.next=11;break}return t.abrupt("return",null===(s=t.t0.response)||void 0===s?void 0:s.data);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n,o,i){return t.apply(this,arguments)}}(),Kt={reason:"Account no longer needed",notify:!0},qt=function(){var t=Z(q().mark((function t(e,n){var o,i;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,jt().delete(e,{data:Kt,headers:{Authorization:"Bearer ".concat(Xt("token"))},params:{isTeacher:n}});case 3:return o=t.sent,t.abrupt("return",o.data);case 7:if(t.prev=7,t.t0=t.catch(0),!jt().isAxiosError(t.t0)){t.next=11;break}return t.abrupt("return",null===(i=t.t0.response)||void 0===i?void 0:i.data);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}(),$t=function(){var t=Z(q().mark((function t(e,n,o){var i,r;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.isTeacher=o,t.prev=1,t.next=4,jt().post(e,n,{headers:{Authorization:"Bearer ".concat(Xt("token"))}});case 4:return i=t.sent,t.abrupt("return",i.data);case 8:if(t.prev=8,t.t0=t.catch(1),!jt().isAxiosError(t.t0)){t.next=12;break}return t.abrupt("return",null===(r=t.t0.response)||void 0===r?void 0:r.data);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n,o){return t.apply(this,arguments)}}(),Zt=e.createContext({isAuthentificated:!1,username:void 0,isTeacher:!1,idTeacher:"",setIsTeacher:function(){},setToken:function(){},setUsername:function(){},setIdTeacher:function(){}});var Qt=function(t){var n=t.children,o=s((0,e.useState)(!!Xt("token")),2),i=o[0],r=o[1],a=s((0,e.useState)(""),2),l=a[0],c=a[1],u=s((0,e.useState)(""),2),p=u[0],h=u[1],d=s((0,e.useState)(!1),2),g=d[0],_=d[1];(0,e.useEffect)((function(){f()}),[]);var f=function(){c(localStorage.getItem("username")||""),h(localStorage.getItem("idTeacher")||""),localStorage.getItem("idTeacher")&&_(!0)};return(0,Nt.jsx)(Zt.Provider,{value:{isAuthentificated:i,username:l,isTeacher:g,idTeacher:p,setToken:function(){r(!0)},setUsername:c,setIsTeacher:_,setIdTeacher:h},children:n})};var te=function(t){var n=t.name,o=t.xml,i=V(),r=(0,e.useContext)(Zt).isTeacher,s="".concat(Vt.baseApiUrl,"/Projects/").concat(i.id,"/Save"),a={id:i.id,name:n,xml:o},l=function(){var t=Z(q().mark((function t(){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o){t.next=3;break}return alert(n),t.abrupt("return");case 3:return t.next=5,Jt(s,a,r);case 5:t.sent;case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,Nt.jsx)("button",{className:"bg-mintBlue hover:bg-mint text-yellow font-bold py-2 px-4 border-b-4 border-mint hover:border-mintBlue rounded",onClick:l,children:"Salveaza Proiect"})},ee=n(500),ne=n.n(ee);var oe=function(t){var e=t.htmlText;return(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)("div",{className:"flex justify-end items-end mr-2",children:(0,Nt.jsxs)("button",{className:"flex bg-mintBlue hover:bg-mint text-yellow px-1 py-1 font-bold border-b-4 border-mint hover:border-mintBlue rounded",onClick:function(){var t=document.createElement("a"),n=new Blob([e],{type:"text/plain"});t.href=URL.createObjectURL(n),t.download="index.html",document.body.appendChild(t),t.click()},children:[(0,Nt.jsx)("span",{children:"Descarca"}),(0,Nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})})]})}),(0,Nt.jsx)("textarea",{id:"code",className:"w-full h-[77%]",value:ne()(e),readOnly:!0})]})};var ie=function(t){var e=t.children;return(0,Nt.jsxs)("div",{className:"border-gray-400 border-4 h-[83%] rounded overflow-y-auto",children:[(0,Nt.jsxs)("div",{className:" bg-gray-300 border-b-2 border-gray-400",children:[(0,Nt.jsxs)("div",{className:"bg-gray-200 flex justify-between w-[30%] rounded border-b-2 border-gray-400",children:[(0,Nt.jsx)("span",{children:"\xa0 PaginaMea"}),(0,Nt.jsx)("span",{className:"px-2",children:"x"})]}),(0,Nt.jsxs)("div",{className:"flex gap-2 items-center border-t-2 border-gray-200 ",children:[(0,Nt.jsxs)("div",{className:"pr-4 flex gap-1 ",children:[(0,Nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),(0,Nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})})]}),(0,Nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),(0,Nt.jsx)("span",{className:"bg-gray-100 pr-24 rounded pl-2",children:" https://localhost:3000/PaginaMea"})]})]}),(0,Nt.jsx)("div",{children:e})]})};function re(){return re=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},re.apply(this,arguments)}var se=["html","dangerouslySetInnerHTML"];var ae=function(t){var n=t.html,o=function(t,e){if(null==t)return{};var n,o,i={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,se),i=(0,e.useRef)(null),r=(0,e.useRef)(!0);return(0,e.useEffect)((function(){if(!n||!i.current)throw new Error("html prop cant't be null");if(r.current){r.current=!1;var t=document.createRange().createContextualFragment(n);i.current.innerHTML="",i.current.appendChild(t)}}),[n,i]),e.createElement("div",re({},o,{ref:i}))};var le=function(t){var e=t.htmlText;return e?(0,Nt.jsx)(ie,{children:(0,Nt.jsx)(ae,{html:e},e)}):(0,Nt.jsx)(Nt.Fragment,{children:" "})},ce=n(6044);var ue=function(t){var n=t.comment,o=t.grade,i=t.setGrade,r=t.setComment,a=s((0,e.useState)(!1),2),l=a[0],c=a[1],u=V(),p=u.id,h=u.studentId,d=s((0,e.useState)(0),2),g=d[0],_=d[1],f="".concat(Vt.baseApiUrl,"/Projects/").concat(p,"/Save");(0,e.useEffect)((function(){v()}),[p,h]),(0,e.useEffect)((function(){_((function(t){return t+1}))}),[l]);var v=function(){p&&h&&c(!0)};return(0,Nt.jsxs)("div",{className:"p-2",children:[(0,Nt.jsx)(ce.Z,{count:5,onChange:function(t){i(t),Jt(f,{grade:t},!0,h)},size:32,color2:"#ffd700",edit:l,value:o},g),(0,Nt.jsx)("div",{className:"pb-1",children:"Comentarii"}),(0,Nt.jsx)("textarea",{onChange:function(t){r(t.target.value)},onKeyDown:function(t){"Enter"===t.key&&Jt(f,{comment:n},!0,h)},readOnly:!l,className:"block p-2.5 w-full text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 ",placeholder:"Nu exista comentarii",value:n})]})};var pe=function(t){var n=t.htmlText,o=t.name,i=t.xml,r=t.isVisibleForShare,a=t.comment,l=t.grade,c=t.setGrade,u=t.setComment,p=s((0,e.useState)("result"),2),h=p[0],d=p[1],g=s((0,e.useState)(o),2),_=g[0],f=g[1],v=function(t){var e="hover:ring hover:bg-violet-300 hover:text-black p-2 rounded";return h==t&&(e+=" ring bg-violet-300 text-black p-2"),e};return(0,Nt.jsxs)("div",{className:"fill-height",children:[(0,Nt.jsxs)("div",{className:"flex justify-between p-2",children:[(0,Nt.jsx)(Gt,{text:_,handleTextChange:function(t){f(t.target.value)},isVisibleForShare:r}),r&&(0,Nt.jsx)(te,{name:_,xml:i})]}),(0,Nt.jsxs)("div",{className:"bg-[#eb5353] flex gap-4 p-2 text-white ",children:[(0,Nt.jsx)("button",{className:v("result"),onClick:function(){return d("result")},children:"Rezultat"}),(0,Nt.jsx)("button",{className:v("html"),onClick:function(){return d("html")},children:"Html"}),(0,Nt.jsx)("button",{className:v("teacher"),onClick:function(){return d("teacher")},children:"Evaluare"})]}),"result"==h&&(0,Nt.jsx)(le,{htmlText:n}),"html"==h&&(0,Nt.jsx)(oe,{htmlText:n}),"teacher"==h&&(0,Nt.jsx)(ue,{comment:a,setComment:u,grade:l,setGrade:c})]})};var he=function(t){t.isTeacherOverride;var n=G(),o=((0,e.useContext)(Zt).isTeacher,s((0,e.useState)(""),2)),i=o[0],r=o[1],a=s((0,e.useState)(i),2),l=a[0],c=a[1],u=s((0,e.useState)(""),2),p=u[0],h=u[1],d=s((0,e.useState)(!1),2),g=d[0],_=d[1],f=s((0,e.useState)("defualt"),2),v=f[0],m=f[1],T=s((0,e.useState)(!0),2),b=T[0],E=T[1],y=s((0,e.useState)(""),2),S=y[0],C=y[1],k=s((0,e.useState)(0),2),R=k[0],I=k[1],O=V();(0,e.useEffect)((function(){w()}),[]);var w=function(){var t=Z(q().mark((function t(){var e,o,i,s;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!O.id){t.next=8;break}return e="".concat(Vt.baseApiUrl,"/Projects/").concat(O.id),O.studentId&&(e+="?ownerId=".concat(O.studentId),E(!1)),t.next=5,Yt(e);case 5:200==(null===(o=t.sent)||void 0===o?void 0:o.responseStatus)&&null!=(null===o||void 0===o?void 0:o.project)?(r(o.project.xml),C(null!==(i=o.project.comment)&&void 0!==i?i:""),I(null!==(s=o.project.grade)&&void 0!==s?s:0),m(o.project.name)):n("/Error"),_(!0);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return!g&&O.id?(0,Nt.jsx)(Ht,{}):(0,Nt.jsxs)("main",{className:"grid grid-rows-2  md:grid-cols-[3fr_2fr]",children:[(0,Nt.jsx)("section",{children:(0,Nt.jsx)(Ut,{setHtml:h,xmlFromDb:i,setXml:c})}),(0,Nt.jsx)("section",{className:"bg-gray-200",children:(0,Nt.jsx)(pe,{htmlText:p,name:v,xml:l,isVisibleForShare:b,comment:S,grade:R,setGrade:I,setComment:C})})]})},de={onError:function(t,e){500===t.response.status&&(window.location.href="/error")}};function ge(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(e){r(e)}}function a(t){try{l(o.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))}function _e(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}var fe,ve=function(){},me=ve(),Te=Object,be=function(t){return t===me},Ee=function(t){return"function"==typeof t},ye=function(t,e){return Te.assign({},t,e)},Se="undefined",Ce=function(){return typeof window!=Se},ke=new WeakMap,Re=0,Ie=function t(e){var n,o,i=typeof e,r=e&&e.constructor,s=r==Date;if(Te(e)!==e||s||r==RegExp)n=s?e.toJSON():"symbol"==i?e.toString():"string"==i?JSON.stringify(e):""+e;else{if(n=ke.get(e))return n;if(n=++Re+"~",ke.set(e,n),r==Array){for(n="@",o=0;o<e.length;o++)n+=t(e[o])+",";ke.set(e,n)}if(r==Te){n="#";for(var a=Te.keys(e).sort();!be(o=a.pop());)be(e[o])||(n+=o+":"+t(e[o])+",");ke.set(e,n)}}return n},Oe=!0,we=Ce(),Ae=typeof document!=Se,De=we&&window.addEventListener?window.addEventListener.bind(window):ve,Ne=Ae?document.addEventListener.bind(document):ve,xe=we&&window.removeEventListener?window.removeEventListener.bind(window):ve,Me=Ae?document.removeEventListener.bind(document):ve,Le={isOnline:function(){return Oe},isVisible:function(){var t=Ae&&document.visibilityState;return be(t)||"hidden"!==t}},Pe={initFocus:function(t){return Ne("visibilitychange",t),De("focus",t),function(){Me("visibilitychange",t),xe("focus",t)}},initReconnect:function(t){var e=function(){Oe=!0,t()},n=function(){Oe=!1};return De("online",e),De("offline",n),function(){xe("online",e),xe("offline",n)}}},Be=!Ce()||"Deno"in window,Fe=function(t){return Ce()&&typeof window.requestAnimationFrame!=Se?window.requestAnimationFrame(t):setTimeout(t,1)},Ue=Be?e.useEffect:e.useLayoutEffect,He="undefined"!==typeof navigator&&navigator.connection,Ge=!Be&&He&&(["slow-2g","2g"].includes(He.effectiveType)||He.saveData),Ve=function(t){if(Ee(t))try{t=t()}catch(n){t=""}var e=[].concat(t);return[t="string"==typeof t?t:(Array.isArray(t)?t.length:t)?Ie(t):"",e,t?"$swr$"+t:""]},We=new WeakMap,je=function(t,e,n,o,i,r,s){void 0===s&&(s=!0);var a=We.get(t),l=a[0],c=a[1],u=a[3],p=l[e],h=c[e];if(s&&h)for(var d=0;d<h.length;++d)h[d](n,o,i);return r&&(delete u[e],p&&p[0])?p[0](2).then((function(){return t.get(e)})):t.get(e)},Xe=0,ze=function(){return++Xe},Ye=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ge(void 0,void 0,void 0,(function(){var e,n,o,i,r,s,a,l,c,u,p,h,d,g,_,f,v,m,T,b,E;return _e(this,(function(y){switch(y.label){case 0:if(e=t[0],n=t[1],o=t[2],i=t[3],s=!!be((r="boolean"===typeof i?{revalidate:i}:i||{}).populateCache)||r.populateCache,a=!1!==r.revalidate,l=!1!==r.rollbackOnError,c=r.optimisticData,u=Ve(n),p=u[0],h=u[2],!p)return[2];if(d=We.get(e),g=d[2],t.length<3)return[2,je(e,p,e.get(p),me,me,a,!0)];if(_=o,v=ze(),g[p]=[v,0],m=!be(c),T=e.get(p),m&&(b=Ee(c)?c(T):c,e.set(p,b),je(e,p,b)),Ee(_))try{_=_(e.get(p))}catch(S){f=S}return _&&Ee(_.then)?[4,_.catch((function(t){f=t}))]:[3,2];case 1:if(_=y.sent(),v!==g[p][0]){if(f)throw f;return[2,_]}f&&m&&l&&(s=!0,_=T,e.set(p,T)),y.label=2;case 2:return s&&(f||(Ee(s)&&(_=s(_,T)),e.set(p,_)),e.set(h,ye(e.get(h),{error:f}))),g[p][1]=ze(),[4,je(e,p,_,f,me,a,!!s)];case 3:if(E=y.sent(),f)throw f;return[2,s?E:_]}}))}))},Je=function(t,e){for(var n in t)t[n][0]&&t[n][0](e)},Ke=function(t,e){if(!We.has(t)){var n=ye(Pe,e),o={},i=Ye.bind(me,t),r=ve;if(We.set(t,[o,{},{},{},i]),!Be){var s=n.initFocus(setTimeout.bind(me,Je.bind(me,o,0))),a=n.initReconnect(setTimeout.bind(me,Je.bind(me,o,1)));r=function(){s&&s(),a&&a(),We.delete(t)}}return[t,i,r]}return[t,We.get(t)[4]]},qe=Ke(new Map),$e=qe[0],Ze=qe[1],Qe=ye({onLoadingSlow:ve,onSuccess:ve,onError:ve,onErrorRetry:function(t,e,n,o,i){var r=n.errorRetryCount,s=i.retryCount,a=~~((Math.random()+.5)*(1<<(s<8?s:8)))*n.errorRetryInterval;!be(r)&&s>r||setTimeout(o,a,i)},onDiscarded:ve,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Ge?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:Ge?5e3:3e3,compare:function(t,e){return Ie(t)==Ie(e)},isPaused:function(){return!1},cache:$e,mutate:Ze,fallback:{}},Le),tn=function(t,e){var n=ye(t,e);if(e){var o=t.use,i=t.fallback,r=e.use,s=e.fallback;o&&r&&(n.use=o.concat(r)),i&&s&&(n.fallback=ye(i,s))}return n},en=(0,e.createContext)({}),nn=function(t,e,n){var o=e[t]||(e[t]=[]);return o.push(n),function(){var t=o.indexOf(n);t>=0&&(o[t]=o[o.length-1],o.pop())}},on={dedupe:!0},rn=Te.defineProperty((function(t){var n=t.value,o=tn((0,e.useContext)(en),n),i=n&&n.provider,r=(0,e.useState)((function(){return i?Ke(i(o.cache||$e),n):me}))[0];return r&&(o.cache=r[0],o.mutate=r[1]),Ue((function(){return r?r[2]:me}),[]),(0,e.createElement)(en.Provider,ye(t,{value:o}))}),"default",{value:Qe});fe=function(t,n,o){var i=o.cache,r=o.compare,s=o.fallbackData,a=o.suspense,l=o.revalidateOnMount,c=o.refreshInterval,u=o.refreshWhenHidden,p=o.refreshWhenOffline,h=We.get(i),d=h[0],g=h[1],_=h[2],f=h[3],v=Ve(t),m=v[0],T=v[1],b=v[2],E=(0,e.useRef)(!1),y=(0,e.useRef)(!1),S=(0,e.useRef)(m),C=(0,e.useRef)(n),k=(0,e.useRef)(o),R=function(){return k.current},I=function(){return R().isVisible()&&R().isOnline()},O=function(t){return i.set(b,ye(i.get(b),t))},w=i.get(m),A=be(s)?o.fallback[m]:s,D=be(w)?A:w,N=i.get(b)||{},x=N.error,M=!E.current,L=function(){return M&&!be(l)?l:!R().isPaused()&&(a?!be(D)&&o.revalidateIfStale:be(D)||o.revalidateIfStale)},P=!(!m||!n)&&(!!N.isValidating||M&&L()),B=function(t,n){var o=(0,e.useState)({})[1],i=(0,e.useRef)(t),r=(0,e.useRef)({data:!1,error:!1,isValidating:!1}),s=(0,e.useCallback)((function(t){var e=!1,s=i.current;for(var a in t){var l=a;s[l]!==t[l]&&(s[l]=t[l],r.current[l]&&(e=!0))}e&&!n.current&&o({})}),[]);return Ue((function(){i.current=t})),[i,r.current,s]}({data:D,error:x,isValidating:P},y),F=B[0],U=B[1],H=B[2],G=(0,e.useCallback)((function(t){return ge(void 0,void 0,void 0,(function(){var e,n,s,a,l,c,u,p,h,d,g,v,b;return _e(this,(function(k){switch(k.label){case 0:if(e=C.current,!m||!e||y.current||R().isPaused())return[2,!1];a=!0,l=t||{},c=!f[m]||!l.dedupe,u=function(){return!y.current&&m===S.current&&E.current},p=function(){var t=f[m];t&&t[1]===s&&delete f[m]},h={isValidating:!1},d=function(){O({isValidating:!1}),u()&&H(h)},O({isValidating:!0}),H({isValidating:!0}),k.label=1;case 1:return k.trys.push([1,3,,4]),c&&(je(i,m,F.current.data,F.current.error,!0),o.loadingTimeout&&!i.get(m)&&setTimeout((function(){a&&u()&&R().onLoadingSlow(m,o)}),o.loadingTimeout),f[m]=[e.apply(void 0,T),ze()]),b=f[m],n=b[0],s=b[1],[4,n];case 2:return n=k.sent(),c&&setTimeout(p,o.dedupingInterval),f[m]&&f[m][1]===s?(O({error:me}),h.error=me,g=_[m],!be(g)&&(s<=g[0]||s<=g[1]||0===g[1])?(d(),c&&u()&&R().onDiscarded(m),[2,!1]):(r(F.current.data,n)?h.data=F.current.data:h.data=n,r(i.get(m),n)||i.set(m,n),c&&u()&&R().onSuccess(n,m,o),[3,4])):(c&&u()&&R().onDiscarded(m),[2,!1]);case 3:return v=k.sent(),p(),R().isPaused()||(O({error:v}),h.error=v,c&&u()&&(R().onError(v,m,o),("boolean"===typeof o.shouldRetryOnError&&o.shouldRetryOnError||Ee(o.shouldRetryOnError)&&o.shouldRetryOnError(v))&&I()&&R().onErrorRetry(v,m,o,G,{retryCount:(l.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return a=!1,d(),u()&&c&&je(i,m,h.data,h.error,!1),[2,!0]}}))}))}),[m]),V=(0,e.useCallback)(Ye.bind(me,i,(function(){return S.current})),[]);if(Ue((function(){C.current=n,k.current=o})),Ue((function(){if(m){var t=m!==S.current,e=G.bind(me,on),n=0,o=nn(m,g,(function(t,e,n){H(ye({error:e,isValidating:n},r(F.current.data,t)?me:{data:t}))})),i=nn(m,d,(function(t){if(0==t){var o=Date.now();R().revalidateOnFocus&&o>n&&I()&&(n=o+R().focusThrottleInterval,e())}else if(1==t)R().revalidateOnReconnect&&I()&&e();else if(2==t)return G()}));return y.current=!1,S.current=m,E.current=!0,t&&H({data:D,error:x,isValidating:P}),L()&&(be(D)||Be?e():Fe(e)),function(){y.current=!0,o(),i()}}}),[m,G]),Ue((function(){var t;function e(){var e=Ee(c)?c(D):c;e&&-1!==t&&(t=setTimeout(n,e))}function n(){F.current.error||!u&&!R().isVisible()||!p&&!R().isOnline()?e():G(on).then(e)}return e(),function(){t&&(clearTimeout(t),t=-1)}}),[c,u,p,G]),(0,e.useDebugValue)(D),a&&be(D)&&m)throw C.current=n,k.current=o,y.current=!1,be(x)?G(on):x;return{mutate:V,get data(){return U.data=!0,D},get error(){return U.error=!0,x},get isValidating(){return U.isValidating=!0,P}}};function sn(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var an=n(6444);function ln(){return ln=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ln.apply(this,arguments)}function cn(t,e){if(null==t)return{};var n,o,i={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(i[n]=t[n]);return i}var un=["onClick","reloadDocument","replace","state","target","to"],pn=["aria-current","caseSensitive","className","end","style","to","children"];function hn(n){var o=n.basename,i=n.children,r=n.window,f=(0,e.useRef)();null==f.current&&(f.current=function(e){void 0===e&&(e={});var n=e.window,o=void 0===n?document.defaultView:n,i=o.history;function r(){var t=o.location,e=t.pathname,n=t.search,r=t.hash,s=i.state||{};return[s.idx,l({pathname:e,search:n,hash:r,state:s.usr||null,key:s.key||"default"})]}var s=null;o.addEventListener(u,(function(){if(s)E.call(s),s=null;else{var e=t.Pop,n=r(),o=n[0],i=n[1];if(E.length){if(null!=o){var a=m-o;a&&(s={action:e,location:i,retry:function(){I(-1*a)}},I(a))}}else R(e)}}));var f=t.Pop,v=r(),m=v[0],T=v[1],b=h(),E=h();function y(t){return"string"===typeof t?t:g(t)}function S(t,e){return void 0===e&&(e=null),l(a({pathname:T.pathname,hash:"",search:""},"string"===typeof t?_(t):t,{state:e,key:d()}))}function C(t,e){return[{usr:t.state,key:t.key,idx:e},y(t)]}function k(t,e,n){return!E.length||(E.call({action:t,location:e,retry:n}),!1)}function R(t){f=t;var e=r();m=e[0],T=e[1],b.call({action:f,location:T})}function I(t){i.go(t)}null==m&&(m=0,i.replaceState(a({},i.state,{idx:m}),""));var O={get action(){return f},get location(){return T},createHref:y,push:function e(n,r){var s=t.Push,a=S(n,r);if(k(s,a,(function(){e(n,r)}))){var l=C(a,m+1),c=l[0],u=l[1];try{i.pushState(c,"",u)}catch(p){o.location.assign(u)}R(s)}},replace:function e(n,o){var r=t.Replace,s=S(n,o);if(k(r,s,(function(){e(n,o)}))){var a=C(s,m),l=a[0],c=a[1];i.replaceState(l,"",c),R(r)}},go:I,back:function(){I(-1)},forward:function(){I(1)},listen:function(t){return b.push(t)},block:function(t){var e=E.push(t);return 1===E.length&&o.addEventListener(c,p),function(){e(),E.length||o.removeEventListener(c,p)}}};return O}({window:r}));var v=f.current,m=s((0,e.useState)({action:v.action,location:v.location}),2),T=m[0],b=m[1];return(0,e.useLayoutEffect)((function(){return v.listen(b)}),[v]),(0,e.createElement)(z,{basename:o,children:i,location:T.location,navigationType:T.action,navigator:v})}var dn=(0,e.forwardRef)((function(t,n){var o=t.onClick,i=t.reloadDocument,r=t.replace,s=void 0!==r&&r,a=t.state,l=t.target,c=t.to,u=cn(t,un),p=F(c),h=function(t,n){var o=void 0===n?{}:n,i=o.target,r=o.replace,s=o.state,a=G(),l=H(),c=W(t);return(0,e.useCallback)((function(e){if(0===e.button&&(!i||"_self"===i)&&!function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(e)){e.preventDefault();var n=!!r||g(l)===g(c);a(t,{replace:n,state:s})}}),[l,a,c,r,s,i,t])}(c,{replace:s,state:a,target:l});return(0,e.createElement)("a",ln({},u,{href:p,onClick:function(t){o&&o(t),t.defaultPrevented||i||h(t)},ref:n,target:l}))}));var gn=(0,e.forwardRef)((function(t,n){var o=t["aria-current"],i=void 0===o?"page":o,r=t.caseSensitive,s=void 0!==r&&r,a=t.className,l=void 0===a?"":a,c=t.end,u=void 0!==c&&c,p=t.style,h=t.to,d=t.children,g=cn(t,pn),_=H(),f=W(h),v=_.pathname,m=f.pathname;s||(v=v.toLowerCase(),m=m.toLowerCase());var T,b=v===m||!u&&v.startsWith(m)&&"/"===v.charAt(m.length),E=b?i:void 0;T="function"===typeof l?l({isActive:b}):[l,b?"active":null].filter(Boolean).join(" ");var y="function"===typeof p?p({isActive:b}):p;return(0,e.createElement)(dn,ln({},g,{"aria-current":E,className:T,ref:n,style:y,to:h}),"function"===typeof d?d({isActive:b}):d)}));var _n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},fn=e.createContext&&e.createContext(_n),vn=function(){return vn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},vn.apply(this,arguments)},mn=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n};function Tn(t){return t&&t.map((function(t,n){return e.createElement(t.tag,vn({key:n},t.attr),Tn(t.child))}))}function bn(t){return function(n){return e.createElement(En,vn({attr:vn({},t.attr)},n),Tn(t.child))}}function En(t){var n=function(n){var o,i=t.attr,r=t.size,s=t.title,a=mn(t,["attr","size","title"]),l=r||n.size||"1em";return n.className&&(o=n.className),t.className&&(o=(o?o+" ":"")+t.className),e.createElement("svg",vn({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,a,{className:o,style:vn(vn({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&e.createElement("title",null,s),t.children)};return void 0!==fn?e.createElement(fn.Consumer,null,(function(t){return n(t)})):n(_n)}var yn,Sn,Cn,kn,Rn,In,On,wn,An=n.p+"static/media/dog-logo.319d1c53d2d438a9783e.png",Dn=n.p+"static/media/code.b998afbd41ce59ce26dd.png",Nn=an.default.nav(yn||(yn=sn(["\n  background: #53bf9d;\n  height: 80px;\n  display: flex;\n  justify-content: space-between;\n  padding: 0.5rem calc((100vw - 1200px) / 2);\n  z-index: 10;\n"]))),xn=(0,an.default)(gn)(Sn||(Sn=sn(["\n  color: #573391;\n  display: flex;\n  align-items: center;\n  text-decoration: none;\n  padding: 0 1rem;\n  height: 100%;\n  cursor: pointer;\n  font-size: large;\n  font-weigh: bold;\n  &.active {\n    color: #eb5353;\n  }\n"]))),Mn=(0,an.default)((function(t){return bn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(t)}))(Cn||(Cn=sn(["\n  display: none;\n  color: #fff;\n  @media screen and (max-width: 768px) {\n    display: block;\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(-100%, 75%);\n    font-size: 1.8rem;\n    cursor: pointer;\n  }\n"]))),Ln=an.default.div(kn||(kn=sn(["\n  display: flex;\n  align-items: center;\n  margin-right: -24px;\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n"]))),Pn=an.default.nav(Rn||(Rn=sn(["\n  display: flex;\n  align-items: center;\n  margin-right: 24px;\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n"]))),Bn=((0,an.default)(gn)(In||(In=sn(["\n  border-radius: 4px;\n  background: #eb5353;\n  padding: 10px 22px;\n  color: #fff;\n  outline: none;\n  border: none;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  text-decoration: none;\n  margin-left: 24px;\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    background: #3db2ff;\n    color: #fcffa6;\n  }\n"]))),an.default.img.attrs({src:"".concat(An)})(On||(On=sn(["\n  width: 100px;\n"])))),Fn=an.default.img.attrs({src:"".concat(Dn)})(wn||(wn=sn(["\n  width: 110px;\n"])));var Un=function(t){var n=t.setIsOpen,o=G(),i=(0,e.useContext)(Zt).isTeacher;return(0,Nt.jsx)("div",{className:"shadow-lg bg-green-300 absolute z-50 rounded-md mt-1.5 -ml-4",children:(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("div",{className:"block px-1 py-2 w-36 text-sm text-gray-700 hover:bg-navbar hover:text-gray-900 hover:rounded-md",onClick:function(){o("/Profil"),n(!1)},children:"Profilul meu"}),i&&(0,Nt.jsx)("div",{className:"block px-1 py-2 w-36 text-sm text-gray-700 hover:bg-navbar hover:text-gray-900",onClick:function(){o("/Studenti"),n(!1)},children:"Studentii mei"}),(0,Nt.jsx)("div",{className:"block px-1 py-2 w-36 text-sm text-gray-700 hover:bg-navbar hover:text-gray-900 mt-1 border-t hover:rounded-md",onClick:function(){localStorage.removeItem("username"),localStorage.removeItem("idTeacher"),document.cookie="token=; expires="+new Date(0).toUTCString()+"; path=/",window.location.href="/",n(!1)},children:"Iesire cont"})]})})};var Hn=function(){var t=(0,e.useContext)(Zt).username,n=s((0,e.useState)(!1),2),o=n[0],i=n[1];return(0,Nt.jsxs)("button",{className:"hover:bg-green-300 focus:bg-green-300 px-3 py-1 rounded-md w-[100%]",onClick:function(){i(!o)},onBlur:function(){i(!1)},children:[(0,Nt.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,Nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),(0,Nt.jsx)("div",{children:t}),(0,Nt.jsx)("div",{children:(0,Nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]}),o&&(0,Nt.jsx)(Un,{setIsOpen:i})]})};function Gn(){(0,e.useContext)(Zt).username;return(0,Nt.jsxs)(Nn,{children:[(0,Nt.jsxs)(xn,{to:"/",children:[(0,Nt.jsx)(Fn,{}),(0,Nt.jsx)(Bn,{})]}),(0,Nt.jsx)(Mn,{}),(0,Nt.jsxs)(Ln,{children:[(0,Nt.jsx)(xn,{to:"/Proiecte",children:"Proiectele mele"}),(0,Nt.jsx)(xn,{to:"/Joc",children:"Proiect nou"}),(0,Nt.jsx)(xn,{to:"/Grupe",children:"Grupe"}),(0,Nt.jsx)(xn,{to:"/Despre",children:"Despre"})]}),(0,Nt.jsx)(Pn,{children:(0,Nt.jsx)(Hn,{})})]})}var Vn=n(3513),Wn=function(){var t=Z(q().mark((function t(e){var n,o;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,jt().get(e,{headers:{Authorization:"Bearer ".concat(Xt("token"))}});case 3:return n=t.sent,t.abrupt("return",n.data);case 7:if(t.prev=7,t.t0=t.catch(0),!jt().isAxiosError(t.t0)){t.next=11;break}return t.abrupt("return",null===(o=t.t0.response)||void 0===o?void 0:o.data);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),jn=function(){var t=Z(q().mark((function t(e,n){var o,i;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,jt().patch(e,{newIdGroup:n},{headers:{Authorization:"Bearer ".concat(Xt("token"))}});case 3:return o=t.sent,t.abrupt("return",o.data);case 7:if(t.prev=7,t.t0=t.catch(0),!jt().isAxiosError(t.t0)){t.next=11;break}return t.abrupt("return",null===(i=t.t0.response)||void 0===i?void 0:i.data);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}();var Xn=function(t){var e=t.children,n=t.showModal;return(0,Nt.jsx)(Nt.Fragment,{children:n&&(0,Nt.jsx)("div",{className:"fixed w-auto z-50 p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full flex items-center flex-col bg-gray-900 bg-opacity-50 ",children:(0,Nt.jsx)("div",{className:"justify-center items-center bg-white relative w-[30%] p-3 rounded mt-[15%]",children:e})})})};var zn=function(t){var e=t.setIsOpen,n=t.text;return(0,Nt.jsx)("button",{type:"button","data-modal-hide":"defaultModal",className:"bg-red-400 hover:bg-red-500 px-2 py-1 font-bold border-b-4 border-red-800 hover:border-red-700 rounded",onClick:function(){e(!1)},children:n})},Yn=function(){var t=Z(q().mark((function t(e,n){var o,i,r;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Xt("token"),t.prev=1,t.next=4,jt().get(e,{headers:{Authorization:"Bearer ".concat(o)},params:{isTeacher:n}});case 4:return i=t.sent,t.abrupt("return",i.data);case 8:if(t.prev=8,t.t0=t.catch(1),!jt().isAxiosError(t.t0)){t.next=12;break}return t.abrupt("return",null===(r=t.t0.response)||void 0===r?void 0:r.data);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}(),Jn=function(){var t=Z(q().mark((function t(e,n){var o,i,r;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Xt("token"),t.prev=1,t.next=4,jt().post(e,{studentEmail:n},{headers:{Authorization:"Bearer ".concat(o)}});case 4:return i=t.sent,t.abrupt("return",i.data);case 8:if(t.prev=8,t.t0=t.catch(1),!jt().isAxiosError(t.t0)){t.next=12;break}return t.abrupt("return",null===(r=t.t0.response)||void 0===r?void 0:r.data);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}(),Kn=function(){var t=Z(q().mark((function t(e){var n,o;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,jt().delete(e,{headers:{Authorization:"Bearer ".concat(Xt("token"))}});case 3:return n=t.sent,t.abrupt("return",n.data);case 7:if(t.prev=7,t.t0=t.catch(0),!jt().isAxiosError(t.t0)){t.next=11;break}return t.abrupt("return",null===(o=t.t0.response)||void 0===o?void 0:o.data);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),qn=function(){var t=Z(q().mark((function t(e,n){var o,i;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,jt().put(e,n,{headers:{Authorization:"Bearer ".concat(Xt("token"))}});case 3:return o=t.sent,t.abrupt("return",o.data);case 7:if(t.prev=7,t.t0=t.catch(0),!jt().isAxiosError(t.t0)){t.next=11;break}return t.abrupt("return",null===(i=t.t0.response)||void 0===i?void 0:i.data);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}(),$n=function(){var t=Z(q().mark((function t(e){var n,o,i;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(Vt.baseApiUrl,"/Groups/").concat(e),t.prev=1,t.next=4,jt().get(n,{headers:{Authorization:"Bearer ".concat(Xt("token"))}});case 4:return o=t.sent,t.abrupt("return",o.data);case 8:if(t.prev=8,t.t0=t.catch(1),!jt().isAxiosError(t.t0)){t.next=12;break}return t.abrupt("return",null===(i=t.t0.response)||void 0===i?void 0:i.data);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),Zn=function(){var t=Z(q().mark((function t(e){var n,o;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,jt().get(e,{headers:{Authorization:"Bearer ".concat(Xt("token"))}});case 3:return n=t.sent,t.abrupt("return",n.data);case 7:if(t.prev=7,t.t0=t.catch(0),!jt().isAxiosError(t.t0)){t.next=11;break}return t.abrupt("return",null===(o=t.t0.response)||void 0===o?void 0:o.data);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),Qn=function(){var t=Z(q().mark((function t(e){var n,o;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,jt().delete(e,{headers:{Authorization:"Bearer ".concat(Xt("token"))}});case 3:return n=t.sent,t.abrupt("return",n.data);case 7:if(t.prev=7,t.t0=t.catch(0),!jt().isAxiosError(t.t0)){t.next=11;break}return t.abrupt("return",null===(o=t.t0.response)||void 0===o?void 0:o.data);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();var to=function(t){var n=t.groups,o=t.setGroups,i=t.setSelectedGroupId,r=G(),s="".concat(Vt.baseApiUrl,"/Groups");(0,e.useEffect)((function(){a()}),[]);var a=function(){var t=Z(q().mark((function t(){var e,n;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Yn(s,!0);case 2:200==(null===(e=t.sent)||void 0===e?void 0:e.responseStatus)?(n=[],e.groups.forEach((function(t){null!=t.studentsCount&&t.studentsCount<15&&n.push(t)})),o(n)):r("/Error");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,Nt.jsx)("div",{className:"py-8 space-y-6",children:(0,Nt.jsxs)("select",{defaultValue:"default",onChange:function(t){var e=t.target.value;e.length,i(e)},children:[(0,Nt.jsx)("option",{value:"default",disabled:!0,children:"Selecteaza o grupa"}),n.map((function(t){return(0,Nt.jsx)("option",{value:t.id,children:t.name},t.id)}))]})})};var eo=function(t){var n=t.isOpen,o=t.setIsOpen,i=t.studentDetails,r=t.fetchData,a=s((0,e.useState)([]),2),l=a[0],c=a[1],u=s((0,e.useState)(),2),p=u[0],h=u[1],d=G(),g=function(){var t=Z(q().mark((function t(){var e,s,a;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===i||void 0===i||!i.groupId||!p){t.next=9;break}return e=i.id,s="".concat(Vt.baseApiUrl,"/Students/").concat(e,"/Groups/").concat(null===i||void 0===i?void 0:i.groupId),t.next=5,jn(s,p);case 5:200==(null===(a=t.sent)||void 0===a?void 0:a.responseStatus)&&(o(!n),r()),t.next=11;break;case 9:o(!n),d("/Error");case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,Nt.jsxs)(Xn,{showModal:n,children:[(0,Nt.jsx)("h3",{className:"text-gray-900 dark:text-white",children:"Editeaza grupa"}),(0,Nt.jsx)(to,{groups:l,setGroups:c,setSelectedGroupId:h}),(0,Nt.jsxs)("div",{className:"flex space-x-2 rounded-b",children:[(0,Nt.jsx)("button",{"data-modal-hide":"defaultModal",type:"button",className:"bg-mintBlue hover:bg-mint text-yellow px-2 py-1 font-bold border-b-4 border-mint hover:border-mintBlue rounded",onClick:g,children:"Salveaza"}),(0,Nt.jsx)(zn,{setIsOpen:o,text:"Anuleaza"})]})]})};var no=function(t){var e=t.handleConfirm,n=t.showModal,o=t.title,i=t.setShowModal;return(0,Nt.jsxs)(Xn,{showModal:n,children:[(0,Nt.jsx)("h5",{className:"text-black",children:o}),(0,Nt.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,Nt.jsx)("button",{className:"bg-gray-300 hover:bg-gray-500 py-2 px-4 border-b-4 border-gray-800 hover:border-gray-700 rounded",onClick:e,children:"Da, sunt sigur"}),(0,Nt.jsx)(zn,{setIsOpen:i,text:"Nu, anuleaza"})]})]})};var oo=function(t){var n=t.isOpen,o=t.setIsOpen,i=t.fetchData,r=s((0,e.useState)(),2),a=r[0],l=r[1],c=s((0,e.useState)(!0),2),u=c[0],p=c[1],h=s((0,e.useState)([]),2),d=h[0],g=h[1],_=s((0,e.useState)(),2),f=_[0],v=_[1],m=function(){var t=Z(q().mark((function t(){var e,n;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e="".concat(Vt.baseApiUrl,"/Groups/").concat(f,"/Students"),!a){t.next=7;break}return t.next=4,Jn(e,a);case 4:n=t.sent,o(!1),200==(null===n||void 0===n?void 0:n.responseStatus)&&i();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,Nt.jsxs)(Xn,{showModal:n,children:[(0,Nt.jsx)("h5",{children:"Introdu adresa de email"}),(0,Nt.jsxs)("div",{className:"flex flex-col ",children:[(0,Nt.jsxs)("div",{className:"flex items-center",children:[(0,Nt.jsx)("input",{onChange:function(t){var e=t.target.value;l(e),p(0===e.length)},placeholder:"Email student",className:"p-1"}),(0,Nt.jsx)(to,{groups:d,setGroups:g,setSelectedGroupId:v})]}),(0,Nt.jsxs)("div",{className:"flex gap-x-3 ",children:[(0,Nt.jsx)("button",{type:"button",className:"bg-mintBlue hover:bg-mint text-yellow px-2 py-1 font-bold border-b-4 border-mint hover:border-mintBlue rounded disabled:opacity-75",onClick:m,disabled:u,children:"Adauga"}),(0,Nt.jsx)(zn,{setIsOpen:o,text:"Anuleaza"})]})]})]})};var io=function(){var t=G(),n=s((0,e.useState)(),2),o=n[0],i=n[1],r=s((0,e.useState)([]),2),a=r[0],l=r[1],c=s((0,e.useState)([]),2),u=c[0],p=c[1],h=s((0,e.useState)(!1),2),d=h[0],g=h[1],_=s((0,e.useState)(!1),2),f=_[0],v=_[1],m=s((0,e.useState)(!1),2),T=m[0],b=m[1];(0,e.useEffect)((function(){S()}),[]);var E,y,S=function(){var e=Z(q().mark((function e(){var n,o,i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("idTeacher"),o="".concat(Vt.baseApiUrl,"/Teachers/").concat(n,"/Students"),e.next=4,Wn(o);case 4:200==(null===(i=e.sent)||void 0===i?void 0:i.responseStatus)?(l(null===i||void 0===i?void 0:i.students),p(null===i||void 0===i?void 0:i.students)):t("/Error");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Z(q().mark((function e(){var n,i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=9;break}return n="".concat(Vt.baseApiUrl,"/Groups/").concat(o.groupId,"/Students/").concat(o.id),e.next=4,Kn(n);case 4:i=e.sent,v(!1),200==(null===i||void 0===i?void 0:i.responseStatus)?S():t("/Error"),e.next=11;break;case 9:v(!1),t("/Error");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Nt.jsxs)("div",{className:"border border-green-400 bg-gray-300 m-2 p-2 rounded-lg shadow-sm",children:[(0,Nt.jsxs)("div",{className:"w-full flex justify-between items-center mb-2",children:[(0,Nt.jsx)("h2",{children:"Studenti:"}),(0,Nt.jsxs)("div",{className:"flex gap-x-4 items-center",children:[(0,Nt.jsx)("button",{className:"bg-yellow-200 hover:bg-gray-500 px-3 py-1 border-b-4 border-gray-700 hover:border-gray-700 rounded font-semibold",onClick:function(){b(!0)},children:"Adauga un student"}),(0,Nt.jsx)("input",{className:"p-1 w-1/2 rounded-lg",onChange:function(t){var e=t.target.value.toLowerCase(),n=u.filter((function(t){return["firstName","lastName","email"].some((function(n){return(t[n]||"").toString().toLowerCase().includes(e)}))}));l(n)},placeholder:"Cauta"})]})]}),(0,Nt.jsx)(Vn.ZP,{columns:(E=function(t){g(!d),i(t)},y=function(t){v(!0),i(t)},[{name:"Nume",selector:function(t){return t.lastname},sortable:!0},{name:"Prenume",selector:function(t){return t.firstname},sortable:!0},{name:"Email",selector:function(t){return t.email},sortable:!0},{name:"Grupa",selector:function(t){return t.groupName||"-"},sortable:!0},{cell:function(t){return(0,Nt.jsx)("button",{className:"bg-mintBlue hover:bg-mint text-yellow px-1 py-1 font-bold border-b-4 border-mint hover:border-mintBlue rounded",onClick:function(){return E(t)},children:"Editeaza grupa"})},ignoreRowClick:!0,allowOverflow:!0,button:!0},{cell:function(t){return(0,Nt.jsx)("button",{onClick:function(){return y(t)},children:(0,Nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6 hover:text-red-700",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})})})},ignoreRowClick:!0,allowOverflow:!0,button:!0}]),data:a,pagination:!0,highlightOnHover:!0,className:"table w-3/5 bg-gray-100 text-gray-900 border border-green-400 rounded-lg shadow-sm"}),(0,Nt.jsx)(eo,{isOpen:d,setIsOpen:g,studentDetails:o,fetchData:S}),(0,Nt.jsx)(no,{handleConfirm:C,handleCancel:function(){v(!1)},showModal:f,title:"Esti sigur ca vrei sa stergi studentul?",setShowModal:v}),(0,Nt.jsx)(oo,{isOpen:T,setIsOpen:b,fetchData:S})]})};var ro=function(){return(0,Nt.jsx)(io,{})};function so(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ao(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function lo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ao(Object(n),!0).forEach((function(e){so(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ao(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var co=function(){var t=Z(q().mark((function t(e,n){var o,i;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,jt().post(e,n,{headers:{Authorization:"Bearer ".concat(Xt("token"))}});case 3:return o=t.sent,t.abrupt("return",o.data);case 7:if(t.prev=7,t.t0=t.catch(0),!jt().isAxiosError(t.t0)){t.next=11;break}return t.abrupt("return",null===(i=t.t0.response)||void 0===i?void 0:i.data);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}(),uo=function(t,e){return jt().post(t,e).then((function(t){return t})).catch((function(t){return t.response.data}))};var po=function(t){var e=t.onChange,n=t.text,o=t.type,i=t.name,r=t.required,s=t.className;return(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)("label",{children:n}),(0,Nt.jsx)("input",{className:s,type:o,name:i,onChange:e,required:r})]})};var ho=function(){var t=(0,e.useContext)(Zt),n=t.setToken,o=t.setUsername,i=t.setIsTeacher,r=t.setIdTeacher,a=G(),l=s((0,e.useState)(!1),2),c=l[0],u=l[1],p=s((0,e.useState)(""),2),h=p[0],d=p[1],g=s((0,e.useState)({email:"",password:""}),2),_=g[0],f=g[1];(0,e.useEffect)((function(){window.location.href.includes("Student")&&u(!0)}),[]);var v=function(t,e){localStorage.setItem("username",t),localStorage.setItem("idTeacher",e),o(t),r(e)},m=function(){var t=Z(q().mark((function t(e){var o,r,s;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),d(""),_.email||_.password){t.next=4;break}return t.abrupt("return",d("Toate campurile sunt obligatorii"));case 4:return o="".concat(Vt.baseApiUrl,"/Auth/Login/Teacher"),c&&(o="".concat(Vt.baseApiUrl,"/Auth/Login/Student")),t.next=8,uo(o,lo({},_));case 8:200==(r=t.sent).status?(s=r.data.token,document.cookie="token=".concat(s,"; path=/;"),n(s),i(!c),v(r.data.username,r.data.id),a("/Proiecte")):d(r.errors[0]);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T=function(t){var e=lo(lo({},_),{},so({},t.target.name,t.target.value));f(e)};return(0,Nt.jsx)("section",{className:"h-screen bg-try",children:(0,Nt.jsxs)("div",{className:"grid grid-cols-2 p-8 w-[1200px] m-auto",children:[(0,Nt.jsx)("div",{children:(0,Nt.jsx)("img",{src:An,className:"",alt:"dog image"})}),(0,Nt.jsxs)("form",{onSubmit:m,className:"bg-white drop-shadow-md p-8 rounded",children:[(0,Nt.jsx)("h3",{children:"Intra in contul tau"}),(0,Nt.jsxs)("div",{className:"flex flex-col pt-8",children:[(0,Nt.jsx)(po,{text:"Email",type:"email",name:"email",required:!0,className:"bg-gray-100",onChange:T}),(0,Nt.jsx)(po,{text:"Parola",type:"password",name:"password",required:!0,className:"bg-gray-100",onChange:T})]}),h&&(0,Nt.jsx)("span",{className:"text-red-600",children:h}),(0,Nt.jsxs)("div",{className:"pt-8",children:[(0,Nt.jsx)("button",{type:"submit",value:"submit",className:"bg-purple-500 hover:bg-purple-400 text-white py-2 px-4 border-b-4 border-purple-900 hover:border-purple-500 rounded",children:"Login"}),c&&(0,Nt.jsxs)("p",{className:"text-sm font-semibold mt-2 pt-1 mb-0",children:["Esti profesor?\xa0",(0,Nt.jsx)("a",{href:"#!",className:"text-red-600 hover:text-red-700 focus:text-red-700 transition duration-200 ease-in-out",onClick:function(){return window.location.href="/Login/Profesor"},children:"Login cont profesor"})]}),!c&&(0,Nt.jsxs)("p",{className:"text-sm font-semibold mt-2 pt-1 mb-0",children:["Esti student?\xa0",(0,Nt.jsx)("a",{href:"#!",className:"text-red-600 hover:text-red-700 focus:text-red-700 transition duration-200 ease-in-out",onClick:function(){return window.location.href="/Login/Student"},children:"Login cont student"})]}),(0,Nt.jsxs)("p",{className:"text-sm font-semibold mt-2 pt-1 mb-0",children:["Nu ai un cont?\xa0",(0,Nt.jsx)("a",{href:"#!",className:"text-red-600 hover:text-red-700 focus:text-red-700 transition duration-200 ease-in-out",onClick:function(){return window.location.href="/Signin"},children:"Inregistreaza-te acum!"})]})]})]})]})})};var go=function(){return(0,Nt.jsx)(ho,{})};var _o=function(){var t=G(),n=s((0,e.useState)({firstname:"",lastname:"",email:"",password:"",checkPassword:""}),2),o=n[0],i=n[1],r=s((0,e.useState)(""),2),a=r[0],l=r[1],c=s((0,e.useState)(!1),2),u=c[0],p=c[1],h=function(){var e=Z(q().mark((function e(n){var i,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),l(""),o.lastname){e.next=4;break}return e.abrupt("return",l("Numele este obligatoriu"));case 4:if(o.email){e.next=6;break}return e.abrupt("return",l("Email obligatoriu"));case 6:if(o.password){e.next=8;break}return e.abrupt("return",l("Parola obligatorie"));case 8:if(o.checkPassword){e.next=10;break}return e.abrupt("return",l("Confirma parola"));case 10:if(o.password===o.checkPassword){e.next=12;break}return e.abrupt("return",l("Parola si Confirma parola nu corespund"));case 12:if(!(o.password.length<8)){e.next=14;break}return e.abrupt("return",l("Parola trebuie sa aibe cel putin 8 caractere"));case 14:return i="".concat(Vt.baseApiUrl,"/Auth/Register/Student"),u&&(i="".concat(Vt.baseApiUrl,"/Auth/Register/Teacher")),e.next=18,co(i,lo({},o));case 18:200==(null===(r=e.sent)||void 0===r?void 0:r.responseStatus)?t(u?"/Login/Profesor":"/Login/Student"):null!==r&&void 0!==r&&r.errors&&l(null===r||void 0===r?void 0:r.errors[0]);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(t){var e=lo(lo({},o),{},so({},t.target.name,t.target.value));i(e)};return(0,Nt.jsx)("section",{className:"h-screen bg-try",children:(0,Nt.jsxs)("div",{className:"grid grid-cols-2 p-8 w-[1200px] m-auto",children:[(0,Nt.jsx)("div",{children:(0,Nt.jsx)("img",{src:An,className:"",alt:"dog image"})}),(0,Nt.jsxs)("form",{onSubmit:h,className:"bg-white drop-shadow-md p-8 rounded",children:[(0,Nt.jsx)("h3",{children:"Creaza un cont"}),(0,Nt.jsxs)("div",{className:"flex flex-col pt-8",children:[(0,Nt.jsx)(po,{text:"Nume",type:"text",name:"lastname",required:!0,className:"bg-gray-100",onChange:d}),(0,Nt.jsx)(po,{text:"Prenume",type:"text",name:"firstname",required:!0,className:"bg-gray-100",onChange:d}),(0,Nt.jsx)(po,{text:"Email",type:"email",name:"email",required:!0,className:"bg-gray-100",onChange:d}),(0,Nt.jsx)(po,{text:"Parola",type:"password",name:"password",required:!0,className:"bg-gray-100",onChange:d}),(0,Nt.jsx)(po,{text:"Confirmare Parola",type:"password",name:"checkPassword",required:!0,className:"bg-gray-100",onChange:d})]}),(0,Nt.jsx)("div",{className:"flex gap-2 items-center",children:(0,Nt.jsx)(po,{text:"Sunt profesor",type:"checkbox",name:"teacherCheck",required:!1,className:"",onChange:function(t){p(!u)}})}),a&&(0,Nt.jsx)("span",{className:"text-red-500",children:a}),(0,Nt.jsxs)("div",{className:"pt-8",children:[(0,Nt.jsx)("button",{type:"submit",value:"submit",className:"bg-purple-500 hover:bg-purple-400 text-white py-2 px-4 border-b-4 border-purple-900 hover:border-purple-500 rounded",children:"Inregistrare"}),(0,Nt.jsxs)("p",{className:"text-sm font-semibold mt-2 pt-1 mb-0",children:["Ai deja un cont?\xa0",(0,Nt.jsx)("a",{href:"#!",className:"text-red-600 hover:text-red-700 focus:text-red-700 transition duration-200 ease-in-out",onClick:function(){t("/Login/Student")},children:"Logheaza-te acum!"})]})]})]})]})})};var fo=function(){return(0,Nt.jsx)(_o,{})};var vo=function(){return(0,Nt.jsx)("h1",{children:"Something went wrong while performing your request. please contact administrator"})};var mo=function(t){var n=t.project,o=t.fetchData,i=s((0,e.useState)(!1),2),r=i[0],a=i[1],l=(0,e.useContext)(Zt).isTeacher,c=G(),u="".concat(Vt.baseApiUrl,"/Projects/").concat(n.id),p=V().id,h=function(){var t=Z(q().mark((function t(){var e;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qt(u,l);case 2:200==(null===(e=t.sent)||void 0===e?void 0:e.responseStatus)&&o();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)(no,{handleConfirm:function(){a(!1),h()},handleCancel:function(){a(!1)},showModal:r,title:"Esti sigur ca vrei sa stergi acest proiect?",setShowModal:a}),(0,Nt.jsxs)("div",{className:"block max-w-sm p-6 bg-mintBlue border border-gray-200 rounded-lg shadow hover:bg-mint min-w-[30%] flex flex-row justify-between",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white cursor-pointer",onClick:function(){c("".concat(n.id))},children:n.name}),(0,Nt.jsx)("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:"desciption"})]}),!p&&(0,Nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6 rounded-lg basis-[8%] cursor-pointer",onClick:function(){a(!0)},children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})]})]})};var To=function(){var t=G(),n="".concat(Vt.baseApiUrl,"/Projects"),o={name:"nume default"},i=(0,e.useContext)(Zt).isTeacher,r=function(){var e=Z(q().mark((function e(){var r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$t(n,o,i);case 2:200==(null===(r=e.sent)||void 0===r?void 0:r.responseStatus)?t("/Proiecte/".concat(r.id)):t("/error");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Nt.jsx)("button",{className:"bg-mintBlue hover:bg-mint text-yellow font-bold py-2 px-4 border-b-4 border-mint hover:border-mintBlue rounded",onClick:r,children:(0,Nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})})};var bo=function(){var t=G(),n=V().id,o=(0,e.useContext)(Zt).isTeacher,i="".concat(Vt.baseApiUrl,"/Projects"),r=s((0,e.useState)([]),2),a=r[0],l=r[1],c=s((0,e.useState)("Proiectele tale:"),2),u=c[0],p=c[1];(0,e.useEffect)((function(){h()}),[o,n]);var h=function(){var e=Z(q().mark((function e(){var r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&(p("Proiectele studentului:"),i="".concat(Vt.baseApiUrl,"/Students/").concat(n,"/Projects")),e.next=3,zt(i,o);case 3:200==(null===(r=e.sent)||void 0===r?void 0:r.responseStatus)?l(r.projects):t("/Error");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Nt.jsxs)("div",{className:"flex flex-col p-8 gap-4",children:[(0,Nt.jsxs)("div",{className:"flex justify-between",children:[(0,Nt.jsx)("h1",{children:u}),(0,Nt.jsx)(To,{})]}),(0,Nt.jsx)("div",{className:"flex gap-4 flex-wrap",children:a.map((function(t){return(0,Nt.jsx)(mo,{project:t,fetchData:h},t.id)}))})]})};var Eo=function(t){var e=t.group,n=t.init,o=G(),i=function(){var t=Z(q().mark((function t(){var o,i;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="".concat(Vt.baseApiUrl,"/Groups/").concat(e.id),t.next=3,Qn(o);case 3:200==(null===(i=t.sent)||void 0===i?void 0:i.responseStatus)&&n();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,Nt.jsxs)("div",{className:"block max-w-sm p-6 bg-mintBlue border border-gray-200 rounded-lg shadow hover:bg-mint min-w-[30%] flex flex-row justify-between",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white cursor-pointer",onClick:function(){o("/Grupe/".concat(e.id))},children:e.name}),(0,Nt.jsx)("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:"desciption"})]}),(0,Nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6 rounded-lg basis-[8%] cursor-pointer",onClick:i,children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})]})};var yo=function(t){var n=t.isOpen,o=t.setIsOpen,i=t.init,r=s((0,e.useState)(""),2),a=r[0],l=r[1],c=s((0,e.useState)(!0),2),u=c[0],p=c[1],h=function(){var t=Z(q().mark((function t(){var e,n,r;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="".concat(Vt.baseApiUrl,"/Groups"),n={name:a},t.next=4,qn(e,n);case 4:200==(null===(r=t.sent)||void 0===r?void 0:r.responseStatus)&&(o(!1),i());case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,Nt.jsxs)(Xn,{showModal:n,children:[(0,Nt.jsxs)("div",{className:"flex flex-col justify-start items-start py-4",children:[(0,Nt.jsx)("h5",{children:"Introdu numele grupei:"}),(0,Nt.jsx)("input",{onChange:function(t){var e=t.target.value;l(e),p(0===e.length)},placeholder:"grupa z",className:"p-1"})]}),(0,Nt.jsxs)("div",{className:"flex gap-4",children:[(0,Nt.jsx)("button",{type:"button",className:"bg-mintBlue hover:bg-mint text-yellow px-2 py-1 font-bold border-b-4 border-mint hover:border-mintBlue rounded disabled:opacity-75",onClick:h,disabled:u,children:"Adauga"}),(0,Nt.jsx)(zn,{setIsOpen:o,text:"Anuleaza"})]})]})};var So=function(){var t="".concat(Vt.baseApiUrl,"/Groups"),n=(0,e.useContext)(Zt).isTeacher,o=G(),i=s((0,e.useState)([]),2),r=i[0],a=i[1],l=s((0,e.useState)(!1),2),c=l[0],u=l[1];(0,e.useEffect)((function(){p()}),[n]);var p=function(){var e=Z(q().mark((function e(){var i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn(t,n);case 2:200==(null===(i=e.sent)||void 0===i?void 0:i.responseStatus)?a(null===i||void 0===i?void 0:i.groups):o("/Error");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Nt.jsxs)("div",{className:"flex flex-col p-8 gap-4",children:[(0,Nt.jsxs)("div",{className:"flex justify-between",children:[(0,Nt.jsx)("h1",{children:"Grupele tale:"}),(0,Nt.jsx)("button",{className:"bg-mintBlue hover:bg-mint text-yellow font-bold py-2 px-4 border-b-4 border-mint hover:border-mintBlue rounded",onClick:function(){u(!0)},children:(0,Nt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:(0,Nt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})})]}),(0,Nt.jsx)("div",{className:"flex gap-4 flex-wrap",children:r.map((function(t){return(0,Nt.jsx)(Eo,{group:t,init:p},t.id)}))}),(0,Nt.jsx)(yo,{isOpen:c,setIsOpen:u,init:p})]})};var Co=function(){var t=G();return(0,Nt.jsx)(Nt.Fragment,{children:(0,Nt.jsx)("button",{onClick:function(){t("/Studenti")},className:"bg-blue-400 p-2 hover:bg-blue-200",children:"My students"})})};var ko=function(){var t=V().id,n=s((0,e.useState)([]),2),o=n[0],i=n[1],r=s((0,e.useState)(""),2),a=r[0],l=r[1],c=G();(0,e.useEffect)((function(){u()}),[]);var u=function(){var e=Z(q().mark((function e(){var n,o,r;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return e.next=3,$n(t);case 3:return 200==(null===(n=e.sent)||void 0===n?void 0:n.responseStatus)&&l(n.group.name),o="".concat(Vt.baseApiUrl,"/Groups/").concat(t,"/Students"),e.next=8,Zn(o);case 8:200==(null===(r=e.sent)||void 0===r?void 0:r.responseStatus)&&i(r.students);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var t=Z(q().mark((function t(e){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l(e.target.value);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var e=Z(q().mark((function e(){var n,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={name:a},o="".concat(Vt.baseApiUrl,"/Groups/").concat(t),e.t0=t,!e.t0){e.next=6;break}return e.next=6,qn(o,n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Nt.jsxs)("div",{className:"border border-green-400 bg-gray-300 m-2 p-2 rounded-lg shadow-sm",children:[(0,Nt.jsx)("div",{className:"flex",children:(0,Nt.jsx)("h3",{children:(0,Nt.jsx)(Gt,{text:a,handleTextChange:p,handleFinishedEdit:h})})}),(0,Nt.jsx)(Vn.ZP,{columns:[{name:"Nume",selector:function(t){return t.lastname},sortable:!0},{name:"Prenume",selector:function(t){return t.firstname},sortable:!0},{name:"Email",selector:function(t){return t.email},sortable:!0},{cell:function(t){return(0,Nt.jsx)("button",{className:"bg-mintBlue hover:bg-mint text-yellow px-1 py-1 font-bold border-b-4 border-mint hover:border-mintBlue rounded",onClick:function(){c("/Studenti/".concat(t.id,"/Proiecte"))},children:"Vezi proiecte"})},ignoreRowClick:!0,allowOverflow:!0,button:!0}],data:o,pagination:!0,highlightOnHover:!0,className:"table w-3/5 bg-gray-100 text-gray-900 border border-green-400 rounded-lg shadow-sm"})]})};var Ro=function(){return(0,Nt.jsx)(ko,{})};var Io=function(t){var e=t.text;return(0,Nt.jsx)("p",{className:"p-1 italic font-bold",children:e})},Oo=n.p+"static/media/placeholder.efc13eaab20ce6d7f87f.jpg";var wo=function(){return(0,Nt.jsxs)("div",{className:"px-[10%] pt-4",children:[(0,Nt.jsx)("h1",{children:"Despre aplicatie"}),(0,Nt.jsxs)("div",{className:"flex justify-center mt-16 gap-x-2",children:[(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("p",{children:"Web Academy este o platforma educationala de programare vizuala prin care copii isi pot dezvolta abilitatile de gandire computationala. Aceasta se bazeaza pe o metoda interactiva de invatare, care incurajeaza experimentarea si invatarea prin practica."}),(0,Nt.jsx)("p",{children:"Prin intermediul blocurilor vizuale de codare, copiii pot crea site-uri web simple si atractive, fara a fi nevoie sa cunoasca limbajul de programare. Aceast\u0103 metoda de invatare intuitiva si usor de utilizat ii ajuta sa inteleaga principiile de baza ale programarii si sa-si dezvolte abilitatile digitale inca de la o varsta frageda."}),(0,Nt.jsx)("p",{children:"Aplicatia este special creata pentru copii cu varste intre 9 si 16 ani si pentru toti cei care doresc sa-si dezvolte abilitatile in domeniul web-ului."})]}),(0,Nt.jsx)("img",{src:Oo})]}),(0,Nt.jsxs)("div",{className:"mt-4 flex gap-x-2",children:[(0,Nt.jsxs)("div",{className:"bg-green-100 ring-2 ring-green-400 rounded w-[50%]",children:[(0,Nt.jsx)("h5",{className:"bg-green-300 p-2",children:"Pentru Parinti"}),(0,Nt.jsx)(Io,{text:"De ce sa imi las copilul sa foloseasca platforma?"}),(0,Nt.jsx)("p",{className:"px-1",children:"Platforma ofera oportunitatea copiilor de a invata programarea web intr-un mod distractiv si interesant. Copiii vor fi capabili sa creeze propriile lor site-uri web, ceea ce le va permite sa-\u0219i dezvolte creativitatea. In plus, cunostintele de programare sunt o abilitate important\u0103 in lumea digitala de astazi si pot oferi oportunitati de cariera in viitor."}),(0,Nt.jsx)(Io,{text:"Cat de sigura este?"}),(0,Nt.jsx)("p",{className:"px-1",children:"Platforma este conceputa pentru copiii cu varstele intre 9 \u0219i 16 ani si respecta cele mai inalte standarde de securitate. Toate datele copiilor sunt protejate si pastrate in siguranta, iar copiii au acces doar la continutul adecvat varstei lor."}),(0,Nt.jsx)(Io,{text:"Cat costa?"}),(0,Nt.jsx)("p",{className:"px-1",children:"Vesti bune, platforma este gratuita pentru toti utilizatorii."})]}),(0,Nt.jsxs)("div",{className:"bg-green-100 ring-2 ring-green-400 rounded w-[50%]",children:[(0,Nt.jsx)("h5",{className:"bg-green-300 p-2",children:"Pentru Profesori"}),(0,Nt.jsx)(Io,{text:"De ce sa folosesc platforma?"}),(0,Nt.jsx)("p",{className:"px-1",children:"Deoarece este conceputa pentru a face programarea accesibila pentru toti elevii, indiferent de nivelul de cunostinte anterioare in programare. De asemenea, este conceput\u0103 pentru a fi usor de utilizat, chiar si pentru persoanele care nu au experienta anterioara in programare. Interfata intuitiva si sistemul de blocuri vizuale permit utilizatorilor sa creeze si s\u0103 editeze proiecte fara a fi nevoie s\u0103 scrie cod."}),(0,Nt.jsx)(Io,{text:"Pot vedea ce lucreaza elevii?"}),(0,Nt.jsx)("p",{className:"px-1",children:"Aceasta aplicatie ofera un sistem de management al claselor si al elevilor care permite profesorilor sa creeze si sa administreze clase si proiecte. Acasta caracteristica permite profesorilor sa urmareasca progresul fiecarui elev in timp real si sa le ofere ajutor individualizat acolo unde este necesar."}),(0,Nt.jsx)(Io,{text:"Cat costa?"}),(0,Nt.jsx)("p",{className:"px-1",children:"Este gratuita pentru toti utilizatorii, atat profesori cat si studenti."})]})]}),(0,Nt.jsx)("div",{className:"mb-4"})]})};var Ao=function(){return(0,e.useContext)(Zt).isAuthentificated?(0,Nt.jsxs)(rn,{value:de,children:[(0,Nt.jsx)(Gn,{}),(0,Nt.jsxs)(Y,{children:[(0,Nt.jsx)(X,{path:"/Joc",element:(0,Nt.jsx)(he,{})}),(0,Nt.jsx)(X,{path:"/",element:(0,Nt.jsx)(he,{})}),(0,Nt.jsx)(X,{path:"/Signin",element:(0,Nt.jsx)(fo,{})}),(0,Nt.jsx)(X,{path:"/Login/Student",element:(0,Nt.jsx)(go,{})}),(0,Nt.jsx)(X,{path:"/Login/Profesor",element:(0,Nt.jsx)(go,{})}),(0,Nt.jsx)(X,{path:"/Studenti",element:(0,Nt.jsx)(ro,{})}),(0,Nt.jsx)(X,{path:"/Proiecte",element:(0,Nt.jsx)(bo,{})}),(0,Nt.jsx)(X,{path:"/Proiecte/:id",element:(0,Nt.jsx)(he,{})}),(0,Nt.jsx)(X,{path:"/Error",element:(0,Nt.jsx)(vo,{})}),(0,Nt.jsx)(X,{path:"/Grupe",element:(0,Nt.jsx)(So,{})}),(0,Nt.jsx)(X,{path:"/Grupe/:id",element:(0,Nt.jsx)(Ro,{})}),(0,Nt.jsx)(X,{path:"/Profil",element:(0,Nt.jsx)(Co,{})}),(0,Nt.jsx)(X,{path:"/Studenti/:id/Proiecte",element:(0,Nt.jsx)(bo,{})}),(0,Nt.jsx)(X,{path:"/Studenti/:studentId/Proiecte/:id",element:(0,Nt.jsx)(he,{isTeacherOverride:!1})}),(0,Nt.jsx)(X,{path:"/Despre",element:(0,Nt.jsx)(wo,{})})]})]}):(0,Nt.jsx)(rn,{value:de,children:(0,Nt.jsxs)(Y,{children:[(0,Nt.jsx)(X,{path:"/",element:(0,Nt.jsx)(fo,{})}),(0,Nt.jsx)(X,{path:"/Signin",element:(0,Nt.jsx)(fo,{})}),(0,Nt.jsx)(X,{path:"/Login/Student",element:(0,Nt.jsx)(go,{})}),(0,Nt.jsx)(X,{path:"/Login/Profesor",element:(0,Nt.jsx)(go,{})}),(0,Nt.jsx)(X,{path:"/Error",element:(0,Nt.jsx)(vo,{})})]})})};function Do(t,e){if(null==t)return{};var n,o,i=function(t,e){if(null==t)return{};var n,o,i={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function No(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xo(t){var e,n,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=xo(t[e]))&&(o&&(o+=" "),o+=n);else for(e in t)t[e]&&(o&&(o+=" "),o+=e);return o}var Mo=function(){for(var t,e,n=0,o="";n<arguments.length;)(t=arguments[n++])&&(e=xo(t))&&(o&&(o+=" "),o+=e);return o},Lo=["theme","type"],Po=["delay","staleId"],Bo=function(t){return"number"==typeof t&&!isNaN(t)},Fo=function(t){return"string"==typeof t},Uo=function(t){return"function"==typeof t},Ho=function(t){return Fo(t)||Uo(t)?t:null},Go=function(t){return(0,e.isValidElement)(t)||Fo(t)||Uo(t)||Bo(t)};function Vo(t){var n=t.enter,o=t.exit,i=t.appendPosition,r=void 0!==i&&i,s=t.collapse,a=void 0===s||s,l=t.collapseDuration,c=void 0===l?300:l;return function(t){var i=t.children,s=t.position,l=t.preventExitTransition,u=t.done,p=t.nodeRef,h=t.isIn,d=r?"".concat(n,"--").concat(s):n,g=r?"".concat(o,"--").concat(s):o,_=(0,e.useRef)(0);return(0,e.useLayoutEffect)((function(){var t,e=p.current,n=d.split(" "),o=function t(o){var i;o.target===p.current&&(e.dispatchEvent(new Event("d")),e.removeEventListener("animationend",t),e.removeEventListener("animationcancel",t),0===_.current&&"animationcancel"!==o.type&&(i=e.classList).remove.apply(i,No(n)))};(t=e.classList).add.apply(t,No(n)),e.addEventListener("animationend",o),e.addEventListener("animationcancel",o)}),[]),(0,e.useEffect)((function(){var t=p.current,e=function e(){t.removeEventListener("animationend",e),a?function(t,e,n){void 0===n&&(n=300);var o=t.scrollHeight,i=t.style;requestAnimationFrame((function(){i.minHeight="initial",i.height=o+"px",i.transition="all ".concat(n,"ms"),requestAnimationFrame((function(){i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)}))}))}(t,u,c):u()};h||(l?e():(_.current=1,t.className+=" ".concat(g),t.addEventListener("animationend",e)))}),[h]),e.createElement(e.Fragment,null,i)}}function Wo(t,e){return{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}}var jo={list:new Map,emitQueue:new Map,on:function(t,e){return this.list.has(t)||this.list.set(t,[]),this.list.get(t).push(e),this},off:function(t,e){if(e){var n=this.list.get(t).filter((function(t){return t!==e}));return this.list.set(t,n),this}return this.list.delete(t),this},cancelEmit:function(t){var e=this.emitQueue.get(t);return e&&(e.forEach(clearTimeout),this.emitQueue.delete(t)),this},emit:function(t){var e=arguments,n=this;this.list.has(t)&&this.list.get(t).forEach((function(o){var i=setTimeout((function(){o.apply(void 0,No([].slice.call(e,1)))}),0);n.emitQueue.has(t)||n.emitQueue.set(t,[]),n.emitQueue.get(t).push(i)}))}},Xo=function(t){var n=t.theme,o=t.type,i=Do(t,Lo);return e.createElement("svg",lo({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===n?"currentColor":"var(--toastify-icon-color-".concat(o,")")},i))},zo={info:function(t){return e.createElement(Xo,lo({},t),e.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return e.createElement(Xo,lo({},t),e.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return e.createElement(Xo,lo({},t),e.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return e.createElement(Xo,lo({},t),e.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return e.createElement("div",{className:"Toastify__spinner"})}};function Yo(t){var n=(0,e.useReducer)((function(t){return t+1}),0),o=s(n,2)[1],i=s((0,e.useState)([]),2),r=i[0],a=i[1],l=(0,e.useRef)(null),c=(0,e.useRef)(new Map).current,u=function(t){return-1!==r.indexOf(t)},p=(0,e.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:t,containerId:null,isToastActive:u,getToast:function(t){return c.get(t)}}).current;function h(t){var e=t.containerId;!p.props.limit||e&&p.containerId!==e||(p.count-=p.queue.length,p.queue=[])}function d(t){a((function(e){return null==t?[]:e.filter((function(e){return e!==t}))}))}function g(){var t=p.queue.shift();f(t.toastContent,t.toastProps,t.staleId)}function _(t,n){var i=n.delay,r=n.staleId,a=Do(n,Po);if(Go(t)&&!function(t){return!l.current||p.props.enableMultiContainer&&t.containerId!==p.props.containerId||c.has(t.toastId)&&null==t.updateId}(a)){var u=a.toastId,h=a.updateId,_=a.data,v=p.props,m=function(){return d(u)},T=null==h;T&&p.count++;var b,E,y=lo(lo(lo({},v),{},{style:v.toastStyle,key:p.toastKey++},Object.fromEntries(Object.entries(a).filter((function(t){var e=s(t,2);e[0];return null!=e[1]})))),{},{toastId:u,updateId:h,data:_,closeToast:m,isIn:!1,className:Ho(a.className||v.toastClassName),bodyClassName:Ho(a.bodyClassName||v.bodyClassName),progressClassName:Ho(a.progressClassName||v.progressClassName),autoClose:!a.isLoading&&(b=a.autoClose,E=v.autoClose,!1===b||Bo(b)&&b>0?b:E),deleteToast:function(){var t=Wo(c.get(u),"removed");c.delete(u),jo.emit(4,t);var e=p.queue.length;if(p.count=null==u?p.count-p.displayedToast:p.count-1,p.count<0&&(p.count=0),e>0){var n=null==u?p.props.limit:1;if(1===e||1===n)p.displayedToast++,g();else{var i=n>e?e:n;p.displayedToast=i;for(var r=0;r<i;r++)g()}}else o()}});y.iconOut=function(t){var n=t.theme,o=t.type,i=t.isLoading,r=t.icon,s=null,a={theme:n,type:o};return!1===r||(Uo(r)?s=r(a):(0,e.isValidElement)(r)?s=(0,e.cloneElement)(r,a):Fo(r)||Bo(r)?s=r:i?s=zo.spinner():function(t){return t in zo}(o)&&(s=zo[o](a))),s}(y),Uo(a.onOpen)&&(y.onOpen=a.onOpen),Uo(a.onClose)&&(y.onClose=a.onClose),y.closeButton=v.closeButton,!1===a.closeButton||Go(a.closeButton)?y.closeButton=a.closeButton:!0===a.closeButton&&(y.closeButton=!Go(v.closeButton)||v.closeButton);var S=t;(0,e.isValidElement)(t)&&!Fo(t.type)?S=(0,e.cloneElement)(t,{closeToast:m,toastProps:y,data:_}):Uo(t)&&(S=t({closeToast:m,toastProps:y,data:_})),v.limit&&v.limit>0&&p.count>v.limit&&T?p.queue.push({toastContent:S,toastProps:y,staleId:r}):Bo(i)?setTimeout((function(){f(S,y,r)}),i):f(S,y,r)}}function f(t,e,n){var o=e.toastId;n&&c.delete(n);var i={content:t,props:e};c.set(o,i),a((function(t){return[].concat(No(t),[o]).filter((function(t){return t!==n}))})),jo.emit(4,Wo(i,null==i.props.updateId?"added":"updated"))}return(0,e.useEffect)((function(){return p.containerId=t.containerId,jo.cancelEmit(3).on(0,_).on(1,(function(t){return l.current&&d(t)})).on(5,h).emit(2,p),function(){c.clear(),jo.emit(3,p)}}),[]),(0,e.useEffect)((function(){p.props=t,p.isToastActive=u,p.displayedToast=r.length})),{getToastToRender:function(e){var n=new Map,o=Array.from(c.values());return t.newestOnTop&&o.reverse(),o.forEach((function(t){var e=t.props.position;n.has(e)||n.set(e,[]),n.get(e).push(t)})),Array.from(n,(function(t){return e(t[0],t[1])}))},containerRef:l,isToastActive:u}}function Jo(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}function Ko(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}function qo(t){var n=s((0,e.useState)(!1),2),o=n[0],i=n[1],r=s((0,e.useState)(!1),2),a=r[0],l=r[1],c=(0,e.useRef)(null),u=(0,e.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,p=(0,e.useRef)(t),h=t.autoClose,d=t.pauseOnHover,g=t.closeToast,_=t.onClick,f=t.closeOnClick;function v(e){if(t.draggable){"touchstart"===e.nativeEvent.type&&e.nativeEvent.preventDefault(),u.didMove=!1,document.addEventListener("mousemove",E),document.addEventListener("mouseup",y),document.addEventListener("touchmove",E),document.addEventListener("touchend",y);var n=c.current;u.canCloseOnClick=!0,u.canDrag=!0,u.boundingRect=n.getBoundingClientRect(),n.style.transition="",u.x=Jo(e.nativeEvent),u.y=Ko(e.nativeEvent),"x"===t.draggableDirection?(u.start=u.x,u.removalDistance=n.offsetWidth*(t.draggablePercent/100)):(u.start=u.y,u.removalDistance=n.offsetHeight*(80===t.draggablePercent?1.5*t.draggablePercent:t.draggablePercent/100))}}function m(e){if(u.boundingRect){var n=u.boundingRect,o=n.top,i=n.bottom,r=n.left,s=n.right;"touchend"!==e.nativeEvent.type&&t.pauseOnHover&&u.x>=r&&u.x<=s&&u.y>=o&&u.y<=i?b():T()}}function T(){i(!0)}function b(){i(!1)}function E(e){var n=c.current;u.canDrag&&n&&(u.didMove=!0,o&&b(),u.x=Jo(e),u.y=Ko(e),u.delta="x"===t.draggableDirection?u.x-u.start:u.y-u.start,u.start!==u.x&&(u.canCloseOnClick=!1),n.style.transform="translate".concat(t.draggableDirection,"(").concat(u.delta,"px)"),n.style.opacity=""+(1-Math.abs(u.delta/u.removalDistance)))}function y(){document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",E),document.removeEventListener("touchend",y);var e=c.current;if(u.canDrag&&u.didMove&&e){if(u.canDrag=!1,Math.abs(u.delta)>u.removalDistance)return l(!0),void t.closeToast();e.style.transition="transform 0.2s, opacity 0.2s",e.style.transform="translate".concat(t.draggableDirection,"(0)"),e.style.opacity="1"}}(0,e.useEffect)((function(){p.current=t})),(0,e.useEffect)((function(){return c.current&&c.current.addEventListener("d",T,{once:!0}),Uo(t.onOpen)&&t.onOpen((0,e.isValidElement)(t.children)&&t.children.props),function(){var t=p.current;Uo(t.onClose)&&t.onClose((0,e.isValidElement)(t.children)&&t.children.props)}}),[]),(0,e.useEffect)((function(){return t.pauseOnFocusLoss&&(document.hasFocus()||b(),window.addEventListener("focus",T),window.addEventListener("blur",b)),function(){t.pauseOnFocusLoss&&(window.removeEventListener("focus",T),window.removeEventListener("blur",b))}}),[t.pauseOnFocusLoss]);var S={onMouseDown:v,onTouchStart:v,onMouseUp:m,onTouchEnd:m};return h&&d&&(S.onMouseEnter=b,S.onMouseLeave=T),f&&(S.onClick=function(t){_&&_(t),u.canCloseOnClick&&g()}),{playToast:T,pauseToast:b,isRunning:o,preventExitTransition:a,toastRef:c,eventHandlers:S}}function $o(t){var n=t.closeToast,o=t.theme,i=t.ariaLabel,r=void 0===i?"close":i;return e.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(o),type:"button",onClick:function(t){t.stopPropagation(),n(t)},"aria-label":r},e.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},e.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Zo(t){var n=t.delay,o=t.isRunning,i=t.closeToast,r=t.type,s=void 0===r?"default":r,a=t.hide,l=t.className,c=t.style,u=t.controlledProgress,p=t.progress,h=t.rtl,d=t.isIn,g=t.theme,_=a||u&&0===p,f=lo(lo({},c),{},{animationDuration:"".concat(n,"ms"),animationPlayState:o?"running":"paused",opacity:_?0:1});u&&(f.transform="scaleX(".concat(p,")"));var v=Mo("Toastify__progress-bar",u?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(g),"Toastify__progress-bar--".concat(s),{"Toastify__progress-bar--rtl":h}),m=Uo(l)?l({rtl:h,type:s,defaultClassName:v}):Mo(v,l);return e.createElement("div",so({role:"progressbar","aria-hidden":_?"true":"false","aria-label":"notification timer",className:m,style:f},u&&p>=1?"onTransitionEnd":"onAnimationEnd",u&&p<1?null:function(){d&&i()}))}var Qo=function(t){var n=qo(t),o=n.isRunning,i=n.preventExitTransition,r=n.toastRef,s=n.eventHandlers,a=t.closeButton,l=t.children,c=t.autoClose,u=t.onClick,p=t.type,h=t.hideProgressBar,d=t.closeToast,g=t.transition,_=t.position,f=t.className,v=t.style,m=t.bodyClassName,T=t.bodyStyle,b=t.progressClassName,E=t.progressStyle,y=t.updateId,S=t.role,C=t.progress,k=t.rtl,R=t.toastId,I=t.deleteToast,O=t.isIn,w=t.isLoading,A=t.iconOut,D=t.closeOnClick,N=t.theme,x=Mo("Toastify__toast","Toastify__toast-theme--".concat(N),"Toastify__toast--".concat(p),{"Toastify__toast--rtl":k},{"Toastify__toast--close-on-click":D}),M=Uo(f)?f({rtl:k,position:_,type:p,defaultClassName:x}):Mo(x,f),L=!!C||!c,P={closeToast:d,type:p,theme:N},B=null;return!1===a||(B=Uo(a)?a(P):(0,e.isValidElement)(a)?(0,e.cloneElement)(a,P):$o(P)),e.createElement(g,{isIn:O,done:I,position:_,preventExitTransition:i,nodeRef:r},e.createElement("div",lo(lo({id:R,onClick:u,className:M},s),{},{style:v,ref:r}),e.createElement("div",lo(lo({},O&&{role:S}),{},{className:Uo(m)?m({type:p}):Mo("Toastify__toast-body",m),style:T}),null!=A&&e.createElement("div",{className:Mo("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!w})},A),e.createElement("div",null,l)),B,e.createElement(Zo,lo(lo({},y&&!L?{key:"pb-".concat(y)}:{}),{},{rtl:k,theme:N,delay:c,isRunning:o,isIn:O,closeToast:d,hide:h,type:p,style:E,className:b,controlledProgress:L,progress:C||0}))))},ti=function(t,e){return void 0===e&&(e=!1),{enter:"Toastify--animate Toastify__".concat(t,"-enter"),exit:"Toastify--animate Toastify__".concat(t,"-exit"),appendPosition:e}},ei=Vo(ti("bounce",!0)),ni=(Vo(ti("slide",!0)),Vo(ti("zoom")),Vo(ti("flip")),(0,e.forwardRef)((function(t,n){var o=Yo(t),i=o.getToastToRender,r=o.containerRef,s=o.isToastActive,a=t.className,l=t.style,c=t.rtl,u=t.containerId;function p(t){var e=Mo("Toastify__toast-container","Toastify__toast-container--".concat(t),{"Toastify__toast-container--rtl":c});return Uo(a)?a({position:t,rtl:c,defaultClassName:e}):Mo(e,Ho(a))}return(0,e.useEffect)((function(){n&&(n.current=r.current)}),[]),e.createElement("div",{ref:r,className:"Toastify",id:u},i((function(t,n){var o=n.length?lo({},l):lo(lo({},l),{},{pointerEvents:"none"});return e.createElement("div",{className:p(t),style:o,key:"container-".concat(t)},n.map((function(t,o){var i=t.content,r=t.props;return e.createElement(Qo,lo(lo({},r),{},{isIn:s(r.toastId),style:lo(lo({},r.style),{},{"--nth":o+1,"--len":n.length}),key:"toast-".concat(r.key)}),i)})))})))})));ni.displayName="ToastContainer",ni.defaultProps={position:"top-right",transition:ei,autoClose:5e3,closeButton:$o,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var oi,ii=new Map,ri=[],si=1;function ai(){return""+si++}function li(t){return t&&(Fo(t.toastId)||Bo(t.toastId))?t.toastId:ai()}function ci(t,e){return ii.size>0?jo.emit(0,t,e):ri.push({content:t,options:e}),e.toastId}function ui(t,e){return lo(lo({},e),{},{type:e&&e.type||t,toastId:li(e)})}function pi(t){return function(e,n){return ci(e,ui(t,n))}}function hi(t,e){return ci(t,ui("default",e))}hi.loading=function(t,e){return ci(t,ui("default",lo({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},e)))},hi.promise=function(t,e,n){var o,i=e.pending,r=e.error,s=e.success;i&&(o=Fo(i)?hi.loading(i,n):hi.loading(i.render,lo(lo({},n),i)));var a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=function(t,e,i){if(null!=e){var r=lo(lo(lo({type:t},a),n),{},{data:i}),s=Fo(e)?{render:e}:e;return o?hi.update(o,lo(lo({},r),s)):hi(s.render,lo(lo({},r),s)),i}hi.dismiss(o)},c=Uo(t)?t():t;return c.then((function(t){return l("success",s,t)})).catch((function(t){return l("error",r,t)})),c},hi.success=pi("success"),hi.info=pi("info"),hi.error=pi("error"),hi.warning=pi("warning"),hi.warn=hi.warning,hi.dark=function(t,e){return ci(t,ui("default",lo({theme:"dark"},e)))},hi.dismiss=function(t){ii.size>0?jo.emit(1,t):ri=ri.filter((function(e){return null!=t&&e.options.toastId!==t}))},hi.clearWaitingQueue=function(t){return void 0===t&&(t={}),jo.emit(5,t)},hi.isActive=function(t){var e=!1;return ii.forEach((function(n){n.isToastActive&&n.isToastActive(t)&&(e=!0)})),e},hi.update=function(t,e){void 0===e&&(e={}),setTimeout((function(){var n=function(t,e){var n=e.containerId,o=ii.get(n||oi);return o&&o.getToast(t)}(t,e);if(n){var o=n.props,i=n.content,r=lo(lo(lo({delay:100},o),e),{},{toastId:e.toastId||t,updateId:ai()});r.toastId!==t&&(r.staleId=t);var s=r.render||i;delete r.render,ci(s,r)}}),0)},hi.done=function(t){hi.update(t,{progress:1})},hi.onChange=function(t){return jo.on(4,t),function(){jo.off(4,t)}},hi.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},hi.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},jo.on(2,(function(t){oi=t.containerId||t,ii.set(oi,t),ri.forEach((function(t){jo.emit(0,t.content,t.options)})),ri=[]})).on(3,(function(t){ii.delete(t.containerId||t),0===ii.size&&jo.off(0).off(1).off(5)}));var di=function(t){var n=t.children;return(0,e.useEffect)((function(){var t=jt().interceptors.response.use(function(){var t=Z(q().mark((function t(e){var n;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.status>=200&&e.status<300&&("get"===(null===(n=e.config.method)||void 0===n?void 0:n.toLocaleLowerCase())||e.request.responseURL.includes("Login")||(hi.dismiss(),hi.success("Succes",{position:hi.POSITION.TOP_RIGHT,autoClose:1e3}))),t.abrupt("return",e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),function(){var t=Z(q().mark((function t(e){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:hi.error("Eroare! ".concat(e.response.data.errors),{position:hi.POSITION.TOP_RIGHT,autoClose:1e3});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){return jt().interceptors.response.eject(t)}}),[]),(0,Nt.jsxs)(Nt.Fragment,{children:[n,(0,Nt.jsx)(ni,{limit:1})]})};o.createRoot(document.getElementById("root")).render((0,Nt.jsx)(e.StrictMode,{children:(0,Nt.jsx)(hn,{basename:"/index.html",children:(0,Nt.jsx)(Qt,{children:(0,Nt.jsx)(di,{children:(0,Nt.jsx)(Ao,{})})})})}))}()}();
//# sourceMappingURL=main.618597db.js.map